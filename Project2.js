var pas={$libimports:{}},rtl={version:30101,quiet:!1,debug_load_units:!1,debug_rtti:!1,$res:{},debug:function(){!rtl.quiet&&console&&console.log&&console.log(arguments)},error:function(t){throw rtl.debug("Error: ",t),t},warn:function(t){rtl.debug("Warn: ",t)},checkVersion:function(t){if(rtl.version!=t)throw"expected rtl version "+t+", but found "+rtl.version},hiInt:Math.pow(2,53),hasString:function(t){return rtl.isString(t)&&t.length>0},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"function"==typeof t},isModule:function(t){return rtl.isObject(t)&&rtl.hasString(t.$name)&&pas[t.$name]===t},isImplementation:function(t){return rtl.isObject(t)&&rtl.isModule(t.$module)&&t.$module.$impl===t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return"object"==typeof t&&null!=t},isString:function(t){return"string"==typeof t},getNumber:function(t){return"number"==typeof t?t:NaN},getChar:function(t){return"string"==typeof t&&1===t.length?t:""},getObject:function(t){return"object"==typeof t||"function"==typeof t?t:null},isTRecord:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$new")&&"function"==typeof t.$new},isPasClass:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$classname")&&rtl.isObject(t.$module)},isPasClassInstance:function(t){return rtl.isObject(t)&&rtl.isPasClass(t.$class)},hexStr:function(t,e){return("000000000000000"+t.toString(16).toUpperCase()).slice(-e)},m_loading:0,m_loading_intf:1,m_intf_loaded:2,m_loading_impl:3,m_initializing:4,m_initialized:5,module:function(t,e,i,s){var n=pas[t];n?n.$intfcode=i:rtl.modulenew(t,e,i,s)},modulenew:function(t,e,i,s){rtl.debug_load_units&&rtl.debug('rtl.module name="'+t+'" intfuses='+e+" impluses="+s),rtl.hasString(t)||rtl.error('invalid module name "'+t+'"'),rtl.isArray(e)||rtl.error('invalid interface useslist of "'+t+'"'),rtl.isFunction(i)||rtl.error('invalid interface code of "'+t+'"'),null==s||rtl.isArray(s)||rtl.error('invalid implementation useslist of "'+t+'"'),pas[t]&&rtl.error('module "'+t+'" is already registered');var n=Object.create(rtl.tSectionRTTI),o=n.$module=pas[t]={$name:t,$intfuseslist:e,$impluseslist:s,$state:rtl.m_loading,$intfcode:i,$implcode:null,$impl:null,$rtti:n};s&&(o.$impl={$module:o,$rtti:n})},exitcode:0,run:function(t){try{rtl.hasString(t)||(t="program"),rtl.debug_load_units&&rtl.debug('rtl.run module="'+t+'"'),rtl.initRTTI();var e=pas[t];if(e||rtl.error('rtl.run module "'+t+'" missing'),rtl.loadintf(e),rtl.loadimpl(e),"program"==t||"library"==t){rtl.debug_load_units&&rtl.debug("running $main");var i=pas[t].$main();rtl.isNumber(i)&&(rtl.exitcode=i)}}catch(t){if(!rtl.showUncaughtExceptions)throw t;rtl.handleUncaughtException(t)||(rtl.showException(t),rtl.exitcode=216)}return rtl.exitcode},showException:function(t){var e=t.hasOwnProperty("stack")?t.stack:t,i=rtl.hasString(t.$classname)?t.$classname:"";i+=(i?": ":"")+(t.hasOwnProperty("fMessage")?t.fMessage:""),i="Uncaught Exception:\n"+(i+=(i?"\n":"")+e),console.log(i),alert(i)},handleUncaughtException:function(t){if(!rtl.onUncaughtException)return!1;try{return rtl.onUncaughtException(t),!0}catch(t){return!1}},loadintf:function(t){t.$state>rtl.m_loading_intf||(rtl.debug_load_units&&rtl.debug('loadintf: "'+t.$name+'"'),t.$state===rtl.m_loading_intf&&rtl.error('unit cycle detected "'+t.$name+'"'),t.$state=rtl.m_loading_intf,rtl.loaduseslist(t,t.$intfuseslist,rtl.loadintf),rtl.debug_load_units&&rtl.debug('loadintf: run intf of "'+t.$name+'"'),t.$intfcode(t.$intfuseslist),t.$state=rtl.m_intf_loaded)},loaduseslist:function(t,e,i){if(null!=e)for(var s=e.length,n=0;n<s;n++){var o=e[n];rtl.debug_load_units&&rtl.debug('loaduseslist of "'+t.$name+'" uses="'+o+'"'),null==pas[o]&&rtl.error('module "'+t.$name+'" misses "'+o+'"'),i(pas[o])}},loadimpl:function(t){t.$state>=rtl.m_loading_impl||(t.$state<rtl.m_intf_loaded&&rtl.error('loadimpl: interface not loaded of "'+t.$name+'"'),rtl.debug_load_units&&rtl.debug('loadimpl: load uses of "'+t.$name+'"'),t.$state=rtl.m_loading_impl,rtl.loaduseslist(t,t.$impluseslist,rtl.loadintf),rtl.loaduseslist(t,t.$intfuseslist,rtl.loadimpl),rtl.loaduseslist(t,t.$impluseslist,rtl.loadimpl),rtl.debug_load_units&&rtl.debug('loadimpl: run impl of "'+t.$name+'"'),rtl.isFunction(t.$implcode)&&t.$implcode(t.$impluseslist),rtl.debug_load_units&&rtl.debug('loadimpl: run init of "'+t.$name+'"'),t.$state=rtl.m_initializing,rtl.isFunction(t.$init)&&t.$init(),t.$state=rtl.m_initialized)},createCallback:function(t,e){var i;if("string"==typeof e){if(t.hasOwnProperty("$events")||(t.$events={}),i=t.$events[e])return i;t.$events[e]=i=function(){return t[e].apply(t,arguments)}}else i=function(){return e.apply(t,arguments)};return i.scope=t,i.fn=e,i},createSafeCallback:function(t,e){var i;if("string"==typeof e){if(!t[e])return null;if(t.hasOwnProperty("$events")||(t.$events={}),i=t.$events[e])return i;t.$events[e]=i=function(){try{return t[e].apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}}}else{if(!e)return null;i=function(){try{return e.apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}}}return i.scope=t,i.fn=e,i},eqCallback:function(t,e){return t===e||null!=t&&null!=e&&t.fn&&t.scope===e.scope&&t.fn===e.fn},initStruct:function(t,e,i){return e.$module&&e.$module.$impl===e&&(e=e.$module),t.$parent=e,rtl.isModule(e)?(t.$module=e,t.$name=i):(t.$module=e.$module,t.$name=e.$name+"."+i),e},initClass:function(t,e,i,s,n){e[i]=t,t.$class=t,t.$classname=n||i,e=rtl.initStruct(t,e,i),t.$fullname=e.$name+"."+i,rtl.debug_rtti&&rtl.debug("initClass "+t.$fullname);var o=t.$module.$rtti.$Class(t.$classname,{class:t});t.$rtti=o,rtl.isObject(t.$ancestor)&&(o.ancestor=t.$ancestor.$rtti),o.ancestor||(o.ancestor=null),s.call(t)},createClass:function(t,e,i,s,n){var o=t[e];if(o)return o;var a=null;null!=i?(a=Object.create(i)).$ancestor=i:((a={$ancestor:null}).$create=function(t,e){null==e&&(e=[]);var i=Object.create(this);i.$init();try{"string"==typeof t?i[t].apply(i,e):t.apply(i,e),i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final(),t}return i},a.$destroy=function(t){this.BeforeDestruction(),this[t]&&this[t](),this.$final()}),rtl.initClass(a,t,e,s,n)},createClassExt:function(t,e,i,s,n,o){var a=rtl.isFunction(i),r=null;if(a?((r=Object.create(i.prototype)).$ancestorfunc=i,r.$ancestor=null):i.$func?(a=!0,(r=Object.create(i)).$ancestor=i):(r=Object.create(i)).$ancestor=null,r.$create=function(t,e){null==e&&(e=[]);var i=null;(i=s.length>0?this[s](t,e):a?new this.$func(e):Object.create(r)).$init&&i.$init();try{"string"==typeof t?this[t].apply(i,e):t.apply(i,e),i.AfterConstruction&&i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final&&i.$final(),t}return i},r.$destroy=function(t){this.BeforeDestruction&&this.BeforeDestruction(),this[t]&&this[t](),this.$final&&this.$final()},rtl.initClass(r,t,e,n,o),a){function l(){}l.prototype=r,r.$func=l}},createHelper:function(t,e,i,s,n){var o=null;null!=i?(o=Object.create(i)).$ancestor=i:o={$ancestor:null},t[e]=o,o.$class=o,o.$classname=n||e,t=rtl.initStruct(o,t,e),o.$fullname=t.$name+"."+e;var a=o.$module.$rtti.$Helper(o.$classname,{helper:o});o.$rtti=a,rtl.isObject(i)&&(a.ancestor=i.$rtti),a.ancestor||(a.ancestor=null),s.call(o)},tObjectDestroy:"Destroy",free:function(t,e){if(null==t[e])return null;t[e].$destroy(rtl.tObjectDestroy),t[e]=null},freeLoc:function(t){return null==t||t.$destroy(rtl.tObjectDestroy),null},hideProp:function(t,e,i){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0}),arguments.length>2&&(t[e]=i)},recNewT:function(t,e,i,s){if(t){var n=t[e];if(n)return n}var o={};t&&(t[e]=o);var a=rtl.hideProp;return s&&(rtl.initStruct(o,t,e),o.$record=o,a(o,"$record"),a(o,"$name"),a(o,"$parent"),a(o,"$module"),a(o,"$initSpec")),i.call(o),o.$new||(o.$new=function(){return Object.create(o)}),o.$clone=function(t){return o.$new().$assign(t)},a(o,"$new"),a(o,"$clone"),a(o,"$eq"),a(o,"$assign"),o},is:function(t,e){return e.isPrototypeOf(t)||t===e},isExt:function(t,e,i){return null!=t&&(("object"==typeof e||"function"==typeof e)&&(t===e?1!==i&&(2!==i||rtl.isPasClass(t)):e.isPrototypeOf&&e.isPrototypeOf(t)?1===i?rtl.isPasClassInstance(t):2!==i||rtl.isPasClass(t):"function"==typeof e&&t instanceof e))},Exception:null,EInvalidCast:null,EAbstractError:null,ERangeError:null,EIntOverflow:null,EPropWriteOnly:null,raiseE:function(t){var e=rtl[t];if(null==e){var i=pas.SysUtils;i||(i=pas.sysutils),i||(i=pas["System.SysUtils"]),i&&((e=i[t])||(e=i[t.toLowerCase()]),e||(e=i.Exception),e||(e=i.exception))}if(e){if(e.Create)throw e.$create("Create");if(e.create)throw e.$create("create")}if("EInvalidCast"===t)throw"invalid type cast";if("EAbstractError"===t)throw"Abstract method called";if("ERangeError"===t)throw"range error";throw t},as:function(t,e){if(null===t||rtl.is(t,e))return t;rtl.raiseE("EInvalidCast")},asExt:function(t,e,i){if(null===t||rtl.isExt(t,e,i))return t;rtl.raiseE("EInvalidCast")},createInterface:function(t,e,i,s,n,o,a){var r=t[e];if(r)return r;var l=n?Object.create(n):{};if(t[e]=l,l.$module=t,l.$name=a||e,l.$fullname=t.$name+"."+l.$name,l.$guid=i,l.$guidr=null,l.$names=s||[],rtl.isFunction(o)){rtl.debug_rtti&&rtl.debug("createInterface "+l.$fullname);var h=l.$module.$rtti.$Interface(l.$name,{interface:l,module:t});l.$rtti=h,n&&(h.ancestor=n.$rtti),h.ancestor||(h.ancestor=null),o.call(l)}return l},strToGUIDR:function(t,e){var i=0;function s(e){var s=t.substr(i,e);return i+=e,parseInt(s,16)}i+=1,e.D1=s(8),i+=1,e.D2=s(4),i+=1,e.D3=s(4),i+=1,e.D4||(e.D4=[]),e.D4[0]=s(2),e.D4[1]=s(2),i+=1;for(var n=2;n<8;n++)e.D4[n]=s(2);return e},guidrToStr:function(t){if(t.$intf)return t.$intf.$guid;for(var e=rtl.hexStr,i="{"+e(t.D1,8)+"-"+e(t.D2,4)+"-"+e(t.D3,4)+"-"+e(t.D4[0],2)+e(t.D4[1],2)+"-",s=2;s<8;s++)i+=e(t.D4[s],2);return i+="}"},createTGUID:function(t){var e=pas.System?pas.System.TGuid:pas.system.tguid;return rtl.strToGUIDR(t,e.$new())},getIntfGUIDR:function(t){if(!t)return null;if(!t.$guidr){var e=rtl.createTGUID(t.$guid);t.hasOwnProperty("$guid")||(t=Object.getPrototypeOf(t)),e.$intf=t,t.$guidr=e}return t.$guidr},addIntf:function(t,e,i){function s(t){return"function"==typeof t?function(){return t.apply(this.$o,arguments)}:function(){rtl.raiseE("EAbstractError")}}i||(i={});var n=e,o=Object.create(n);t.hasOwnProperty("$intfmaps")||(t.$intfmaps={}),t.$intfmaps[e.$guid]=o;do{var a=n.$names;if(!a)break;for(var r=0;r<a.length;r++){var l=a[r],h=i[l];h||(h=l),o[l]=s(t[h])}n=Object.getPrototypeOf(n)}while(null!=n)},getIntfG:function(t,e,i){if(!t)return null;var s=t.$intfmaps;if(!s)return null;var n=s[e];if(!n)return null;if("function"==typeof n)return n.call(t);var o=null;if(t.$interfaces&&(o=t.$interfaces[e]),o||((o=Object.create(n)).$o=t,t.$interfaces||(t.$interfaces={}),t.$interfaces[e]=o),"object"==typeof i){var a=null;return 0===o.QueryInterface(rtl.getIntfGUIDR(i),{get:function(){return a},set:function(t){a=t}})?a:null}return 2===i&&"com"===o.$kind&&o._AddRef(),o},getIntfT:function(t,e){return rtl.getIntfG(t,e.$guid)},queryIntfT:function(t,e){return rtl.getIntfG(t,e.$guid,e)},queryIntfIsT:function(t,e){var i=rtl.getIntfG(t,e.$guid);return!!i&&("com"===i.$kind&&i._Release(),!0)},asIntfT:function(t,e){var i=rtl.getIntfG(t,e.$guid);if(null!==i)return i;rtl.raiseEInvalidCast()},intfIsIntfT:function(t,e){return null!==t&&rtl.queryIntfIsT(t.$o,e)},intfAsIntfT:function(t,e){if(!t)return null;var i=rtl.getIntfG(t.$o,e.$guid);if(i)return i;rtl.raiseEInvalidCast()},intfIsClass:function(t,e){return null!=t&&rtl.is(t.$o,e)},intfAsClass:function(t,e){return null==t?null:rtl.as(t.$o,e)},intfToClass:function(t,e){return null!==t&&rtl.is(t.$o,e)?t.$o:null},intfRefs:{ref:function(t,e){var i=this[t];return i&&(delete this[t],i._Release()),e&&(this[t]=e),e},free:function(){for(var t in this)if(this.hasOwnProperty(t)){var e=this[t];e&&e._Release()}}},createIntfRefs:function(){return Object.create(rtl.intfRefs)},setIntfP:function(t,e,i,s){var n=t[e];n!==i&&(null!==n&&(t[e]=null,n._Release()),null!==i&&(s||i._AddRef(),t[e]=i))},setIntfL:function(t,e,i){return t!==e?(null!==e&&(i||e._AddRef()),null!==t&&t._Release()):i&&null!==t&&t._Release(),e},_AddRef:function(t){return t&&t._AddRef(),t},_Release:function(t){return t&&t._Release(),t},_ReleaseArray:function(t,e){if(!t)return null;for(var i=0;i<t.length;i++)e<=1?t[i]&&t[i]._Release():rtl._ReleaseArray(t[i],e-1);return null},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},checkMethodCall:function(t,e){rtl.isObject(t)&&rtl.is(t,e)||rtl.raiseE("EInvalidCast")},oc:function(t){if(Math.floor(t)===t&&t>=-9007199254740991&&t<=9007199254740991)return t;rtl.raiseE("EIntOverflow")},rc:function(t,e,i){if(Math.floor(t)===t&&t>=e&&t<=i)return t;rtl.raiseE("ERangeError")},rcc:function(t,e,i){if("string"==typeof t&&1===t.length){var s=t.charCodeAt(0);if(s>=e&&s<=i)return t}rtl.raiseE("ERangeError")},rcSetCharAt:function(t,e,i){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),rtl.setCharAt(t,e,i)},rcCharAt:function(t,e){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),t.charAt(e)},rcArrR:function(t,e){if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length){if(arguments.length>2){t=t[e];for(var i=2;i<arguments.length;i++)t=rtl.rcArrR(t,arguments[i]);return t}return t[e]}rtl.raiseE("ERangeError")},rcArrW:function(t,e,i){for(var s=3;s<arguments.length;s++)t=rtl.rcArrR(t,e),e=arguments[s-1],i=arguments[s];if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length)return t[e]=i;rtl.raiseE("ERangeError")},length:function(t){return null==t?0:t.length},arrayRef:function(t){return null!=t&&rtl.hideProp(t,"$pas2jsrefcnt",1),t},arraySetLength:function(t,e,i){for(var s=[],n=9999,o=2;o<arguments.length;o++){var a=arguments[o];"s"===a?n=o-2:s.push({dim:a+0,a:null,i:0,src:null})}for(var r=s.length-1,l=0,h=0,p=null,c=null,F=t,u=0,C=0;;)if(l>0&&(F=(p=s[l-1]).src&&p.src.length>p.i?p.src[p.i]:null),F?F.$pas2jsrefcnt>0||l>=n?(c=[],C=u=F.length):(u=0,C=(c=F).length):(c=[],u=0,C=0),h=s[l].dim,c.length=h,!(l>0&&(p.a[p.i]=c,p.i++,0===h&&p.i<p.a.length))){if(h>0){if(l<r){(p=s[l]).a=c,p.i=0,p.src=F,l++;continue}if(u>h&&(u=h),rtl.isArray(e)){for(o=0;o<u;o++)c[o]=F[o];for(o=C;o<h;o++)c[o]=[]}else if(rtl.isObject(e))if(rtl.isTRecord(e)){for(o=0;o<u;o++)c[o]=e.$clone(F[o]);for(o=C;o<h;o++)c[o]=e.$new()}else{for(o=0;o<u;o++)c[o]=rtl.refSet(F[o]);for(o=C;o<h;o++)c[o]={}}else{for(o=0;o<u;o++)c[o]=F[o];for(o=C;o<h;o++)c[o]=e}}for(;l>0&&s[l-1].i>=s[l-1].dim;)l--;if(0===l)return 0===r?c:s[0].a}},arrayEq:function(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},arrayClone:function(t,e,i,s,n,o){if("refSet"===t)for(;i<s;i++)n[o++]=rtl.refSet(e[i]);else if("slice"===t)for(;i<s;i++)n[o++]=e[i].slice(0);else if("function"==typeof t)for(;i<s;i++)n[o++]=t(e[i]);else if(rtl.isTRecord(t))for(;i<s;i++)n[o++]=t.$clone(e[i]);else for(;i<s;i++)n[o++]=e[i]},arrayConcat:function(t){for(var e=[],i=0,s=1;s<arguments.length;s++){null!==(n=arguments[s])&&(i+=n.length)}e.length=i,i=0;for(s=1;s<arguments.length;s++){var n;null!==(n=arguments[s])&&(rtl.arrayClone(t,n,0,n.length,e,i),i+=n.length)}return e},arrayConcatN:function(){for(var t=null,e=0;e<arguments.length;e++){var i=arguments[e];if(null!==i)if(null===t)t=rtl.arrayRef(i);else if(t.$pas2jsrefcnt)t=t.concat(i);else for(e=0;e<i.length;e++)t.push(i[e])}return t},arrayPush:function(t,e){return null===e?e=[]:e.$pas2jsrefcnt&&(e=rtl.arrayCopy(t,e,0,e.length)),rtl.arrayClone(t,arguments,2,arguments.length,e,e.length),e},arrayPushN:function(t){null===t?t=[]:t.$pas2jsrefcnt&&(t=t.concat());for(var e=1;e<arguments.length;e++)t.push(arguments[e]);return t},arrayCopy:function(t,e,i,s){if(null===e)return[];i<0&&(i=0),void 0===s&&(s=e.length);var n=i+s;if(n>e.length&&(n=e.length),i>=n)return[];if(0===t)return e.slice(i,n);var o=[];return o.length=n-i,rtl.arrayClone(t,e,i,n,o,0),o},arrayInsert:function(t,e,i){return e?(e.splice(i,0,t),e):[t]},setCharAt:function(t,e,i){return t.substr(0,e)+i+t.substr(e+1)},getResStr:function(t,e){var i=t.$resourcestrings[e];return i.current?i.current:i.org},createSet:function(){for(var t={},e=0;e<arguments.length;e++)if(null!=arguments[e])t[arguments[e]]=!0;else for(var i=arguments[e+=1],s=arguments[e+=1],n=i;n<=s;n++)t[n]=!0;return t},cloneSet:function(t){var e={};for(var i in t)e[i]=!0;return e},refSet:function(t){return rtl.hideProp(t,"$shared",!0),t},includeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),t[e]=!0,t},excludeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),delete t[e],t},diffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);return i},unionSet:function(t,e){var i={};for(var s in t)i[s]=!0;for(var s in e)i[s]=!0;return i},intersectSet:function(t,e){var i={};for(var s in t)e[s]&&(i[s]=!0);return i},symDiffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);for(var s in e)t[s]||(i[s]=!0);return i},eqSet:function(t,e){for(var i in t)if(!e[i])return!1;for(var i in e)if(!t[i])return!1;return!0},neSet:function(t,e){return!rtl.eqSet(t,e)},leSet:function(t,e){for(var i in t)if(!e[i])return!1;return!0},geSet:function(t,e){for(var i in e)if(!t[i])return!1;return!0},strSetLength:function(t,e){var i=t.length;if(i>e)return t.substring(0,e);if(t.repeat)return t+" ".repeat(e-i);for(;i<e;)t+=" ",i++;return t},spaceLeft:function(t,e){var i=t.length;if(i>=e)return t;if(t.repeat)return" ".repeat(e-i)+t;for(;i<e;)t=" "+t,i++;return t},floatToStr:function(t,e,i){if(arguments.length>2)return rtl.spaceLeft(t.toFixed(i),e);var s="",n=Math.abs(t);n>1&&n<1e10||n>1e-10&&n<1?s="00":(n>1&&n<1e100||n<1e-10)&&(s="0"),arguments.length<2?e=24:e<9&&(e=9);i=e-8;var o=(t>0?" ":"")+t.toExponential(i);return o=o.replace(/e(.)/,"E$1"+s),rtl.spaceLeft(o,e)},valEnum:function(t,e,i){for(var s in t=t.toLowerCase(),e)if("string"==typeof s&&s.toLowerCase()===t)return i(0),e[s];return i(1),0},lw:function(t){return t<0?t+4294967296:t},and:function(t,e){var i=2147483648;return(t/i&e/i)*i+(2147483647&t&e)},or:function(t,e){var i=2147483648;return(t/i|e/i)*i+(2147483647&t|2147483647&e)},xor:function(t,e){var i=2147483648;return(t/i^e/i)*i+(2147483647&t^2147483647&e)},shr:function(t,e){return t<0&&(t+=rtl.hiInt),t<2147483648?t>>e:e<=0?t:e>54?0:Math.floor(t/Math.pow(2,e))},shl:function(t,e){if(t<0&&(t+=rtl.hiInt),e<=0)return t;if(e>54)return 0;var i=t*Math.pow(2,e);return i<=rtl.hiInt?i:i%rtl.hiInt},initRTTI:function(){function t(t,e,i){i||(i=rtl.tTypeInfo),rtl.debug_rtti&&rtl.debug('initRTTI.newBaseTI "'+t+'" '+e+' ("'+i.name+'")');var s=Object.create(i);return s.name=t,s.kind=e,rtl[t]=s,s}function e(e,i,s,n){var o=t(e,1,rtl.tTypeInfoInteger);return o.minvalue=i,o.maxvalue=s,o.ordtype=n,o}function i(t,e){var i=Object.create(rtl.tTypeMember);i.name=t,i.kind=e,rtl[t]=i}rtl.debug_rtti&&rtl.debug("initRTTI"),rtl.tTypeInfo={name:"tTypeInfo",kind:0,$module:null,attr:null},t("tTypeInfoInteger",1),e("shortint",-128,127,0),e("byte",0,255,1),e("smallint",-32768,32767,2),e("word",0,65535,3),e("longint",-2147483648,2147483647,4),e("longword",0,4294967295,5),e("nativeint",-4503599627370496,0xfffffffffffff,6),e("nativeuint",0,0xfffffffffffff,7),t("char",2),t("string",3),t("tTypeInfoEnum",4,rtl.tTypeInfoInteger),t("tTypeInfoSet",5),t("double",6),t("boolean",7),t("tTypeInfoProcVar",8),t("tTypeInfoMethodVar",9,rtl.tTypeInfoProcVar),t("tTypeInfoArray",10),t("tTypeInfoDynArray",11),t("tTypeInfoPointer",15),t("pointer",15,rtl.tTypeInfoPointer).reftype=null,t("jsvalue",16),t("tTypeInfoRefToProcVar",17,rtl.tTypeInfoProcVar),rtl.tTypeMember={attr:null},i("tTypeMemberField",1),i("tTypeMemberMethod",2),i("tTypeMemberProperty",3),rtl.tTypeMembers={};var s=t("tTypeInfoStruct",0);s.$addMember=function(t,e,i){if(rtl.debug_rtti){if(!rtl.hasString(t)||"$"===t.charAt())throw'invalid member "'+t+'", this="'+this.name+'"';if(!rtl.is(e,rtl.tTypeMember))throw'invalid ancestor "'+e+":"+e.name+'", "'+this.name+"."+t+'"';if(null!=i&&"object"!=typeof i)throw'invalid options "'+i+'", "'+this.name+"."+t+'"'}var s=Object.create(e);if(s.name=t,this.members[t]=s,this.names.push(t),rtl.isObject(i))for(var n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);return s},s.addField=function(t,e,i){var s=this.$addMember(t,rtl.tTypeMemberField,i);if(rtl.debug_rtti&&!rtl.is(e,rtl.tTypeInfo))throw'invalid type "'+e+'", "'+this.name+"."+t+'"';return s.typeinfo=e,this.fields.push(t),s},s.addFields=function(){for(var t=0;t<arguments.length;){var e=arguments[t++],i=arguments[t++];t<arguments.length&&"object"==typeof arguments[t]?this.addField(e,i,arguments[t++]):this.addField(e,i)}},s.addMethod=function(t,e,i,s,n,o){var a=this.$addMember(t,rtl.tTypeMemberMethod,o);return a.methodkind=e,a.procsig=rtl.newTIProcSig(i,s,n),this.methods.push(t),a},s.addProperty=function(t,e,i,s,n,o){var a=this.$addMember(t,rtl.tTypeMemberProperty,o);return a.flags=e,a.typeinfo=i,a.getter=s,a.setter=n,a.params=rtl.isArray(a.params)?rtl.newTIParams(a.params):null,this.properties.push(t),rtl.isString(a.stored)||(a.stored=""),a},s.getField=function(t){return this.members[this.fields[t]]},s.getMethod=function(t){return this.members[this.methods[t]]},s.getProperty=function(t){return this.members[this.properties[t]]},t("tTypeInfoRecord",12,rtl.tTypeInfoStruct),t("tTypeInfoClass",13,rtl.tTypeInfoStruct),t("tTypeInfoClassRef",14),t("tTypeInfoInterface",18,rtl.tTypeInfoStruct),t("tTypeInfoHelper",19,rtl.tTypeInfoStruct),t("tTypeInfoExtClass",20,rtl.tTypeInfoClass)},tSectionRTTI:{$module:null,$inherited:function(t,e,i){rtl.debug_rtti&&rtl.debug('tSectionRTTI.newTI "'+(this.$module?this.$module.$name:"(no module)")+'"."'+t+'" ('+e.name+") "+(i?"init":"forward"));var s=this[t];if(s){if(!s.$forward)return s;if(!e.isPrototypeOf(s))throw'typeinfo ancestor mismatch "'+t+'" ancestor="'+e.name+'" t.name="'+s.name+'"'}else(s=Object.create(e)).name=t,s.$module=this.$module,this[t]=s;if(i)for(var n in delete s.$forward,i)i.hasOwnProperty(n)&&(s[n]=i[n]);else s.$forward=!0;return s},$Scope:function(t,e,i){var s=this.$inherited(t,e,i);return s.members||(s.members={}),s.names||(s.names=[]),s.fields||(s.fields=[]),s.methods||(s.methods=[]),s.properties||(s.properties=[]),s},$TI:function(t,e,i){var s=this.$inherited(t,rtl.tTypeInfo,i);return s.kind=e,s},$Int:function(t,e){return this.$inherited(t,rtl.tTypeInfoInteger,e)},$Enum:function(t,e){return this.$inherited(t,rtl.tTypeInfoEnum,e)},$Set:function(t,e){return this.$inherited(t,rtl.tTypeInfoSet,e)},$StaticArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoArray,e)},$DynArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoDynArray,e)},$ProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoProcVar,e)},$RefToProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoRefToProcVar,e)},$MethodVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoMethodVar,e)},$Record:function(t,e){return this.$Scope(t,rtl.tTypeInfoRecord,e)},$Class:function(t,e){return this.$Scope(t,rtl.tTypeInfoClass,e)},$ClassRef:function(t,e){return this.$inherited(t,rtl.tTypeInfoClassRef,e)},$Pointer:function(t,e){return this.$inherited(t,rtl.tTypeInfoPointer,e)},$Interface:function(t,e){return this.$Scope(t,rtl.tTypeInfoInterface,e)},$Helper:function(t,e){return this.$Scope(t,rtl.tTypeInfoHelper,e)},$ExtClass:function(t,e){return this.$Scope(t,rtl.tTypeInfoExtClass,e)}},newTIParam:function(t){return{name:t[0],typeinfo:t[1],flags:rtl.isNumber(t[2])?t[2]:0}},newTIParams:function(t){var e=[];if(rtl.isArray(t))for(var i=0;i<t.length;i++)e.push(rtl.newTIParam(t[i]));return e},newTIProcSig:function(t,e,i){return{params:rtl.newTIParams(t),resulttype:e||null,flags:i||0}},addResource:function(t){rtl.$res[t.name]=t},getResource:function(t){var e=rtl.$res[t];return void 0!==e?e:null},getResourceList:function(){return Object.keys(rtl.$res)}};rtl.module("System",[],(function(){"use strict";var t=this,e=t.$impl;this.LineEnding="\n",this.sLineBreak=this.LineEnding,this.MaxLongint=2147483647,this.Maxint=2147483647,this.TTextLineBreakStyle={0:"tlbsLF",tlbsLF:0,1:"tlbsCRLF",tlbsCRLF:1,2:"tlbsCR",tlbsCR:2},rtl.recNewT(this,"TGuid",(function(){this.D1=0,this.D2=0,this.D3=0,this.$new=function(){var t=Object.create(this);return t.D4=rtl.arraySetLength(null,0,8),t},this.$eq=function(t){return this.D1===t.D1&&this.D2===t.D2&&this.D3===t.D3&&rtl.arrayEq(this.D4,t.D4)},this.$assign=function(t){return this.D1=t.D1,this.D2=t.D2,this.D3=t.D3,this.D4=t.D4.slice(0),this}})),rtl.recNewT(this,"TMethod",(function(){this.Code=null,this.Data=null,this.$eq=function(t){return this.Code===t.Code&&this.Data===t.Data},this.$assign=function(t){return this.Code=t.Code,this.Data=t.Data,this}})),rtl.createClass(this,"TObject",null,(function(){this.$init=function(){},this.$final=function(){},this.Create=function(){return this},this.Destroy=function(){},this.Free=function(){this.$destroy("Destroy")},this.ClassType=function(){return this},this.MethodAddress=function(t){var e=null;if(e=null,""===t)return e;var i,s=0,n=this.$rtti,o="";for(i=t.toLowerCase();""===o&&null!=n;){for(s=0;""===o&&s<n.methods.length;)n.getMethod(s).name.toLowerCase()===i&&(o=n.getMethod(s).name),s+=1;""===o&&(n=n.ancestor)}return""!==o&&(e=this[o]),e},this.FieldAddress=function(t){if(null,""===t)return null;for(var e=this.$class,i=null,s=t.toLowerCase(),n=null;null!==e;){for(var o=0,a=(i=e.$rtti).fields.length-1;o<=a;o++)if((n=i.getField(o)).name.toLowerCase()===s)return n;e=e.$ancestor?e.$ancestor:null}return null},this.ClassInfo=function(){return this.$rtti},this.AfterConstruction=function(){},this.BeforeDestruction=function(){},this.GetInterface=function(t,e){var i=t.$intf;return i&&(i=rtl.getIntfG(this,i.$guid,2))?(e.set(i),!0):this.GetInterfaceByStr(rtl.guidrToStr(t),e)},this.GetInterfaceByStr=function(e,i){if(!1,t.IObjectInstance.$str||(t.IObjectInstance.$str=rtl.guidrToStr(t.IObjectInstance)),e==t.IObjectInstance.$str)return i.set(this),!0;var s=rtl.getIntfG(this,e,2);return i.set(s),null!==s}})),rtl.createClass(this,"TCustomAttribute",this.TObject,(function(){})),this.S_OK=0,this.E_NOINTERFACE=-2147467262,rtl.createInterface(this,"IUnknown","{00000000-0000-0000-C000-000000000046}",["QueryInterface","_AddRef","_Release"],null,(function(){this.$kind="com"})),this.IObjectInstance=this.TGuid.$clone({D1:3642530548,D2:15507,D3:16911,D4:[163,3,191,91,168,43,253,35]}),this.TTypeKind={0:"tkUnknown",tkUnknown:0,1:"tkInteger",tkInteger:1,2:"tkChar",tkChar:2,3:"tkString",tkString:3,4:"tkEnumeration",tkEnumeration:4,5:"tkSet",tkSet:5,6:"tkDouble",tkDouble:6,7:"tkBool",tkBool:7,8:"tkProcVar",tkProcVar:8,9:"tkMethod",tkMethod:9,10:"tkArray",tkArray:10,11:"tkDynArray",tkDynArray:11,12:"tkRecord",tkRecord:12,13:"tkClass",tkClass:13,14:"tkClassRef",tkClassRef:14,15:"tkPointer",tkPointer:15,16:"tkJSValue",tkJSValue:16,17:"tkRefToProcVar",tkRefToProcVar:17,18:"tkInterface",tkInterface:18,19:"tkHelper",tkHelper:19,20:"tkExtClass",tkExtClass:20},this.$rtti.$Enum("TTypeKind",{minvalue:0,maxvalue:20,ordtype:1,enumtype:this.TTypeKind}),this.vtInteger=0,this.vtExtended=3,this.vtWideChar=9,this.vtCurrency=12,this.vtUnicodeString=18,this.vtNativeInt=19,rtl.recNewT(this,"TVarRec",(function(){this.VType=0,this.VJSValue=void 0,this.$eq=function(t){return this.VType===t.VType&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue},this.$assign=function(t){return this.VType=t.VType,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this}})),this.VarRecs=function(){var e=[],i=0,s=null;for(e=[];i<arguments.length;)(s=t.TVarRec.$new()).VType=rtl.trunc(arguments[i]),i+=1,s.VJSValue=arguments[i],i+=1,e.push(t.TVarRec.$clone(s));return e},this.Frac=function(t){return t%1},this.Odd=function(t){return!0&t},this.Random=function(t){return Math.floor(Math.random()*t)},this.Sqr$1=function(t){return t*t},this.Trunc=function(e){return Math.trunc||(Math.trunc=function(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}),t.Trunc=Math.trunc,Math.trunc(e)},this.DefaultTextLineBreakStyle=0,this.Int=function(e){return t.Trunc(e)},this.Copy=function(t,e,i){return e<1&&(e=1),i>0?t.substring(e-1,e+i-1):""},this.Copy$1=function(t,e){return e<1&&(e=1),t.substr(e-1)},this.Delete=function(e,i,s){var n;i<1||i>e.get().length||s<=0||(n=e.get(),e.set(t.Copy(n,1,i-1)+t.Copy$1(n,i+s)))},this.Pos=function(t,e){return e.indexOf(t)+1},this.Pos$1=function(t,e,i){return e.indexOf(t,i-1)+1},this.Insert=function(e,i,s){var n;""!==e&&(n=i.get(),s<1?i.set(e+n):s>n.length?i.set(n+e):i.set(t.Copy(n,1,s-1)+e+t.Copy(n,s,n.length)))},this.upcase=function(t){return t.toUpperCase()},this.val=function(t,i,s){i.set(e.valint(t,-9007199254740991,9007199254740991,s))},this.val$6=function(t,i,s){i.set(e.valint(t,-2147483648,2147483647,s))},this.val$8=function(t,e,i){var s;""!==t?(s=Number(t),isNaN(s)?i.set(1):(i.set(0),e.set(s))):i.set(1)},this.StringOfChar=function(t,e){var i="";if(e>0&&t.repeat)return t.repeat(e);i="";for(var s=1,n=e;s<=n;s++)s,i+=t;return i},this.Writeln=function(){var t=0,i=0,s="";if(i=arguments.length-1,null!=e.WriteCallBack)for(var n=0,o=i;n<=o;n++)t=n,e.WriteCallBack(arguments[t],t===i);else{s=e.WriteBuf;for(var a=0,r=i;a<=r;a++)s=s+""+arguments[t=a];console.log(s),e.WriteBuf=""}},this.Assigned=function(t){return null!=t&&null!=t&&(!rtl.isArray(t)||t.length>0)},t.$implcode=function(){e.WriteBuf="",e.WriteCallBack=null,e.valint=function(e,i,s,n){var o=0,a=0;if(""===e)return n.set(1),o;if(a=Number(e),isNaN(a)){var r=t.Copy(e,1,1);if("$"===r)a=Number("0x"+t.Copy$1(e,2));else if("&"===r)a=Number("0o"+t.Copy$1(e,2));else{if("%"!==r)return n.set(1),o;a=Number("0b"+t.Copy$1(e,2))}}return isNaN(a)||a!==t.Int(a)?n.set(1):a<i||a>s?n.set(2):(o=t.Trunc(a),n.set(0)),o}},t.$init=function(){rtl.exitcode=0}}),[]),rtl.module("RTLConsts",["System"],(function(){"use strict";this.$resourcestrings={SArgumentMissing:{org:'Missing argument in format "%s"'},SInvalidFormat:{org:'Invalid format specifier : "%s"'},SInvalidArgIndex:{org:'Invalid argument index in format: "%s"'},SListCapacityError:{org:"List capacity (%s) exceeded."},SListCountError:{org:"List count (%s) out of bounds."},SListIndexError:{org:"List index (%s) out of bounds"},SSortedListError:{org:"Operation not allowed on sorted list"},SDuplicateString:{org:"String list does not allow duplicates"},SErrFindNeedsSortedList:{org:"Cannot use find on unsorted list"},SInvalidName:{org:'Invalid component name: "%s"'},SDuplicateName:{org:'Duplicate component name: "%s"'},SCantReadPropertyS:{org:'Cannot read property "%s"'},SCantWritePropertyS:{org:'Cannot write property "%s"'},SErrPropertyNotFound:{org:'Unknown property: "%s"'},SIndexedPropertyNeedsParams:{org:'Indexed property "%s" needs parameters'},SErrInvalidInteger:{org:'Invalid integer value: "%s"'},SErrInvalidFloat:{org:'Invalid floating-point value: "%s"'}}})),rtl.module("Types",["System"],(function(){"use strict";var t=this;this.TDirection={0:"FromBeginning",FromBeginning:0,1:"FromEnd",FromEnd:1},this.TDuplicates={0:"dupIgnore",dupIgnore:0,1:"dupAccept",dupAccept:1,2:"dupError",dupError:2},rtl.recNewT(this,"TPoint",(function(){this.x=0,this.y=0,this.$eq=function(t){return this.x===t.x&&this.y===t.y},this.$assign=function(t){return this.x=t.x,this.y=t.y,this};var e=t.$rtti.$Record("TPoint",{});e.addField("x",rtl.longint),e.addField("y",rtl.longint)})),rtl.recNewT(this,"TRect",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this};var e=t.$rtti.$Record("TRect",{});e.addField("Left",rtl.longint),e.addField("Top",rtl.longint),e.addField("Right",rtl.longint),e.addField("Bottom",rtl.longint)})),this.Rect=function(e,i,s,n){var o=t.TRect.$new();return o.Left=e,o.Top=i,o.Right=s,o.Bottom=n,o},this.Point=function(e,i){var s=t.TPoint.$new();return s.x=e,s.y=i,s}})),rtl.module("JS",["System","Types"],(function(){"use strict"})),rtl.module("SysUtils",["System","RTLConsts","JS"],(function(){"use strict";var t=this,e=t.$impl;this.FreeAndNil=function(t){var e=null;null!==(e=t.get())&&(t.set(null),e.$destroy("Destroy"))},rtl.recNewT(this,"TFormatSettings",(function(){this.CurrencyDecimals=0,this.CurrencyFormat=0,this.CurrencyString="",this.DateSeparator="\0",this.DecimalSeparator="",this.LongDateFormat="",this.LongTimeFormat="",this.NegCurrFormat=0,this.ShortDateFormat="",this.ShortTimeFormat="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.TimeSeparator="\0",this.TwoDigitYearCenturyWindow=0,this.InitLocaleHandler=null,this.$new=function(){var t=Object.create(this);return t.DateTimeToStrFormat=rtl.arraySetLength(null,"",2),t.LongDayNames=rtl.arraySetLength(null,"",7),t.LongMonthNames=rtl.arraySetLength(null,"",12),t.ShortDayNames=rtl.arraySetLength(null,"",7),t.ShortMonthNames=rtl.arraySetLength(null,"",12),t},this.$eq=function(t){return this.CurrencyDecimals===t.CurrencyDecimals&&this.CurrencyFormat===t.CurrencyFormat&&this.CurrencyString===t.CurrencyString&&this.DateSeparator===t.DateSeparator&&rtl.arrayEq(this.DateTimeToStrFormat,t.DateTimeToStrFormat)&&this.DecimalSeparator===t.DecimalSeparator&&this.LongDateFormat===t.LongDateFormat&&rtl.arrayEq(this.LongDayNames,t.LongDayNames)&&rtl.arrayEq(this.LongMonthNames,t.LongMonthNames)&&this.LongTimeFormat===t.LongTimeFormat&&this.NegCurrFormat===t.NegCurrFormat&&this.ShortDateFormat===t.ShortDateFormat&&rtl.arrayEq(this.ShortDayNames,t.ShortDayNames)&&rtl.arrayEq(this.ShortMonthNames,t.ShortMonthNames)&&this.ShortTimeFormat===t.ShortTimeFormat&&this.ThousandSeparator===t.ThousandSeparator&&this.TimeAMString===t.TimeAMString&&this.TimePMString===t.TimePMString&&this.TimeSeparator===t.TimeSeparator&&this.TwoDigitYearCenturyWindow===t.TwoDigitYearCenturyWindow},this.$assign=function(t){return this.CurrencyDecimals=t.CurrencyDecimals,this.CurrencyFormat=t.CurrencyFormat,this.CurrencyString=t.CurrencyString,this.DateSeparator=t.DateSeparator,this.DateTimeToStrFormat=t.DateTimeToStrFormat.slice(0),this.DecimalSeparator=t.DecimalSeparator,this.LongDateFormat=t.LongDateFormat,this.LongDayNames=t.LongDayNames.slice(0),this.LongMonthNames=t.LongMonthNames.slice(0),this.LongTimeFormat=t.LongTimeFormat,this.NegCurrFormat=t.NegCurrFormat,this.ShortDateFormat=t.ShortDateFormat,this.ShortDayNames=t.ShortDayNames.slice(0),this.ShortMonthNames=t.ShortMonthNames.slice(0),this.ShortTimeFormat=t.ShortTimeFormat,this.ThousandSeparator=t.ThousandSeparator,this.TimeAMString=t.TimeAMString,this.TimePMString=t.TimePMString,this.TimeSeparator=t.TimeSeparator,this.TwoDigitYearCenturyWindow=t.TwoDigitYearCenturyWindow,this},this.GetJSLocale=function(){return Intl.DateTimeFormat().resolvedOptions().locale},this.GetLocaleDecimalSeparator=function(t){var e=1.1;return e=e.toLocaleString(t).substring(1,2)},this.GetLocaleLongDayName=function(t,e){var i=new Date(2017,0,1);return i.setDate(i.getDate()+t-1),i.toLocaleDateString(e,{weekday:"long"})},this.GetLocaleLongMonthName=function(t,e){return new Date(2017,t-1,1).toLocaleDateString(e,{month:"long"})},this.GetLocaleLongTimeFormat=function(e){var i="";return i="hh:nn:ss","EN-US"===t.UpperCase(e)&&(i="hh:nn:ss AMPM"),i};this.GetLocaleShortDateFormat=function(e){var i;t.TStringHelper.Empty,e=t.TStringHelper.ToLower.call({get:function(){return e},set:function(t){e=t}}),(i=t.TStringHelper.IndexOf.call({get:function(){return e},set:function(t){e=t}},"-"))>=0?e=t.TStringHelper.Substring$1.call({get:function(){return e},set:function(t){e=t}},0,i)+t.TStringHelper.ToUpper.call({a:t.TStringHelper.Substring.call({get:function(){return e},set:function(t){e=t}},i),get:function(){return this.a},set:function(t){this.a=t}}):2===t.TStringHelper.GetLength.call({get:function(){return e},set:function(t){e=t}})&&(e=e+"-"+t.TStringHelper.ToUpper.call({get:function(){return e},set:function(t){e=t}}));return{"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"}[e]||"dd/MM/yyyy"},this.GetLocaleShortDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"short"})},this.GetLocaleShortMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"short"})},this.GetLocaleShortTimeFormat=function(e){var i="";return i="hh:nn","EN-US"===t.UpperCase(e)&&(i="h:nn AMPM"),i},this.Create=function(){var e=t.TFormatSettings.$new();return e.$assign(t.TFormatSettings.Create$1(t.TFormatSettings.GetJSLocale())),e};var i=["/",".","-"],s=[":",".","-"],n=[",","."],o=[".",","];this.Create$1=function(e){var a=t.TFormatSettings.$new(),r="",l=0,h="";h=t.UpperCase(e),1===pas.System.Pos("DE",h)?(a.LongDayNames[0]="Sonntag",a.LongDayNames[1]="Montag",a.LongDayNames[2]="Dienstag",a.LongDayNames[3]="Mittwoch",a.LongDayNames[4]="Donnerstag",a.LongDayNames[5]="Freitag",a.LongDayNames[6]="Samstag",a.ShortDayNames[0]="Son",a.ShortDayNames[1]="Mon",a.ShortDayNames[2]="Die",a.ShortDayNames[3]="Mit",a.ShortDayNames[4]="Don",a.ShortDayNames[5]="Fre",a.ShortDayNames[6]="Sam",a.ShortMonthNames[0]="Jan",a.ShortMonthNames[1]="Feb",a.ShortMonthNames[2]="Mär",a.ShortMonthNames[3]="Apr",a.ShortMonthNames[4]="Mai",a.ShortMonthNames[5]="Jun",a.ShortMonthNames[6]="Jul",a.ShortMonthNames[7]="Aug",a.ShortMonthNames[8]="Sep",a.ShortMonthNames[9]="Okt",a.ShortMonthNames[10]="Nov",a.ShortMonthNames[11]="Dez",a.LongMonthNames[0]="Januar",a.LongMonthNames[1]="Februar",a.LongMonthNames[2]="März",a.LongMonthNames[3]="April",a.LongMonthNames[4]="Mai",a.LongMonthNames[5]="Juni",a.LongMonthNames[6]="Juli",a.LongMonthNames[7]="August",a.LongMonthNames[8]="September",a.LongMonthNames[9]="Oktober",a.LongMonthNames[10]="November",a.LongMonthNames[11]="Dezember"):1===pas.System.Pos("FR",t.UpperCase(e))?(a.LongDayNames[0]="Dimanche",a.LongDayNames[1]="Lundi",a.LongDayNames[2]="Mardi",a.LongDayNames[3]="Mecredi",a.LongDayNames[4]="Jeudi",a.LongDayNames[5]="Vendredi",a.LongDayNames[6]="Samedi",a.ShortDayNames[0]="Dim",a.ShortDayNames[1]="Lun",a.ShortDayNames[2]="Mar",a.ShortDayNames[3]="Mer",a.ShortDayNames[4]="Jeu",a.ShortDayNames[5]="Ven",a.ShortDayNames[6]="Sam",a.ShortMonthNames[0]="Jan",a.ShortMonthNames[1]="Fév",a.ShortMonthNames[2]="Mar",a.ShortMonthNames[3]="Avr",a.ShortMonthNames[4]="Mai",a.ShortMonthNames[5]="Jun",a.ShortMonthNames[6]="Jul",a.ShortMonthNames[7]="Aoû",a.ShortMonthNames[8]="Sep",a.ShortMonthNames[9]="Oct",a.ShortMonthNames[10]="Nov",a.ShortMonthNames[11]="Déc",a.LongMonthNames[0]="Janvier",a.LongMonthNames[1]="Février",a.LongMonthNames[2]="Mars",a.LongMonthNames[3]="Avril",a.LongMonthNames[4]="Mai",a.LongMonthNames[5]="Juin",a.LongMonthNames[6]="Juillet",a.LongMonthNames[7]="Août",a.LongMonthNames[8]="Septembre",a.LongMonthNames[9]="Octobre",a.LongMonthNames[10]="Novembre",a.LongMonthNames[11]="Décembre"):1===pas.System.Pos("ES",t.UpperCase(e))?(a.LongDayNames[0]="Domingo",a.LongDayNames[1]="Lunes",a.LongDayNames[2]="Martes",a.LongDayNames[3]="Miércoles",a.LongDayNames[4]="Jueves",a.LongDayNames[5]="Viernes",a.LongDayNames[6]="Sábado",a.ShortDayNames[0]="Dom",a.ShortDayNames[1]="Lun",a.ShortDayNames[2]="Mar",a.ShortDayNames[3]="Mié",a.ShortDayNames[4]="Jue",a.ShortDayNames[5]="Vie",a.ShortDayNames[6]="Sáb",a.ShortMonthNames[0]="Ene",a.ShortMonthNames[1]="Feb",a.ShortMonthNames[2]="Mar",a.ShortMonthNames[3]="Abr",a.ShortMonthNames[4]="May",a.ShortMonthNames[5]="Jun",a.ShortMonthNames[6]="Jul",a.ShortMonthNames[7]="Ago",a.ShortMonthNames[8]="Sep",a.ShortMonthNames[9]="Oct",a.ShortMonthNames[10]="Nov",a.ShortMonthNames[11]="Dic",a.LongMonthNames[0]="January",a.LongMonthNames[1]="Febrero",a.LongMonthNames[2]="Marzi",a.LongMonthNames[3]="Abril",a.LongMonthNames[4]="Mayo",a.LongMonthNames[5]="Junio",a.LongMonthNames[6]="Julio",a.LongMonthNames[7]="Agusto",a.LongMonthNames[8]="Septiembre",a.LongMonthNames[9]="Octubre",a.LongMonthNames[10]="Noviembre",a.LongMonthNames[11]="Diciembre"):(a.LongDayNames[0]="Sunday",a.LongDayNames[1]="Monday",a.LongDayNames[2]="Tuesday",a.LongDayNames[3]="Wednesday",a.LongDayNames[4]="Thursday",a.LongDayNames[5]="Friday",a.LongDayNames[6]="Saturday",a.ShortDayNames[0]="Sun",a.ShortDayNames[1]="Mon",a.ShortDayNames[2]="Tue",a.ShortDayNames[3]="Wed",a.ShortDayNames[4]="Thu",a.ShortDayNames[5]="Fri",a.ShortDayNames[6]="Sat",a.ShortMonthNames[0]="Jan",a.ShortMonthNames[1]="Feb",a.ShortMonthNames[2]="Mar",a.ShortMonthNames[3]="Apr",a.ShortMonthNames[4]="May",a.ShortMonthNames[5]="Jun",a.ShortMonthNames[6]="Jul",a.ShortMonthNames[7]="Aug",a.ShortMonthNames[8]="Sep",a.ShortMonthNames[9]="Oct",a.ShortMonthNames[10]="Nov",a.ShortMonthNames[11]="Dec",a.LongMonthNames[0]="January",a.LongMonthNames[1]="February",a.LongMonthNames[2]="March",a.LongMonthNames[3]="April",a.LongMonthNames[4]="May",a.LongMonthNames[5]="June",a.LongMonthNames[6]="July",a.LongMonthNames[7]="August",a.LongMonthNames[8]="September",a.LongMonthNames[9]="October",a.LongMonthNames[10]="November",a.LongMonthNames[11]="December"),a.DateTimeToStrFormat[0]="c",a.DateTimeToStrFormat[1]="f",a.DateSeparator="-",a.TimeSeparator=":",a.ShortDateFormat="yyyy-mm-dd",a.LongDateFormat="ddd, yyyy-mm-dd",a.DecimalSeparator=".",a.ThousandSeparator=",",a.TimeAMString="AM",a.TimePMString="PM",a.TwoDigitYearCenturyWindow=50,a.ShortTimeFormat=t.TFormatSettings.GetLocaleShortTimeFormat(e),a.LongTimeFormat=t.TFormatSettings.GetLocaleLongTimeFormat(e),a.ShortDateFormat=t.TFormatSettings.GetLocaleShortDateFormat(e);for(var p=0,c=rtl.length(i)-1;p<=c;p++)l=p,t.TStringHelper.IndexOf.call({p:a,get:function(){return this.p.ShortDateFormat},set:function(t){this.p.ShortDateFormat=t}},i[l])>=0&&(a.DateSeparator=i[l]);var F=new Date("Jan 1, 1980 06:07:08 GMT+00:00");h="";h=""==e?navigator.language:e,r=F.toLocaleTimeString(h);for(var u=0,C=rtl.length(s)-1;u<=C;u++)l=u,t.TStringHelper.IndexOf.call({get:function(){return r},set:function(t){r=t}},s[l])>=0&&(a.TimeSeparator=s[l]);for(l=1;l<=7;l++)a.ShortDayNames[l-1]=t.TFormatSettings.GetLocaleShortDayName(l,e);for(l=1;l<=7;l++)a.LongDayNames[l-1]=t.TFormatSettings.GetLocaleLongDayName(l,e);for(l=1;l<=12;l++)a.ShortMonthNames[l-1]=t.TFormatSettings.GetLocaleShortMonthName(l,e);for(l=1;l<=12;l++)a.LongMonthNames[l-1]=t.TFormatSettings.GetLocaleLongMonthName(l,e);a.DecimalSeparator=t.TFormatSettings.GetLocaleDecimalSeparator(e);for(var d=0,T=rtl.length(n)-1;d<=T;d++)if(l=d,a.DecimalSeparator===n[l]){a.ThousandSeparator=o[l];break}return null!=t.TFormatSettings.InitLocaleHandler&&t.TFormatSettings.InitLocaleHandler(t.UpperCase(e),t.TFormatSettings.$clone(a)),a},this.Invariant=function(){var i=t.TFormatSettings.$new();return e.FInvariantCreated||(e.FInvariant.$assign(t.TFormatSettings.Create$1("EN-US")),e.FInvariant.CurrencyString="¤",e.FInvariant.CurrencyFormat=0,e.FInvariant.CurrencyDecimals=2,e.FInvariant.DateSeparator="/",e.FInvariant.TimeSeparator=":",e.FInvariant.ShortDateFormat="MM/dd/yyyy",e.FInvariant.LongDateFormat="dddd, dd MMMMM yyyy HH:mm:ss",e.FInvariant.TimeAMString="AM",e.FInvariant.TimePMString="PM",e.FInvariant.ShortTimeFormat="HH:mm",e.FInvariant.LongTimeFormat="HH:mm:ss",e.FInvariant.ShortMonthNames=e.DefaultShortMonthNames.slice(0),e.FInvariant.LongMonthNames=e.DefaultLongMonthNames.slice(0),e.FInvariant.ShortDayNames=e.DefaultShortDayNames.slice(0),e.FInvariant.LongDayNames=e.DefaultLongDayNames.slice(0),e.FInvariant.ThousandSeparator=",",e.FInvariant.DecimalSeparator=".",e.FInvariant.TwoDigitYearCenturyWindow=50,e.FInvariant.NegCurrFormat=0,e.FInvariantCreated=!0),i.$assign(e.FInvariant),i}}),!0),rtl.createClass(this,"Exception",pas.System.TObject,(function(){this.LogMessageOnCreate=!1,this.$init=function(){pas.System.TObject.$init.call(this),this.FMessage="",this.FJSError=null,this.FStack=void 0},this.$final=function(){this.FJSError=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return this.FMessage=t,this.FJSError=new Error(t),this.FStack=this.FJSError.stack,this.LogMessageOnCreate&&pas.System.Writeln("Created exception ",this.$classname," with message: ",t),this},this.CreateFmt=function(e,i){return this.Create$1(t.Format(e,i)),this}})),rtl.createClass(this,"EExternal",this.Exception,(function(){})),rtl.createClass(this,"EConvertError",this.Exception,(function(){})),rtl.createClass(this,"EIntError",this.EExternal,(function(){})),rtl.createClass(this,"ERangeError",this.EIntError,(function(){})),this.Trim=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"").replace(/[\s\uFEFF\xA0\x00-\x1f]+$/,"")},this.TrimLeft=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"")},this.UpperCase=function(t){return t.toUpperCase()},this.LowerCase=function(t){return t.toLowerCase()},this.CompareStr=function(t,e){var i,s=t.length,n=e.length;return s<=n?t<(i=e.substr(0,s))?-1:t>i?1:s<n?-1:0:(i=t.substr(0,n))<e?-1:1},this.CompareText=function(t,e){var i=t.toLowerCase(),s=e.toLowerCase();return i>s?1:i<s?-1:0},this.Format=function(e,i){return t.Format$1(e,i,t.FormatSettings)},this.Format$1=function(i,s,n){var o="",a=0,r=0,l=0,h=0,p=0,c="",F="",u=0,C=0,d=0,T=!1,m=0;function S(){var t=0;function n(){var n=0,o=0;if(-1===t){for(r=a;a<=p&&i.charAt(a-1)<="9"&&i.charAt(a-1)>="0";)a+=1;if(a>p&&e.DoFormatError(1,i),"*"===i.charAt(a-1)){255===u?o=l:(o=u,u+=1),(a>r||o>rtl.length(s)-1)&&e.DoFormatError(1,i),l=o+1;var h=s[o].VType;0===h||19===h?t=s[o].VJSValue:e.DoFormatError(1,i),a+=1}else r<a?(pas.System.val(pas.System.Copy(i,r,a-r),{get:function(){return t},set:function(e){t=e}},{get:function(){return n},set:function(t){n=t}}),n>0&&e.DoFormatError(1,i)):t=-1}}return u=255,C=-1,d=-1,t=-1,a+=1,"%"===i.charAt(a-1)?"%":(":"!==i.charAt(a-1)?n():t=0,":"===i.charAt(a-1)&&(-1===t&&e.DoFormatError(2,i),u=t,t=-1,a+=1),"-"===i.charAt(a-1)?(T=!0,a+=1):T=!1,n(),-1!==t&&(C=t,t=-1),"."===i.charAt(a-1)&&(a+=1,n(),-1===t&&(t=0),d=t),pas.System.upcase(i.charAt(a-1)))}function y(t,n){var o=!1;return o=!1,l=(h=255===u?l:u)+1,h>rtl.length(s)-1||s[h].VType!==t?(n&&e.DoFormatError(3,i),l-=1,o):o=!0}for(o="",p=i.length,a=1,r=1,l=0;a<=p;){for(;a<=p&&"%"!==i.charAt(a-1);)a+=1;if(a>r&&(o+=pas.System.Copy(i,r,a-r)),a<p){var g=S();if("D"===g)(y(0,!1)||y(19,!0))&&(F=t.IntToStr(s[h].VJSValue)),C=Math.abs(C),u=d-F.length,"-"!==F.charAt(0)?F=pas.System.StringOfChar("0",u)+F:pas.System.Insert(pas.System.StringOfChar("0",u+1),{get:function(){return F},set:function(t){F=t}},2);else if("U"===g)y(0,!1)?F=t.IntToStr(s[h].VJSValue>>>0):y(19,!0)&&(F=t.IntToStr(s[h].VJSValue)),C=Math.abs(C),u=d-F.length,F=pas.System.StringOfChar("0",u)+F;else if("E"===g)y(12,!1)?F=t.FloatToStrF$1(s[h].VJSValue/1e4,2,3,d,n):y(3,!0)&&(F=t.FloatToStrF$1(s[h].VJSValue,2,3,d,n));else if("F"===g)y(12,!1)?F=t.FloatToStrF$1(s[h].VJSValue/1e4,0,9999,d,n):(y(0,!1)||y(3,!0))&&(F=t.FloatToStrF$1(s[h].VJSValue,0,9999,d,n));else if("G"===g)y(12,!1)?F=t.FloatToStrF$1(s[h].VJSValue/1e4,1,d,3,n):y(3,!0)&&(F=t.FloatToStrF$1(s[h].VJSValue,1,d,3,n));else if("N"===g)y(12,!1)?F=t.FloatToStrF$1(s[h].VJSValue/1e4,3,9999,d,n):y(3,!0)&&(F=t.FloatToStrF$1(s[h].VJSValue,3,9999,d,n));else if("M"===g)y(12,!1)?F=t.FloatToStrF$1(s[h].VJSValue/1e4,4,9999,d,n):y(3,!0)&&(F=t.FloatToStrF$1(s[h].VJSValue,4,9999,d,n));else if("S"===g)(y(18,!1)||y(9,!0))&&(c=s[h].VJSValue),u=c.length,-1!==d&&u>d&&(u=d),F=pas.System.Copy(c,1,u);else if("P"===g)y(0,!1)?F=t.IntToHex(s[h].VJSValue,8):y(0,!0)&&(F=t.IntToHex(s[h].VJSValue,16));else if("X"===g)if(y(0,!1)?(m=s[h].VJSValue,u=16):y(19,!0)&&(m=s[h].VJSValue,u=31),d>u)F=t.IntToHex(m,u);else{for(u=1;rtl.shl(1,4*u)<=m&&u<16;)u+=1;u>d&&(d=u),F=t.IntToHex(m,d)}else"%"===g&&(F="%");-1!==C&&F.length<C&&(T?F+=pas.System.StringOfChar(" ",C-F.length):F=pas.System.StringOfChar(" ",C-F.length)+F),o+=F}r=a+=1}return o};var i=rtl.createSet(null,65,90,null,97,122,95),s=rtl.unionSet(i,rtl.createSet(null,48,57));this.IsValidIdent=function(t,e,n){var o,a=!1,r=!1,l=0;if((o=t.length)<1)return!1;for(r=!0,a=!1,l=1;l<=o;){if(r){if(!(t.charCodeAt(l-1)in i))return a;r=!1}else if(e&&"."===t.charAt(l-1)){if(n){if(l>=o)return a;r=!0}}else if(!(t.charCodeAt(l-1)in s))return a;l+=1}return a=!0},this.TStringReplaceFlag={0:"rfReplaceAll",rfReplaceAll:0,1:"rfIgnoreCase",rfIgnoreCase:1},this.StringReplace=function(t,i,s,n){var o,a="";return a="",0 in n&&(a="g"),1 in n&&(a+="i"),o=i.replace(new RegExp(e.RESpecials,"g"),"\\$1"),t.replace(new RegExp(o,a),s)},this.IntToStr=function(t){return""+t},this.TryStrToInt$2=function(i,s){return e.IntTryStrToInt(i,s,t.FormatSettings.DecimalSeparator)},this.StrToInt=function(e){var i=0;if(!t.TryStrToInt$2(e,{get:function(){return i},set:function(t){i=t}}))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidInteger"),pas.System.VarRecs(18,e)]);return i},this.StrToInt64=function(e){var i=0;if(!t.TryStrToInt$2(e,{get:function(){return i},set:function(t){i=t}}))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidInteger"),pas.System.VarRecs(18,e)]);return i},this.IntToHex=function(e,i){var s="";for(s="",e<0&&e<0&&(e=4294967295+e+1),s=e.toString(16),s=t.UpperCase(s);s.length<i;)s="0"+s;return s},this.TFloatFormat={0:"ffFixed",ffFixed:0,1:"ffGeneral",ffGeneral:1,2:"ffExponent",ffExponent:2,3:"ffNumber",ffNumber:3,4:"ffCurrency",ffCurrency:4},this.FloatToStr=function(e){return t.FloatToStr$1(e,t.FormatSettings)},this.FloatToStr$1=function(e,i){return t.FloatToStrF$1(e,1,15,0,i)},this.FloatToStrF$1=function(t,i,s,n,o){var a,r,l="";r=o.DecimalSeparator,a=o.ThousandSeparator;var h=i;return 1===h?l=e.FormatGeneralFloat(t,s,r):2===h?l=e.FormatExponentFloat(t,s,n,r):0===h?l=e.FormatFixedFloat(t,n,r):3===h?l=e.FormatNumberFloat(t,n,r,a):4===h&&(l=e.FormatNumberCurrency(1e4*t,n,o)),4!==i&&l.length>1&&"-"===l.charAt(0)&&e.RemoveLeadingNegativeSign({get:function(){return l},set:function(t){l=t}},r,a),l};this.TryStrToFloat$3=function(e,i,s){var n,o,a=!1,r=0,l=0,h="",p=0;for(a=!1,h=e,""!==s.ThousandSeparator&&(h=t.StringReplace(h,s.ThousandSeparator,"",rtl.createSet(0))),"."!==s.DecimalSeparator&&(h=t.StringReplace(h,s.DecimalSeparator,".",{})),p=0,r=1,l=1,o=h.length;r<=o;){var c=h.charAt(r-1);if("+"===c||"-"===c){if(1===p)return a;if(0===p){if(r>l)return a}else if(2===p&&r>l+1)return a}else if(c>="0"&&c<="9");else if("."===c){if(0!==p)return a;p=1,l=r}else{if("E"!==c&&"e"!==c)return a;if(2===p)return a;p=2,l=r}r+=1}return n=parseFloat(h),(a=!isNaN(n))&&i.set(rtl.getNumber(n)),a},this.StrToFloat$1=function(e,i){var s=0;if(!t.TryStrToFloat$3(e,{get:function(){return s},set:function(t){s=t}},i))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidFloat"),pas.System.VarRecs(18,e)]);return s},rtl.recNewT(this,"TTimeStamp",(function(){this.Time=0,this.Date=0,this.$eq=function(t){return this.Time===t.Time&&this.Date===t.Date},this.$assign=function(t){return this.Time=t.Time,this.Date=t.Date,this}})),this.TimeSeparator="\0",this.DateSeparator="\0",this.ShortDateFormat="",this.LongDateFormat="",this.ShortTimeFormat="",this.LongTimeFormat="",this.DecimalSeparator="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.HoursPerDay=24,this.MinsPerHour=60,this.SecsPerMin=60,this.MSecsPerSec=1e3,this.MinsPerDay=1440,this.SecsPerDay=86400,this.MSecsPerDay=864e5,this.MaxDateTime=2958465.99999999,this.DateDelta=693594,this.MonthDays$a$clone=function(t){var e=[];e.length=2;for(var i=0;i<2;i++)e[i]=t[i].slice(0);return e},this.MonthDays=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],this.ShortMonthNames=rtl.arraySetLength(null,"",12),this.LongMonthNames=rtl.arraySetLength(null,"",12),this.ShortDayNames=rtl.arraySetLength(null,"",7),this.LongDayNames=rtl.arraySetLength(null,"",7),this.FormatSettings=this.TFormatSettings.$new(),this.JSDateToDateTime=function(e){return t.EncodeDate(e.getFullYear(),e.getMonth()+1,e.getDate())+t.EncodeTime(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},this.DateTimeToTimeStamp=function(e){var i=t.TTimeStamp.$new(),s=0;return(s=864e5*e)<0?s-=.5:s+=.5,i.Time=pas.System.Trunc(Math.abs(pas.System.Trunc(s))%864e5),i.Date=693594+rtl.trunc(pas.System.Trunc(s)/864e5),i},this.TryEncodeDate=function(e,i,s,n){var o,a=0,r=0;return(o=e>0&&e<1e4&&i>=1&&i<=12&&s>0&&s<=t.MonthDays[+t.IsLeapYear(e)][i-1])&&(i>2?i-=3:(i+=9,e-=1),r=e-100*(a=rtl.trunc(e/100)),n.set((146097*a>>>2)+(1461*r>>>2)+rtl.trunc((153*i+2)/5)+s),n.set(n.get()-693900)),o},this.TryEncodeTime=function(t,e,i,s,n){var o;return(o=t<24&&e<60&&i<60&&s<1e3)&&n.set((36e5*t+6e4*e+1e3*i+s)/864e5),o},this.EncodeDate=function(e,i,s){var n=0;if(!t.TryEncodeDate(e,i,s,{get:function(){return n},set:function(t){n=t}}))throw t.EConvertError.$create("CreateFmt",["%s-%s-%s is not a valid date specification",pas.System.VarRecs(18,t.IntToStr(e),18,t.IntToStr(i),18,t.IntToStr(s))]);return n},this.EncodeTime=function(e,i,s,n){var o=0;if(!t.TryEncodeTime(e,i,s,n,{get:function(){return o},set:function(t){o=t}}))throw t.EConvertError.$create("CreateFmt",["%s:%s:%s.%s is not a valid time specification",pas.System.VarRecs(18,t.IntToStr(e),18,t.IntToStr(i),18,t.IntToStr(s),18,t.IntToStr(n))]);return o},this.DecodeDate=function(e,i,s,n){var o=0,a=0,r=0,l=0;e<=-693594?(i.set(0),s.set(0),n.set(0)):(e>0?e+=1/1728e5:e-=1/1728e5,e>t.MaxDateTime&&(e=t.MaxDateTime),l=rtl.shl(pas.System.Trunc(e)+693900,2)-1,l-=146097*(o=rtl.trunc(l/146097)),a=rtl.lw(l>>>2),l=rtl.trunc((rtl.lw(a<<2)+3)/1461),a=rtl.lw(rtl.lw(a<<2)+7-1461*l>>>2),r=rtl.trunc((5*a-3)/153),a=rtl.trunc((5*a+2-153*r)/5),o=100*o+l,r<10?r+=3:(r-=9,o+=1),i.set(o),s.set(r),n.set(a))},this.DecodeTime=function(e,i,s,n,o){var a=0;a=t.DateTimeToTimeStamp(e).Time,i.set(rtl.trunc(a/36e5)),a%=36e5,s.set(rtl.trunc(a/6e4)),a%=6e4,n.set(rtl.trunc(a/1e3)),a%=1e3,o.set(a)},this.Now=function(){return t.JSDateToDateTime(new Date)},this.IsLeapYear=function(t){return t%4==0&&(t%100!=0||t%400==0)},this.CurrencyFormat=0,this.NegCurrFormat=0,this.CurrencyDecimals=0,this.CurrencyString="",this.Supports$1=function(t,e,i){return null!==t&&0===t.QueryInterface(e,i)},rtl.createHelper(this,"TStringHelper",null,(function(){this.Empty="",this.GetLength=function(){return this.get().length},this.LowerCase=function(e){return t.LowerCase(e)},this.UpperCase=function(e){return t.UpperCase(e)},this.IndexOf=function(e){return t.TStringHelper.IndexOf$4.call(this,e,0,t.TStringHelper.GetLength.call(this))},this.IndexOf$4=function(t,e,i){var s,n=0;return s=pas.System.Copy(this.get(),e+1,i),-1!==(n=pas.System.Pos(t,s)-1)&&(n+=e),n},this.Substring=function(e){return t.TStringHelper.Substring$1.call(this,e,t.TStringHelper.GetLength.call(this)-e)},this.Substring$1=function(t,e){return pas.System.Copy(this.get(),t+1,e)},this.ToLower=function(){return t.TStringHelper.LowerCase(this.get())},this.ToUpper=function(){return t.TStringHelper.UpperCase(this.get())}})),rtl.createHelper(this,"TIntegerHelper",null,(function(){this.ToString$1=function(){return t.IntToStr(this.get())}})),t.$implcode=function(){e.DefaultShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.DefaultLongMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],e.DefaultShortDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e.DefaultLongDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.FInvariant=t.TFormatSettings.$new(),e.FInvariantCreated=!1,e.feInvalidFormat=1,e.feMissingArgument=2,e.feInvalidArgIndex=3,e.DoFormatError=function(e,i){var s=e;if(1===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidFormat"),pas.System.VarRecs(18,i)]);if(2===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SArgumentMissing"),pas.System.VarRecs(18,i)]);if(3===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidArgIndex"),pas.System.VarRecs(18,i)])},e.maxdigits=15,e.ReplaceDecimalSep=function(t,e){var i;return(i=pas.System.Pos(".",t))>0?pas.System.Copy(t,1,i-1)+e+pas.System.Copy(t,i+1,t.length-i):t},e.FormatGeneralFloat=function(i,s,n){var o="",a=0,r=0,l=0,h=0;if((-1===s||s>15)&&(s=15),o=rtl.floatToStr(i,s+7),o=t.TrimLeft(o),0===(a=pas.System.Pos(".",o)))return o;if(0===(r=pas.System.Pos("E",o)))return o=e.ReplaceDecimalSep(o,n);for(l=r+2,h=0;l<=o.length;)h=10*h+o.charCodeAt(l-1)-48,l+=1;if("-"===o.charAt(r+1-1)&&(h=-h),a+h<r&&h>-6){if(o=rtl.strSetLength(o,r-1),h>=0){for(var p=0,c=h-1;p<=c;p++)l=p,o=rtl.setCharAt(o,a-1,o.charAt(a+1-1)),a+=1;for(o=rtl.setCharAt(o,a-1,"."),a=1,"-"===o.charAt(a-1)&&(a+=1);"0"===o.charAt(a-1)&&a<o.length&&pas.System.Copy(o,a+1,n.length)!==n;)pas.System.Delete({get:function(){return o},set:function(t){o=t}},a,1)}else pas.System.Insert(pas.System.Copy("00000",1,-h),{get:function(){return o},set:function(t){o=t}},a-1),o=rtl.setCharAt(o,a-h-1,o.charAt(a-h-1-1)),o=rtl.setCharAt(o,a-1,"."),-1!==h&&(o=rtl.setCharAt(o,a-h-1-1,"0"));for(l=o.length;l>0&&"0"===o.charAt(l-1);)l-=1;"."===o.charAt(l-1)&&(l-=1),o=0===l||1===l&&"-"===o.charAt(0)?"0":rtl.strSetLength(o,l)}else{for(;"0"===o.charAt(r-1-1);)pas.System.Delete({get:function(){return o},set:function(t){o=t}},r-1,1),r-=1;for(o.charAt(r-1-1)===n&&(pas.System.Delete({get:function(){return o},set:function(t){o=t}},r-1,1),r-=1),"+"===o.charAt(r+1-1)?pas.System.Delete({get:function(){return o},set:function(t){o=t}},r+1,1):r+=1;"0"===o.charAt(r+1-1);)pas.System.Delete({get:function(){return o},set:function(t){o=t}},r+1,1)}return o=e.ReplaceDecimalSep(o,n)},e.FormatExponentFloat=function(i,s,n,o){var a="",r=0;for(o=t.FormatSettings.DecimalSeparator,(-1===s||s>15)&&(s=15),a=rtl.floatToStr(i,s+7);" "===a.charAt(0);)pas.System.Delete({get:function(){return a},set:function(t){a=t}},1,1);if(0===(r=pas.System.Pos("E",a)))return a=e.ReplaceDecimalSep(a,o);if(r+=2,n>4&&(n=4),(n=a.length-r-n+1)<0)pas.System.Insert(pas.System.Copy("0000",1,-n),{get:function(){return a},set:function(t){a=t}},r);else for(;n>0&&"0"===a.charAt(r-1);){if(pas.System.Delete({get:function(){return a},set:function(t){a=t}},r,1),r>a.length){pas.System.Delete({get:function(){return a},set:function(t){a=t}},r-2,2);break}n-=1}return a=e.ReplaceDecimalSep(a,o)},e.FormatFixedFloat=function(t,i,s){var n="";return-1===i?i=2:i>18&&(i=18),""!==(n=rtl.floatToStr(t,0,i))&&" "===n.charAt(0)&&pas.System.Delete({get:function(){return n},set:function(t){n=t}},1,1),n=e.ReplaceDecimalSep(n,s)},e.FormatNumberFloat=function(t,i,s,n){var o="",a=0;if(-1===i?i=2:i>15&&(i=15),""!==(o=rtl.floatToStr(t,0,i))&&" "===o.charAt(0)&&pas.System.Delete({get:function(){return o},set:function(t){o=t}},1,1),(a=pas.System.Pos(".",o))<=0&&(a=o.length+1),o=e.ReplaceDecimalSep(o,s),a-=3,""!==n&&"\0"!==n)for(;a>1;)"-"!==o.charAt(a-1-1)&&pas.System.Insert(n,{get:function(){return o},set:function(t){o=t}},a),a-=3;return o},e.RemoveLeadingNegativeSign=function(t,e,i){var s,n=!1,o=0;n=!1,s=i;for(var a=2,r=t.get().length;a<=r&&(o=a,n=t.get().charCodeAt(o-1)in rtl.createSet(48,e.charCodeAt(),69,43)||t.get().charAt(o-1)===s);a++);return n&&"-"===t.get().charAt(0)&&pas.System.Delete(t,1,1),n},e.FormatNumberCurrency=function(t,i,s){var n,o,a,r,l="",h=0;if(a=s.DecimalSeparator,r=s.ThousandSeparator,o=s.CurrencyString,-1===i?i=s.CurrencyDecimals:i>18&&(i=18),(n="-"===(l=rtl.floatToStr(t/1e4,0,i)).charAt(0))&&pas.System.Delete({get:function(){return l},set:function(t){l=t}},1,1),h=pas.System.Pos(".",l),""!==r)for(0!==h?l=e.ReplaceDecimalSep(l,a):h=l.length+1,h-=3;h>1;)pas.System.Insert(r,{get:function(){return l},set:function(t){l=t}},h),h-=3;if(n&&e.RemoveLeadingNegativeSign({get:function(){return l},set:function(t){l=t}},a,r),n){var p=s.NegCurrFormat;0===p?l="("+o+l+")":1===p?l="-"+o+l:2===p?l=o+"-"+l:3===p?l=o+l+"-":4===p?l="("+l+o+")":5===p?l="-"+l+o:6===p?l=l+"-"+o:7===p?l=l+o+"-":8===p?l="-"+l+" "+o:9===p?l="-"+o+" "+l:10===p?l=l+" "+o+"-":11===p?l=o+" "+l+"-":12===p?l=o+" -"+l:13===p?l=l+"- "+o:14===p?l="("+o+" "+l+")":15===p&&(l="("+l+" "+o+")")}else{var c=s.CurrencyFormat;0===c?l=o+l:1===c?l+=o:2===c?l=o+" "+l:3===c&&(l=l+" "+o)}return l},e.RESpecials="([\\$\\+\\[\\]\\(\\)\\\\\\.\\*\\^\\?\\|])",e.IntTryStrToInt=function(e,i,s){var n,o,a=10,r="";if(r=e,0!==pas.System.Pos(s,r)||0!==pas.System.Pos(".",r)||0!==pas.System.Pos(":",r)||pas.System.Pos("-",r)>1)return!1;var l=pas.System.Copy(r,1,1);return"$"===l?a=16:"&"===l?a=8:"%"===l&&(a=2),(16===a||0===pas.System.Pos("e",t.LowerCase(r)))&&(10!==a&&pas.System.Delete({get:function(){return r},set:function(t){r=t}},1,1),o=parseInt(r,a),(n=!isNaN(o))&&i.set(rtl.trunc(o)),n)},e.InitGlobalFormatSettings=function(){t.FormatSettings.$assign(t.TFormatSettings.Create()),t.TimeSeparator=t.FormatSettings.TimeSeparator,t.DateSeparator=t.FormatSettings.DateSeparator,t.ShortDateFormat=t.FormatSettings.ShortDateFormat,t.LongDateFormat=t.FormatSettings.LongDateFormat,t.ShortTimeFormat=t.FormatSettings.ShortTimeFormat,t.LongTimeFormat=t.FormatSettings.LongTimeFormat,t.DecimalSeparator=t.FormatSettings.DecimalSeparator,t.ThousandSeparator=t.FormatSettings.ThousandSeparator,t.TimeAMString=t.FormatSettings.TimeAMString,t.TimePMString=t.FormatSettings.TimePMString,t.CurrencyFormat=t.FormatSettings.CurrencyFormat,t.NegCurrFormat=t.FormatSettings.NegCurrFormat,t.CurrencyDecimals=t.FormatSettings.CurrencyDecimals,t.CurrencyString=t.FormatSettings.CurrencyString}},t.$init=function(){e.InitGlobalFormatSettings(),t.ShortMonthNames=e.DefaultShortMonthNames.slice(0),t.LongMonthNames=e.DefaultLongMonthNames.slice(0),t.ShortDayNames=e.DefaultShortDayNames.slice(0),t.LongDayNames=e.DefaultLongDayNames.slice(0)}}),[]),rtl.module("TypInfo",["System","SysUtils","Types","RTLConsts","JS"],(function(){"use strict";var t=this,e=t.$impl;this.pfGetFunction=1,this.pfSetProcedure=2,this.pfHasIndex=16,rtl.createClass(this,"EPropertyError",pas.SysUtils.Exception,(function(){})),this.GetPropInfo=function(t,e){var i=null,s=null,n=0,o=null;for(o=t;null!==o;){if(s=o.members[e],rtl.isExt(s,rtl.tTypeMemberProperty))return s;if(!rtl.isExt(o,rtl.tTypeInfoClass))break;o=o.ancestor}i=null;do{for(var a=0,r=t.properties.length-1;a<=r;a++)if(n=a,0===pas.SysUtils.CompareText(e,t.properties[n]))return s=t.members[t.properties[n]],rtl.isExt(s,rtl.tTypeMemberProperty)&&(i=s),i;if(!rtl.isExt(t,rtl.tTypeInfoClass))break;t=t.ancestor}while(null!==t);return i},this.GetPropInfo$1=function(e,i,s){var n=null;return n=t.GetPropInfo(e,i),rtl.neSet(s,{})&&null!==n&&!(n.typeinfo.kind in s)&&(n=null),n},this.GetPropInfo$2=function(e,i){return t.GetPropInfo$1(e.$rtti,i,{})},this.FindPropInfo=function(e,i){var s;if(null===(s=t.GetPropInfo(e.$rtti,i)))throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrPropertyNotFound"),pas.System.VarRecs(18,i)]);return s},this.GetJSValueProp$1=function(i,s){var n=void 0,o=e.GetPropGetterKind(s);if(0===o)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SCantReadPropertyS"),pas.System.VarRecs(18,s.name)]);if(1===o)n=i[s.getter];else if(2===o)n=(16&s.flags)>0?i[s.getter](s.index):i[s.getter]();else if(3===o)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SIndexedPropertyNeedsParams"),pas.System.VarRecs(18,s.name)]);return n},this.GetJSValueProp$3=function(e,i){return t.GetJSValueProp$1(e,i)},this.SetJSValueProp$1=function(i,s,n){var o=e.GetPropSetterKind(s);if(0===o)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SCantWritePropertyS"),pas.System.VarRecs(18,s.name)]);if(1===o)i[s.setter]=n;else if(2===o)(16&s.flags)>0?i[s.setter](s.index,n):i[s.setter](n);else if(3===o)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SIndexedPropertyNeedsParams"),pas.System.VarRecs(18,s.name)])},this.SetJSValueProp$3=function(e,i,s){t.SetJSValueProp$1(e,i,s)},this.GetOrdProp$1=function(e,i){var s=0,n="",o=0,a=void 0;if(5===i.typeinfo.kind)for(n in s=0,t.GetJSValueProp$3(e,i))(o=parseInt(n,10))<32&&(s+=1<<o);else 2===i.typeinfo.kind?(a=t.GetJSValueProp$3(e,i),s=rtl.isNumber(a)?rtl.trunc(a):""===(n=""+a)?0:n.charCodeAt(0)):s=rtl.trunc(t.GetJSValueProp$3(e,i));return s},this.SetMethodProp=function(e,i,s){var n,o=null;o=null===(n=s.Code)?null:rtl.isFunction(n)?n.scope===s.Data&&(rtl.isFunction(n.fn)||rtl.isString(n.fn))?n:rtl.isString(n.fn)?rtl.createCallback(s.Data,""+n.fn):rtl.createCallback(s.Data,n):rtl.createCallback(s.Data,n),t.SetJSValueProp$3(e,i,o)},this.SetMethodProp$1=function(e,i,s){t.SetMethodProp(e,t.FindPropInfo(e,i),s)},t.$implcode=function(){e.TGetterKind={0:"gkNone",gkNone:0,1:"gkField",gkField:1,2:"gkFunction",gkFunction:2,3:"gkFunctionWithParams",gkFunctionWithParams:3},e.GetPropGetterKind=function(t){return""===t.getter?0:(1&t.flags)>0?rtl.length(t.params)>0?3:2:1},e.TSetterKind={0:"skNone",skNone:0,1:"skField",skField:1,2:"skProcedure",skProcedure:2,3:"skProcedureWithParams",skProcedureWithParams:3},e.GetPropSetterKind=function(t){return""===t.setter?0:(2&t.flags)>0?rtl.length(t.params)>0?3:2:1}}}),[]),rtl.module("Web",["System","Types","JS"],(function(){"use strict";rtl.createClassExt(this,"TJSFocusEvent",Event,"",(function(){this.$init=function(){},this.$final=function(){}})),this.$rtti.$ExtClass("TJSXMLHttpRequest",{ancestor:this.$rtti.TJSXMLHttpRequestEventTarget,jsclass:"XMLHttpRequest"}),rtl.createClass(this,"TJSKeyNames",pas.System.TObject,(function(){this.Alt="Alt",this.CapsLock="CapsLock",this.Control="Control",this.Shift="Shift",this.Enter="Enter",this.Tab="Tab",this.ArrowDown="ArrowDown",this.ArrowLeft="ArrowLeft",this.ArrowRight="ArrowRight",this.ArrowUp="ArrowUp",this._End="End",this.Home="Home",this.PageDown="PageDown",this.PageUp="PageUp",this.BackSpace="Backspace",this.Delete="Delete",this.Insert="Insert",this.Escape="Escape",this.Pause="Pause",this.F1="F1",this.F2="F2",this.F3="F3",this.F4="F4",this.F5="F5",this.F6="F6",this.F7="F7",this.F8="F8",this.F9="F9",this.F10="F10",this.F11="F11",this.F12="F12",this.F13="F13",this.F14="F14",this.F15="F15",this.F16="F16",this.F17="F17",this.F18="F18",this.F19="F19",this.F20="F20"}))})),rtl.module("Classes",["System","RTLConsts","Types","SysUtils","JS","TypInfo"],(function(){"use strict";var t=this,e=t.$impl;this.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),rtl.createClass(this,"EListError",pas.SysUtils.Exception,(function(){})),rtl.createClass(this,"EStringListError",this.EListError,(function(){})),rtl.createClass(this,"EComponentError",pas.SysUtils.Exception,(function(){})),this.TAlignment={0:"taLeftJustify",taLeftJustify:0,1:"taRightJustify",taRightJustify:1,2:"taCenter",taCenter:2},rtl.createClass(this,"TFPList",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=[],this.FCount=0,this.FCapacity=0},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]},this.Put=function(t,e){(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]=e},this.SetCapacity=function(t){t<this.FCount&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),""+t),t!==this.FCapacity&&(this.FList=rtl.arraySetLength(this.FList,void 0,t),this.FCapacity=t)},this.SetCount=function(t){t<0&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCountError"),""+t),t>this.FCount&&t>this.FCapacity&&this.SetCapacity(t),this.FCount=t},this.RaiseIndexError=function(t){this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t)},this.Destroy=function(){this.Clear(),pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return this.FCount===this.FCapacity&&this.Expand(),this.FList[this.FCount]=t,e=this.FCount,this.FCount+=1,e},this.Clear=function(){rtl.length(this.FList)>0&&(this.SetCount(0),this.SetCapacity(0))},this.Delete=function(t){(t<0||t>=this.FCount)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),this.FCount=this.FCount-1,this.FList.splice(t,1),this.FCapacity-=1},this.Error=function(e,i){throw t.EListError.$create("CreateFmt",[e,pas.System.VarRecs(18,i)])},this.Expand=function(){var t=0;return this.FCount<this.FCapacity||(t=4,this.FCapacity>3&&(t+=4),this.FCapacity>8&&(t+=8),this.FCapacity>127&&(t+=this.FCapacity>>>2),this.SetCapacity(this.FCapacity+t),this),this},this.IndexOf=function(t){var e,i=0;for(i=0,e=this.FCount;i<e&&this.FList[i]!=t;)i+=1;return i>=e&&(i=-1),i},this.IndexOfItem=function(t,e){var i=0;if(0===e)i=this.IndexOf(t);else for(i=this.FCount-1;i>=0&&this.FList[i]!=t;)i-=1;return i},this.Insert=function(t,e){(t<0||t>this.FCount)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),this.FList.splice(t,0,e),this.FCapacity+=1,this.FCount+=1},this.Last=function(){return 0===this.FCount?null:this.Get(this.FCount-1)},this.Move=function(t,e){var i;(t<0||t>this.FCount-1)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),(e<0||e>this.FCount-1)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+e),t!==e&&(i=this.FList[t],this.FList.splice(t,1),this.FList.splice(e,0,i))},this.Remove=function(t){var e;return-1!==(e=this.IndexOf(t))&&this.Delete(e),e}})),this.TListNotification={0:"lnAdded",lnAdded:0,1:"lnExtracted",lnExtracted:1,2:"lnDeleted",lnDeleted:2},rtl.createClass(this,"TList",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=null},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return this.FList.Get(t)},this.Put=function(t,e){var i;i=this.Get(t),this.FList.Put(t,e),pas.System.Assigned(i)&&this.Notify(i,2),pas.System.Assigned(e)&&this.Notify(e,0)},this.Notify=function(t,e){pas.System.Assigned(t)},this.SetCount=function(t){if(t<this.FList.FCount)for(;this.FList.FCount>t;)this.Delete(this.FList.FCount-1);else this.FList.SetCount(t)},this.GetCount=function(){return this.FList.FCount},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FList=t.TFPList.$create("Create"),this},this.Destroy=function(){null!=this.FList&&this.Clear(),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FList},set:function(t){this.p.FList=t}})},this.Add=function(t){var e;return e=this.FList.Add(t),pas.System.Assigned(t)&&this.Notify(t,0),e},this.Clear=function(){for(;this.FList.FCount>0;)this.Delete(this.GetCount()-1)},this.Delete=function(t){var e;e=this.FList.Get(t),this.FList.Delete(t),pas.System.Assigned(e)&&this.Notify(e,2)},this.IndexOf=function(t){return this.FList.IndexOf(t)},this.Insert=function(t,e){this.FList.Insert(t,e),pas.System.Assigned(e)&&this.Notify(e,0)},this.Move=function(t,e){this.FList.Move(t,e)},this.Remove=function(t){var e;return-1!==(e=this.IndexOf(t))&&this.Delete(e),e}})),rtl.createClass(this,"TPersistent",pas.System.TObject,(function(){this.AssignError=function(t){var e="";throw e=null!==t?t.$classname:"Nil",pas.SysUtils.EConvertError.$create("Create$1",["Cannot assign a "+e+" to a "+this.$classname+"."])},this.AssignTo=function(t){t.AssignError(this)},this.Assign=function(t){null!==t?t.AssignTo(this):this.AssignError(null)},this.SetEvent=function(t,e,i){this.SetEvent$1(this,t,e,i)},this.SetEvent$1=function(t,e,i,s){var n=pas.System.TMethod.$new();n.Code=e.$class.MethodAddress(s),null!=n.Code&&(n.Data=e,pas.TypInfo.SetMethodProp$1(t,i,n))}})),rtl.createClass(this,"TStrings",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FSpecialCharsInited=!1,this.FAlwaysQuote=!1,this.FQuoteChar="\0",this.FDelimiter="\0",this.FNameValueSeparator="\0",this.FUpdateCount=0,this.FLBS=0,this.FSkipLastLineBreak=!1,this.FStrictDelimiter=!1,this.FLineBreak=""},this.GetValue=function(t){var e,i="",s="";return i="",-1!==(e=this.IndexOfName(t))&&this.GetNameValue(e,{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}}),i},this.SetDelimiter=function(t){this.CheckSpecialChars(),this.FDelimiter=t},this.DoSetTextStr=function(t,e){var i="",s=0;try{for(this.BeginUpdate(),e&&this.Clear(),s=1;this.GetNextLinebreak(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}});)this.Add(i)}finally{this.EndUpdate()}},this.GetNameValueSeparator=function(){return this.CheckSpecialChars(),this.FNameValueSeparator},this.SetLineBreak=function(t){this.CheckSpecialChars(),this.FLineBreak=t},this.GetSkipLastLineBreak=function(){return this.CheckSpecialChars(),this.FSkipLastLineBreak},this.SetSkipLastLineBreak=function(t){this.CheckSpecialChars(),this.FSkipLastLineBreak=t},this.Error=function(e,i){throw t.EStringListError.$create("CreateFmt",[e,pas.System.VarRecs(18,pas.SysUtils.IntToStr(i))])},this.GetCapacity=function(){return this.GetCount()},this.GetObject=function(t){return null,null},this.GetTextStr=function(){var t="",e=0,i="";if(this.CheckSpecialChars(),this.FLineBreak!==pas.System.sLineBreak)i=this.FLineBreak;else{var s=this.FLBS;0===s?i="\n":1===s?i="\r\n":2===s&&(i="\r")}t="";for(var n=0,o=this.GetCount()-1;n<=o;n++)e=n,t+=this.Get(e),(e<this.GetCount()-1||!this.GetSkipLastLineBreak())&&(t+=i);return t},this.PutObject=function(t,e){},this.SetTextStr=function(t){this.CheckSpecialChars(),this.DoSetTextStr(t,!0)},this.SetUpdateState=function(t){},this.DoCompareText=function(t,e){return pas.SysUtils.CompareText(t,e)},this.SetDelimitedText=function(t){var e=0,i=0,s=!1;this.CheckSpecialChars(),this.BeginUpdate(),e=1,i=1,s=!1;try{if(this.Clear(),this.FStrictDelimiter)for(;e<=t.length;){if(s&&e<=t.length&&t.charAt(e-1)===this.FDelimiter&&(e+=1),e<=t.length)if(t.charAt(e-1)===this.FQuoteChar){for(i=e+1;i<=t.length&&(t.charAt(i-1)!==this.FQuoteChar||i+1<=t.length&&t.charAt(i+1-1)===this.FQuoteChar);)i<=t.length&&t.charAt(i-1)===this.FQuoteChar?i+=2:i+=1;this.Add(pas.SysUtils.StringReplace(pas.System.Copy(t,e+1,i-e-1),this.FQuoteChar+this.FQuoteChar,this.FQuoteChar,rtl.createSet(0))),e=i+1}else{for(i=e;i<=t.length&&t.charAt(i-1)!==this.FDelimiter;)i+=1;this.Add(pas.System.Copy(t,e,i-e)),e=i}else s&&this.Add("");s=!0}else for(;e<=t.length;){for(s&&e<=t.length&&t.charAt(e-1)===this.FDelimiter&&(e+=1);e<=t.length&&t.charCodeAt(e-1)<=32;)e+=1;if(e<=t.length)if(t.charAt(e-1)===this.FQuoteChar){for(i=e+1;i<=t.length&&(t.charAt(i-1)!==this.FQuoteChar||i+1<=t.length&&t.charAt(i+1-1)===this.FQuoteChar);)i<=t.length&&t.charAt(i-1)===this.FQuoteChar?i+=2:i+=1;this.Add(pas.SysUtils.StringReplace(pas.System.Copy(t,e+1,i-e-1),this.FQuoteChar+this.FQuoteChar,this.FQuoteChar,rtl.createSet(0))),e=i+1}else{for(i=e;i<=t.length&&t.charCodeAt(i-1)>32&&t.charAt(i-1)!==this.FDelimiter;)i+=1;this.Add(pas.System.Copy(t,e,i-e)),e=i}else s&&this.Add("");for(;e<=t.length&&t.charCodeAt(e-1)<=32;)e+=1;s=!0}}finally{this.EndUpdate()}},this.CheckSpecialChars=function(){this.FSpecialCharsInited||(this.FQuoteChar='"',this.FDelimiter=",",this.FNameValueSeparator="=",this.FLBS=pas.System.DefaultTextLineBreakStyle,this.FSpecialCharsInited=!0,this.FLineBreak=pas.System.sLineBreak)},this.GetNextLinebreak=function(t,e,i){var s,n,o=!1,a=0,r=0;return e.set(""),o=!1,t.length-i.get()<0?o:(s=t.indexOf("\n",i.get()-1)+1,n=t.indexOf("\r",i.get()-1)+1,r=1,s>0&&n>0?(s-n==1&&(r=2),a=s<n?s:n):a=s>0&&n<1?s:n>0&&s<1?n:t.length+1,e.set(pas.System.Copy(t,i.get(),a-i.get())),i.set(a+r),o=!0)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FAlwaysQuote=!1,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return e=this.GetCount(),this.Insert(this.GetCount(),t),e},this.AddObject=function(t,e){var i;return i=this.Add(t),this.PutObject(i,e),i},this.AddStrings=function(t){for(var e=0,i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.AddObject(t.Get(e),t.GetObject(e))},this.Assign=function(e){var i=null;if(t.TStrings.isPrototypeOf(e)){i=e,this.BeginUpdate();try{this.Clear(),this.FSpecialCharsInited=i.FSpecialCharsInited,this.FQuoteChar=i.FQuoteChar,this.FDelimiter=i.FDelimiter,this.FNameValueSeparator=i.FNameValueSeparator,this.FLBS=i.FLBS,this.FLineBreak=i.FLineBreak,this.AddStrings(i)}finally{this.EndUpdate()}}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){0===this.FUpdateCount&&this.SetUpdateState(!0),this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.SetUpdateState(!1)},this.IndexOf=function(t){var e=0;for(e=0;e<this.GetCount()&&0!==this.DoCompareText(this.Get(e),t);)e+=1;return e===this.GetCount()&&(e=-1),e},this.IndexOfName=function(t){var e=0,i=0,s="";for(this.CheckSpecialChars(),e=0;e<this.GetCount();){if(s=this.Get(e),(i=pas.System.Pos(this.FNameValueSeparator,s)-1)>=0&&0===this.DoCompareText(t,pas.System.Copy(s,1,i)))return e;e+=1}return e=-1},this.GetNameValue=function(t,e,i){var s;this.CheckSpecialChars(),i.set(this.Get(t)),0!==(s=pas.System.Pos(this.FNameValueSeparator,i.get()))?(e.set(pas.System.Copy(i.get(),1,s-1)),i.set(pas.System.Copy(i.get(),s+1,i.get().length-s))):e.set("")},this.$rtti.addMethod("Create$1",2,[])})),rtl.recNewT(this,"TStringItem",(function(){this.FString="",this.FObject=null,this.$eq=function(t){return this.FString===t.FString&&this.FObject===t.FObject},this.$assign=function(t){return this.FString=t.FString,this.FObject=t.FObject,this}})),this.$rtti.$Class("TStringList"),this.TStringsSortStyle={0:"sslNone",sslNone:0,1:"sslUser",sslUser:1,2:"sslAuto",sslAuto:2},rtl.createClass(this,"TStringList",this.TStrings,(function(){this.$init=function(){t.TStrings.$init.call(this),this.FList=[],this.FCount=0,this.FOnChange=null,this.FOnChanging=null,this.FDuplicates=0,this.FCaseSensitive=!1,this.FForceSort=!1,this.FOwnsObjects=!1,this.FSortStyle=0},this.$final=function(){this.FList=void 0,this.FOnChange=void 0,this.FOnChanging=void 0,t.TStrings.$final.call(this)},this.ExchangeItemsInt=function(t,e){var i,s;i=this.FList[t].FString,s=this.FList[t].FObject,this.FList[t].FString=this.FList[e].FString,this.FList[t].FObject=this.FList[e].FObject,this.FList[e].FString=i,this.FList[e].FObject=s},this.GetSorted=function(){return this.FSortStyle in rtl.createSet(1,2)},this.Grow=function(){var t=0;(t=this.GetCapacity())>=256?t+=rtl.trunc(t/4):0===t?t=4:t*=4,this.SetCapacity(t)},this.InternalClear=function(t,e){var i=0;if(t<this.FCount){if(this.FOwnsObjects)for(var s=t,n=this.FCount-1;s<=n;s++)i=s,this.FList[i].FString="",pas.SysUtils.FreeAndNil({p:this.FList[i],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}});else for(var o=t,a=this.FCount-1;o<=a;o++)i=o,this.FList[i].FString="";this.FCount=t}e||this.SetCapacity(0)},this.QuickSort=function(t,e,i){var s=0,n=0,o=0;if(e-t<=1)t<e&&i(this,t,e)>0&&this.ExchangeItems(t,e);else{for(n=t,o=e,s=t+pas.System.Random(e-t);n<o;){for(;n<s&&i(this,n,s)<=0;)n+=1;for(;o>s&&i(this,o,s)>0;)o-=1;this.ExchangeItems(n,o),s===n?s=o:s===o&&(s=n)}s-1>=t&&this.QuickSort(t,s-1,i),s+1<=e&&this.QuickSort(s+1,e,i)}},this.CheckIndex=function(t){(t<0||t>=this.FCount)&&this.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),t)},this.ExchangeItems=function(t,e){this.ExchangeItemsInt(t,e)},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Changing=function(){0===this.FUpdateCount&&null!=this.FOnChanging&&this.FOnChanging(this)},this.Get=function(t){return this.CheckIndex(t),this.FList[t].FString},this.GetCapacity=function(){return rtl.length(this.FList)},this.GetCount=function(){return this.FCount},this.GetObject=function(t){return this.CheckIndex(t),this.FList[t].FObject},this.PutObject=function(t,e){this.CheckIndex(t),this.Changing(),this.FList[t].FObject=e,this.Changed()},this.SetCapacity=function(e){e<0&&this.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),e),e!==this.GetCapacity()&&(this.FList=rtl.arraySetLength(this.FList,t.TStringItem,e))},this.SetUpdateState=function(t){t?this.Changing():this.Changed()},this.InsertItem=function(t,e){this.InsertItem$1(t,e,null)},this.InsertItem$1=function(e,i,s){var n=t.TStringItem.$new();this.Changing(),this.FCount===this.GetCapacity()&&this.Grow(),n.FString=i,n.FObject=s,this.FList.splice(e,0,n),this.FCount+=1,this.Changed()},this.DoCompareText=function(t,e){return this.FCaseSensitive?pas.SysUtils.CompareStr(t,e):pas.SysUtils.CompareText(t,e)},this.Destroy=function(){this.InternalClear(0,!1),t.TStrings.Destroy.call(this)},this.Add=function(t){var e=0;if(2!==this.FSortStyle)e=this.FCount;else if(this.Find(t,{get:function(){return e},set:function(t){e=t}})){var i=this.FDuplicates;if(0===i)return e;2===i&&this.Error(rtl.getResStr(pas.RTLConsts,"SDuplicateString"),0)}return this.InsertItem(e,t),e},this.Clear=function(){0!==this.FCount&&(this.Changing(),this.InternalClear(0,!1),this.Changed())},this.Delete=function(t){this.CheckIndex(t),this.Changing(),this.FOwnsObjects&&pas.SysUtils.FreeAndNil({p:this.FList[t],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}}),this.FList.splice(t,1),this.FList[this.GetCount()-1].FString="",this.FList[this.GetCount()-1].FObject=null,this.FCount-=1,this.Changed()},this.Find=function(e,i){var s=!1,n=0,o=0,a=0,r=0;if(s=!1,i.set(-1),!this.GetSorted())throw t.EListError.$create("Create$1",[rtl.getResStr(pas.RTLConsts,"SErrFindNeedsSortedList")]);for(n=0,o=this.GetCount()-1;n<=o;)a=n+rtl.trunc((o-n)/2),(r=this.DoCompareText(e,this.FList[a].FString))>0?n=a+1:(o=a-1,0===r&&(s=!0,1!==this.FDuplicates&&(n=a)));return i.set(n),s},this.IndexOf=function(e){var i=0;return this.GetSorted()?this.Find(e,{get:function(){return i},set:function(t){i=t}})||(i=-1):i=t.TStrings.IndexOf.call(this,e),i},this.Insert=function(t,e){2===this.FSortStyle?this.Error(rtl.getResStr(pas.RTLConsts,"SSortedListError"),0):((t<0||t>this.FCount)&&this.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),t),this.InsertItem(t,e))},this.Sort=function(){this.CustomSort(e.StringListAnsiCompare)},this.CustomSort=function(t){(this.FForceSort||2!==this.FSortStyle)&&this.FCount>1&&(this.Changing(),this.QuickSort(0,this.FCount-1,t),this.Changed())}})),rtl.createClass(this,"TCollectionItem",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FCollection=null,this.FID=0},this.$final=function(){this.FCollection=void 0,t.TPersistent.$final.call(this)},this.GetIndex=function(){return null!=this.FCollection?this.FCollection.FItems.IndexOf(this):-1},this.SetCollection=function(t){t!==this.FCollection&&(null!=this.FCollection&&this.FCollection.RemoveItem(this),null!=t&&t.InsertItem(this))},this.Changed=function(t){null!==this.FCollection&&0===this.FCollection.FUpdateCount&&(t?this.FCollection.Update(null):this.FCollection.Update(this))},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.SetCollection(t),this},this.Destroy=function(){this.SetCollection(null),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[["ACollection",t.$rtti.TCollection]])})),this.TCollectionNotification={0:"cnAdded",cnAdded:0,1:"cnExtracting",cnExtracting:1,2:"cnDeleting",cnDeleting:2},rtl.createClass(this,"TCollection",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FItemClass=null,this.FItems=null,this.FUpdateCount=0,this.FNextID=0,this.FPropName=""},this.$final=function(){this.FItemClass=void 0,this.FItems=void 0,t.TPersistent.$final.call(this)},this.GetCount=function(){return this.FItems.FCount},this.InsertItem=function(t){this.FItemClass.isPrototypeOf(t)&&(this.FItems.Add(t),t.FCollection=this,t.FID=this.FNextID,this.FNextID+=1,this.SetItemName(t),this.Notify(t,0),this.Changed())},this.RemoveItem=function(t){var e;this.Notify(t,1),-1!==(e=this.FItems.IndexOfItem(t,1))&&this.FItems.Delete(e),t.FCollection=null,this.Changed()},this.DoClear=function(){for(var t=null;this.FItems.FCount>0;)null!=(t=rtl.getObject(this.FItems.Last()))&&t.$destroy("Destroy")},this.Changed=function(){0===this.FUpdateCount&&this.Update(null)},this.GetItem=function(t){return rtl.getObject(this.FItems.Get(t))},this.SetItemName=function(t){},this.Update=function(t){},this.Notify=function(t,e){},this.Create$1=function(e){return pas.System.TObject.Create.call(this),this.FItemClass=e,this.FItems=t.TFPList.$create("Create"),this},this.Destroy=function(){this.FUpdateCount=1;try{this.DoClear()}finally{this.FUpdateCount=0}null!=this.FItems&&this.FItems.$destroy("Destroy"),pas.System.TObject.Destroy.call(this)},this.Add=function(){return this.FItemClass.$create("Create$1",[this])},this.Assign=function(e){var i=0;if(t.TCollection.isPrototypeOf(e)){this.Clear();for(var s=0,n=e.GetCount()-1;s<=n;s++)i=s,this.Add().Assign(e.GetItem(i))}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.Clear=function(){if(0!==this.FItems.FCount){this.BeginUpdate();try{this.DoClear()}finally{this.EndUpdate()}}},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.Changed()},this.$rtti.addMethod("Create$1",2,[["AItemClass",t.$rtti.TCollectionItemClass]])})),rtl.createClass(this,"TOwnedCollection",this.TCollection,(function(){this.$init=function(){t.TCollection.$init.call(this),this.FOwner=null},this.$final=function(){this.FOwner=void 0,t.TCollection.$final.call(this)},this.Create$2=function(e,i){return this.FOwner=e,t.TCollection.Create$1.call(this,i),this},this.$rtti.addMethod("Create$2",2,[["AOwner",t.$rtti.TPersistent],["AItemClass",t.$rtti.TCollectionItemClass]])})),this.TOperation={0:"opInsert",opInsert:0,1:"opRemove",opRemove:1},this.TComponentStateItem={0:"csLoading",csLoading:0,1:"csReading",csReading:1,2:"csWriting",csWriting:2,3:"csDestroying",csDestroying:3,4:"csDesigning",csDesigning:4,5:"csAncestor",csAncestor:5,6:"csUpdating",csUpdating:6,7:"csFixups",csFixups:7,8:"csFreeNotification",csFreeNotification:8,9:"csInline",csInline:9,10:"csDesignInstance",csDesignInstance:10},this.TComponentStyleItem={0:"csInheritable",csInheritable:0,1:"csCheckPropAvail",csCheckPropAvail:1,2:"csSubComponent",csSubComponent:2,3:"csTransient",csTransient:3},this.$rtti.$inherited("TComponentName",rtl.string,{}),rtl.createClass(this,"TComponent",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FOwner=null,this.FName="",this.FTag=0,this.FComponents=null,this.FFreeNotifies=null,this.FComponentState={},this.FComponentStyle={},this.FLeft=0,this.FTop=0},this.$final=function(){this.FOwner=void 0,this.FComponents=void 0,this.FFreeNotifies=void 0,this.FComponentState=void 0,this.FComponentStyle=void 0,t.TPersistent.$final.call(this)},this.GetComponent=function(t){return null==this.FComponents?null:rtl.getObject(this.FComponents.Get(t))},this.GetComponentCount=function(){return null==this.FComponents?0:this.FComponents.FCount},this.Insert=function(e){null==this.FComponents&&(this.FComponents=t.TFPList.$create("Create")),this.FComponents.Add(e),e.FOwner=this},this.Remove=function(t){t.FOwner=null,null!=this.FComponents&&(this.FComponents.Remove(t),0===this.FComponents.FCount&&(this.FComponents.$destroy("Destroy"),this.FComponents=null))},this.RemoveNotification=function(t){null!==this.FFreeNotifies&&(this.FFreeNotifies.Remove(t),0===this.FFreeNotifies.FCount&&(this.FFreeNotifies.$destroy("Destroy"),this.FFreeNotifies=null,this.FComponentState=rtl.excludeSet(this.FComponentState,8)))},this.SetReference=function(t){var e=null,i=null,s=null;""!==this.FName&&null!=this.FOwner&&(s=this.FOwner,null!=(e=this.FOwner.$class.FieldAddress(this.FName))&&(i=t?this:null,s[""+e.name]=i))},this.ChangeName=function(t){this.FName=t},this.Loaded=function(){this.FComponentState=rtl.excludeSet(this.FComponentState,0)},this.Loading=function(){this.FComponentState=rtl.includeSet(this.FComponentState,0)},this.Notification=function(t,e){var i=0;if(1===e&&this.RemoveFreeNotification(t),null!=this.FComponents)for(i=this.FComponents.FCount-1;i>=0;)rtl.getObject(this.FComponents.Get(i)).Notification(t,e),(i-=1)>=this.FComponents.FCount&&(i=this.FComponents.FCount-1)},this.SetDesigning=function(t,e){var i=0;if(this.FComponentState=t?rtl.includeSet(this.FComponentState,4):rtl.excludeSet(this.FComponentState,4),null!=this.FComponents&&e)for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)i=s,rtl.getObject(this.FComponents.Get(i)).SetDesigning(t,!0)},this.SetName=function(e){if(this.FName!==e){if(""!==e&&!pas.SysUtils.IsValidIdent(e,!1,!1))throw t.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidName"),pas.System.VarRecs(18,e)]);null!=this.FOwner?this.FOwner.ValidateRename(this,this.FName,e):this.ValidateRename(null,this.FName,e),this.SetReference(!1),this.ChangeName(e),this.SetReference(!0)}},this.SetChildOrder=function(t,e){},this.ValidateRename=function(e,i,s){if(null!==e&&0!==pas.SysUtils.CompareText(i,s)&&e.FOwner===this&&null!==this.FindComponent(s))throw t.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SDuplicateName"),pas.System.VarRecs(18,s)]);4 in this.FComponentState&&null!==this.FOwner&&this.FOwner.ValidateRename(e,i,s)},this.ValidateContainer=function(t){t.ValidateInsert(this)},this.ValidateInsert=function(t){},this._AddRef=function(){return-1,-1},this.GetLeft=function(){return this.FLeft},this.GetTop=function(){return this.FTop},this.SetLeft=function(t){this.FLeft=t},this.SetTop=function(t){this.FTop=t},this._Release=function(){return-1,-1},this.Create$1=function(t){return this.FComponentStyle=rtl.createSet(0),null!=t&&t.InsertComponent(this),this},this.Destroy=function(){var t=0,e=null;if(this.Destroying(),null!=this.FFreeNotifies){for(t=this.FFreeNotifies.FCount-1;t>=0;)e=rtl.getObject(this.FFreeNotifies.Get(t)),this.FFreeNotifies.Delete(t),e.Notification(this,1),null===this.FFreeNotifies?t=0:t>this.FFreeNotifies.FCount&&(t=this.FFreeNotifies.FCount),t-=1;pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFreeNotifies},set:function(t){this.p.FFreeNotifies=t}})}this.DestroyComponents(),null!==this.FOwner&&this.FOwner.RemoveComponent(this),pas.System.TObject.Destroy.call(this)},this.BeforeDestruction=function(){3 in this.FComponentState||this.Destroying()},this.DestroyComponents=function(){for(var t=null;null!=this.FComponents;)t=rtl.getObject(this.FComponents.Last()),this.Remove(t),t.$destroy("Destroy")},this.Destroying=function(){var t=0;if(!(3 in this.FComponentState)&&(this.FComponentState=rtl.includeSet(this.FComponentState,3),null!=this.FComponents))for(var e=0,i=this.FComponents.FCount-1;e<=i;e++)t=e,rtl.getObject(this.FComponents.Get(t)).Destroying()},this.QueryInterface=function(t,e){return this.GetInterface(t,e)?0:-2147467262},this.AfterLoadDFMValues=function(){this.EndUpdate(),this.Loaded()},this.BeforeLoadDFMValues=function(){4 in this.FComponentState||this.Loading(),this.BeginUpdate()},this.BeginUpdate=function(){},this.EndUpdate=function(){},this.FindComponent=function(t){var e=null,i=0;if(e=null,""===t||null==this.FComponents)return e;for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)if(i=s,0===pas.SysUtils.CompareText(rtl.getObject(this.FComponents.Get(i)).FName,t))return e=rtl.getObject(this.FComponents.Get(i));return e},this.FreeNotification=function(e){null!==this.FOwner&&e===this.FOwner||(null==this.FFreeNotifies&&(this.FFreeNotifies=t.TFPList.$create("Create")),-1===this.FFreeNotifies.IndexOf(e)&&(this.FFreeNotifies.Add(e),e.FreeNotification(this)))},this.RemoveFreeNotification=function(t){this.RemoveNotification(t),t.RemoveNotification(this)},this.InsertComponent=function(t){t.ValidateContainer(this),this.ValidateRename(t,"",t.FName),null!==t.FOwner&&t.FOwner.RemoveComponent(t),this.Insert(t),4 in this.FComponentState&&t.SetDesigning(!0,!0),this.Notification(t,0)},this.RemoveComponent=function(t){this.Notification(t,1),this.Remove(t),t.SetDesigning(!1,!0),this.ValidateRename(t,t.FName,"")},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",e]]),e.addProperty("Name",6,t.$rtti.TComponentName,"FName","SetName"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag",{Default:0})})),rtl.createClass(this,"TLoadHelper",pas.System.TObject,(function(){})),rtl.createClass(this,"ComponentPlatformsAttribute",pas.System.TCustomAttribute,(function(){this.$init=function(){pas.System.TCustomAttribute.$init.call(this),this.FPlatforms=0},this.Create$1=function(t){return this.FPlatforms=t,this},this.$rtti.addMethod("Create$1",2,[["Platforms",rtl.longword,2]])})),this.TShiftState$a={0:"ssShift",ssShift:0,1:"ssAlt",ssAlt:1,2:"ssCtrl",ssCtrl:2,3:"ssLeft",ssLeft:3,4:"ssRight",ssRight:4,5:"ssMIDdle",ssMIDdle:5,6:"ssDouble",ssDouble:6,7:"ssTouch",ssTouch:7,8:"ssPen",ssPen:8,9:"ssCommand",ssCommand:9},this.$rtti.$Enum("TShiftState$a",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.TShiftState$a}),this.$rtti.$Set("TShiftState",{comptype:this.$rtti.TShiftState$a}),this.RegisterClass=function(t){e.ClassList[t.$classname]=t},this.GetClass=function(t){var i=null;return i=null,""===t?i:e.ClassList.hasOwnProperty(t)?i=rtl.getObject(e.ClassList[t]):i},this.SetLoadHelperClass=function(t){var i;return i=e.GlobalLoadHelper,e.GlobalLoadHelper=t,i},t.$implcode=function(){e.GlobalLoadHelper=null,e.StringListAnsiCompare=function(t,e,i){return t.DoCompareText(t.FList[e].FString,t.FList[i].FString)},e.ClassList=null},t.$init=function(){e.ClassList=new Object}}),["Web"]),rtl.module("UITypes",["System"],(function(){"use strict";this.$rtti.$inherited("TFontName",rtl.string,{})})),rtl.module("WEBLib.Consts",["System"],(function(){"use strict";this.$resourcestrings={SWarning:{org:"Warning"},SError:{org:"Error"},SInformation:{org:"Information"},SConfirm:{org:"Confirm"},SOK:{org:"OK"},SCancel:{org:"Cancel"},SYes:{org:"Yes"},SNo:{org:"No"},SAbort:{org:"Abort"},SRetry:{org:"Retry"},SIgnore:{org:"Ignore"},SHelp:{org:"Help"},SClose:{org:"Close"},SAll:{org:"All"},SYesToAll:{org:"Yes to all"},SNoToAll:{org:"No to all"},SWarningFR:{org:"Avertissement"},SErrorFR:{org:"Erreur"},SInformationFR:{org:"Information"},SConfirmFR:{org:"Confirmer"},SOKFR:{org:"OK"},SCancelFR:{org:"Annuler"},SYesFR:{org:"Oui"},SNoFR:{org:"Non"},SAbortFR:{org:"Interrompre"},SRetryFR:{org:"Réessayer"},SIgnoreFR:{org:"Ignorer"},SHelpFR:{org:"Aide"},SCloseFR:{org:"Fermer"},SAllFR:{org:"Tout"},SYesToAllFR:{org:"Oui à tout"},SNoToAllFR:{org:"Non à tout"},SWarningDE:{org:"Warnung"},SErrorDE:{org:"Fehler"},SInformationDE:{org:"Information"},SConfirmDE:{org:"Bestätigen"},SOKDE:{org:"OK"},SCancelDE:{org:"Abbrechen"},SYesDE:{org:"Ja"},SNoDE:{org:"Nein"},SAbortDE:{org:"Abbrechen"},SRetryDE:{org:"Wiederholen"},SIgnoreDE:{org:"Ignorieren"},SHelpDE:{org:"Hilfe"},SCloseDE:{org:"Schließen"},SAllDE:{org:"Alles"},SYesToAllDE:{org:"Ja auf Alles"},SNoToAllDE:{org:"Nein auf Alles"},SWarningES:{org:"Advertencia"},SErrorES:{org:"Error"},SInformationES:{org:"Información"},SConfirmES:{org:"Confirmado"},SOKES:{org:"OK"},SCancelES:{org:"Cancelar"},SYesES:{org:"Sí"},SNoES:{org:"No"},SAbortES:{org:"Abortar"},SRetryES:{org:"Rever"},SIgnoreES:{org:"Ignorar"},SHelpES:{org:"Ayudar"},SCloseES:{org:"Cerrar"},SAllES:{org:"Todos"},SYesToAllES:{org:"Sí a todo"},SNoToAllES:{org:"No a todo"},SWarningNL:{org:"Waarschuwing"},SErrorNL:{org:"Fout"},SInformationNL:{org:"Informatie"},SConfirmNL:{org:"Bevestiging"},SOKNL:{org:"OK"},SCancelNL:{org:"Afbreken"},SYesNL:{org:"Ja"},SNoNL:{org:"Nee"},SAbortNL:{org:"Afbreken"},SRetryNL:{org:"Opnieuw"},SIgnoreNL:{org:"Negeren"},SHelpNL:{org:"Hulp"},SCloseNL:{org:"Sluiten"},SAllNL:{org:"Alles"},SYesToAllNL:{org:"Ja op alles"},SNoToAllNL:{org:"Nee op alles"}}})),rtl.module("WEBLib.Dialogs",["System","Classes","WEBLib.Controls","Web","JS","SysUtils","WEBLib.Graphics"],(function(){"use strict";var t=this,e=t.$impl;this.TMsgDlgType={0:"mtWarning",mtWarning:0,1:"mtError",mtError:1,2:"mtInformation",mtInformation:2,3:"mtConfirmation",mtConfirmation:3,4:"mtCustom",mtCustom:4},this.$rtti.$Enum("TMsgDlgType",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TMsgDlgType}),this.TMsgDlgBtn={0:"mbYes",mbYes:0,1:"mbNo",mbNo:1,2:"mbOK",mbOK:2,3:"mbCancel",mbCancel:3,4:"mbAbort",mbAbort:4,5:"mbRetry",mbRetry:5,6:"mbIgnore",mbIgnore:6,7:"mbAll",mbAll:7,8:"mbNoToAll",mbNoToAll:8,9:"mbYesToAll",mbYesToAll:9,10:"mbHelp",mbHelp:10,11:"mbClose",mbClose:11},this.$rtti.$Enum("TMsgDlgBtn",{minvalue:0,maxvalue:11,ordtype:1,enumtype:this.TMsgDlgBtn}),this.$rtti.$Set("TMsgDlgButtons",{comptype:this.$rtti.TMsgDlgBtn}),rtl.createClass(this,"TCustomDialogButton",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FCaption="",this.FTag=0,this.FElementClassName=""};var t=this.$rtti;t.addProperty("Caption",0,rtl.string,"FCaption","FCaption"),t.addProperty("ElementClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","FElementClassName"),t.addProperty("Tag",0,rtl.longint,"FTag","FTag",{Default:0})})),rtl.createClass(this,"TCustomDialogButtons",pas.Classes.TOwnedCollection,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TMessageDlg",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FOpacity=0,this.FLayer$1=null,this.FDlg=null,this.FCancel=null,this.FMessage="",this.FTitle="",this.FMsgDlgType=0,this.FOnButtonClick=null,this.FOnClose=null,this.FButtons={},this.FDialogProc=null,this.FDialogResult=0,this.FMdx=0,this.FMdy=0,this.FDlgX=0,this.FDlgY=0,this.FCaptured$1=!1,this.FDown=!1,this.FElementTitleClassName="",this.FElementButtonClassName="",this.FElementContentClassName="",this.FDialogText=null,this.FCustomButtons=null,this.FElementDialogClassName="",this.FAutoLanguage=!1},this.$final=function(){this.FLayer$1=void 0,this.FDlg=void 0,this.FCancel=void 0,this.FOnButtonClick=void 0,this.FOnClose=void 0,this.FButtons=void 0,this.FDialogProc=void 0,this.FDialogText=void 0,this.FCustomButtons=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetDialogText=function(t){this.FDialogText.Assign(t)},this.SetCustomButtons=function(t){this.FCustomButtons.Assign(t)},this.CreateElement=function(){var t=null;return 4 in this.FComponentState?t=null:pas["WEBLib.Controls"].TCustomControl.CreateElement.call(this),t};this.GetDialogText=function(t){var e="",i="",s=0;if(e="Undefined",t<this.FDialogText.GetCount()&&(e=this.FDialogText.Get(t)),this.FAutoLanguage){i=pas["WEBLib.WebTools"].GetBrowserLocale(),s=0,1===pas.System.Pos("es",i)&&(s=3),1===pas.System.Pos("fr",i)&&(s=1),1===pas.System.Pos("de",i)&&(s=2),1===pas.System.Pos("nl",i)&&(s=4);var n=s;if(3===n){var o=t;0===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningES"):1===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorES"):2===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationES"):3===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmES"):5===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKES"):6===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelES"):7===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesES"):8===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoES"):9===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortES"):10===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryES"):11===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreES"):12===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllES"):13===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllES"):14===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllES"):15===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpES"):16===o&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseES"))}else if(1===n){var a=t;0===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningFR"):1===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorFR"):2===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationFR"):3===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmFR"):5===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKFR"):6===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelFR"):7===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesFR"):8===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoFR"):9===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortFR"):10===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryFR"):11===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreFR"):12===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllFR"):13===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllFR"):14===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllFR"):15===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpFR"):16===a&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseFR"))}else if(2===n){var r=t;0===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningDE"):1===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorDE"):2===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationDE"):3===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmDE"):5===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKDE"):6===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelDE"):7===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesDE"):8===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoDE"):9===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortDE"):10===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryDE"):11===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreDE"):12===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllDE"):13===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllDE"):14===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllDE"):15===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpDE"):16===r&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseDE"))}else if(4===n){var l=t;0===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningNL"):1===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorNL"):2===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationNL"):3===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmNL"):5===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKNL"):6===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelNL"):7===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesNL"):8===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoNL"):9===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortNL"):10===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryNL"):11===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreNL"):12===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllNL"):13===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllNL"):14===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllNL"):15===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpNL"):16===l&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseNL"))}}return e},this.BindEvents=function(){},this.SetDialogResult=function(t){this.FDialogResult=t,0!==this.FDialogResult&&this.Close()},this.CreateButton=function(t,e,i){var s=null;return(s=document.createElement("BUTTON")).innerHTML=t,1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?(s.setAttribute("type","BUTTON"),s.setAttribute("class","btn "+i),s.setAttribute("data-dismiss","modal-dialog")):(s.style.setProperty("width","100px"),s.style.setProperty("margin-left","5px"),""!==this.FElementButtonClassName?s.setAttribute("class",this.FElementButtonClassName+" "+i):""!==pas["WEBLib.Forms"].Application.FThemeButtonClassName&&s.setAttribute("class",pas["WEBLib.Forms"].Application.FThemeButtonClassName+" "+i)),s.id=t,s.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),s.addEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),e.get()&&(setTimeout((function(){s.focus()}),1),e.set(!1)),s},this.HandleDocMouseMove=function(t){var e=0,i=0,s=null;return this.FDown&&(e=t.screenX-this.FMdx,i=t.screenY-this.FMdy,(s=this.FDlg).style.setProperty("transform",""),s.style.setProperty("position","absolute"),s.style.setProperty("left",pas.SysUtils.IntToStr(Math.round(this.FDlgX+e))+"px"),s.style.setProperty("top",pas.SysUtils.IntToStr(Math.round(this.FDlgY+i))+"px"),(s=this.FCancel).style.setProperty("position","absolute"),s.style.setProperty("top","0"),s.style.setProperty("right","0")),!0,!0},this.HandleDocMouseUp=function(t){return this.FDown=!1,document.body.removeEventListener("mousemove",rtl.createCallback(this,"HandleDocMouseMove")),document.body.removeEventListener("mouseup",rtl.createCallback(this,"HandleDocMouseUp")),!0,!0},this.HandleMouseDown=function(t){var e;return this.FMdx=Math.round(t.screenX),this.FMdy=Math.round(t.screenY),e=this.FDlg.getBoundingClientRect(),this.FDlgX=Math.round(pas.System.Int(e.left)),this.FDlgY=Math.round(pas.System.Int(e.top)),this.FDown=!0,this.FCaptured$1||(this.FCaptured$1=!0,document.body.addEventListener("mousemove",rtl.createCallback(this,"HandleDocMouseMove")),document.body.addEventListener("mouseup",rtl.createCallback(this,"HandleDocMouseUp"))),!0,!0},this.HandleButtonClick=function(t){var e,i=0;if(this.SetDialogResult(0),(e=t.target.getAttribute("id"))===this.GetDialogText(7)?this.SetDialogResult(6):e===this.GetDialogText(8)?this.SetDialogResult(7):e===this.GetDialogText(5)?this.SetDialogResult(1):e===this.GetDialogText(6)?this.SetDialogResult(2):e===this.GetDialogText(9)?this.SetDialogResult(3):e===this.GetDialogText(10)?this.SetDialogResult(4):e===this.GetDialogText(11)?this.SetDialogResult(5):e===this.GetDialogText(12)?this.SetDialogResult(12):e===this.GetDialogText(13)?this.SetDialogResult(13):e===this.GetDialogText(14)?this.SetDialogResult(14):e===this.GetDialogText(15)?this.SetDialogResult(9):e===this.GetDialogText(16)&&this.SetDialogResult(8),0===this.FDialogResult&&this.FCustomButtons.GetCount()>0)for(var s=0,n=this.FCustomButtons.GetCount()-1;s<=n;s++)if(i=s,e===this.FCustomButtons.GetItem$1(i).FCaption){this.SetDialogResult(100+i);break}return null!=this.FOnButtonClick&&this.FOnButtonClick(this),!0,!0},this.HandleKeyDown=function(t){var e,i=!1;return e=this.GetKeyCode(t.key,!0),pas.System.Assigned(e)?(27===e&&this.SetDialogResult(2),i=!0):i},this.InitBootstrapStyle=function(){this.FElementButtonClassName="btn",this.FElementContentClassName="text-body",this.FElementTitleClassName="text-body",this.FElementDialogClassName="shadow-lg p-3 mb-5 bg-white rounded"},this.InsertInputElement=function(t,e){},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FOpacity=.2,this.FMessage="",this.FAutoLanguage=!0,this.FMsgDlgType=2,this.FDialogText=pas.Classes.TStringList.$create("Create$1"),this.FDialogText.SetSkipLastLineBreak(!0),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SWarning")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SError")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SInformation")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SConfirm")),this.FDialogText.Add("Custom"),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SOK")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SCancel")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SYes")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SNo")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SAbort")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SRetry")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SIgnore")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SYesToAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SNoToAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SHelp")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SClose")),this.FMsgDlgType=4,this.FCustomButtons=t.TCustomDialogButtons.$create("Create$2",[this,t.TCustomDialogButton]),this.FCustomButtons.FPropName="CustomButtons"},this.Destroy=function(){rtl.free(this,"FDialogText"),rtl.free(this,"FCustomButtons"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.Close=function(){pas["WEBLib.Forms"].Application.UnLockForm(pas["WEBLib.Forms"].Application.FMainForm),document.body.removeChild(this.FLayer$1),document.body.removeChild(this.FDlg),this.FDown=!1,this.FCaptured$1=!1,null!=this.FOnClose&&this.FOnClose(this),null!=this.FDialogProc&&this.FDialogProc(this.FDialogResult)},this.Show$1=function(){var t=null,i=null,s=null,n=null,o=null,a=null,r=null,l=null,h=null,p=null,c=null,F=null,u="",C="",d="",T="",m="",S="",y="",g=!1,f=0;if(null!==pas["WEBLib.Forms"].Application&&null!==pas["WEBLib.Forms"].Application.FMainForm){pas["WEBLib.Forms"].Application.HasCSS(e.lMaterial)||this.AddControlLink("material",e.lMaterial),pas["WEBLib.Forms"].Application.LockForm(pas["WEBLib.Forms"].Application.FMainForm),this.FLayer$1=document.createElement("SPAN"),document.body.appendChild(this.FLayer$1),this.FLayer$1.setAttribute("tabindex","0"),this.FLayer$1.addEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),g=!0,this.FMessage=e.StringToHTML(this.FMessage);var M=this.FMsgDlgType;0===M?(u="warning",C="orange",d=this.GetDialogText(0)):1===M?(u="cancel",C="red",d=this.GetDialogText(1)):2===M?(u="info",C="blue",d=this.GetDialogText(2)):3===M?(u="help",C="blue",d=this.GetDialogText(3)):4===M&&(u="",C="",d=this.GetDialogText(4)),""!==this.FTitle&&(d=this.FTitle),1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?(this.FDlg=document.createElement("DIV"),this.FDlg.setAttribute("class","modal-dialog"),this.FDlg.setAttribute("role","document"),this.FDlg.style.setProperty("z-index","1999998"),(l=document.createElement("DIV")).style.setProperty("top","0"),l.style.setProperty("left","0"),l.style.setProperty("right","0"),l.style.setProperty("bottom","0"),l.style.setProperty("z-index","1999997"),l.style.setProperty("display","block"),l.setAttribute("class","modal show fade"),document.body.appendChild(l),l.appendChild(this.FDlg),c=this.FDlg,(p=document.createElement("DIV")).setAttribute("class","modal-content "+this.FElementDialogClassName),c.appendChild(p),F=p,c=p,(p=document.createElement("DIV")).setAttribute("class","modal-header"),F.appendChild(p),c=p,(p=document.createElement("H5")).setAttribute("class","modal-title"),p.innerHTML=d,c.appendChild(p),3 in this.FButtons&&((p=document.createElement("BUTTON")).setAttribute("type","button"),p.setAttribute("class","close btn btn-danger"),p.setAttribute("data-dismiss","modal-dialog"),p.setAttribute("aria-label","Close"),p.setAttribute("id",this.GetDialogText(6)),p.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),c.appendChild(p),c=p,(p=document.createElement("SPAN")).setAttribute("aria-hidden","true"),p.setAttribute("id",this.GetDialogText(6)),p.innerHTML="&times;",c.appendChild(p)),(p=document.createElement("DIV")).setAttribute("class","modal-body"),F.appendChild(p),c=p,4!==this.FMsgDlgType&&((s=document.createElement("SPAN")).innerHTML='<i class="material-icons" style="color:'+C+'!important;font-size:48px!important">'+u+"</i>",s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("padding-right","15px"),c.appendChild(s)),(p=document.createElement("H6")).innerHTML=this.FMessage,c.appendChild(p),this.InsertInputElement(c,{get:function(){return g},set:function(t){g=t}}),(p=document.createElement("DIV")).setAttribute("class","modal-footer"),F.appendChild(p),a=c=p,this.FDlg=l):(y="5",S="26",m="#f1f1f1",T="#ababab",this.FDlg=document.createElement("DIV"),document.body.appendChild(this.FDlg),r=this.FDlg,""!==this.FElementDialogClassName?r.setAttribute("class",this.FElementDialogClassName):(r.style.setProperty("background-color","white"),r.style.setProperty("border","1px solid "+T),r.style.setProperty("font-family","Arial"),r.style.setProperty("font-size","10pt")),r.style.setProperty("cursor","default"),r.style.setProperty("position","fixed"),r.style.setProperty("min-width","300px"),r.style.setProperty("min-height","125px"),r.style.setProperty("max-width","100%"),r.style.setProperty("max-height","100%"),r.style.setProperty("top","50%"),r.style.setProperty("left","50%"),r.style.setProperty("transform","translate(-50%, -50%)"),r.style.setProperty("z-index","1999998"),r.style.setProperty("box-shadow","5px 5px 5px gray"),h=document.createElement("DIV"),this.FCancel=h,h.innerHTML='<i id="Cancel" class="material-icons" style="font-size:16px!important">clear</i>',h.id="Cancel",h.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeTextColor)),h.style.setProperty("position","fixed"),h.style.setProperty("top","0"),h.style.setProperty("right","0"),h.style.setProperty("padding",y+"px"),h.style.setProperty("height",S+"px"),h.style.setProperty("line-height",S+"px"),h.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),r.appendChild(h),(t=document.createElement("DIV")).innerHTML=d,""!==this.FElementTitleClassName?t.setAttribute("class",this.FElementTitleClassName):(t.style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeColor)),t.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeTextColor))),t.style.setProperty("cursor","move"),t.style.setProperty("padding-left",y+"px"),t.style.setProperty("height",S+"px"),t.style.setProperty("vertical-align","middle"),t.style.setProperty("line-height",S+"px"),t.style.setProperty("border-bottom","1px solid "+T),t.style.setProperty("-moz-user-select","none"),t.style.setProperty("-webkit-user-select","none"),t.style.setProperty("-ms-user-select","none"),t.style.setProperty("user-select","none"),t.style.setProperty("-o-user-select","none"),t.addEventListener("mousedown",rtl.createCallback(this,"HandleMouseDown")),r.appendChild(t),(i=document.createElement("DIV")).style.setProperty("padding",y+"px"),i.style.setProperty("height","auto"),i.style.setProperty("min-height","50px"),i.style.setProperty("border-bottom","1px solid "+T),4!==this.FMsgDlgType&&((s=document.createElement("DIV")).innerHTML='<i class="material-icons" style="color:'+C+'!important;font-size:48px!important">'+u+"</i>",s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("padding-right","15px"),i.appendChild(s)),this.FMessage=pas.SysUtils.StringReplace(this.FMessage,pas.System.sLineBreak,"<BR>",rtl.createSet(0)),(o=document.createElement("DIV")).innerHTML=this.FMessage,o.style.setProperty("height","auto"),o.style.setProperty("min-height","50px"),o.style.setProperty("white-space","pre-wrap"),(n=document.createElement("LABEL")).innerHTML=this.FMessage,""!==this.FElementTitleClassName&&n.setAttribute("class",this.FElementContentClassName),o.appendChild(n),i.appendChild(n),this.InsertInputElement(i,{get:function(){return g},set:function(t){g=t}}),r.appendChild(i),(a=document.createElement("DIV")).style.setProperty("background-color",m),a.style.setProperty("padding",y+"px"),a.style.setProperty("min-height",S+"px"),a.style.setProperty("height","auto"),a.style.setProperty("line-height",S+"px"),a.style.setProperty("text-align","right"),r.appendChild(a)),rtl.eqSet(this.FButtons,{})&&0===this.FCustomButtons.GetCount()?a.appendChild(this.CreateButton(this.GetDialogText(5),{get:function(){return g},set:function(t){g=t}},"")):(0 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(7),{get:function(){return g},set:function(t){g=t}},"")),1 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(8),{get:function(){return g},set:function(t){g=t}},"")),2 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(5),{get:function(){return g},set:function(t){g=t}},"")),3 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(6),{get:function(){return g},set:function(t){g=t}},"")),4 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(9),{get:function(){return g},set:function(t){g=t}},"")),5 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(10),{get:function(){return g},set:function(t){g=t}},"")),6 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(11),{get:function(){return g},set:function(t){g=t}},"")),7 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(12),{get:function(){return g},set:function(t){g=t}},"")),9 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(13),{get:function(){return g},set:function(t){g=t}},"")),8 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(14),{get:function(){return g},set:function(t){g=t}},"")),10 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(15),{get:function(){return g},set:function(t){g=t}},"")),11 in this.FButtons&&a.appendChild(this.CreateButton(this.GetDialogText(16),{get:function(){return g},set:function(t){g=t}},"")));for(var B=0,b=this.FCustomButtons.GetCount()-1;B<=b;B++)f=B,a.appendChild(this.CreateButton(this.FCustomButtons.GetItem$1(f).FCaption,{get:function(){return g},set:function(t){g=t}},this.FCustomButtons.GetItem$1(f).FElementClassName));(l=this.FLayer$1).style.setProperty("background-color","black"),l.style.setProperty("opacity",pas["WEBLib.WebTools"].DoubleToHTML(this.FOpacity)),l.style.setProperty("top","0"),l.style.setProperty("left","0"),l.style.setProperty("right","0"),l.style.setProperty("bottom","0"),l.style.setProperty("z-index",pas["WEBLib.Forms"].Application.MaxZIndexStr()),l.style.setProperty("webkit-user-select","none"),l.style.setProperty("moz-user-select","none"),l.style.setProperty("khtml-user-select","none"),l.style.setProperty("ms-user-select","none"),l.style.setProperty("user-select","none"),l.style.setProperty("position","fixed")}},this.ShowDialog$1=function(t,e,i,s){return 0,this.FButtons=rtl.refSet(i),this.FMessage=t,this.FMsgDlgType=e,this.FDialogProc=s,this.SetDialogResult(0),this.Show$1(),0},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("AutoLanguage",0,rtl.boolean,"FAutoLanguage","FAutoLanguage",{Default:!0}),i.addProperty("Buttons",0,t.$rtti.TMsgDlgButtons,"FButtons","FButtons",{Default:{}}),i.addProperty("CustomButtons",2,t.$rtti.TCustomDialogButtons,"FCustomButtons","SetCustomButtons"),i.addProperty("DialogText",2,pas.Classes.$rtti.TStringList,"FDialogText","SetDialogText"),i.addProperty("DialogType",0,t.$rtti.TMsgDlgType,"FMsgDlgType","FMsgDlgType",{Default:t.TMsgDlgType.mtCustom}),i.addProperty("Message",0,rtl.string,"FMessage","FMessage"),i.addProperty("Opacity",0,rtl.double,"FOpacity","FOpacity"),i.addProperty("ElementButtonClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementButtonClassName","FElementButtonClassName"),i.addProperty("ElementDialogClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementDialogClassName","FElementDialogClassName"),i.addProperty("ElementTitleClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementTitleClassName","FElementTitleClassName"),i.addProperty("ElementContentClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementContentClassName","FElementContentClassName"),i.addProperty("Title",0,rtl.string,"FTitle","FTitle"),i.addProperty("OnButtonClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnButtonClick","FOnButtonClick"),i.addProperty("OnClose",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClose","FOnClose")})),this.MessageDlg=function(i,s,n,o){null==e.WebLibDlg&&(e.WebLibDlg=t.TMessageDlg.$create("Create$1",[null]),1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary&&e.WebLibDlg.InitBootstrapStyle()),e.WebLibDlg.ShowDialog$1(i,s,rtl.refSet(n),o)},this.ShowMessage=function(e){null!==pas["WEBLib.Forms"].Application&&null!==pas["WEBLib.Forms"].Application.FMainForm&&1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?t.MessageDlg(e,2,rtl.createSet(2),null):alert(e)},t.$implcode=function(){e.lMaterial="https://fonts.googleapis.com/icon?family=Material+Icons",e.WebLibDlg=null,e.StringToHTML=function(t){var e="";return e=pas.SysUtils.StringReplace(t,"\r","<BR>",rtl.createSet(0)),e=pas.SysUtils.StringReplace(e,"\n","",rtl.createSet(0))}},t.$init=function(){e.WebLibDlg=null}}),["WEBLib.Forms","WEBLib.Consts","WEBLib.WebTools"]),rtl.module("Math",["System"],(function(){"use strict";var t=this.$impl;this.SameValue=function(t,e,i){return 0===i&&(i=Math.max(1e-12*Math.min(Math.abs(t),Math.abs(e)),1e-12)),t>e?t-e<=i:e-t<=i},this.DegToRad=function(t){return t*(Math.PI/180)},this.$implcode=function(){t.DZeroResolution=1e-12}}),[]),rtl.module("WEBLib.Storage",["System","Web","Classes"],(function(){"use strict";var t=this;this.$rtti.$MethodVar("TStorageChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AKey",rtl.string],["AOldValue",rtl.string],["ANewValue",rtl.string],["AURL",rtl.string]]),methodkind:0}),rtl.createClass(this,"TLocalStorage",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FChangePtr=null,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TComponent.$final.call(this)},this.SetValues=function(t,e){window.localStorage.setItem(t,e)},this.StorageChanged=function(t){var e;e=t.storageArea+" ",null!=this.FOnChange&&pas.System.Pos("OBJECT",pas.SysUtils.UpperCase(e))>0&&this.FOnChange(this,t.key,t.oldValue,t.newValue,t.url)},this.Create$1=function(t){return this.FChangePtr=rtl.createCallback(this,"StorageChanged"),pas.Classes.TComponent.Create$1.apply(this,arguments),window.addEventListener("storage",this.FChangePtr),this},this.Destroy=function(){window.removeEventListener("storage",this.FChangePtr),pas.Classes.TComponent.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("OnChange",0,t.$rtti.TStorageChangeEvent,"FOnChange","FOnChange")}))}),["SysUtils"]),rtl.module("WEBLib.REST",["System","Classes","Web","JS","SysUtils","WEBLib.Controls"],(function(){"use strict";var t=this;this.THTTPRequestResponseType={0:"rtDefault",rtDefault:0,1:"rtText",rtText:1,2:"rtBlob",rtBlob:2,3:"rtJSON",rtJSON:3,4:"rtDocument",rtDocument:4,5:"rtArrayBuffer",rtArrayBuffer:5},this.$rtti.$Enum("THTTPRequestResponseType",{minvalue:0,maxvalue:5,ordtype:1,enumtype:this.THTTPRequestResponseType}),this.$rtti.$MethodVar("THttpResponse",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AResponse",rtl.string]]),methodkind:0}),rtl.createClass(this,"TPersistTokens",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FKey="",this.FEnabled=!1},this.Create$1=function(){return this.FEnabled=!1,this.FKey="",this},this.Assign=function(e){t.TPersistTokens.isPrototypeOf(e)&&(this.FKey=rtl.as(e,t.TPersistTokens).FKey,this.FEnabled=rtl.as(e,t.TPersistTokens).FEnabled)};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Key",0,rtl.string,"FKey","FKey"),e.addProperty("Enabled",0,rtl.boolean,"FEnabled","FEnabled",{Default:!1})})),rtl.createClass(this,"TRESTApp",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FKey="",this.FCallbackURL="",this.FSecret="",this.FAuthURL="",this.FClientID=""},this.Assign=function(e){t.TRESTApp.isPrototypeOf(e)&&(this.FKey=rtl.as(e,t.TRESTApp).FKey,this.FClientID=rtl.as(e,t.TRESTApp).FClientID,this.FCallbackURL=rtl.as(e,t.TRESTApp).FCallbackURL,this.FSecret=rtl.as(e,t.TRESTApp).FSecret,this.FAuthURL=rtl.as(e,t.TRESTApp).FAuthURL)};var e=this.$rtti;e.addProperty("AuthURL",0,rtl.string,"FAuthURL","FAuthURL"),e.addProperty("ClientID",0,rtl.string,"FClientID","FClientID"),e.addProperty("Key",0,rtl.string,"FKey","FKey"),e.addProperty("CallbackURL",0,rtl.string,"FCallbackURL","FCallbackURL"),e.addProperty("Secret",0,rtl.string,"FSecret","FSecret")})),this.TAuthLocale={0:"lcDefault",lcDefault:0,1:"lcEnglish",lcEnglish:1,2:"lcDutch",lcDutch:2,3:"lcGerman",lcGerman:3,4:"lcFrench",lcFrench:4,5:"lcSpanish",lcSpanish:5,6:"lcItalian",lcItalian:6,7:"lcPortuguese",lcPortuguese:7,8:"lcGreek",lcGreek:8,9:"lcDanish",lcDanish:9,10:"lcRussian",lcRussian:10,11:"lcRomanian",lcRomanian:11,12:"lcSwedish",lcSwedish:12,13:"lcFinnish",lcFinnish:13,14:"lcTurkish",lcTurkish:14,15:"lcJapanese",lcJapanese:15},rtl.createClass(this,"TRESTClient",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FAccessToken="",this.FRefreshToken="",this.FAccessExpiry=0,this.FRefreshExpiry=0,this.FOnAccessToken=null,this.FOnAuthFailed=null,this.FEventRegistered=!1,this.FOnResponse=null,this.FPersistTokens=null,this.FApp=null,this.FScopes=null,this.FLocale=0,this.FOnRequestResponse=null,this.FOnError=null,this.FResponseType=0,this.FLoginWidth=0,this.FLoginHeight=0,this.FHandleAccessTokenPtr=null,this.FHandleAuthClosePtr=null,this.FOpenResolver=null},this.$final=function(){this.FOnAccessToken=void 0,this.FOnAuthFailed=void 0,this.FOnResponse=void 0,this.FPersistTokens=void 0,this.FApp=void 0,this.FScopes=void 0,this.FOnRequestResponse=void 0,this.FOnError=void 0,this.FOpenResolver=void 0,pas.Classes.TComponent.$final.call(this)},this.SetPersistTokens=function(t){this.FPersistTokens.Assign(t)},this.SetApp=function(t){this.FApp.Assign(t)},this.SetScopes=function(t){this.FScopes.Assign(t)},this.InstallCallback=function(){var t=document.createElement("script");t.innerHTML=' function processAuthData(access_token) {var event = new CustomEvent("oauthcallback", {\r            detail: {\r                 message: access_token\r            },\r  bubbles: true,\r  cancelable: true});\r  document.dispatchEvent(event);}',document.head.appendChild(t);var e=document.createElement("script");return e.async=!0,e.defer=!0,e.type="text/javascript",document.body.appendChild(e),!0,!0},this.RemoveOAuthHandler=function(){document.removeEventListener("oauthcallback",this.FHandleAccessTokenPtr),this.FEventRegistered=!1},this.HandleAccessToken=function(t){var e;return this.RemoveOAuthHandler(),e=t.detail.message,this.FAccessToken=e,this.WriteTokens(),null!=this.FOnAccessToken&&this.FOnAccessToken(this),null!=this.FOpenResolver&&(this.FOpenResolver(!0),this.FOpenResolver=null),!0,!0},this.Create$1=function(e){return pas.Classes.TComponent.Create$1.apply(this,arguments),this.FPersistTokens=t.TPersistTokens.$create("Create$1"),this.FApp=t.TRESTApp.$create("Create"),this.FScopes=pas.Classes.TStringList.$create("Create$1"),this.FLocale=0,this.FResponseType=0,this.FLoginWidth=800,this.FLoginHeight=600,this.FHandleAccessTokenPtr=rtl.createCallback(this,"HandleAccessToken"),this},this.Destroy=function(){null!=this.FHandleAuthClosePtr&&(this.FHandleAuthClosePtr=null),rtl.free(this,"FApp"),rtl.free(this,"FScopes"),rtl.free(this,"FPersistTokens"),pas.Classes.TComponent.Destroy.call(this)},this.WriteTokens=function(){var t=null;this.FPersistTokens.FEnabled&&""!==this.FPersistTokens.FKey&&((t=pas["WEBLib.Storage"].TLocalStorage.$create("Create")).SetValues(this.FPersistTokens.FKey,this.FAccessToken),t.SetValues(this.FPersistTokens.FKey+"refresh",this.FRefreshToken),t.SetValues(this.FPersistTokens.FKey+"accessexpiry",pas["WEBLib.Utils"].TDateTimeHelper.ToIsoString.call({p:this,get:function(){return this.p.FAccessExpiry},set:function(t){this.p.FAccessExpiry=t}},!0,!1)),t.SetValues(this.FPersistTokens.FKey+"refreshexpiry",pas["WEBLib.Utils"].TDateTimeHelper.ToIsoString.call({p:this,get:function(){return this.p.FRefreshExpiry},set:function(t){this.p.FRefreshExpiry=t}},!0,!1)),t=rtl.freeLoc(t))},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("App",2,t.$rtti.TRESTApp,"FApp","SetApp"),e.addProperty("LoginHeight",0,rtl.longint,"FLoginHeight","FLoginHeight",{Default:600}),e.addProperty("LoginWidth",0,rtl.longint,"FLoginWidth","FLoginWidth",{Default:800}),e.addProperty("PersistTokens",2,t.$rtti.TPersistTokens,"FPersistTokens","SetPersistTokens"),e.addProperty("ResponseType",0,t.$rtti.THTTPRequestResponseType,"FResponseType","FResponseType",{Default:t.THTTPRequestResponseType.rtDefault}),e.addProperty("Scopes",2,pas.Classes.$rtti.TStrings,"FScopes","SetScopes"),e.addProperty("OnAccessToken",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnAccessToken","FOnAccessToken"),e.addProperty("OnAuthFailed",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnAuthFailed","FOnAuthFailed"),e.addProperty("OnRequestResponse",0,pas["WEBLib.Controls"].$rtti.THTTPRequestResponseEvent,"FOnRequestResponse","FOnRequestResponse"),e.addProperty("OnResponse",0,t.$rtti.THttpResponse,"FOnResponse","FOnResponse"),e.addProperty("OnError",0,pas["WEBLib.Controls"].$rtti.THTTPErrorEvent,"FOnError","FOnError")})),t.$init=function(){t.TRESTClient.InstallCallback()}}),["WEBLib.Storage","WEBLib.Utils"]),rtl.module("WEBLib.Utils",["System","Types","Web","SysUtils","Math","Classes","JS"],(function(){"use strict";rtl.createHelper(this,"TDateTimeHelper",null,(function(){this.ToIsoString=function(t,e){var i=0,s=0,n=0,o=0,a=0,r=0,l=0,h="",p="",c="";function F(t,e){var i="";for(i=pas.SysUtils.IntToStr(t);i.length<e;)i="0"+i;return i}return t&&(h="-",p=":"),pas.SysUtils.DecodeDate(this.get(),{get:function(){return n},set:function(t){n=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}}),pas.SysUtils.DecodeTime(this.get(),{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return r},set:function(t){r=t}},{get:function(){return l},set:function(t){l=t}}),e&&(c="."+F(l,3)+"Z"),F(n,4)+h+F(s,2)+h+F(i,2)+"T"+F(o,2)+p+F(a,2)+p+F(r,2)+c}})),this.FormatProp=function(t,e){return pas.SysUtils.Format$1(t,e,pas.SysUtils.TFormatSettings.Invariant())}}),["RTLConsts","WEBLib.Consts","WEBLib.REST"]),rtl.module("WEBLib.Controls",["System","Classes","WEBLib.Graphics","Types","SysUtils","Web","JS"],(function(){"use strict";var t=this,e=t.$impl;this.VK_TAB=9,this.VK_RETURN=13,this.VK_ESCAPE=27,this.VK_SPACE=32,this.VK_END=35,this.VK_HOME=36,this.VK_LEFT=37,this.VK_UP=38,this.VK_RIGHT=39,this.VK_DOWN=40,this.VK_F2=113,this.VK_F4=115,this.WHEEL_DELTA=120,this.$rtti.$inherited("TCursor",rtl.longint,{}),this.crDefault=0,this.crNone=1,this.crArrow=2,this.crCross=3,this.crIBeam=4,this.crSize=5,this.crSizeNESW=6,this.crSizeNS=7,this.crSizeNWSE=8,this.crSizeWE=9,this.crUpArrow=10,this.crHourGlass=11,this.crDrag=12,this.crNoDrop=13,this.crHSplit=14,this.crVSplit=15,this.crMultIDrag=16,this.crSQLWait=17,this.crNo=18,this.crAppStart=19,this.crHelp=20,this.crHandPoint=21,this.crSizeAll=22,this.CSSBackground="background-color",this.CSSZIndex="z-index",this.TCSSLibrary={0:"cssNone",cssNone:0,1:"cssBootstrap",cssBootstrap:1},this.$rtti.$Enum("TCSSLibrary",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TCSSLibrary}),this.TDragState={0:"dsDragEnter",dsDragEnter:0,1:"dsDragLeave",dsDragLeave:1,2:"dsDragMove",dsDragMove:2},this.$rtti.$Enum("TDragState",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TDragState}),this.TDragMode={0:"dmManual",dmManual:0,1:"dmAutomatic",dmAutomatic:1},this.$rtti.$Enum("TDragMode",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TDragMode}),this.TDragKind={0:"dkDrag",dkDrag:0,1:"dkDock",dkDock:1},this.$rtti.$Enum("TDragKind",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TDragKind}),rtl.createClass(this,"TDragObject",pas.System.TObject,(function(){})),this.TAlign={0:"alNone",alNone:0,1:"alTop",alTop:1,2:"alBottom",alBottom:2,3:"alLeft",alLeft:3,4:"alRight",alRight:4,5:"alClient",alClient:5,6:"alCustom",alCustom:6},this.$rtti.$Enum("TAlign",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TAlign}),this.TMouseButton={0:"mbLeft",mbLeft:0,1:"mbRight",mbRight:1,2:"mbMiddle",mbMiddle:2},this.$rtti.$Enum("TMouseButton",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMouseButton}),this.TBorderStyle={0:"bsNone",bsNone:0,1:"bsSingle",bsSingle:1},this.$rtti.$Enum("TBorderStyle",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TBorderStyle}),this.TSizeStyle={0:"ssPercent",ssPercent:0,1:"ssAbsolute",ssAbsolute:1,2:"ssAuto",ssAuto:2},this.$rtti.$Enum("TSizeStyle",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TSizeStyle}),this.TScrollStyle={0:"ssNone",ssNone:0,1:"ssHorizontal",ssHorizontal:1,2:"ssVertical",ssVertical:2,3:"ssBoth",ssBoth:3},this.TAnchorKind={0:"akLeft",akLeft:0,1:"akTop",akTop:1,2:"akRight",akRight:2,3:"akBottom",akBottom:3},this.$rtti.$Enum("TAnchorKind",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TAnchorKind}),this.$rtti.$Set("TAnchors",{comptype:this.$rtti.TAnchorKind}),this.$rtti.$inherited("TElementClassName",rtl.string,{}),this.$rtti.$inherited("TElementID",rtl.string,{}),this.TElementFont={0:"efProperty",efProperty:0,1:"efCSS",efCSS:1},this.$rtti.$Enum("TElementFont",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TElementFont}),this.TElementPosition={0:"epAbsolute",epAbsolute:0,1:"epRelative",epRelative:1,2:"epIgnore",epIgnore:2},this.$rtti.$Enum("TElementPosition",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TElementPosition}),this.TElementEvent={0:"eeClick",eeClick:0,1:"eeMouseDown",eeMouseDown:1,2:"eeMouseUp",eeMouseUp:2,3:"eeMouseMove",eeMouseMove:3,4:"eeDblClick",eeDblClick:4,5:"eeKeyPress",eeKeyPress:5,6:"eeKeyDown",eeKeyDown:6,7:"eeKeyUp",eeKeyUp:7},this.TTextDirection={0:"tdDefault",tdDefault:0,1:"tdLeftToRight",tdLeftToRight:1,2:"tdRightToLeft",tdRightToLeft:2,3:"tdInherit",tdInherit:3},this.$rtti.$Enum("TTextDirection",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTextDirection}),rtl.recNewT(this,"TJSXMLHttpRequestRecord",(function(){this.req=null,this.$eq=function(t){return this.req===t.req},this.$assign=function(t){return this.req=t.req,this},t.$rtti.$Record("TJSXMLHttpRequestRecord",{}).addField("req",pas.Web.$rtti.TJSXMLHttpRequest)})),rtl.recNewT(this,"TJSEventRecord",(function(){this.event=null,this.$eq=function(t){return this.event===t.event},this.$assign=function(t){return this.event=t.event,this},t.$rtti.$Record("TJSEventRecord",{}).addField("event",pas.Web.$rtti.TJSEvent)})),this.$rtti.$MethodVar("THTTPRequestResponseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["ARequest",this.$rtti.TJSXMLHttpRequestRecord],["AResponse",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("THTTPErrorEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["ARequest",this.$rtti.TJSXMLHttpRequestRecord],["Event",this.$rtti.TJSEventRecord],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),this.$rtti.$MethodVar("TMouseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Button",this.$rtti.TMouseButton],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["WheelDelta",rtl.longint],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelUpDownEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseMoveEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TKeyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AKey",rtl.word,1],["Shift",pas.Classes.$rtti.TShiftState]]),methodkind:0}),this.$rtti.$MethodVar("TKeyPressEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AChar",rtl.char,1]]),methodkind:0}),this.$rtti.$MethodVar("TTouchEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.TBiDiMode={0:"bdLeftToRight",bdLeftToRight:0,1:"bdRightToLeft",bdRightToLeft:1,2:"bdRightToLeftNoAlign",bdRightToLeftNoAlign:2,3:"bdRightToLeftReadingOnly",bdRightToLeftReadingOnly:3},this.$rtti.$Enum("TBiDiMode",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TBiDiMode}),this.$rtti.$MethodVar("TDragOverEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint],["State",this.$rtti.TDragState],["Accept",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TDragDropEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TStartDragEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DragObject",this.$rtti.TDragObject,1]]),methodkind:0}),this.$rtti.$MethodVar("TEndDragEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Target",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.TControlStyleValue={0:"csAcceptsControls",csAcceptsControls:0,1:"csSetCaption",csSetCaption:1},rtl.createClass(this,"TMargins",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOnChange=null,this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetLeft=function(t){t!==this.FLeft&&(this.FLeft=t,this.DoChange())},this.SetTop=function(t){t!==this.FTop&&(this.FTop=t,this.DoChange())},this.SetRight=function(t){t!==this.FRight&&(this.FRight=t,this.DoChange())},this.SetBottom=function(t){t!==this.FBottom&&(this.FBottom=t,this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return this.FLeft=3,this.FTop=3,this.FBottom=3,this.FRight=3,this},this.Assign=function(e){t.TMargins.isPrototypeOf(e)?(this.FLeft=rtl.as(e,t.TMargins).FLeft,this.FTop=rtl.as(e,t.TMargins).FTop,this.FBottom=rtl.as(e,t.TMargins).FBottom,this.FRight=rtl.as(e,t.TMargins).FRight):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Left",2,rtl.longint,"FLeft","SetLeft",{Default:3}),e.addProperty("Top",2,rtl.longint,"FTop","SetTop",{Default:3}),e.addProperty("Right",2,rtl.longint,"FRight","SetRight",{Default:3}),e.addProperty("Bottom",2,rtl.longint,"FBottom","SetBottom",{Default:3})})),rtl.createClass(this,"TCenter",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FHorizontal=!1,this.FVertical=!1,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetHorizontal=function(t){this.FHorizontal!==t&&(this.FHorizontal=t,this.DoChange())},this.SetVertical=function(t){this.FVertical!==t&&(this.FVertical=t,this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Assign=function(e){t.TCenter.isPrototypeOf(e)&&(this.FHorizontal=rtl.as(e,t.TCenter).FHorizontal,this.FVertical=rtl.as(e,t.TCenter).FVertical)};var e=this.$rtti;e.addProperty("Horizontal",2,rtl.boolean,"FHorizontal","SetHorizontal",{Default:!1}),e.addProperty("Vertical",2,rtl.boolean,"FVertical","SetVertical",{Default:!1})})),rtl.createClass(this,"TPadding",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOnChange=null,this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.DoChange())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.DoChange())},this.SetRight=function(t){this.FRight!==t&&(this.FRight=t,this.DoChange())},this.SetBottom=function(t){this.FBottom!==t&&(this.FBottom=t,this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0,this},this.Assign=function(e){t.TPadding.isPrototypeOf(e)&&(this.FLeft=rtl.as(e,t.TPadding).FLeft,this.FRight=rtl.as(e,t.TPadding).FRight,this.FTop=rtl.as(e,t.TPadding).FTop,this.FBottom=rtl.as(e,t.TPadding).FBottom)};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Left",2,rtl.longint,"FLeft","SetLeft",{Default:0}),e.addProperty("Top",2,rtl.longint,"FTop","SetTop",{Default:0}),e.addProperty("Right",2,rtl.longint,"FRight","SetRight",{Default:0}),e.addProperty("Bottom",2,rtl.longint,"FBottom","SetBottom",{Default:0})})),rtl.createInterface(this,"IControl","{6325F220-F2E4-384C-B7C4-A6C697D13DCF}",["EnterChildren","ExitChildren"],pas.System.IUnknown),rtl.createClass(this,"TControl",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FGotFocus=!1,this.FAcceptDrag=!1,this.FCaptureDown=!1,this.FMouseInsideLayer=!1,this.FLayer=null,this.FCaptured=!1,this.FControlCreated=!1,this.FUpdateCount=0,this.FBlockUpdateElement=!1,this.FElement=null,this.FID="",this.FNew=!1,this.FContainer=null,this.FElementEvent=null,this.FLastElementEvent=null,this.FElementClassName="",this.FFont=null,this.FParent=null,this.FPrevParent=null,this.FControls=[],this.FOnDragOver=null,this.FOnDragDrop=null,this.FOnStartDrag=null,this.FonEndDrag=null,this.FOnClick=null,this.FOnDblClick=null,this.FOnMouseDown=null,this.FOnMouseUp=null,this.FOnMouseMove=null,this.FOnKeyDown=null,this.FOnKeyUp=null,this.FOnKeyPress=null,this.FOnEnter=null,this.FOnExit=null,this.FEnabled=!1,this.FHint="",this.FRole="",this.FShowHint=!1,this.FTabOrder=0,this.FTabStop=!1,this.FVisible=!1,this.FWidth=0,this.FHeight=0,this.FTag$1=0,this.FAlign=0,this.FAnchors={},this.FAlignWithMargins=!1,this.FIsAligning=!1,this.FOnMouseEnter=null,this.FOnMouseLeave=null,this.FCursor=0,this.FDoubleBuffered=!1,this.FControlStyle={},this.FMargins=null,this.FCenter=null,this.FOnMouseWheel=null,this.FParentDoubleBuffered=!1,this.FParentColor=!1,this.FParentFont=!1,this.FParentBiDiMode=!1,this.FOnTouchMove=null,this.FOnTouchStart=null,this.FOnTouchEnd=null,this.FOnTouchCancel=null,this.FLinkTouchEvents=!1,this.FWidthStyle=0,this.FHeightStyle=0,this.FWidthPercent=0,this.FHeightPercent=0,this.FOrigRect=pas.Types.TRect.$new(),this.FOrigParentRect=pas.Types.TRect.$new(),this.FIsResizing=!1,this.FShowFocus=!1,this.FBorderWidth=0,this.FOrigTop=0,this.FOrigLeft=0,this.FUpdateTopLeft=!1,this.FEnablePropagation=!1,this.FParentShowHint=!1,this.FScriptLoaded=!1,this.FControlScriptCountLoaded=0,this.FRequiredScripts=null,this.FElementFont=0,this.FElementPosition=0,this.FParentElement=null,this.FClipChildren=!1,this.FTextDirection=0,this.FEventStopPropagation={},this.FOnResize=null,this.FMouseMovePtr=null,this.FMouseDownPtr=null,this.FMouseUpPtr=null,this.FMouseEnterPtr=null,this.FMouseLeavePtr=null,this.FClickPtr=null,this.FDblClickPtr=null,this.FKeyDownPtr=null,this.FKeyUpPtr=null,this.FKeyPressPtr=null,this.FInputPtr=null,this.FTouchStartPtr=null,this.FTouchEndPtr=null,this.FTouchMovePtr=null,this.FTouchCancelPtr=null,this.FContextMenuPtr=null,this.FExitPtr=null,this.FEnterPtr=null,this.FWheelPtr=null,this.FLayerMouseEnterPtr=null,this.FLayerMouseLeavePtr=null,this.FScriptLoadedPtr=null,this.FDragStartPtr=null,this.FDragOverPtr=null,this.FDragEnterPtr=null,this.FDragLeavePtr=null,this.FDragEndPtr=null,this.FDragDropPtr=null,this.FChildOrder=0,this.FAllowTouch=!1,this.FWheelAccumulator=0,this.FWheelMousePos=pas.Types.TPoint.$new(),this.FBiDiMode=0,this.FOnMouseWheelDown=null,this.FOnMouseWheelUp=null,this.FNoUserSelect=!1,this.FEventsBound=!1,this.FDragMode=0,this.FToolTip=void 0,this.FDesignTime=!1,this.FColor=0},this.$final=function(){this.FLayer=void 0,this.FElement=void 0,this.FContainer=void 0,this.FElementEvent=void 0,this.FLastElementEvent=void 0,this.FFont=void 0,this.FParent=void 0,this.FPrevParent=void 0,this.FControls=void 0,this.FOnDragOver=void 0,this.FOnDragDrop=void 0,this.FOnStartDrag=void 0,this.FonEndDrag=void 0,this.FOnClick=void 0,this.FOnDblClick=void 0,this.FOnMouseDown=void 0,this.FOnMouseUp=void 0,this.FOnMouseMove=void 0,this.FOnKeyDown=void 0,this.FOnKeyUp=void 0,this.FOnKeyPress=void 0,this.FOnEnter=void 0,this.FOnExit=void 0,this.FAnchors=void 0,this.FOnMouseEnter=void 0,this.FOnMouseLeave=void 0,this.FControlStyle=void 0,this.FMargins=void 0,this.FCenter=void 0,this.FOnMouseWheel=void 0,this.FOnTouchMove=void 0,this.FOnTouchStart=void 0,this.FOnTouchEnd=void 0,this.FOnTouchCancel=void 0,this.FOrigRect=void 0,this.FOrigParentRect=void 0,this.FRequiredScripts=void 0,this.FParentElement=void 0,this.FEventStopPropagation=void 0,this.FOnResize=void 0,this.FWheelMousePos=void 0,this.FOnMouseWheelDown=void 0,this.FOnMouseWheelUp=void 0,pas.Classes.TComponent.$final.call(this)},this.GetControlsCount=function(){return rtl.length(this.FControls)},this.GetControls=function(t){return this.FControls[t]},this.SetVisible=function(t){this.FVisible!==t&&(this.VisibleChanging(),this.FVisible=t,this.UpdateElement(),this.DoRealign(),this.AlignControl(this),this.VisibleChanged())},this.SetHint=function(t){this.FHint!==t&&(this.FHint=t,this.UpdateElement())},this.SetShowHint=function(t){this.FShowHint!==t&&(this.FShowHint=t,this.UpdateElement())},this.SetTabOrder=function(t){this.FTabOrder!==t&&(this.FTabOrder=t,this.UpdateElement())},this.SetTabStop=function(t){this.FTabStop!==t&&(this.FTabStop=t,this.UpdateElement())},this.SetAlign=function(t){this.FAlign!==t&&(this.FAlign=t,this.DoRealign())},this.SetAlignWithMargins=function(t){this.FAlignWithMargins!==t&&(this.FAlignWithMargins=t,this.DoRealign())},this.GetBoundsRect=function(){var t=pas.Types.TRect.$new();return t.Left=this.GetLeft(),t.Top=this.GetTop(),t.Right=this.GetLeft()+this.GetWidth(),t.Bottom=this.GetTop()+this.GetHeight(),t},this.SetID=function(t){var e=null,i=null,s=null,n=null,o=0,a=0,r=0,l=0;if(this.FNew&&this.FID!==t&&null!=(e=document.getElementById(t)))return o=this.FLeft,a=this.FTop,r=this.FWidth,l=this.FHeight,i=null,this.UnbindEvents(),null!=this.FContainer&&(this.FParentElement=this.FContainer.parentElement,i=document.createElement("SPAN"),this.$class.MoveElements(this.FContainer,i)),n=this.FParent,this.SetParent(null),this.CreateWithID(t),this.SetParentComponent(n),this.FID=t,this.FWidth=r,this.FHeight=l,this.UpdateElement(),4 in this.FComponentState&&(this.FLeft=o,this.FTop=a),void(null!=i&&(this.GetElementHandle().textContent="",this.MoveElementsAndFree(i,this.GetElementHandle())));if(!this.FNew&&this.FID!==t){if(r=this.FWidth,l=this.FHeight,null!=(e=document.getElementById(this.FID))&&(i=document.createElement("SPAN"),this.$class.MoveElements(e,i),this.UnbindEvents()),""!==t&&null!=(e=document.getElementById(t)))return this.CreateWithID(t),this.FID=t,this.FWidth=r,this.FHeight=l,this.UpdateElement(),void this.MoveElementsAndFree(i,this.FContainer);this.FNew=!0,this.FElement=null,this.CreateControl(),""===t&&(this.CreateInitialize(),this.FWidth=r,this.FHeight=l),null!=this.FParentElement?this.FParentElement.appendChild(this.GetContainer()):document.body.appendChild(this.GetContainer()),null!=(s=pas["WEBLib.Forms"].GetParentForm(this))&&(this.SetParent(s),this.SetElementPosition(0),this.SetLeft(0),this.SetTop(0)),null!=i&&this.MoveElementsAndFree(i,this.FContainer),this.UpdateElement(),this.UpdateElementSize()}this.FID=t,null!=this.FContainer&&this.FContainer.setAttribute("id",t)},this.SetMargins=function(t){this.FMargins.Assign(t)},this.SetAnchors=function(t){rtl.neSet(this.FAnchors,t)&&(this.FAnchors=rtl.refSet(t),0 in this.FComponentState||this.UpdateAnchoring())},this.GetElementEvent=function(){return this.FElementEvent},this.GetClientOrigin=function(){var t=pas.Types.TPoint.$new(),e=null;return t.$assign(pas.Types.Point(0,0)),null!=this.GetElementHandle()&&(e=this.GetElementHandle().getBoundingClientRect(),t.$assign(pas.Types.Point(Math.round(e.left),Math.round(e.top)))),t},this.SetHeightStyle=function(t){this.FHeightStyle!==t&&(this.FHeightStyle=t,2!==this.FHeightStyle||null==this.GetElementHandle()||this.GetIsLinked()||this.GetElementStyle().removeProperty("height"),this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetWidthStyle=function(t){this.FWidthStyle!==t&&(this.FWidthStyle=t,2!==this.FWidthStyle||null==this.GetElementHandle()||this.GetIsLinked()||this.GetElementStyle().removeProperty("width"),this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetHeightPercent=function(t){this.FHeightPercent!==t&&(this.FHeightPercent=t,this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetWidthPercent=function(t){this.FWidthPercent!==t&&(this.FWidthPercent=t,this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetShowFocus=function(t){this.FShowFocus!==t&&(this.FShowFocus=t,this.UpdateElement())},this.GetIsLinked=function(){return!this.FNew},this.SetElementFont=function(t){this.FElementFont!==t&&(this.FElementFont=t,this.UpdateElementVisual())},this.SetElementPosition=function(t){this.FElementPosition!==t&&(this.FElementPosition=t,null!=this.GetElementHandle()&&(this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize()))},this.SetClipChildren=function(t){this.FClipChildren=t,this.UpdateElement()},this.GetClientHeight=function(){return this.GetHeight()},this.SetChildOrderEx=function(t){this.FChildOrder=t},this.GetRole=function(){var t="";return t=this.FRole,null!=this.GetElementHandle()&&(t=this.GetElementHandle().getAttribute("role")),t},this.SetRole=function(t){this.FRole=t,null!=this.GetElementHandle()&&(""===t?this.GetElementHandle().removeAttribute("role"):this.GetElementHandle().setAttribute("role",t))},this.GetContainer=function(){return this.FContainer},this.GetChildContainer=function(){return this.FContainer},this.SetParentFont=function(t){t!==this.FParentFont&&t&&null!=this.FParent&&(this.BeginUpdate(),this.FFont.Assign(this.FParent.FFont),this.EndUpdate(),this.UpdateElement()),this.FParentFont=t},this.SetParentColor=function(t){this.FParentColor!==t&&t&&null!=this.FParent&&this.SetColor(this.FParent.FColor),this.FParentColor=t},this.SetDragMode=function(t){this.FDragMode=t,1===t?this.BeginDrag():this.DisableDrag()},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.ResetAnchoring(),this.DoBoundsChange(),!this.GetIsLinked()||1!==this.FWidthStyle||0 in this.FComponentState||this.IsUpdating()||null==this.GetElementHandle()||(t>=0?this.GetElementStyle().setProperty("width",pas.SysUtils.IntToStr(t)+"px"):this.GetElementStyle().removeProperty("width")))},this.SetHeight=function(t){var e=null;this.FHeight!==t&&(this.FAlign in rtl.createSet(3,4,5)&&null!=this.GetElementHandle()&&(e=this.GetElementHandle().getBoundingClientRect()).top+t>=pas["WEBLib.Forms"].WinHeight()&&(t=Math.round(pas["WEBLib.Forms"].WinHeight()-e.top)),this.FHeight=t,this.ResetAnchoring(),this.DoBoundsChange(),!this.GetIsLinked()||1!==this.FHeightStyle||0 in this.FComponentState||this.IsUpdating()||null==this.GetElementHandle()||(t>=0?this.GetElementStyle().setProperty("height",pas.SysUtils.IntToStr(t)+"px"):this.GetElementStyle().removeProperty("height")))},this.SetWidthInt=function(t){this.FWidth=t},this.SetHeightInt=function(t){this.FHeight=t},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.UpdateElementData())},this.RecreateCanvas=function(){},this.VisibleChanging=function(){},this.VisibleChanged=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).VisibleChanged()},this.ColorChanging=function(){},this.FocusedControlEntered=function(){var e=null,i=null,s=rtl.createIntfRefs();try{for(e=this.FParent;!(null===e||pas.SysUtils.Supports$1(s.ref(1,rtl.queryIntfT(e,pas.System.IUnknown)),rtl.getIntfGUIDR(t.IControl),{get:function(){return i},set:function(t){i=t}})&&i.EnterChildren(s.ref(2,rtl.queryIntfT(this,t.IControl))));)e=e.FParent}finally{s.free(),rtl._Release(i)}},this.FocusedControlExited=function(){var e=null,i=null,s=rtl.createIntfRefs();try{for(e=this.FParent;!(null===e||pas.SysUtils.Supports$1(s.ref(1,rtl.queryIntfT(e,pas.System.IUnknown)),rtl.getIntfGUIDR(t.IControl),{get:function(){return i},set:function(t){i=t}})&&i.ExitChildren(s.ref(2,rtl.queryIntfT(this,t.IControl))));)e=e.FParent}finally{s.free(),rtl._Release(i)}},this.EnterChildren=function(t){return!1,!1},this.ExitChildren=function(t){return!1,!1},this.GetWidth=function(){var t=0,e=null;return t=this.FWidth,null==this.GetElementHandle()||0 in this.FComponentState||(-1===t&&(t=Math.round(pas.System.Int(this.GetElementHandle().offsetWidth))),1!==this.FWidthStyle&&(e=this.GetElementHandle().getBoundingClientRect(),t=Math.round(pas.System.Int(e.right-e.left)))),t},this.GetHeight=function(){var t=0,e=null;return t=this.FHeight,null==this.GetElementHandle()||0 in this.FComponentState||(-1===t&&(t=Math.round(pas.System.Int(this.GetElementHandle().offsetHeight))),1!==this.FHeightStyle&&(e=this.GetElementHandle().getBoundingClientRect(),t=Math.round(pas.System.Int(e.bottom-e.top)))),t},this.GetOuterWidth=function(){return this.FWidth-this.FBorderWidth},this.GetOuterHeight=function(){return this.FHeight-this.FBorderWidth},this.GetDesignWidth=function(){return this.FWidth},this.GetDesignHeight=function(){return this.FHeight},this.GetDesignLeft=function(){return this.FLeft},this.GetDesignTop=function(){return this.FTop},this.GetLeft=function(){var t=0;return-1!==(t=this.FLeft)||null==this.GetElementHandle()||0 in this.FComponentState||(t=Math.round(this.GetElementHandle().offsetLeft)),t},this.GetTop=function(){var t=0;return-1!==(t=this.FTop)||null==this.GetElementHandle()||0 in this.FComponentState||(t=Math.round(this.GetElementHandle().offsetTop)),t},this.CreateElement=function(){return null,null},this.CreateChildElements=function(t){},this.ContainerElement=function(){return document.body},this.IsStructuralElement=function(){return!1,!1},this.IsEnabled=function(){return this.FEnabled},this.GetNewName=function(){var e,i="",s="";return i=this.$classname,pas.System.Delete({get:function(){return i},set:function(t){i=t}},1,1),s="",null!=(e=pas["WEBLib.Forms"].GetParentForm(this))&&(s=e.$classname),s+"_"+t.FindUniqueName(i)},this.IsInputControl=function(){return!1,!1},this.UseCSSFont=function(){return!(""===this.FElementClassName&&0===this.FElementFont&&!this.GetIsLinked())},this.UseCSSFontColor=function(){return!(pas["WEBLib.Forms"].Application.FThemed&&pas["WEBLib.Graphics"].ColorToRGB(this.FFont.FColor)===pas["WEBLib.Graphics"].RGB(0,0,0))},this.BindElement=function(){},this.CreateInitialize=function(){var t=null;this.FDesignTime=4 in this.FComponentState&&!(1 in this.FOwner.FComponentState||0 in this.FOwner.FComponentState),this.FRequiredScripts=pas.Classes.TStringList.$create("Create$1"),this.FOrigRect.$assign(pas.Types.Rect(-1,-1,-1,-1)),this.FClipChildren=!0,this.FDesignTime&&null!=(t=pas["WEBLib.Forms"].GetParentForm(this))&&pas["WEBLib.Forms"].TForm.isPrototypeOf(t)&&0!==rtl.as(t,pas["WEBLib.Forms"].TForm).FCSSLibrary&&this.InitCSSLibrary(rtl.as(t,pas["WEBLib.Forms"].TForm).FCSSLibrary)},this.DestroyControls=function(){for(var t=0,e=null,i=this.GetControlsCount()-1;i>=0;i--)t=i,e=this.GetControls(t),e=rtl.freeLoc(e)},this.ClearControls=function(){this.FControls=rtl.arraySetLength(this.FControls,null,0)},this.GetElementStyle=function(){return this.GetElementHandle().style},this.InitCSSLibrary=function(t){},this.SetControlCursor=function(t){this.FCursor=t,""===this.FElementClassName&&null!=this.GetElementHandle()&&this.SetElementPointer(this.GetElementHandle(),t)},this.SetBiDiMode=function(t){null!=this.GetElementHandle()&&(0===t?this.GetElementHandle().removeAttribute("dir"):this.GetElementHandle().setAttribute("dir","rtl"))},this.GetMouseEventButton=function(t){var e=0;e=0;var i=t.button;return 0===i?e=0:1===i?e=2:2===i&&(e=1),e},this.GetMouseEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),1==(1&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(3))),2==(2&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(4))),4==(4&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(5))),e},this.GetKeyBoardEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.GetMouseWheelEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.GetTouchEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.HandleDoClick=function(t){return this.FElementEvent=t,0 in this.FEventStopPropagation&&this.StopPropagation(),this.FEnabled&&this.Click(),!0,this.FElementEvent=null,!0},this.HandleDoWheel=function(t){var e,i=!1,s=0,n=0;return this.FElementEvent=t,this.StopPropagation(),this.XYToClient(t.clientX,t.clientY,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),this.FWheelMousePos.x=Math.round(s),this.FWheelMousePos.y=Math.round(n),e=rtl.refSet(this.GetMouseWheelEventShiftState(t)),i=!1,this.MouseWheel(rtl.refSet(e),pas.System.Trunc(-t.deltaY),{get:function(){return i},set:function(t){i=t}}),!0,this.FElementEvent=null,!0},this.HandleDoDblClick=function(t){return this.FElementEvent=t,4 in this.FEventStopPropagation&&this.StopPropagation(),this.FEnabled&&this.DblClick(),!0,this.FElementEvent=null,!0},this.HandleDoMouseDown=function(i){var s,n,o=!1,a=0,r=0;return this.FElementEvent=i,1 in this.FEventStopPropagation&&this.StopPropagation(),this.CanFocus()||this.PreventDefault(),e.FMouseX=Math.round(i.clientX),e.FMouseY=Math.round(i.clientY),this.XYToClient(i.clientX,i.clientY,{get:function(){return a},set:function(t){a=t}},{get:function(){return r},set:function(t){r=t}}),this.HasVertScrollBar()&&a>this.GetWidth()-t.GetScrollBarWidth()||this.HasHorzScrollBar()&&r>this.GetHeight()-t.GetScrollBarHeight()||(s=rtl.refSet(this.GetMouseEventShiftState(i)),n=this.GetMouseEventButton(i),this.MouseDown(n,rtl.refSet(s),pas.System.Trunc(a),pas.System.Trunc(r)),o=!0,this.FElementEvent=null),o},this.HandleDoMouseUp=function(e){var i,s,n=!1,o=0,a=0;return this.FElementEvent=e,2 in this.FEventStopPropagation&&this.StopPropagation(),this.XYToClient(e.clientX,e.clientY,{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}}),this.HasVertScrollBar()&&o>this.GetWidth()-t.GetScrollBarWidth()||this.HasHorzScrollBar()&&a>this.GetHeight()-t.GetScrollBarHeight()?(this.FElementEvent=null,n):(i=rtl.refSet(this.GetMouseEventShiftState(e)),s=this.GetMouseEventButton(e),0===this.FDragMode&&this.DisableDrag(),this.MouseUp(s,rtl.refSet(i),pas.System.Trunc(o),pas.System.Trunc(a)),n=!0,this.FElementEvent=null,n)},this.HandleDoMouseMove=function(t){var i,s=0,n=0;return this.FElementEvent=t,e.FCursorX=Math.round(t.clientX),e.FCursorY=Math.round(t.clientY),3 in this.FEventStopPropagation&&this.StopPropagation(),this.XYToClient(t.clientX,t.clientY,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),i=rtl.refSet(this.GetMouseEventShiftState(t)),this.MouseMove(rtl.refSet(i),pas.System.Trunc(s),pas.System.Trunc(n)),!0,this.FElementEvent=null,!0},this.HandleDoMouseLeave=function(t){var e=!1;return this.Captured()?e:(t.stopPropagation(),this.DoMouseLeave(),e=!0)},this.HandleDoContextMenu=function(t){return!0,!0},this.LayerHandleDoMouseEnter=function(t){return 0===t.buttons&&this.Captured()&&!this.FMouseInsideLayer&&(this.ReleaseCapture(),this.HandleDoMouseUp(t),this.HandleDoMouseLeave(t)),this.FMouseInsideLayer=!0,!0,!0},this.LayerHandleDoMouseLeave=function(t){return this.FMouseInsideLayer=!1,!0,!0},this.HandleDoMouseEnter=function(t){var e=!1;return this.Captured()?e:(t.stopPropagation(),this.DoMouseEnter(),e=!0)},this.HandleDoKeyDown=function(t){var e=0,i={};return this.FElementEvent=t,6 in this.FEventStopPropagation&&this.StopPropagation(),null==t.key||(e=this.GetKeyCode(t.key,!0),i=rtl.refSet(this.GetKeyBoardEventShiftState(t)),this.KeyDown({get:function(){return e},set:function(t){e=t}},rtl.refSet(i)),e in rtl.createSet(13,27,9)&&this.KeyPreview({get:function(){return e},set:function(t){e=t}},rtl.refSet(i))),!0,0===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoKeyUp=function(t){var e=0,i={},s="\0";return this.FElementEvent=t,7 in this.FEventStopPropagation&&this.StopPropagation(),null==t.key||(e=this.GetKeyCode(t.key,!0),i=rtl.refSet(this.GetKeyBoardEventShiftState(t)),27===e&&(s="",this.KeyPress({get:function(){return s},set:function(t){s=t}})),this.KeyUp({get:function(){return e},set:function(t){e=t}},rtl.refSet(i))),!0,0===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoKeyPress=function(t){var e="\0";return this.FElementEvent=t,5 in this.FEventStopPropagation&&this.StopPropagation(),this.IsKeyCharacter(t.key)&&(e=this.GetKeyChar(t.key),this.KeyPress({get:function(){return e},set:function(t){e=t}})),!0,"\0"===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoInput=function(e){var i=!1,s="\0",n="";return t.IsAndroid()&&(this.FElementEvent=e,5 in this.FEventStopPropagation&&this.StopPropagation(),s="\0",""!==e.data&&(n=e.data,s=pas.System.Assigned(n)?n.charAt(n.length-1):"\b",this.KeyPress({get:function(){return s},set:function(t){s=t}})),i=!0,"\0"===s&&this.PreventDefault(),this.FElementEvent=null),i},this.HandleDoExit=function(t){return this.DoExit(),!0,this.FocusedControlExited(),!0},this.HandleDoEnter=function(t){return this.FElementEvent=t,this.StopPropagation(),this.DoEnter(),!0,this.FElementEvent=null,this.FGotFocus=!0,this.FocusedControlEntered(),!0},this.HandleDoTouchStart=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FLastElementEvent=t,this.StopPropagation(),this.FAllowTouch||this.PreventDefault(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseDown(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchStart(pas.System.Trunc(e),pas.System.Trunc(i))),!0,this.FElementEvent=null,!0},this.HandleDoTouchMove=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FLastElementEvent=t,this.StopPropagation(),this.FAllowTouch||this.PreventDefault(),this.Captured()&&this.PreventDefault(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseMove(rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchMove(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoTouchEnd=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FAllowTouch||this.PreventDefault(),this.ReleaseCapture(),this.StopPropagation(),null!=this.FLastElementEvent&&this.FLastElementEvent.touches.length>0&&(s=this.FLastElementEvent.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&(this.MouseUp(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.FEnabled&&!this.FAllowTouch&&this.Click()),this.TouchEnd(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoTouchCancel=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.ReleaseCapture(),this.StopPropagation(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseUp(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchCancel(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoDragStart=function(t){var i=null;return this.FElementEvent=t,t.stopPropagation(),i=null,this.DoStartDrag({get:function(){return i},set:function(t){i=t}}),e.DragObject=null!=i?i:this,!0,!0},this.HandleDoDragOver=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.DragOver(e.DragObject,t.clientX,t.clientY,2,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),!this.FAcceptDrag||this.IsInputControl()&&0!==t.dataTransfer.items.length||t.preventDefault(),i=!this.FAcceptDrag,this.FElementEvent=null,i},this.HandleDoDragEnter=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.FAcceptDrag=this.IsInputControl(),this.DragOver(e.DragObject,t.clientX,t.clientY,0,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),this.FAcceptDrag&&t.preventDefault(),i=!this.FAcceptDrag,this.FElementEvent=null,i},this.HandledoDragLeave=function(t){return this.FElementEvent=t,t.stopPropagation(),this.DragOver(e.DragObject,t.clientX,t.clientY,1,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),!0,this.FElementEvent=null,!0},this.HandleDoDragEnd=function(t){return this.FElementEvent=t,t.stopPropagation(),this.DoEndDrag(e.DragObject,t.clientX,t.clientY),!0,0===this.FDragMode&&this.DisableDrag(),this.FElementEvent=null,!0},this.HandleDoDragDrop=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.FAcceptDrag?(this.IsInputControl()||t.preventDefault(),this.DragDrop(e.DragObject,t.clientX,t.clientY)):t.preventDefault(),i=this.FAcceptDrag,this.FElementEvent=null,i},this.HandleKeyPreview=function(t){},this.HandleFontChanged=function(t){0===this.FUpdateCount&&(this.SetParentFont(!1),this.ParentFontChanged()),this.FontChanged()},this.ParentFontChanged=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).FParentFont&&(this.GetControls(t).FFont.Assign(this.FFont),this.GetControls(t).FontChanged(),this.GetControls(t).FParentFont=!0,this.GetControls(t).ParentFontChanged())},this.DoExit=function(){null!=this.FOnExit&&this.FOnExit(this)},this.DoEnter=function(){null!=this.FOnEnter&&this.FOnEnter(this)},this.Click=function(){null!=this.FOnClick&&this.IsEnabled()&&this.FOnClick(this)},this.UpdateElement=function(){this.FBlockUpdateElement||this.FUpdateCount>0||null==this.GetElementHandle()||this.GetElementHandle()===this.ContainerElement()||this.IsUpdating()||(this.UpdateElementData(),this.GetIsLinked()||this.UpdateElementVisual())},this.UpdateElementSize=function(){var t=null,e=0,i=0,s=0,n=null,o=null;if(!(this.FBlockUpdateElement||this.FUpdateCount>0||this.GetIsLinked()||null==this.GetElementHandle()||this.GetElementHandle()===this.ContainerElement())){for(t=this.GetElementStyle(),e=0,i=0,n=this.FParent;null!=n&&0===this.FElementPosition&&0!==n.FElementPosition&&!pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n);){if(n.GetIsLinked()&&null!=n.GetElementHandle()&&"absolute"!==n.GetElementHandle().style.getPropertyValue("position")){o=n.GetElementHandle().getBoundingClientRect(),e=Math.round(o.left),i=Math.round(o.top),null!=n.FParent&&null!=n.FParent.GetElementHandle()&&"absolute"===n.FParent.GetElementHandle().style.getPropertyValue("position")&&(o=n.FParent.GetElementHandle().getBoundingClientRect(),e-=Math.round(o.left),i-=Math.round(o.top));break}n=n.FParent}null!=this.FParent&&this.FParent.IsStructuralElement()&&(e=this.FParent.GetLeft(),i=this.FParent.GetTop()),0===this.FElementPosition?(-1!==this.FTop?t.setProperty("top",pas.SysUtils.IntToStr(this.FTop+i)+"px"):t.setProperty("top",""),-1!==this.FLeft?t.setProperty("left",pas.SysUtils.IntToStr(this.FLeft+e)+"px"):t.setProperty("left","")):(t.removeProperty("top"),t.removeProperty("left")),1===this.FWidthStyle&&(s=this.GetOuterWidth(),-1!==this.FWidth?t.setProperty("width",pas.SysUtils.IntToStr(s)+"px"):t.removeProperty("width")),2===this.FWidthStyle&&t.removeProperty("width"),1===this.FHeightStyle&&(-1!==this.FHeight?t.setProperty("height",pas.SysUtils.IntToStr(this.GetOuterHeight())+"px"):t.removeProperty("height")),2===this.FHeightStyle&&t.removeProperty("height"),0===this.FWidthStyle&&(-1!==this.FWidth?t.setProperty("width",pas["WEBLib.Utils"].FormatProp("%.2f%%",pas.System.VarRecs(3,this.FWidthPercent))):t.removeProperty("width")),0===this.FHeightStyle&&(-1!==this.FHeight?t.setProperty("height",pas["WEBLib.Utils"].FormatProp("%.2f%%",pas.System.VarRecs(3,this.FHeightPercent))):t.removeProperty("height")),0===this.FElementPosition?t.setProperty("position","absolute"):1===this.FElementPosition?t.setProperty("position","relative"):t.removeProperty("position"),t.setProperty("box-sizing","border-box")}},this.UpdateElementVisual=function(){var e,i,s=null;if(null!=(e=this.GetElementHandle())&&!this.IsUpdating()){s=this.GetElementStyle(),this.FParentFont&&null!=this.FParent&&(this.FFont.FOnChange=null,this.FFont.Assign(this.FParent.FFont),this.FFont.FOnChange=rtl.createCallback(this,"HandleFontChanged")),""===this.FElementClassName&&(this.GetIsLinked()||(this.FClipChildren&&pas.SysUtils.LowerCase(e.tagName)!==pas["WEBLib.WebTools"].cBodyTag?s.setProperty("overflow","hidden"):s.setProperty("overflow","")),this.SetElementPointer(e,this.FCursor)),this.Captured()&&this.FLayer.style.setProperty("cursor",s.getPropertyValue("cursor")),""!==this.FElementClassName||this.CanShowFocus()?s.setProperty("outline",""):s.setProperty("outline","none"),this.UpdateElementSize();var n=this.FTextDirection;0===n?s.removeProperty("direction"):2===n?s.setProperty("direction","rtl"):1===n?s.setProperty("direction","ltr"):3===n&&s.setProperty("direction","inherit"),""===this.FElementClassName&&this.FNoUserSelect&&(s.setProperty("webkit-user-select","none"),s.setProperty("moz-user-select","none"),s.setProperty("khtml-user-select","none"),s.setProperty("ms-user-select","none"),s.setProperty("user-select","none"),s.setProperty("-webkit-tap-highlight-color","transparent")),this.SetElementColor(e,this.FColor),i=this.UseCSSFont(),t.SetHTMLElementFont(e,this.FFont,i),i?s.removeProperty("color"):this.IsEnabled()&&this.UseCSSFontColor()&&s.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor))}},this.UpdateElementData=function(){var t=null,e=null,i="",s="",n="",o=0,a=0,r=void 0;if(null!=this.GetElementHandle()){if(4 in this.FComponentState||(this.FVisible?this.GetElementStyle().setProperty("display",""):this.GetElementStyle().setProperty("display","none")),this.EnableTab(),this.IsEnabled()?this.FContainer.removeAttribute("disabled"):this.FContainer.setAttribute("disabled",""),this.GetIsLinked()&&""===this.FHint)return;if(""!==this.GetRole()&&this.FContainer.setAttribute("role",this.FRole),null!=(t=pas["WEBLib.Forms"].GetParentForm(this))&&1===t.FCSSLibrary&&this.FShowHint&&""!==this.FHint&&!pas.System.Assigned(this.FToolTip)){e=this.GetElementHandle(),i=this.FHint;var l=pas["WEBLib.Forms"].Application.FHintPosition;0===l?n="left":2===l?n="right":1===l?n="top":3===l&&(n="bottom"),s=pas["WEBLib.Forms"].Application.FHintClassName,o=pas["WEBLib.Forms"].Application.FHintPause,a=pas["WEBLib.Forms"].Application.FHintHidePause,r=new bootstrap.Tooltip(e,{title:i,trigger:"hover",placement:n,customClass:s,delay:{show:o,hide:a}}),this.FToolTip=r}else this.FShowHint&&""!==this.FHint?this.FContainer.setAttribute("title",this.FHint):this.FContainer.removeAttribute("title");this.IsEnabled()&&1!==this.FElementFont?this.UseCSSFontColor()&&this.GetElementStyle().setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor)):this.GetElementStyle().removeProperty("color")}},this.UpdateParent=function(){this.InternalUpdateParent(),this.UpdateChildren(this.FPrevParent),this.UpdateChildren(this.FParent)},this.UpdateControlSize=function(t,e){this.FWidth=t,this.FHeight=e},this.InternalUpdateParent=function(){var t=null;t=this.FPrevParent,this.FNew&&(this.CreateControl(),null!=this.GetContainer()&&(null!=this.FParent&&null==this.FParent.GetContainer()&&this.FParent.CreateControl(),this.FParent!==t&&null!=t&&null!=t.GetContainer()&&this.GetContainer().parentNode===t.GetChildContainer()&&t.GetChildContainer().removeChild(this.GetContainer()),null!=this.FParent&&null!=this.FParent.GetContainer()&&this.FParent.GetChildContainer().appendChild(this.GetContainer())))},this.UpdateChildren=function(e){var i=0,s=null;if(null!=e&&!(3 in this.FComponentState)){0!==e.FAlign&&e.DoRealign(),t.TCustomControl.isPrototypeOf(e)&&(rtl.as(e,t.TCustomControl).RecreateCanvas(),rtl.as(e,t.TCustomControl).Invalidate());for(var n=0,o=e.GetControlsCount()-1;n<=o;n++)i=n,s=e.GetControls(i),this.UpdateChildren(s)}},this.DisableTab=function(){var t=0;this.FTabStop&&this.CanFocus()||null!=this.GetContainer()&&this.GetContainer().setAttribute("tabindex","-1");for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).DisableTab()},this.EnableTab=function(){var t=0;null==this.FContainer||this.GetIsLinked()||(this.FTabStop&&this.CanFocus()?this.FContainer.setAttribute("tabindex",pas.SysUtils.IntToStr(this.FTabOrder+1)):this.FContainer.setAttribute("tabindex","-1"));for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).EnableTab()},this.SetElementClassName=function(t){this.FElementClassName!==t&&(this.FElementClassName=t,null!=this.FContainer&&this.FContainer.setAttribute("class",t),this.UpdateElement())},this.SetColor=function(t){this.FColor=t,this.UpdateElementVisual(),this.ColorChanging()},this.SetFont=function(t){this.FFont.SetName(t.FName),this.FFont.SetSize(t.FSize),this.FFont.SetStyle(rtl.refSet(t.FStyle)),this.FFont.SetColor(t.FColor)},this.SetParent=function(t){var e;null!=t&&(t=t.CanAcceptChild(this)),e=this.FNew,this.FParent!==t&&(null!=this.FParent&&this.FParent.UnRegisterParent(this),this.FPrevParent=this.FParent,this.FParent=t,this.FGotFocus=!1,this.UpdateParent(),3 in this.FComponentState||(e||this.UpdateElement(),this.InitScript()),null!=this.FParent&&this.FParent.RegisterParent(this),0 in this.FComponentState&&null!=this.FParent&&!(0 in this.FParent.FComponentState)&&this.Loaded(),null==t||null==this.FParent||this.FParent.IsUpdating()||this.Realign(),3 in this.FComponentState||this.Invalidate())},this.RegisterParent=function(t){this.FControls=rtl.arraySetLength(this.FControls,null,rtl.length(this.FControls)+1),this.FControls[rtl.length(this.FControls)-1]=t},this.UnRegisterParent=function(t){var e=0,i=!1;i=!1;for(var s=0,n=rtl.length(this.FControls)-1;s<=n;s++)e=s,this.FControls[e]===t&&(i=!0),i&&e<rtl.length(this.FControls)-1&&(this.FControls[e]=this.FControls[e+1]);i&&(this.FControls=rtl.arraySetLength(this.FControls,null,rtl.length(this.FControls)-1))},this.CanAcceptChild=function(t){return this,this},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.ResetAnchoring(),this.FUpdateTopLeft||(this.FOrigLeft=t),this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.ResetAnchoring(),this.FUpdateTopLeft||(this.FOrigTop=t),this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign())},this.MouseUp=function(t,e,i,s){this.FEnabled&&null!=this.FOnMouseUp&&this.FOnMouseUp(this,t,rtl.refSet(e),i,s)},this.MouseDown=function(t,e,i,s){this.FEnabled&&null!=this.FOnMouseDown&&this.FOnMouseDown(this,t,rtl.refSet(e),i,s)},this.MouseMove=function(t,e,i){this.FEnabled&&null!=this.FOnMouseMove&&this.FOnMouseMove(this,rtl.refSet(t),e,i)},this.TouchStart=function(t,e){null!=this.FOnTouchStart&&this.FOnTouchStart(this,t,e)},this.TouchMove=function(t,e){null!=this.FOnTouchMove&&this.FOnTouchMove(this,t,e)},this.TouchEnd=function(t,e){null!=this.FOnTouchEnd&&this.FOnTouchEnd(this,t,e)},this.TouchCancel=function(t,e){null!=this.FOnTouchCancel&&this.FOnTouchCancel(this,t,e)},this.DoMouseEnter=function(){null!=this.FOnMouseEnter&&this.FOnMouseEnter(this)},this.DoMouseLeave=function(){null!=this.FOnMouseLeave&&this.FOnMouseLeave(this)},this.MouseWheel=function(t,e,i){var s=!1;for(null!=this.FOnMouseWheel&&this.FOnMouseWheel(this,rtl.refSet(t),e,pas.Types.TPoint.$clone(pas.Types.Point(0,0)),i),this.FWheelAccumulator+=e;Math.abs(this.FWheelAccumulator)>=120;)s=this.FWheelAccumulator<0,this.FWheelAccumulator=Math.abs(this.FWheelAccumulator)-120,s?(0!==this.FWheelAccumulator&&(this.FWheelAccumulator=-this.FWheelAccumulator),this.DoMouseWheelDown(rtl.refSet(t),pas.Types.TPoint.$clone(this.FWheelMousePos))):this.DoMouseWheelUp(rtl.refSet(t),pas.Types.TPoint.$clone(this.FWheelMousePos))},this.DoMouseWheelDown=function(t,e){var i=!1;return i=!1,null!=this.FOnMouseWheelDown&&this.FOnMouseWheelDown(this,rtl.refSet(t),pas.Types.TPoint.$clone(e),{get:function(){return i},set:function(t){i=t}}),i},this.DoMouseWheelUp=function(t,e){var i=!1;return i=!1,null!=this.FOnMouseWheelUp&&this.FOnMouseWheelUp(this,rtl.refSet(t),pas.Types.TPoint.$clone(e),{get:function(){return i},set:function(t){i=t}}),i},this.DblClick=function(){null!=this.FOnDblClick&&this.FOnDblClick(this)},this.KeyDown=function(t,e){null!=this.FOnKeyDown&&this.FOnKeyDown(this,t,rtl.refSet(e))},this.KeyPreview=function(e,i){null!=this.FOwner&&t.TControl.isPrototypeOf(this.FOwner)&&rtl.as(this.FOwner,t.TControl).KeyPreview(e,rtl.refSet(i))},this.KeyPress=function(t){null!=this.FOnKeyPress&&this.FOnKeyPress(this,t)},this.KeyUp=function(t,e){null!=this.FOnKeyUp&&this.FOnKeyUp(this,t,rtl.refSet(e))},this.SetFocus=function(){var t=null;this.CanFocus()&&null!=this.GetElementHandle()&&(t=this.GetElementHandle(),this.FGotFocus?t.focus():setTimeout((function(){t.focus()}),1))},this.DoMarginsChanged=function(t){this.DoRealign()},this.DoCenterChanged=function(t){this.DoRealign()},this.DoRealign=function(){null==this.FParent||this.FParent.IsUpdating()||this.FParent.AlignControl(this.FParent)},this.DoBoundsChange=function(){var t,e=!1;this.UpdateElementSize(),this.RecreateCanvas(),this.FIsResizing||(this.FIsResizing=!0,this.InternalResize(),this.DoRealign(),e=!1,null!=(t=pas["WEBLib.Forms"].GetParentForm(this))&&(e=(e=t.FIsResizing$1)||t.FUpdateCount>0),(e=(e=e||this.FUpdateCount>0)||this.FIsAligning)||this.UpdateChildAnchoring(),this.FIsResizing=!1)},this.DoEndDrag=function(t,e,i){null!=this.FonEndDrag&&this.FonEndDrag(this,t,e,i)},this.DoStartDrag=function(t){null!=this.FOnStartDrag&&this.FOnStartDrag(this,t)},this.DragOver=function(t,e,i,s,n){null!=this.FOnDragOver&&this.FOnDragOver(this,t,e,i,s,n)},this.IsFocused=function(){return this.FContainer===document.activeElement},this.Focused=function(){return this.FContainer===document.activeElement},this.GetID=function(){return this.FID},this.GetElementHandle=function(){var t=null;return t=null,null!=this.FContainer&&this.FControlCreated&&(t=this.FContainer),t},this.GetElementBindHandle=function(){return this.GetElementHandle()},this.GetKeyCode=function(t,e){var i=0;i=-1;var s=t;return"Up"===s?i=38:"Down"===s?i=40:"Left"===s?i=37:"Right"===s?i=39:"!"===s?i=56:'"'===s||"#"===s?i=51:"$"===s?i=186:"%"===s?i=192:"'"===s?i=52:"("===s?i=53:")"===s?i=219:"*"===s?i=106:"+"===s?i=107:"-"===s?i=109:","===s?i=44:"."===s?i=46:"/"===s?i=111:"\\"===s?i=226:"="===s?i=187:"<"===s||">"===s?i=226:s===pas.Web.TJSKeyNames.BackSpace?i=8:s===pas.Web.TJSKeyNames.Tab?i=9:s===pas.Web.TJSKeyNames.Enter?i=13:s===pas.Web.TJSKeyNames.Shift?i=16:s===pas.Web.TJSKeyNames.Control?i=17:s===pas.Web.TJSKeyNames.Alt?i=18:s===pas.Web.TJSKeyNames.Pause?i=19:s===pas.Web.TJSKeyNames.CapsLock?i=20:s===pas.Web.TJSKeyNames.Escape?i=27:s===pas.Web.TJSKeyNames.PageUp?i=33:s===pas.Web.TJSKeyNames.PageDown?i=34:s===pas.Web.TJSKeyNames._End?i=35:s===pas.Web.TJSKeyNames.Home?i=36:s===pas.Web.TJSKeyNames.ArrowLeft?i=37:s===pas.Web.TJSKeyNames.ArrowUp?i=38:s===pas.Web.TJSKeyNames.ArrowRight?i=39:s===pas.Web.TJSKeyNames.ArrowDown?i=40:s===pas.Web.TJSKeyNames.Insert?i=45:s===pas.Web.TJSKeyNames.Delete?i=46:s===pas.Web.TJSKeyNames.F1?i=112:s===pas.Web.TJSKeyNames.F2?i=113:s===pas.Web.TJSKeyNames.F3?i=114:s===pas.Web.TJSKeyNames.F4?i=115:s===pas.Web.TJSKeyNames.F5?i=116:s===pas.Web.TJSKeyNames.F6?i=117:s===pas.Web.TJSKeyNames.F7?i=118:s===pas.Web.TJSKeyNames.F8?i=119:s===pas.Web.TJSKeyNames.F9?i=120:s===pas.Web.TJSKeyNames.F10?i=121:s===pas.Web.TJSKeyNames.F11?i=122:s===pas.Web.TJSKeyNames.F12?i=123:s===pas.Web.TJSKeyNames.F13?i=124:s===pas.Web.TJSKeyNames.F14?i=125:s===pas.Web.TJSKeyNames.F15?i=126:s===pas.Web.TJSKeyNames.F16?i=127:s===pas.Web.TJSKeyNames.F17?i=128:s===pas.Web.TJSKeyNames.F18?i=129:s===pas.Web.TJSKeyNames.F19?i=130:s===pas.Web.TJSKeyNames.F20?i=131:pas.System.Assigned(t)&&t.length>0&&(i=t.charCodeAt(0),e&&i>=97&&i<=122?i&=223:i>=65&&i<=90?i|=64:i>122&&(i|=128)),i},this.GetKeyChar=function(t){var e="\0",i=0;i=-1,e="\0";var s=t;return s===pas.Web.TJSKeyNames.BackSpace?i=8:s===pas.Web.TJSKeyNames.Tab?i=9:s===pas.Web.TJSKeyNames.Enter?i=13:s===pas.Web.TJSKeyNames.Shift?i=16:s===pas.Web.TJSKeyNames.Control?i=17:s===pas.Web.TJSKeyNames.Alt?i=18:s===pas.Web.TJSKeyNames.Pause?i=19:s===pas.Web.TJSKeyNames.CapsLock?i=20:s===pas.Web.TJSKeyNames.Escape?i=27:s===pas.Web.TJSKeyNames.PageUp?i=33:s===pas.Web.TJSKeyNames.PageDown?i=34:s===pas.Web.TJSKeyNames._End?i=35:s===pas.Web.TJSKeyNames.Home?i=36:s===pas.Web.TJSKeyNames.ArrowLeft?i=37:s===pas.Web.TJSKeyNames.ArrowUp?i=38:s===pas.Web.TJSKeyNames.ArrowRight?i=39:s===pas.Web.TJSKeyNames.ArrowDown?i=40:s===pas.Web.TJSKeyNames.Insert?i=45:s===pas.Web.TJSKeyNames.Delete?i=46:s===pas.Web.TJSKeyNames.F1?i=112:s===pas.Web.TJSKeyNames.F2?i=113:s===pas.Web.TJSKeyNames.F3?i=114:s===pas.Web.TJSKeyNames.F4?i=115:s===pas.Web.TJSKeyNames.F5?i=116:s===pas.Web.TJSKeyNames.F6?i=117:s===pas.Web.TJSKeyNames.F7?i=118:s===pas.Web.TJSKeyNames.F8?i=119:s===pas.Web.TJSKeyNames.F9?i=120:s===pas.Web.TJSKeyNames.F10?i=121:s===pas.Web.TJSKeyNames.F11?i=122:s===pas.Web.TJSKeyNames.F12?i=123:s===pas.Web.TJSKeyNames.F13?i=124:s===pas.Web.TJSKeyNames.F14?i=125:s===pas.Web.TJSKeyNames.F15?i=126:s===pas.Web.TJSKeyNames.F16?i=127:s===pas.Web.TJSKeyNames.F17?i=128:s===pas.Web.TJSKeyNames.F18?i=129:s===pas.Web.TJSKeyNames.F19?i=130:s===pas.Web.TJSKeyNames.F20?i=131:e=t.charAt(0),-1!==i&&(e=String.fromCharCode(i)),e},this.IsKeyCharacter=function(t){var e=t;return"Up"!==e&&"Down"!==e&&"Left"!==e&&"Right"!==e&&e!==pas.Web.TJSKeyNames.Shift&&e!==pas.Web.TJSKeyNames.Control&&e!==pas.Web.TJSKeyNames.Alt&&e!==pas.Web.TJSKeyNames.Pause&&e!==pas.Web.TJSKeyNames.CapsLock&&e!==pas.Web.TJSKeyNames.PageUp&&e!==pas.Web.TJSKeyNames.PageDown&&e!==pas.Web.TJSKeyNames._End&&e!==pas.Web.TJSKeyNames.Home&&e!==pas.Web.TJSKeyNames.ArrowLeft&&e!==pas.Web.TJSKeyNames.ArrowUp&&e!==pas.Web.TJSKeyNames.ArrowRight&&e!==pas.Web.TJSKeyNames.ArrowDown&&e!==pas.Web.TJSKeyNames.Insert&&e!==pas.Web.TJSKeyNames.Delete&&e!==pas.Web.TJSKeyNames.F1&&e!==pas.Web.TJSKeyNames.F2&&e!==pas.Web.TJSKeyNames.F3&&e!==pas.Web.TJSKeyNames.F4&&e!==pas.Web.TJSKeyNames.F5&&e!==pas.Web.TJSKeyNames.F6&&e!==pas.Web.TJSKeyNames.F7&&e!==pas.Web.TJSKeyNames.F8&&e!==pas.Web.TJSKeyNames.F9&&e!==pas.Web.TJSKeyNames.F10&&e!==pas.Web.TJSKeyNames.F11&&e!==pas.Web.TJSKeyNames.F12&&e!==pas.Web.TJSKeyNames.F13&&e!==pas.Web.TJSKeyNames.F14&&e!==pas.Web.TJSKeyNames.F15&&e!==pas.Web.TJSKeyNames.F16&&e!==pas.Web.TJSKeyNames.F17&&e!==pas.Web.TJSKeyNames.F18&&e!==pas.Web.TJSKeyNames.F19&&e!==pas.Web.TJSKeyNames.F20},this.GetClientRect=function(){var t=pas.Types.TRect.$new(),e="",i=0,s=0;return e=pas.SysUtils.UpperCase(this.GetStyle("border-width")),s=0,(i=pas.System.Pos("PX",e))>0&&(pas.System.Delete({get:function(){return e},set:function(t){e=t}},i,2),pas.System.val$6(e,{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}})),t.$assign(pas.Types.Rect(0,0,this.GetWidth()-2*s,this.GetHeight()-2*s)),t},this.CreateControl=function(){null==this.FElement&&(this.FElement=this.CreateElement(),null!=this.FElement&&(this.FControlCreated=!0,this.FContainer=this.FElement,"body"!==this.GetID()&&this.GetContainer().setAttribute("id",this.GetID()),this.GetContainer().setAttribute("zindex","0"),""!==this.FElementClassName&&this.GetContainer().setAttribute("class",this.FElementClassName),this.CreateChildElements(this.FElement),this.BindEvents(),this.UpdateElement()))},this.ClearMethodPointers=function(){this.FWheelPtr=null,this.FClickPtr=null,this.FDblClickPtr=null,this.FMouseDownPtr=null,this.FMouseUpPtr=null,this.FMouseMovePtr=null,this.FMouseLeavePtr=null,this.FMouseEnterPtr=null,this.FKeyDownPtr=null,this.FKeyUpPtr=null,this.FKeyPressPtr=null,this.FInputPtr=null,this.FEnterPtr=null,this.FExitPtr=null,this.FTouchStartPtr=null,this.FTouchEndPtr=null,this.FTouchMovePtr=null,this.FTouchCancelPtr=null,this.FLayerMouseLeavePtr=null,this.FLayerMouseEnterPtr=null,this.FScriptLoadedPtr=null,this.FContextMenuPtr=null},this.GetMethodPointers=function(){null===this.FWheelPtr&&(this.FWheelPtr=rtl.createCallback(this,"HandleDoWheel"),this.FClickPtr=rtl.createCallback(this,"HandleDoClick"),this.FDblClickPtr=rtl.createCallback(this,"HandleDoDblClick"),this.FMouseDownPtr=rtl.createCallback(this,"HandleDoMouseDown"),this.FMouseUpPtr=rtl.createCallback(this,"HandleDoMouseUp"),this.FMouseMovePtr=rtl.createCallback(this,"HandleDoMouseMove"),this.FMouseLeavePtr=rtl.createCallback(this,"HandleDoMouseLeave"),this.FMouseEnterPtr=rtl.createCallback(this,"HandleDoMouseEnter"),this.FKeyDownPtr=rtl.createCallback(this,"HandleDoKeyDown"),this.FKeyUpPtr=rtl.createCallback(this,"HandleDoKeyUp"),this.FKeyPressPtr=rtl.createCallback(this,"HandleDoKeyPress"),this.FInputPtr=rtl.createCallback(this,"HandleDoInput"),this.FEnterPtr=rtl.createCallback(this,"HandleDoEnter"),this.FExitPtr=rtl.createCallback(this,"HandleDoExit"),this.FTouchStartPtr=rtl.createCallback(this,"HandleDoTouchStart"),this.FTouchEndPtr=rtl.createCallback(this,"HandleDoTouchEnd"),this.FTouchMovePtr=rtl.createCallback(this,"HandleDoTouchMove"),this.FTouchCancelPtr=rtl.createCallback(this,"HandleDoTouchCancel"),this.FLayerMouseLeavePtr=rtl.createCallback(this,"LayerHandleDoMouseLeave"),this.FLayerMouseEnterPtr=rtl.createCallback(this,"LayerHandleDoMouseEnter"),this.FScriptLoadedPtr=rtl.createCallback(this,"RequiredScriptLoaded"),this.FDragStartPtr=rtl.createCallback(this,"HandleDoDragStart"),this.FDragOverPtr=rtl.createCallback(this,"HandleDoDragOver"),this.FDragEnterPtr=rtl.createCallback(this,"HandleDoDragEnter"),this.FDragLeavePtr=rtl.createCallback(this,"HandledoDragLeave"),this.FDragEndPtr=rtl.createCallback(this,"HandleDoDragEnd"),this.FDragDropPtr=rtl.createCallback(this,"HandleDoDragDrop"),this.FContextMenuPtr=rtl.createCallback(this,"HandleDoContextMenu"))},this.EventsBound=function(){return this.FEventsBound},this.BindEvents=function(){var t=null,e=null;null!=this.GetElementBindHandle()&&(this.GetMethodPointers(),this.FEventsBound=!0,t=this.GetElementBindHandle(),e=this.FWheelPtr,t.addEventListener("wheel",e,{passive:!0}),t.addEventListener("click",this.FClickPtr),t.addEventListener("dblclick",this.FDblClickPtr),t.addEventListener("mousedown",this.FMouseDownPtr),t.addEventListener("mouseup",this.FMouseUpPtr),t.addEventListener("mousemove",this.FMouseMovePtr),t.addEventListener("mouseleave",this.FMouseLeavePtr),t.addEventListener("mouseenter",this.FMouseEnterPtr),t.addEventListener("keydown",this.FKeyDownPtr),t.addEventListener("keyup",this.FKeyUpPtr),t.addEventListener("keypress",this.FKeyPressPtr),t.addEventListener("input",this.FInputPtr),t.addEventListener("focus",this.FEnterPtr),t.addEventListener("blur",this.FExitPtr),e=this.FTouchStartPtr,t.addEventListener("touchstart",e,{passive:!0}),e=this.FTouchMovePtr,t.addEventListener("touchmove",e,{passive:!0}),t.addEventListener("touchend",this.FTouchEndPtr),t.addEventListener("touchcancel",this.FTouchCancelPtr),t.addEventListener("contextmenu",this.FContextMenuPtr),t.addEventListener("dragstart",this.FDragStartPtr),t.addEventListener("dragover",this.FDragOverPtr),t.addEventListener("dragenter",this.FDragEnterPtr),t.addEventListener("dragleave",this.FDragLeavePtr),t.addEventListener("dragend",this.FDragEndPtr),t.addEventListener("drop",this.FDragDropPtr))},this.UnbindEvents=function(){var t=null;this.ReleaseCapture(),null!=this.GetElementBindHandle()&&((t=this.GetElementBindHandle()).removeEventListener("wheel",this.FWheelPtr),t.removeEventListener("click",this.FClickPtr),t.removeEventListener("dblclick",this.FDblClickPtr),t.removeEventListener("mousedown",this.FMouseDownPtr),t.removeEventListener("mouseup",this.FMouseUpPtr),t.removeEventListener("mousemove",this.FMouseMovePtr),t.removeEventListener("mouseleave",this.FMouseLeavePtr),t.removeEventListener("mouseenter",this.FMouseEnterPtr),t.removeEventListener("keydown",this.FKeyDownPtr),t.removeEventListener("keyup",this.FKeyUpPtr),t.removeEventListener("keypress",this.FKeyPressPtr),t.removeEventListener("focus",this.FEnterPtr),t.removeEventListener("blur",this.FExitPtr),t.removeEventListener("input",this.FInputPtr),t.removeEventListener("touchstart",this.FTouchStartPtr),t.removeEventListener("touchmove",this.FTouchMovePtr),t.removeEventListener("touchend",this.FTouchEndPtr),t.removeEventListener("touchcancel",this.FTouchEndPtr),t.removeEventListener("contextmenu",this.FContextMenuPtr))},this.UpdatePadding=function(t){},this.AlignControls=function(t,e){var i=this,s=0;function n(t,s){var n=0,o=0,a=0,r=0;t.AnchoringInitialized()||i.InitAnchoring(),t.FUpdateTopLeft=!0,t.FAlignWithMargins?(n=t.FMargins.FLeft,o=t.FMargins.FTop,r=t.FMargins.FBottom,a=t.FMargins.FRight):(n=0,o=0,r=0,a=0);var l=s;1===l?(t.SetBoundsInt(e.Left+n,e.Top+o,e.Right-e.Left-n-a,t.GetHeight()),e.Top=e.Top+t.GetHeight()+o+r):2===l?(t.SetBoundsInt(e.Left+n,e.Bottom-t.GetHeight()-r-1,e.Right-e.Left-n-a-1,t.GetHeight()),e.Bottom=e.Bottom-t.GetHeight()-o-r):3===l?(t.SetBoundsInt(e.Left+n,e.Top+o,t.GetWidth(),e.Bottom-e.Top-o-r),e.Left=e.Left+t.GetWidth()+n+a):4===l?(t.SetBoundsInt(e.Right-t.GetWidth()-a,e.Top+o,t.GetWidth(),e.Bottom-e.Top-r-o),e.Right=e.Right-t.GetWidth()-a-n):5===l?t.SetBoundsInt(e.Left+n,e.Top+o,e.Right-e.Left-n-a,e.Bottom-e.Top-r-o):6===l&&(n=t.GetLeft(),o=t.GetTop(),a=0,r=0,(t.FCenter.FVertical||t.FCenter.FHorizontal)&&(t.FCenter.FHorizontal&&(n=e.Left,a=rtl.trunc((e.Right-e.Left-t.GetWidth())/2)),t.FCenter.FVertical&&(o=e.Top,r=rtl.trunc((e.Bottom-e.Top-t.GetHeight())/2)),t.SetBoundsInt(n+a,o+r,t.GetWidth(),t.GetHeight()))),t.FUpdateTopLeft=!1}function o(t){var e=0,s=0,o=0,a=null;a=pas.Classes.TList.$create("Create$1");for(var r=0,l=i.GetControlsCount()-1;r<=l;r++)if(e=r,(i.GetControls(e).FCenter.FVertical||i.GetControls(e).FCenter.FHorizontal)&&6===t||i.GetControls(e).FAlign===t&&(i.GetControls(e).FVisible||4 in i.FComponentState)){o=a.GetCount();for(var h=a.GetCount()-1;h>=0;h--){s=h;var p=t;1===p?i.GetControls(e).FOrigTop<rtl.getObject(a.Get(s)).FOrigTop&&(o=s):3===p?i.GetControls(e).FOrigLeft<rtl.getObject(a.Get(s)).FOrigLeft&&(o=s):4===p?i.GetControls(e).FOrigLeft+i.GetControls(e).GetWidth()>rtl.getObject(a.Get(s)).FOrigLeft+rtl.getObject(a.Get(s)).GetWidth()&&(o=s):2===p&&i.GetControls(e).FOrigTop+i.GetControls(e).GetHeight()>rtl.getObject(a.Get(s)).FOrigTop+rtl.getObject(a.Get(s)).GetHeight()&&(o=s)}a.Insert(o,i.GetControls(e))}for(var c=0,F=a.GetCount()-1;c<=F;c++)e=c,n(rtl.getObject(a.Get(e)),t);a=rtl.freeLoc(a)}this.UpdatePadding(e),o(1),o(2),o(3),o(4),o(5),o(6);for(var a=0,r=this.GetControlsCount()-1;a<=r;a++)s=a,this.GetControls(s).AlignControl(this.GetControls(s))},this.AlignControl=function(t){var e,i=pas.Types.TRect.$new(),s=null,n="",o="",a="",r=null,l=null,h=0,p=0;this.FIsAligning||this.IsUpdating()||0 in this.FComponentState||(null==this.FParent||this.FParent.FVisible)&&(null!=(l=pas["WEBLib.Forms"].GetParentForm(this))&&l.IsUpdating()||(h=0,null!=l&&""!==l.FFormContainer&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t)&&null!=(r=document.getElementById(l.FFormContainer))&&(s=r.getBoundingClientRect(),h=Math.round(s.top+1)),this.FIsAligning=!0,null!=t&&(null!=(e=t.GetElementHandle())&&(n=t.GetElementStyle().getPropertyValue("overflow"),o=t.GetElementStyle().getPropertyValue("overflow-x"),a=t.GetElementStyle().getPropertyValue("overflow-y"),this.FClipChildren&&pas.SysUtils.LowerCase(e.tagName)!==pas["WEBLib.WebTools"].cBodyTag?t.GetElementStyle().setProperty("overflow","hidden"):t.GetElementStyle().setProperty("overflow","")),i.$assign(this.GetClientRect()),i.Bottom=i.Bottom-h,this.GetIsLinked()&&(s=this.GetElementHandle().getBoundingClientRect(),i.$assign(pas.Types.Rect(0,0,Math.round(s.right-s.left),Math.round(s.bottom-s.top)))),i.Bottom+h>pas["WEBLib.Forms"].WinHeight()&&1!==this.FHeightStyle&&0!==this.FElementPosition&&!this.GetIsLinked()&&null==pas["WEBLib.Forms"].VSIDE&&(null!=this.FParent&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this.FParent)||pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this))&&(i.Bottom=pas["WEBLib.Forms"].WinHeight()-h),null!=e&&"BODY"===e.tagName&&(p=0,document.body.scrollHeight>document.body.clientHeight&&!(4 in this.FComponentState)&&(p=16),""!==l.FFormContainer?(i.Bottom=Math.round(Math.min(i.Bottom,pas["WEBLib.Forms"].WinHeight())),i.Right=Math.round(Math.min(i.Right-p,pas["WEBLib.Forms"].WinWidth()))):(i.Bottom=l.GetHeight(),i.Right=l.GetWidth())),pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t)&&null==pas["WEBLib.Forms"].VSIDE&&(i.Bottom>pas["WEBLib.Forms"].WinHeight()&&(i.Bottom=pas["WEBLib.Forms"].WinHeight()),i.Right>pas["WEBLib.Forms"].WinWidth()&&(i.Right=pas["WEBLib.Forms"].WinWidth())),t.IsStructuralElement()&&i.$assign(this.FParent.GetClientRect()),pas["WEBLib.Forms"].Application.CalcScrollBarWidth()<16&&!pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t)&&null!=t.FParent&&null!=t.GetElementHandle()&&t.GetElementHandle().scrollHeight>t.GetElementHandle().clientHeight&&(i.Right=i.Right+(17-pas["WEBLib.Forms"].Application.CalcScrollBarWidth())),this.AlignControls(t,i),null!=e&&(t.GetElementStyle().setProperty("overflow",n),t.GetElementStyle().setProperty("overflow-x",o),t.GetElementStyle().setProperty("overflow-y",a)),this.FIsAligning=!1)))},this.InitAnchoring=function(){var t=0,e=0,i=0;function s(e,i,s){var n;i.set(0),s.set(0),null!=(n=pas.TypInfo.GetPropInfo(e.$class.ClassInfo(),"BorderStyle"))&&((t=pas.TypInfo.GetOrdProp$1(e,n))in rtl.createSet(1,4,5)&&(i.set(4),s.set(4)),t in rtl.createSet(2,3)&&(i.set(16),s.set(16)))}if(!this.AnchoringInitialized()){e=0,i=0,pas["WEBLib.Forms"].TForm.isPrototypeOf(this)?(rtl.as(this,pas["WEBLib.Forms"].TForm).IsMiletus()&&s(this,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),this.FOrigRect.$assign(pas.Types.Rect(0,0,this.GetDesignWidth()-e,this.GetDesignHeight()-i))):this.FOrigRect.$assign(pas.Types.Rect(this.GetDesignLeft(),this.GetDesignTop(),this.GetDesignLeft()+this.GetDesignWidth(),this.GetDesignTop()+this.GetDesignHeight())),null!=this.FParent&&(pas["WEBLib.Forms"].TForm.isPrototypeOf(this.FParent)?(rtl.as(this.FParent,pas["WEBLib.Forms"].TForm).IsMiletus()&&s(this.FParent,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),this.FOrigParentRect.$assign(pas.Types.Rect(0,0,this.FParent.GetDesignWidth()-e,this.FParent.GetDesignHeight()-i))):(this.FParent.AnchoringInitialized()||this.FParent.InitAnchoring(),this.FOrigParentRect.$assign(pas.Types.Rect(this.FParent.GetDesignLeft(),this.FParent.GetDesignTop(),this.FParent.GetDesignLeft()+this.FParent.GetDesignWidth(),this.FParent.GetDesignTop()+this.FParent.GetDesignHeight()))));for(var n=0,o=this.GetControlsCount()-1;n<=o;n++)t=n,this.GetControls(t).InitAnchoring()}},this.AnchoringInitialized=function(){return-1!==this.FOrigRect.Left||-1!==this.FOrigRect.Top},this.InitScript=function(){},this.Realign=function(){this.AlignControl(this)},this.Loaded=function(){var t=0;if(0 in this.FComponentState){pas.Classes.TComponent.Loaded.call(this);for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).FElementPosition in rtl.createSet(1,2)&&!this.GetControls(t).GetIsLinked()&&this.GetControls(t).FChildOrder>=0&&this.GetControls(t).FChildOrder<this.GetChildContainer().childNodes.length&&this.GetChildContainer().insertBefore(this.GetControls(t).GetContainer(),this.GetChildContainer().childNodes.item(this.GetControls(t).FChildOrder)),this.GetControls(t).Loaded();for(var s=0,n=this.GetComponentCount()-1;s<=n;s++)t=s,0 in this.GetComponent(t).FComponentState&&this.GetComponent(t).Loaded();5===this.FAlign&&null!=this.FParent&&this.SetBoundsInt(0,0,this.FParent.FWidth,this.FParent.FHeight),this.Resize(),this.UpdateElement()}},this.InternalResize=function(){0 in this.FComponentState||this.Resize()},this.FontChanged=function(){this.UpdateElementVisual()},this.SetElementColor=function(e,i){var s;s=!(pas["WEBLib.Forms"].Application.FThemed||""!==this.FElementClassName),this.GetIsLinked()||t.SetHTMLElementColor(e,i,!s)},this.MoveElements=function(t,e){if(t&&e)for(;t.childNodes.length;)e.appendChild(t.firstChild)},this.MoveElementsAndFree=function(t,e){if(t&&e){for(;t.childNodes.length;)e.appendChild(t.firstChild);t.remove()}},this.CreateWithID=function(e){var i;this.ClearMethodPointers(),this.FUpdateCount=0,this.FControlCreated=!1,this.FLinkTouchEvents=!0,this.FIsResizing=!1,(null!=this.FOwner&&0 in this.FOwner.FComponentState||null==this.FOwner)&&(null!=this.FOwner&&4 in this.FOwner.FComponentState||this.Loading()),this.FElementPosition=0,this.FWidthStyle=1,this.FHeightStyle=1,i=document.getElementById(e),this.FNew=!(null!=i),this.FFont=pas["WEBLib.Graphics"].TFont.$create("Create$1"),this.FFont.FOnChange=rtl.createCallback(this,"HandleFontChanged"),this.FNew?this.FContainer=null:(this.FContainer=i,this.FControlCreated=!0,this.FElementPosition=1,this.CreateChildElements(i),this.BindElement(),this.BindEvents()),this.FID=e,this.FEnabled=!0,this.FVisible=!0,this.FLeft=0,this.FTop=0,this.FAlign=0,this.FAlignWithMargins=!1,this.FIsAligning=!1,this.FParentFont=!0,this.FParentBiDiMode=!0,this.FParentColor=!1,this.FAnchors=rtl.createSet(0,1),this.FShowFocus=!1,this.FBorderWidth=0,this.FEnablePropagation=!1,this.FToolTip=null,this.FColor=16711422,this.FMargins=t.TMargins.$create("Create$1"),this.FMargins.FOnChange=rtl.createCallback(this,"DoMarginsChanged"),this.FCenter=t.TCenter.$create("Create"),this.FCenter.FOnChange=rtl.createCallback(this,"DoCenterChanged"),this.FParent=null,this.FPrevParent=null,0 in this.FControlStyle||this.ClearControls(),this.CreateInitialize()},this.AddControlLink=function(t,e){var i,s,n;i=t,s=e,(n=document.getElementById(i))||((n=document.createElement("link")).id=i,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",s),document.getElementsByTagName("head")[0].appendChild(n))},this.ResetAnchoring=function(){this.FOrigRect.$assign(pas.Types.Rect(-1,-1,-1,-1)),this.InitAnchoring()},this.UpdateSize=function(){var t=0;this.UpdateElementSize();for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).UpdateSize()},this.UpdateAnchoring=function(){var t=0,e=0,i=0,s=0,n=0,o=0,a=pas.Types.TRect.$new(),r=pas.Types.TRect.$new();0 in this.FComponentState||this.FControlCreated&&(-1===this.FOrigRect.Left&&-1===this.FOrigRect.Top&&this.InitAnchoring(),(null==this.FParent||this.FParent.AnchoringInitialized())&&(5!==this.FAlign&&(null==this.FParent||pas["WEBLib.Forms"].TForm.isPrototypeOf(this)||(r.$assign(this.FParent.GetBoundsRect()),t=r.Right-r.Left-(this.FOrigParentRect.Right-this.FOrigParentRect.Left),e=r.Bottom-r.Top-(this.FOrigParentRect.Bottom-this.FOrigParentRect.Top),a.$assign(this.FOrigRect),i=0,s=0,n=0,o=0,2 in this.FAnchors&&(0 in this.FAnchors?n=t:i=t),3 in this.FAnchors&&(1 in this.FAnchors?o=e:s=e),(3 in this.FAnchors||2 in this.FAnchors)&&this.SetBoundsInt(a.Left+i,a.Top+s,a.Right-a.Left+n,a.Bottom-a.Top+o))),this.UpdateChildAnchoring()))},this.UpdateChildAnchoring=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).UpdateAnchoring()},this.SetElementPointer=function(e,i){0!==i?e.style.setProperty("cursor",t.GetHTMLCursorName(i)):e.style.removeProperty("cursor")},this.IsUpdating=function(){return this.FUpdateCount>0},this.CanShowFocus=function(){return this.FShowFocus},this.RequiredScriptLoaded=function(t){rtl.asExt(t.target,HTMLScriptElement).title="tmswebloaded",this.FControlScriptCountLoaded+=1},this.StartCapture=function(){var e=null;this.FCaptureDown&&(this.Captured()&&this.ReleaseCapture(),this.FMouseInsideLayer=!0,this.FLayer=document.createElement("SPAN"),document.body.appendChild(this.FLayer),(e=this.FLayer).addEventListener("mouseenter",this.FLayerMouseEnterPtr),e.addEventListener("mouseleave",this.FLayerMouseLeavePtr),e.addEventListener("mousedown",this.FMouseDownPtr),e.addEventListener("mouseup",this.FMouseUpPtr),e.addEventListener("mousemove",this.FMouseMovePtr),e.addEventListener("touchstart",this.FTouchStartPtr),e.addEventListener("touchmove",this.FTouchMovePtr),e.addEventListener("touchend",this.FTouchEndPtr),e.addEventListener("touchcancel",this.FTouchCancelPtr),e.style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("right","0"),e.style.setProperty("bottom","0"),e.style.setProperty("webkit-user-select","none"),e.style.setProperty("moz-user-select","none"),e.style.setProperty("khtml-user-select","none"),e.style.setProperty("ms-user-select","none"),e.style.setProperty("user-select","none"),e.style.setProperty("position","absolute"),e.style.setProperty(t.CSSZIndex,"999999"),this.FCaptured=!0,this.UpdateElement())},this.GetStyle=function(t){var e,i="",s="";return s="",null==(e=this.GetElementHandle())?i:(window.getComputedStyle&&(s=getComputedStyle(e,"")[t]),e.currentStyle&&(s=e.currentStyle[t]),i=s)},this.SetBoundsInt=function(t,e,i,s){(t!==this.GetLeft()||e!==this.GetTop()||i!==this.GetWidth()&&1===this.FWidthStyle||s!==this.GetHeight()&&1===this.FHeightStyle||null!=this.FParent&&this.FParent.GetIsLinked())&&(this.FBlockUpdateElement=!0,this.FLeft=t,this.FTop=e,this.FWidth=i,this.FHeight=s,this.FBlockUpdateElement=!1,this.UpdateElementSize(),0!==this.FAlign?this.DoRealign():this.Realign(),this.RecreateCanvas(),this.DoBoundsChange(),this.Invalidate(),this.UpdateChildAnchoring())},this.EnableDrag=function(){null!=this.GetContainer()&&this.GetContainer().setAttribute("draggable","true")},this.DisableDrag=function(){null!=this.GetContainer()&&"true"===this.GetContainer().getAttribute("draggable")&&this.GetContainer().setAttribute("draggable","false")},this.Create$2=function(t){return this.FGotFocus=!1,this.FTabStop=!0,this.FAllowTouch=!0,this.CreateWithID(t),this},this.Create$1=function(t){var e,i,s=!1;return this.FGotFocus=!1,this.FEventsBound=!1,this.FTabStop=!0,this.FAllowTouch=!0,this.FNoUserSelect=!0,this.ClearMethodPointers(),pas.Classes.TComponent.Create$1.call(this,t),this.FEventStopPropagation=rtl.createSet(0,4,2,3,1,5,6,7),this.FScriptLoaded=!1,this.FElementFont=0,this.FElementPosition=0,this.FParentElement=null,this.FTextDirection=0,s=!1,null!=(i=pas["WEBLib.Forms"].GetParentForm(this))&&(s=4 in i.FComponentState),e=this.GetNewName(),s?this.CreateWithID(""):this.CreateWithID(e),null==t||4 in t.FComponentState||this.SetName(e),this},this.Destroy=function(){this.UnbindEvents(),this.DestroyControls(),null!=this.GetContainer()&&null!=this.FParent&&null!=this.FParent.GetChildContainer()&&(this.FParent.GetChildContainer()===this.GetContainer().parentNode&&this.FParent.GetChildContainer().removeChild(this.GetContainer()),this.FContainer=null,this.SetParent(null),this.FControlCreated=!1),rtl.free(this,"FRequiredScripts"),rtl.free(this,"FMargins"),rtl.free(this,"FCenter"),rtl.free(this,"FFont"),pas.System.Assigned(this.FToolTip)&&(this.FToolTip.dispose(),this.FToolTip=null),pas.Classes.TComponent.Destroy.call(this)},this.Assign=function(t){},this.DragDrop=function(t,e,i){null!=this.FOnDragDrop&&this.FOnDragDrop(this,t,e,i)},this.Resize=function(){null!=this.FOnResize&&this.FOnResize(this)},this.Capture=function(){this.FCaptureDown=!0,window.setTimeout(rtl.createSafeCallback(this,"StartCapture"),100)},this.ReleaseCapture=function(){var t=null;this.FCaptureDown=!1,this.FCaptured&&null!=this.FLayer&&((t=this.FLayer).removeEventListener("mouseenter",this.FLayerMouseEnterPtr),t.removeEventListener("mouseleave",this.FLayerMouseLeavePtr),t.removeEventListener("mousedown",this.FMouseDownPtr),t.removeEventListener("mouseup",this.FMouseUpPtr),t.removeEventListener("mousemove",this.FMouseMovePtr),t.removeEventListener("touchstart",this.FTouchStartPtr),t.removeEventListener("touchmove",this.FTouchMovePtr),t.removeEventListener("touchend",this.FTouchEndPtr),t.removeEventListener("touchcancel",this.FTouchEndPtr),document.body.removeChild(t),this.FCaptured=!1,this.FLayer=null,this.UpdateElement())},this.PreventDefault=function(){null!=this.GetElementEvent()&&this.GetElementEvent().preventDefault()},this.StopPropagation=function(){null==this.GetElementEvent()||this.FEnablePropagation||this.GetElementEvent().stopPropagation()},this.BeginDrag=function(){this.EnableDrag()},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.UpdateElement())},this.Invalidate=function(){},this.SetParentComponent=function(e){this.FParent!==e&&t.TControl.isPrototypeOf(e)&&this.SetParent(e)},this.SetBounds=function(t,e,i,s){this.SetBoundsInt(t,e,i,s),this.FWidth=i,this.FHeight=s,this.FUpdateTopLeft||(this.FOrigTop=e,this.FOrigLeft=t),this.ResetAnchoring(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign()},this.XYToClient=function(t,e,i,s){var n=null,o=null,a=null,r=0,l=0,h=!1,p=!1,c=pas.Types.TRect.$new(),F=null,u=0,C=0,d=0,T=0;if(h=!0,p=!1,d=0,T=0,0!==this.FElementPosition)return h=!1,r=t-(o=this.GetElementHandle().getBoundingClientRect()).left,l=e-o.top,i.set(r),void s.set(l);for(d=document.body.scrollLeft+document.documentElement.scrollLeft,T=document.body.scrollTop+document.documentElement.scrollTop,r=t-this.GetLeft(),l=e-this.GetTop(),i.set(r),s.set(l),n=this.FParent,pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this)&&null==n&&null!=this.GetContainer()&&(o=this.GetContainer().getBoundingClientRect(),i.set(i.get()-o.left),s.set(s.get()-o.top));null!=n;){if(n.GetIsLinked()){o=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n)?n.GetContainer().getBoundingClientRect():n.GetElementHandle().getBoundingClientRect(),i.set(i.get()-o.left),s.set(s.get()-o.top),i.set(i.get()+n.GetElementHandle().scrollLeft),s.set(s.get()+n.GetElementHandle().scrollTop),d=0,T=0;break}if(pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n))""!==rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer&&null!=(a=document.getElementById(rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer))&&(p=!0,o=a.getBoundingClientRect(),i.set(i.get()-o.left),s.set(s.get()-o.top)),null!=rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetContainer()&&""===rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer&&rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FPopup&&(o=rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetContainer().getBoundingClientRect(),i.set(i.get()-o.left),s.set(s.get()-o.top),c.$assign(rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetClientRect()),s.set(s.get()+c.Top),d=0,T=0);else if(n.FElementPosition in rtl.createSet(1,2)){if(null!=n.GetElementHandle()){o=n.GetElementHandle().getBoundingClientRect(),i.set(r-o.left),s.set(l-o.top),d=0,T=0,h&&(F=window.getComputedStyle(document.documentElement),u=parseInt(F.marginLeft,10),C=parseInt(F.marginTop,10),i.set(i.get()+u),s.set(s.get()+C)),h=!1;break}}else 0===n.FElementPosition&&h&&(i.set(i.get()-n.GetLeft()),s.set(s.get()-n.GetTop()),null!=n.GetElementHandle()&&(i.set(i.get()+n.GetElementHandle().scrollLeft),s.set(s.get()+n.GetElementHandle().scrollTop)),r=i.get(),l=s.get());n=n.FParent}0!==this.FElementPosition||p||(i.set(i.get()+d),s.set(s.get()+T))},this.Captured=function(){return this.FCaptured&&null!=this.FLayer},this.MakeScreenshot=function(){return null,null},this.ClientToScreen=function(t){var e=pas.Types.TPoint.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.GetClientOrigin()),e.x=t.x+i.x,e.y=t.y+i.y,e},this.ScreenToClient=function(t){var e=pas.Types.TPoint.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.GetClientOrigin()),e.x=t.x-i.x,e.y=t.y-i.y,e},this.CanFocus=function(){return!0,!0},this.HasHorzScrollBar=function(){var t=!1;return t=!1,null!=this.GetElementHandle()&&(t=this.GetElementHandle().clientWidth<this.GetElementHandle().scrollWidth),t},this.HasVertScrollBar=function(){var t=!1;return t=!1,null!=this.GetElementHandle()&&(t=this.GetElementHandle().clientHeight<this.GetElementHandle().scrollHeight),t},rtl.addIntf(this,t.IControl),rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addMethod("Create$2",2,[["ID",rtl.string]]),i.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TWinControl",this.TControl,(function(){rtl.addIntf(this,t.IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Cursor",2,t.$rtti.TCursor,"FCursor","SetControlCursor",{Default:0}),e.addProperty("ElementClassName",2,t.$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("Tag",0,rtl.longint,"FTag$1","FTag$1",{Default:0}),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("OnMouseDown",0,t.$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseUp",0,t.$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseMove",0,t.$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseEnter",0,t.$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,t.$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnKeyUp",0,t.$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnKeyDown",0,t.$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,t.$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnEnter",0,t.$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,t.$rtti.TNotifyEvent,"FOnExit","FOnExit")})),rtl.createClass(this,"TCustomControl",this.TWinControl,(function(){this.$init=function(){t.TWinControl.$init.call(this),this.FCaption="",this.FPixelRatio=0,this.FPainting=!1,this.FCanvas=null,this.FElementCanvas=null,this.FBorderStyle=0,this.FBorderColor=0,this.FCustomBorder=!1,this.FOnScreenShot=null},this.$final=function(){this.FCanvas=void 0,this.FElementCanvas=void 0,this.FOnScreenShot=void 0,t.TWinControl.$final.call(this)},this.GetCanvas=function(){return null==this.FCanvas&&(this.GetIsLinked()?(null==this.FElementCanvas&&(this.FElementCanvas=document.getElementById(this.GetID())),this.RecreateCanvas()):this.CreateControl()),this.FCanvas},this.GetPixelRatio=function(){var t=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},this.RecreateCanvas=function(){var t=0,e=null,i=0,s=0;null!=this.FElementCanvas&&(this.FPainting||(null!=(e=this.GetIsLinked()?this.GetElementHandle():document.getElementById(this.GetID()+"_Canvas"))&&(this.FElementCanvas=e,rtl.free(this,"FCanvas"),this.FCanvas=null),t=this.GetPixelRatio(),i=this.GetHeight()-this.GetCanvasHeightOffset(),s=this.GetWidth()-this.GetCanvasWidthOffset(),1===this.FElementPosition?this.FElementCanvas.style.setProperty("position","relative"):this.FElementCanvas.style.setProperty("position","absolute"),this.FElementCanvas.style.setProperty("height",pas.SysUtils.IntToStr(i)+"px"),this.FElementCanvas.style.setProperty("width",pas.SysUtils.IntToStr(s)+"px"),this.FElementCanvas.height=Math.round(i*t),this.FElementCanvas.width=Math.round(s*t)),null==this.FCanvas&&(this.FCanvas=pas["WEBLib.Graphics"].TCanvas.$create("Create$1",[this.FElementCanvas])),this.FCanvas.FApplyPixelRatio=!0,this.FCanvas.SetTransform(1,0,0,1,0,0))},this.SetBorderStyle=function(t){this.FBorderStyle!==t&&(this.FBorderStyle=t,this.UpdateElement())},this.SetName=function(e){var i={},s="";if(s="",null!=pas["WEBLib.Forms"].VSIDE&&4 in this.FComponentState||pas["WEBLib.Forms"].TFrame.isPrototypeOf(this)&&(s="F"+t.FindUniqueName(this.FName)+"_"),pas.Classes.TComponent.SetName.call(this,s+e),1 in this.FControlStyle&&4 in this.FComponentState&&!(0 in this.FComponentState)){if(null!=this.FOwner&&0 in this.FOwner.FComponentState)return;i=rtl.refSet(this.FControlStyle),this.SetCaption(e),this.FControlStyle=rtl.refSet(i)}},this.SetCaption=function(t){this.FCaption=t,this.FControlStyle=rtl.diffSet(this.FControlStyle,rtl.createSet(1))},this.CreateControl=function(){t.TControl.CreateControl.call(this),this.RecreateCanvas()},this.Loaded=function(){t.TControl.Loaded.call(this),this.Invalidate()},this.UpdateElementVisual=function(){t.TControl.UpdateElementVisual.call(this),null!=this.GetElementHandle()&&(this.GetIsLinked()||""!==this.FElementClassName||(1===this.FBorderStyle?this.FCustomBorder?(this.GetElementStyle().setProperty("border-style","solid"),this.GetElementStyle().setProperty("border-width","1px"),this.GetElementStyle().setProperty("border-color",pas["WEBLib.Graphics"].ColorToHTML(this.FBorderColor))):this.GetElementStyle().setProperty("border-style",""):this.GetElementStyle().setProperty("border-style","none")),""!==this.FElementClassName&&(this.GetElementStyle().removeProperty("border-style"),this.GetElementStyle().removeProperty("border-width"),this.GetElementStyle().removeProperty("border-color")))},this.CreateElement=function(){var t=null;return this.FElementCanvas=document.createElement("CANVAS"),0 in this.FControlStyle?((t=document.createElement("SPAN")).appendChild(this.FElementCanvas),""!==this.GetID()&&this.FElementCanvas.setAttribute("id",this.GetID()+"_Canvas"),this.FElementCanvas.setAttribute("zindex","-1")):t=this.FElementCanvas,t},this.GetCanvasHeightOffset=function(){return 0,0},this.GetCanvasWidthOffset=function(){return 0,0},this.BindElement=function(){"CANVAS"===this.GetContainer().tagName||this.FControlCreated||(this.FElementCanvas=document.createElement("CANVAS"),this.GetContainer().appendChild(this.FElementCanvas))},this.BindEvents=function(){t.TControl.BindEvents.call(this)},this.HandleScreenShot=function(t){null!=this.FOnScreenShot&&this.FOnScreenShot(this,t)},this.Paint=function(){},this.CreateInitialize=function(){t.TControl.CreateInitialize.call(this),this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(1)),this.FBorderStyle=1,this.FBorderColor=12632256,this.FPainting=!1,this.FWidth=100,this.FHeight=25,this.FWidthPercent=100,this.FHeightPercent=100,this.FCustomBorder=!1},this.Destroy=function(){null!=this.FCanvas&&rtl.free(this,"FCanvas"),t.TControl.Destroy.call(this)},this.MakeScreenshot=function(){var t=null;return(t=pas["WEBLib.Graphics"].TBitmap.$create("Create$3")).FOnChange=rtl.createCallback(this,"HandleScreenShot"),t.LoadFromCanvas(this.GetCanvas()),t},this.Resize=function(){t.TControl.Resize.call(this),this.Invalidate()},this.Invalidate=function(){var e=null;t.TControl.Invalidate.call(this),null===this.FParent||3 in this.FComponentState||this.FVisible&&(this.FUpdateCount>0||null!=(e=pas["WEBLib.Forms"].GetParentForm(this))&&e.IsUpdating()||(this.GetPixelRatio()!==this.FPixelRatio&&this.RecreateCanvas(),this.FPixelRatio=this.GetPixelRatio(),this.FPainting=!0,null!=this.FCanvas&&this.FCanvas.Clear(),this.Paint(),this.FPainting=!1))},this.SetFocus=function(){t.TControl.SetFocus.call(this)},this.Focused=function(){return t.TControl.Focused.call(this)},this.EndUpdate=function(){t.TControl.EndUpdate.call(this),0===this.FUpdateCount&&this.Invalidate()},rtl.addIntf(this,t.IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TGraphicControl",this.TCustomControl,(function(){rtl.addIntf(this,t.IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TCustomHTMLDiv",this.TCustomControl,(function(){this.CreateElement=function(){return document.createElement("DIV")},rtl.addIntf(this,t.IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TControlManager",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FInstanceCount=0},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.apply(this,arguments),this.FInstanceCount=0,this},this.GetInstanceNumber=function(){return this.FInstanceCount+=1,this.FInstanceCount},rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),this.FindGlobalComponent=function(t){return null,null},this.GetMousePos=function(){var t=pas.Types.TPoint.$new();return t.$assign(pas.Types.Point(e.FMouseX,e.FMouseY)),t},this.FindUniqueName=function(t){return t+pas.SysUtils.IntToStr(e.ControlManager.GetInstanceNumber())},this.GetScrollBarHeight=function(){var t=0;if(0===(t=e.ScrollBH)){var i=document.createElement("div");i.style.visibility="hidden",i.style.height="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i);var s=i.offsetHeight;i.style.overflow="scroll";var n=document.createElement("div");n.style.height="100%",i.appendChild(n);var o=n.offsetHeight;i.parentNode.removeChild(i),t=s-o,e.ScrollBH=t}return t},this.GetScrollBarWidth=function(){var t=0;if(0===(t=e.ScrollBW)){var i=document.createElement("div");i.style.visibility="hidden",i.style.width="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i);var s=i.offsetWidth;i.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",i.appendChild(n);var o=n.offsetWidth;i.parentNode.removeChild(i),t=s-o,e.ScrollBW=t}return t},this.SetHTMLElementFont=function(t,e,i){var s="";i?(t.style.removeProperty("font-family"),t.style.removeProperty("font-style"),t.style.removeProperty("font-weight"),t.style.removeProperty("font-size"),t.style.removeProperty("text-decoration")):(t.style.setProperty("font-family",e.FName),t.style.setProperty("font-style","normal"),0 in e.FStyle?t.style.setProperty("font-weight","bold"):t.style.setProperty("font-weight",""),1 in e.FStyle&&t.style.setProperty("font-style","italic"),s="",3 in e.FStyle&&(s="underline"),2 in e.FStyle&&(""!==s&&(s+=" "),s+="line-through"),""!==s?t.style.setProperty("text-decoration",s):t.style.removeProperty("text-decoration"),0!==e.FSize&&t.style.setProperty("font-size",pas.SysUtils.IntToStr(e.FSize)+"pt"))},this.SetHTMLElementColor=function(t,i,s){s||-1===i||16711422===i?t.style.removeProperty(e.cStyleBkgColor):t.style.setProperty(e.cStyleBkgColor,pas["WEBLib.Graphics"].ColorToHTML(i))},this.GetHTMLCursorName=function(t){var e="";e="default";return 0===t?e="default":2===t?e="auto":1===t?e="none":3===t?e="crosshair":4===t?e="text":6===t?e="nesw-resize":7===t?e="ns-resize":8===t?e="nwse-resize":9===t?e="ew-resize":10===t?e="n-resize":11===t?e="wait":12===t?e="copy":13===t?e="no-drop":14===t?e="col-resize":15===t?e="row-resize":16===t?e="copy":17===t?e="progress":18===t?e="not-allowed":19===t?e="progress":20===t?e="help":21===t?e="pointer":22!==t&&5!==t||(e="move"),e},this.GetHTMLElementAbsoluteRect=function(t){var e=pas.Types.TRect.$new(),i="";function s(t){var e=0,i=0;return t=pas.SysUtils.StringReplace(t,"px","",rtl.createSet(0)),pas.System.val$6(t,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),e}return i=t.style.getPropertyValue("left"),e.Left=s(i),i=t.style.getPropertyValue("top"),e.Top=s(i),i=t.style.getPropertyValue("width"),e.Right=e.Left+s(i),i=t.style.getPropertyValue("height"),e.Bottom=e.Top+s(i),e},this.IsAndroid=function(){var t;return t=navigator.userAgent,pas.System.Pos("Android",t)>0},t.$implcode=function(){e.ControlManager=null,e.FMouseX=0,e.FMouseY=0,e.FCursorX=0,e.FCursorY=0,e.ScrollBW=0,e.ScrollBH=0,e.DragObject=null,e.cStyleBkgColor="background-color"},t.$init=function(){e.ScrollBW=0,e.ScrollBH=0,e.DragObject=null,e.ControlManager=t.TControlManager.$create("Create$1",[null])}}),["WEBLib.Dialogs","WEBLib.Forms","Math","TypInfo","WEBLib.WebTools","WEBLib.Utils"]),rtl.module("WEBLib.WebTools",["System","Classes","Web","JS","WEBLib.Controls","WEBLib.Graphics"],(function(){"use strict";var t=this;this.cBodyTag="body",this.cHTMLExt=".html",this.DoubleToHTML=function(t){return pas.SysUtils.Format$1("%g",pas.System.VarRecs(3,t),pas.SysUtils.TFormatSettings.Invariant())},this.GetLocaleShortDateFormat=function(t){return pas.SysUtils.TFormatSettings.Create$1(t).ShortDateFormat},this.GetLocaleLongDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"long"})},this.GetLocaleShortDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"short"})},this.GetLocaleLongMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"long"})},this.GetLocaleShortMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"short"})},this.GetLocaleDecimalSeparator=function(t){var e=1.1,i="";return i=""==t?navigator.language:t,e=e.toLocaleString(i).substring(1,2)},this.GetBrowserLocale=function(){return navigator.language},this.HexImageDecode=function(t){var e,i=0,s=0,n=null,o=0,a=0,r=0;e=rtl.trunc(t.length/2),s=0,(o=t.charCodeAt(0)-48)>=10&&(o-=7),(a=t.charCodeAt(1)-48)>=10&&(a-=7),r=1+(a+(o<<4)),(i=pas.System.Pos("4A5045474",t))>1&&i<10&&(r+=4),(i=pas.System.Pos("4269746D6",t))>1&&i<10&&(r+=4),n=new Uint8Array(e-r);for(var l=r+1,h=e;l<=h;l++)i=l,(o=t.charCodeAt(2*i-1-1)-48)>=10&&(o-=7),(a=t.charCodeAt(2*i-1)-48)>=10&&(a-=7),a+=o<<4,n[s]=a,s+=1;return n},this.HexImageEncodeFromBase64=function(e){var i;return e=e.replace(/^data:image\/\S+;base64,/,""),i=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})),t.HexImageEncode(i)},this.HexImageEncode=function(t){var e="",i=0,s=0,n=0,o="",a="";if(e="",0===(s=t.length))return e;s=((255&s)<<24)+((65280&s)<<8)+((16711680&s)>>>8)+((4278190080&s)>>>24),a="",137===t[0]&&80===t[1]&&(n=(o="TPngImage").length),255===t[0]&&216===t[1]&&(n=(o="TJPEGImage").length,a=pas.SysUtils.IntToHex(s,8)),66===t[0]&&77===t[1]&&(n=(o="TBitmap").length,a=pas.SysUtils.IntToHex(s,8)),71===t[0]&&73===t[1]&&(n=(o="TGIFImage").length),e=pas.SysUtils.IntToHex(n,2);for(var r=1,l=o.length;r<=l;r++)i=r,n=o.charCodeAt(i-1),e+=pas.SysUtils.IntToHex(n,2);e+=a;for(var h=0,p=t.length-1;h<=p;h++)n=t[i=h],e+=pas.SysUtils.IntToHex(n,2);return e},this.HexImageDecodeAsBase64=function(e){var i;return i=t.HexImageDecode(e),e=btoa(new Uint8Array(i).reduce((function(t,e){return t+String.fromCharCode(e)}),""))}}),["SysUtils","WEBLib.Utils"]),rtl.module("contnrs",["System","SysUtils","Classes"],(function(){"use strict";rtl.createClass(this,"TObjectList",pas.Classes.TList,(function(){this.$init=function(){pas.Classes.TList.$init.call(this),this.FFreeObjects=!1},this.Notify=function(t,e){var i=null;this.FFreeObjects&&2===e&&(i=rtl.getObject(t),i=rtl.freeLoc(i)),pas.Classes.TList.Notify.call(this,t,e)},this.GetItem=function(t){return rtl.getObject(pas.Classes.TList.Get.call(this,t))},this.Create$2=function(){return pas.Classes.TList.Create$1.call(this),this.FFreeObjects=!0,this},this.Add$1=function(t){return pas.Classes.TList.Add.call(this,t)},this.Remove$1=function(t){return pas.Classes.TList.Remove.call(this,t)}}))}),["JS"]),rtl.module("WEBLib.Graphics",["System","Classes","Types","UITypes","Web","JS"],(function(){"use strict";var t=this,e=t.$impl;this.WEBDEFAULTFONT="Arial",this.SysDefault=536870912,this.clNone=-1,this.clBlack=0,this.clSilver=12632256,this.clWhite=16777215,this.clDefault=536870912,this.clBtnFace=15790320,this.clWindowText=65793,this.clWindow=16711422,this.clHighlight=14120960,this.clHighlightText=197379,this.DEFAULT_CHARSET=1,this.$rtti.$inherited("TColor",rtl.nativeint,{}),this.TVerticalAlignment={0:"taAlignTop",taAlignTop:0,1:"taAlignBottom",taAlignBottom:1,2:"taVerticalCenter",taVerticalCenter:2},this.TPenStyle={0:"psSolid",psSolid:0,1:"psDash",psDash:1,2:"psDot",psDot:2,3:"psDashDot",psDashDot:3,4:"psDashDotDot",psDashDotDot:4,5:"psClear",psClear:5,6:"psInsideFrame",psInsideFrame:6,7:"psUserStyle",psUserStyle:7,8:"psAlternate",psAlternate:8},this.$rtti.$Enum("TPenStyle",{minvalue:0,maxvalue:8,ordtype:1,enumtype:this.TPenStyle}),this.TPenMode={0:"pmBlack",pmBlack:0,1:"pmWhite",pmWhite:1,2:"pmNop",pmNop:2,3:"pmNot",pmNot:3,4:"pmCopy",pmCopy:4,5:"pmNotCopy",pmNotCopy:5,6:"pmMergePenNot",pmMergePenNot:6,7:"pmMaskPenNot",pmMaskPenNot:7,8:"pmMergeNotPen",pmMergeNotPen:8,9:"pmMaskNotPen",pmMaskNotPen:9,10:"pmMerge",pmMerge:10,11:"pmNotMerge",pmNotMerge:11,12:"pmMask",pmMask:12,13:"pmNotMask",pmNotMask:13,14:"pmXor",pmXor:14,15:"pmNotXor",pmNotXor:15},this.$rtti.$Enum("TPenMode",{minvalue:0,maxvalue:15,ordtype:1,enumtype:this.TPenMode}),this.TBrushStyle={0:"bsSolid",bsSolid:0,1:"bsClear",bsClear:1,2:"bsHorizontal",bsHorizontal:2,3:"bsVertical",bsVertical:3,4:"bsFDiagonal",bsFDiagonal:4,5:"bsBDiagonal",bsBDiagonal:5,6:"bsCross",bsCross:6,7:"bsDiagCross",bsDiagCross:7},this.$rtti.$Enum("TBrushStyle",{minvalue:0,maxvalue:7,ordtype:1,enumtype:this.TBrushStyle}),this.TBrushGradient={0:"bgNone",bgNone:0,1:"bgLinearVert",bgLinearVert:1,2:"bgLinearHorz",bgLinearHorz:2,3:"bgRadial",bgRadial:3},this.$rtti.$Enum("TBrushGradient",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TBrushGradient}),this.TFontStyle={0:"fsBold",fsBold:0,1:"fsItalic",fsItalic:1,2:"fsStrikeOut",fsStrikeOut:2,3:"fsUnderline",fsUnderline:3},this.$rtti.$Enum("TFontStyle",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TFontStyle}),this.$rtti.$Set("TFontStyles",{comptype:this.$rtti.TFontStyle}),this.$rtti.$Int("TFontCharset",{minvalue:0,maxvalue:255,ordtype:3}),this.$rtti.$inherited("TBinaryString",rtl.string,{}),rtl.recNewT(this,"TCanvasRectF",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this}})),rtl.createClass(this,"TPen",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FWidth=0,this.FColor=0,this.FStyle=0,this.FMode=0},this.SetColor=function(t){this.FColor=t},this.Create$1=function(){return this.FColor=0,this.FWidth=1,this.FStyle=0,this.FMode=4,this},this.Assign=function(e){t.TPen.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TPen).FColor,this.FStyle=rtl.as(e,t.TPen).FStyle,this.FWidth=rtl.as(e,t.TPen).FWidth):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Color",2,t.$rtti.TColor,"FColor","SetColor"),e.addProperty("Mode",0,t.$rtti.TPenMode,"FMode","FMode",{Default:t.TPenMode.pmCopy}),e.addProperty("Width",0,rtl.longint,"FWidth","FWidth",{Default:1}),e.addProperty("Style",0,t.$rtti.TPenStyle,"FStyle","FStyle",{Default:t.TPenStyle.psSolid})})),rtl.createClass(this,"TGradientColor",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStop=0},this.Assign=function(e){t.TGradientColor.isPrototypeOf(e)&&(this.FColor=rtl.as(e,t.TGradientColor).FColor,this.FStop=rtl.as(e,t.TGradientColor).FStop)},this.Create$1=function(){return this.FColor=-1,this.FStop=0,this};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Stop",0,rtl.double,"FStop","FStop"),e.addProperty("Color",0,t.$rtti.TColor,"FColor","FColor",{Default:-1})})),rtl.createClass(this,"TBrush",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FGradientColors=null,this.FGradient=0},this.$final=function(){this.FGradientColors=void 0,pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){return this.FColor=16777215,this.FStyle=0,this.FGradient=0,this.FGradientColors=pas.Classes.TList.$create("Create$1"),this},this.Destroy=function(){rtl.free(this,"FGradientColors"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){t.TBrush.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TBrush).FColor,this.FStyle=rtl.as(e,t.TBrush).FStyle):pas.Classes.TPersistent.Assign.apply(this,arguments)},this.AddGradientColor=function(e,i){var s=null;(s=t.TGradientColor.$create("Create$1")).FColor=e,s.FStop=i,this.FGradientColors.Add(s)},this.GetGradientColor=function(t,e,i){if(!(t<this.FGradientColors.GetCount()))throw pas.SysUtils.Exception.$create("Create$1",["Invalid gradient color index"]);e.set(rtl.getObject(this.FGradientColors.Get(t)).FColor),i.set(rtl.getObject(this.FGradientColors.Get(t)).FStop)},this.GradientCount=function(){return this.FGradientColors.GetCount()},this.ClearGradient=function(){for(var t=0,e=null,i=this.FGradientColors.GetCount()-1;i>=0;i--)t=i,e=rtl.getObject(this.FGradientColors.Get(t)),e=rtl.freeLoc(e),this.FGradientColors.Delete(t)};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Gradient",0,t.$rtti.TBrushGradient,"FGradient","FGradient"),e.addProperty("Color",0,t.$rtti.TColor,"FColor","FColor"),e.addProperty("Style",0,t.$rtti.TBrushStyle,"FStyle","FStyle")})),rtl.createClass(this,"TFont",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FName="",this.FSize=0,this.FColor=0,this.FStyle={},this.FOnChange=null,this.FHeight=0,this.FCharset=0},this.$final=function(){this.FStyle=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetHeight=function(t){var e;e=72*-t/96,this.FSize=Math.round(e),this.FHeight!==t&&(this.FHeight=t,this.DoChange())},this.SetName=function(t){this.FName!==t&&(this.FName=t,this.DoChange())},this.SetSize=function(t){this.FSize!==t&&(this.FSize=t,this.DoChange())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.DoChange())},this.SetStyle=function(t){rtl.neSet(this.FStyle,t)&&(this.FStyle=rtl.refSet(t),this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Assign=function(e){t.TFont.isPrototypeOf(e)?(this.FName=rtl.as(e,t.TFont).FName,this.FColor=rtl.as(e,t.TFont).FColor,this.FSize=rtl.as(e,t.TFont).FSize,this.FStyle=rtl.refSet(rtl.as(e,t.TFont).FStyle),this.DoChange()):pas.Classes.TPersistent.Assign.apply(this,arguments)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FName=t.WEBDEFAULTFONT,this.FSize=8,this.FHeight=-11,this.FStyle={},this.FColor=0,this},this.ToString=function(){var e="";return e="",0 in this.FStyle&&1 in this.FStyle?e+="bold italic":0 in this.FStyle?e+="bold":1 in this.FStyle&&(e+="italic"),0!==this.FSize?e+" "+t.FontSizeToHTML(t.FontSizeToPx(this.FSize))+" "+this.FName:e+" "+t.FontSizeToHTML(t.FontSizeToPx(12))+" "+this.FName};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Charset",0,t.$rtti.TFontCharset,"FCharset","FCharset"),e.addProperty("Name",2,pas.UITypes.$rtti.TFontName,"FName","SetName"),e.addProperty("Height",2,rtl.longint,"FHeight","SetHeight"),e.addProperty("Style",2,t.$rtti.TFontStyles,"FStyle","SetStyle"),e.addProperty("Color",2,t.$rtti.TColor,"FColor","SetColor"),e.addProperty("Size",2,rtl.longint,"FSize","SetSize")})),rtl.createClass(this,"TGraphic",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FAddToQueue=!1,this.FCanvasElement=null,this.FEmpty=!1,this.FData="",this.FDataBin="",this.FCanvas=null,this.FOnChange=null,this.FImage=null,this.FURL="",this.FLoaded=null,this.FUsedCanvas=!1},this.$final=function(){this.FCanvasElement=void 0,this.FCanvas=void 0,this.FOnChange=void 0,this.FImage=void 0,this.FLoaded=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetHeight=function(t){this.FImage.height=t,this.RecreateCanvas(),this.DoChange()},this.SetWidth=function(t){this.FImage.width=t,this.RecreateCanvas(),this.DoChange()},this.GetCanvas=function(){var t;return null==this.FCanvas&&this.RecreateCanvas(),t=this.FCanvas,this.FUsedCanvas=!0,t},this.GetData=function(){return this.FDataBin},this.SetData=function(t){var e="";this.FDataBin!==t&&(this.FDataBin=t,e=pas["WEBLib.WebTools"].HexImageDecodeAsBase64(this.FDataBin),pas.System.Pos("PHN2ZyB",e)>0?this.LoadFromResource("data:image/svg+xml;base64,"+e):this.LoadFromResource("data:image/png;base64,"+e))},this.DoChange=function(){var t=0;this.FEmpty=0===this.GetWidth()&&0===this.GetHeight(),this.FEmpty||""===this.FData||e.FCache.Exists(this.FData)||(e.FCache.Add$1(e.TGraphicCache.$create("Create$1",[this.FImage,this.FData])),(t=e.FQueue.IndexOf(this.FData))>=0&&t<=e.FQueue.GetCount()-1&&e.FQueue.Delete(t),e.FCacheCount-=1,0===e.FCacheCount&&null!=pas["WEBLib.Forms"].Application.FOnImageCacheReady&&pas["WEBLib.Forms"].Application.FOnImageCacheReady(pas["WEBLib.Forms"].Application)),null!=this.FOnChange&&this.FOnChange(this),null!=this.FLoaded&&(this.FLoaded(),this.FLoaded=null)},this.SetURL=function(t){this.FURL=t,this.LoadFromURL(t,null)},this.GetWidth=function(){var t=0;return t=0,null!=this.FImage&&(t=this.FImage.width),t},this.GetHeight=function(){var t=0;return t=0,null!=this.FImage&&(t=this.FImage.height),t},this.RecreateCanvas=function(){null==this.FCanvasElement&&(this.FCanvasElement=document.createElement("CANVAS")),null!=this.FCanvasElement&&(this.FCanvasElement.height=this.GetHeight(),this.FCanvasElement.width=this.GetWidth(),null==this.FCanvas&&(this.FCanvas=t.TCanvas.$create("Create$1",[this.FCanvasElement]),this.FCanvas.FOnBeginScene=rtl.createCallback(this,"DoBeginScene"),this.FCanvas.FOnEndScene=rtl.createCallback(this,"DoEndScene")))},this.DoBeginScene=function(t){this.FCanvas.Clear()},this.DoEndScene=function(t){this.FAddToQueue=!1,this.CaptureCanvas(),this.FAddToQueue=!0},this.AssignEvents=function(){var t=this;this.FImage.onload=function(){t.DoChange()}},this.CreateImage=function(){this.FImage=new Image},this.LoadFromCache=function(t,i){var s="",n=null,o="",a=!1;this.FData=t,pas.System.Pos("DATA:",pas.SysUtils.UpperCase(t))>0&&(this.FDataBin=pas["WEBLib.WebTools"].HexImageEncodeFromBase64(t)),""!==(s=t)&&(this.FLoaded=i,this.FUsedCanvas=!1,e.FCache.Find(s,{get:function(){return n},set:function(t){n=t}})?(this.FImage=n,this.DoChange()):(!1,o="",(a=""!=(o=this.FImage.src)&&s!==o)&&(this.CreateImage(),this.AssignEvents()),!a&&-1===e.FQueue.IndexOf(s)||a?(this.FImage.src=s,s=this.FImage.src,this.FData=s,pas.System.Pos("DATA:",pas.SysUtils.UpperCase(s))>0&&(this.FDataBin=pas["WEBLib.WebTools"].HexImageEncodeFromBase64(s)),e.FCacheCount+=1,this.FAddToQueue&&e.FQueue.Add(s)):a||-1===e.FQueue.IndexOf(s)||(this.FImage.src=s)),this.FImage&&(this.FEmpty=""==this.FImage.src))},this.CreateFromResource=function(t){return this.CreateFromResource$1(t,0)},this.CreateFromResource$1=function(e,i){var s=null;return(s=t.TGraphic.$create("Create$3")).LoadFromResource(e),s},this.CreateFromURL=function(t){return this.CreateFromURL$1(t,0)},this.CreateFromURL$1=function(e,i){var s=null;return(s=t.TGraphic.$create("Create$3")).LoadFromURL(e,null),s},this.Image=function(){return this.FImage},this.Empty=function(){return this.FEmpty},this.Create$3=function(){return this.FAddToQueue=!0,this.FEmpty=!0,this.FData="",this.FDataBin="",this.FUsedCanvas=!1,this.CreateImage(),this.AssignEvents(),this},this.CaptureCanvas=function(){null!=this.FCanvas&&null!=this.FCanvas.FElementCanvas&&this.LoadFromResource(this.FCanvas.FElementCanvas.toDataURL())},this.LoadFromCanvas=function(t){null!=t&&null!=t.FElementCanvas&&this.LoadFromResource(t.FElementCanvas.toDataURL())},this.SetSize=function(t,e){this.SetWidth(t),this.SetHeight(e)},this.Assign=function(e){var i="";null!=e&&t.TGraphic.isPrototypeOf(e)&&null!=rtl.as(e,t.TGraphic).FCanvas?this.LoadFromCanvas(rtl.as(e,t.TGraphic).FCanvas):null!=e&&t.TGraphic.isPrototypeOf(e)&&null!=rtl.as(e,t.TGraphic).FImage&&!rtl.as(e,t.TGraphic).Empty()?(i=e.FImage.src,this.LoadFromURL(i,null)):null==e&&(this.CreateImage(),this.DoChange())},this.LoadFromURL=function(t,e){this.LoadFromURL$1(t,0,e)},this.LoadFromURL$1=function(t,e,i){this.FEmpty=!0,this.LoadFromCache(t,i)},this.LoadFromResource=function(t){this.LoadFromResource$1(t,0)},this.LoadFromResource$1=function(t,e){this.FEmpty=!0,this.LoadFromCache(t,null)};var i=this.$rtti;i.addMethod("Create$3",2,[]),i.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange"),i.addProperty("URL",2,rtl.string,"FURL","SetURL"),i.addProperty("Data",3,t.$rtti.TBinaryString,"GetData","SetData")})),rtl.createClass(this,"TBitmap",this.TGraphic,(function(){})),rtl.recNewT(this,"TMatrix",(function(){this.m11=0,this.m12=0,this.m13=0,this.m21=0,this.m22=0,this.m23=0,this.m31=0,this.m32=0,this.m33=0,this.$eq=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m21===t.m21&&this.m22===t.m22&&this.m23===t.m23&&this.m31===t.m31&&this.m32===t.m32&&this.m33===t.m33},this.$assign=function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this}})),rtl.createClass(this,"TCanvas",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FElementCanvas=null,this.FContext=null,this.FPen=null,this.FBrush=null,this.FFont=null,this.FPathOpen=!1,this.FPathX=0,this.FPathY=0,this.FClipRect=t.TCanvasRectF.$new(),this.FOnEndScene=null,this.FOnBeginScene=null,this.FApplyPixelRatio=!1},this.$final=function(){this.FElementCanvas=void 0,this.FContext=void 0,this.FPen=void 0,this.FBrush=void 0,this.FFont=void 0,this.FClipRect=void 0,this.FOnEndScene=void 0,this.FOnBeginScene=void 0,pas.System.TObject.$final.call(this)},this.SetClipRect=function(t){this.FClipRect.$assign(t),null!=this.FContext&&(this.FContext.beginPath(),this.FContext.rect(this.FClipRect.Left,this.FClipRect.Top,this.FClipRect.Right-this.FClipRect.Left,this.FClipRect.Bottom-this.FClipRect.Top),this.FContext.clip())},this.GetAccuOffset=function(t,e,i,s){i.set(0),s.set(0),1===this.FPen.FWidth&&5!==this.FPen.FStyle&&0===pas.System.Frac(t)&&i.set(.5),1===this.FPen.FWidth&&5!==this.FPen.FStyle&&0===pas.System.Frac(e)&&s.set(.5)},this.ApplyStroke=function(){if(null!=this.FContext){this.FContext.lineWidth=this.FPen.FWidth,this.FContext.strokeStyle=t.ColorToHTML(this.FPen.FColor);var e=this.FPen.FStyle;0===e?this.FContext.setLineDash([]):2===e?this.FContext.setLineDash([1,2]):1===e?this.FContext.setLineDash([8,2]):3===e?this.FContext.setLineDash([6,2,2,2]):4===e?this.FContext.setLineDash([6,2,2,2,2,2]):5===e&&this.FContext.setLineDash([0,65535])}},this.ApplyFill=function(){null!=this.FContext&&(this.FContext.fillStyle=t.ColorToHTML(this.FBrush.FColor))},this.ApplyBrush=function(e,i,s,n){var o=0,a=0,r=0,l=null,h=0,p="",c=0,F=0;if(this.GetAccuOffset(e,i,{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}}),this.FBrush.FStyle in rtl.createSet(2,6))for(r=i+a,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);r<n;)this.FContext.moveTo(e,r),this.FContext.lineTo(s,r),r+=8;if(this.FBrush.FStyle in rtl.createSet(3,6))for(r=e+o,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);r<s;)this.FContext.moveTo(r,i),this.FContext.lineTo(r,n),r+=8;if(this.FBrush.FStyle in rtl.createSet(4,7))for(r=e+o-(s-e),this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);r<s;)this.FContext.moveTo(r,i),this.FContext.lineTo(r+(n-i),n),r+=8;if(this.FBrush.FStyle in rtl.createSet(5,7))for(r=e+o,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);r<s+(s-e);)this.FContext.moveTo(r,i),this.FContext.lineTo(r-(n-i),n),r+=8;if(0===this.FBrush.FGradient)this.FContext.stroke();else{var u=this.FBrush.FGradient;2===u?l=this.FContext.createLinearGradient(e,i,s,i):1===u?l=this.FContext.createLinearGradient(e,i,e,n):3===u&&(l=this.FContext.createRadialGradient(e+(s-e)/2,i+(n-i)/2,0,e+(s-e)/2,i+(n-i)/2,(s-e)/2)),p=t.ColorToHTML(t.ColorToRGB(this.FBrush.FColor)),l.addColorStop(0,p);for(var C=0,d=this.FBrush.GradientCount()-1;C<=d;C++)h=C,this.FBrush.GetGradientColor(h,{get:function(){return c},set:function(t){c=t}},{get:function(){return F},set:function(t){F=t}}),p=t.ColorToHTML(t.ColorToRGB(c)),l.addColorStop(F,p);this.FContext.fillStyle=l}},this.Create$1=function(e){return this.FElementCanvas=e,-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")?this.FContext=e.getContext("2d"):this.FContext=e.getContext("2d",{willReadFrequently:!0}),this.FPen=t.TPen.$create("Create$1"),this.FBrush=t.TBrush.$create("Create$1"),this.FPathOpen=!1,this.FFont=t.TFont.$create("Create$1"),this.FApplyPixelRatio=!1,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.SetTransform=function(i,s,n,o,a,r){var l=t.TMatrix.$new(),h=0;null!=this.FContext&&(l.$assign(e.MatrixIdentity()),l.m11=i,l.m12=s,l.m21=n,l.m22=o,l.m31=a,l.m32=r,this.FApplyPixelRatio&&(h=e.GetPixelRatio(this),l.$assign(e.MatrixMultiply(l,e.MatrixCreateScaling(h,h)))),this.FContext.setTransform(l.m11,l.m12,l.m21,l.m22,l.m31,l.m32))},this.Transform=function(t,e,i,s,n,o){null!=this.FContext&&this.FContext.transform(t,e,i,s,n,o)},this.AngleArc$1=function(t,e,i,s,n){null!=this.FContext&&(this.FContext.beginPath(),this.ApplyStroke(),this.FContext.arc(t,e,i,s,s+n),this.FContext.stroke())},this.MoveTo$1=function(t,e){var i=0,s=0;null!=this.FContext&&(this.FPathOpen=!0,this.FContext.beginPath(),this.ApplyStroke(),i=0,s=0,this.GetAccuOffset(t,e,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),this.FContext.moveTo(t+i,e+s))},this.LineTo$1=function(e,i){var s=0,n=0,o=0;if(null!=this.FContext){s=0,n=0,this.GetAccuOffset(e,i,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}});var a=this.FPen.FMode;0===a?this.FContext.strokeStyle=t.ColorToHTML(0):1===a?this.FContext.strokeStyle=t.ColorToHTML(16777215):14===a?this.FContext.globalCompositeOperation="xor":12===a?this.FContext.globalCompositeOperation="source-atop":5===a?(o=4294967295^t.ColorToRGB(this.FPen.FColor),this.FContext.strokeStyle=t.ColorToHTML(o)):15===a&&(o=4294967295^t.ColorToRGB(this.FPen.FColor),this.FContext.strokeStyle=t.ColorToHTML(o),this.FContext.globalCompositeOperation="xor"),this.FPathOpen||(this.FContext.beginPath(),this.ApplyStroke(),this.FContext.moveTo(this.FPathX+s,this.FPathY+n)),this.FContext.lineTo(e+s,i+n),this.FContext.stroke(),this.FPathX=e,this.FPathY=i,this.FPathOpen=!1,this.FContext.globalCompositeOperation="source-over"}},this.Rectangle=function(t,e,i,s){var n=0,o=0;if(null!=this.FContext){this.FContext.save(),this.FContext.beginPath(),this.ApplyStroke(),this.ApplyFill(),this.GetAccuOffset(t,e,{get:function(){return n},set:function(t){n=t}},{get:function(){return o},set:function(t){o=t}});let a=new Path2D;a.rect(t,e,i-t+1,s-e+1),this.FContext.clip(a,"evenodd"),this.ApplyBrush(t,e,i,s),this.FBrush.FStyle in rtl.createSet(1,2,3,6,4,5,7)||(this.FContext.rect(t+n,e+o,i-t,s-e),this.FContext.fill()),5!==this.FPen.FStyle&&(this.ApplyStroke(),this.FContext.beginPath(),this.FContext.rect(t+n,e+o,i-t,s-e),this.FContext.stroke()),this.FContext.restore()}},this.Rectangle$3=function(t){this.Rectangle(t.Left,t.Top,t.Right,t.Bottom)},this.RoundRect$1=function(t,e,i,s,n,o){var a=0,r=0;if(null!=this.FContext){if(i<t)return;if(s<e)return;this.FContext.beginPath(),this.ApplyStroke(),this.ApplyFill(),this.GetAccuOffset(t,e,{get:function(){return a},set:function(t){a=t}},{get:function(){return r},set:function(t){r=t}}),this.FContext.moveTo(t+n/2,e+r),this.FContext.lineTo(i-n/2,e+r),this.FContext.ellipse(i-a-n/2,e+r+o/2,n/2,o/2,0,1.5*Math.PI,0),this.FContext.lineTo(i-a,s-o/2),this.FContext.ellipse(i-a-n/2,s-r-o/2,n/2,o/2,0,0,.5*Math.PI),this.FContext.lineTo(t+n/2,s-r),this.FContext.ellipse(t+a+n/2,s-r-o/2,n/2,o/2,0,.5*Math.PI,Math.PI),this.FContext.lineTo(t+a,e+o/2+r),this.FContext.ellipse(t+a+n/2,e+r+o/2,n/2,o/2,0,Math.PI,1.5*Math.PI),0===this.FBrush.FStyle&&this.FContext.fill(),5!==this.FPen.FStyle&&this.FContext.stroke(),this.FContext.save();let l=new Path2D;l.moveTo(t+n/2,e+r),l.lineTo(i-n/2,e+r),l.ellipse(i-a-n/2,e+r+o/2,n/2,o/2,0,1.5*Math.PI,0),l.lineTo(i+a,s-o/2),l.ellipse(i-a-n/2,s-r-o/2,n/2,o/2,0,0,.5*Math.PI),l.lineTo(t+n/2,s+r),l.ellipse(t+a+n/2,s-r-o/2,n/2,o/2,0,.5*Math.PI,Math.PI),l.lineTo(t+a,e+o/2+r),l.ellipse(t+a+n/2,e+r+o/2,n/2,o/2,0,Math.PI,1.5*Math.PI),this.FContext.clip(l,"evenodd"),this.ApplyBrush(t,e,i,s),this.FContext.restore()}},this.RoundRect$3=function(t,e,i){this.RoundRect$1(t.Left,t.Top,t.Right,t.Bottom,e,i)},this.Ellipse$1=function(t,e,i,s){var n=0,o=0,a=0,r=0,l=0,h=0,p=0,c=0,F=0;if(null!=this.FContext){r=(n=i-t)/2*(a=.5522848),l=(o=s-e)/2*a,h=t+n,p=e+o,c=t+n/2,F=e+o/2,this.FContext.save();let u=new Path2D;u.moveTo(t,F),u.bezierCurveTo(t,F-l,c-r,e,c,e),u.bezierCurveTo(c+r,e,h,F-l,h,F),u.bezierCurveTo(h,F+l,c+r,p,c,p),u.bezierCurveTo(c-r,p,t,F+l,t,F),u.closePath(),this.FContext.clip(u,"evenodd"),this.FBrush.FStyle in rtl.createSet(0,1)||0!==this.FBrush.FGradient||this.ApplyBrush(t,e,i,s),this.FContext.restore(),this.FContext.beginPath(),this.ApplyStroke(),0!==this.FBrush.FGradient?this.ApplyBrush(t,e,i,s):this.ApplyFill(),this.FContext.moveTo(t,F),this.FContext.bezierCurveTo(t,F-l,c-r,e,c,e),this.FContext.bezierCurveTo(c+r,e,h,F-l,h,F),this.FContext.bezierCurveTo(h,F+l,c+r,p,c,p),this.FContext.bezierCurveTo(c-r,p,t,F+l,t,F),this.FContext.closePath(),0!==this.FBrush.FStyle&&0===this.FBrush.FGradient||this.FContext.fill(),5!==this.FPen.FStyle&&this.FContext.stroke()}},this.Ellipse$3=function(t){this.Ellipse$1(t.Left,t.Top,t.Right,t.Bottom)},this.TextOut$1=function(e,i,s){var n=null,o="";null!=this.FContext&&(o=s.replace("\0",""),this.FContext.fillStyle=t.ColorToHTML(this.FFont.FColor),this.FContext.font=this.FFont.ToString(),this.FContext.textBaseline="top",this.FContext.fillText(o,e,i),3 in this.FFont.FStyle&&(n=this.FContext.measureText(o),this.FContext.fillRect(e,i+1.4*this.FFont.FSize,n.width,1)),2 in this.FFont.FStyle&&(n=this.FContext.measureText(o),this.FContext.fillRect(e,i+.7*this.FFont.FSize,n.width,1)))},this.StretchDraw$1=function(t,e){var i=null;null!=this.FContext&&null!=(i=e.Image())&&(e.FUsedCanvas?this.FContext.drawImage(e.FCanvasElement,0,0,e.GetWidth(),e.GetHeight(),t.Left,t.Top,t.Right-t.Left,t.Bottom-t.Top):this.FContext.drawImage(i,0,0,e.GetWidth(),e.GetHeight(),t.Left,t.Top,t.Right-t.Left,t.Bottom-t.Top))},this.BeginScene=function(){null!=this.FOnBeginScene&&this.FOnBeginScene(this)},this.EndScene=function(){null!=this.FOnEndScene&&this.FOnEndScene(this)},this.Save=function(){null!=this.FContext&&this.FContext.save()},this.Restore=function(){null!=this.FContext&&this.FContext.restore()},this.Refresh=function(){},this.Clear=function(){null!=this.FContext&&null!=this.FElementCanvas&&this.FContext.clearRect(0,0,this.FElementCanvas.width,this.FElementCanvas.height)},this.TextRect$1=function(e,i,s,n,o,a){var r,l=this,h=t.TCanvasRectF.$new(),p=0,c="",F="",u="",C=0,d=0,T=0,m=!1,S=0,y=0,g=0,f=0,M=t.TCanvasRectF.$new(),B=0,b=0,L=!1,E=!1;function v(t,i,s){if(L){var n=o;2===n?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top,t):0===n?l.TextOut$1(e.Left,e.Top,t):1===n&&l.TextOut$1(e.Right-i,e.Top,t)}else{var r=o;if(2===r){var h=a;0===h?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top,t):2===h?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top+(e.Bottom-e.Top-s)/2,t):1===h&&l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Bottom-s,t)}else if(0===r){var p=a;0===p?l.TextOut$1(e.Left,e.Top,t):2===p?l.TextOut$1(e.Left,e.Top+(e.Bottom-e.Top-s)/2,t):1===p&&l.TextOut$1(e.Left,e.Bottom-s,t)}else if(1===r){var c=a;0===c?l.TextOut$1(e.Right-i,e.Top,t):2===c?l.TextOut$1(e.Right-i,e.Top+(e.Bottom-e.Top-s)/2,t):1===c&&l.TextOut$1(e.Right-i,e.Bottom-s,t)}}}function N(t,e){var i,s="",n=0;if(s="",i=t.length,e.get()>i)return s;for(n=e.get();;){if("\n"===t.charAt(n-1)&&"\r"===t.charAt(n-1-1)||"\r"===t.charAt(n-1)&&"\n"===t.charAt(n-1-1)||" "===t.charAt(n-1)){s=" "===t.charAt(n-1)?pas.System.Copy(t,e.get(),n-(e.get()-1)):pas.System.Copy(t,e.get(),n-e.get());break}if("\n"===t.charAt(n-1)||"\r"===t.charAt(n-1)||" "===t.charAt(n-1)){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}if(n>=i){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}n+=1}return e.set(n+1),s}if(L=s||pas.System.Pos("\r",i)>0||pas.System.Pos("\n",i)>0,r=!s&&(pas.System.Pos("\r",i)>0||pas.System.Pos("\n",i)>0),L){for(M.$assign(e),T=0,p=1,b=.5*this.FFont.FSize,f=0,B=0,y=0,c=N(i,{get:function(){return p},set:function(t){p=t}}),d=this.TextWidth(c),g=this.TextHeight(c)+b,T+=d,c.length>0&&" "===c.charAt(c.length-1)&&(T+=B),E=!1;p<=i.length&&((C=c.length)>=2&&("\n"===c.charAt(C-1)&&"\r"===c.charAt(C-1-1)||"\r"===c.charAt(C-1)&&"\n"===c.charAt(C-1-1))?(c=pas.System.Copy(c,1,C-2),m=!0):C>=1&&("\n"===c.charAt(C-1)||"\r"===c.charAt(C-1))?(c=pas.System.Copy(c,1,C-1),m=!0):m=!1,F=N(i,{get:function(){return p},set:function(t){p=t}}),d=this.TextWidth(F),g=Math.max(g,this.TextHeight(F)+b),!((e.Left+T+d>e.Right||m)&&(""===c||E||(S=c.length,u=pas.System.Copy(c,1,S),f+=1,T>y&&(y=T),n||v(u,T,g),T=0),c="",E=!1,r&&m||!r?e.Top=e.Top+g:r&&!m&&(E=!0),pas.System.Trunc(e.Top)>pas.System.Trunc(e.Bottom-g+b)&&!n)));)T+=d,F.length>0&&" "===F.charAt(F.length-1)&&(T+=B),c+=F;""!==c&&(S=c.length,u=pas.System.Copy(c,1,S),f+=1,T>y&&(y=T),n||v(u,T,g)),h.$assign(t.CreateCanvasRectF(M.Left,M.Top,M.Left+y,M.Top+f*g))}else d=this.TextWidth(i),g=this.TextHeight(i),n||v(i,d,g),h.$assign(t.CreateCanvasRectF(e.Left,e.Top,e.Left+d,e.Top+g));return h},this.TextWidth=function(t){var e=0,i="";return null!=this.FContext&&(i=this.FFont.ToString(),this.FContext.font=i,e=this.FContext.measureText(t).width),e},this.TextHeight=function(e){return t.FontSizeToPx(this.FFont.FSize)}})),this.ColorToRGB=function(t){return t},this.ColorToHex=function(t){var e="";for(e=t.toString(16);e.length<6;)e="0"+e;return pas.System.Copy(e,5,2)+pas.System.Copy(e,3,2)+pas.System.Copy(e,1,2)},this.ColorToHTML=function(e){return-1==(4294967295&e)?"#00000000":0!=(4278190080&e)?"#"+t.ColorToHex(16777215&e)+pas.SysUtils.IntToHex(255&Math.floor((4278190080&e)/16777216),2):"#"+t.ColorToHex(e)},this.FontSizeToHTML=function(t){var e="";return e=pas.SysUtils.FloatToStr(t)+"px",e=pas.SysUtils.StringReplace(e,",",".",rtl.createSet(0))},this.HexToColor=function(t){var e="",i=0;e="";for(var s=1,n=t.length;s<=n;s++)i=s,(t.charAt(i-1)>="0"&&t.charAt(i-1)<="9"||t.charAt(i-1)>="A"&&t.charAt(i-1)<="F"||t.charAt(i-1)>="a"&&t.charAt(i-1)<="f")&&(e+=t.charAt(i-1));return e=e.length>6?"$"+pas.System.Copy(e,1,2)+pas.System.Copy(e,7,2)+pas.System.Copy(e,5,2)+pas.System.Copy(e,3,2):3===e.length?"$"+pas.System.Copy(e,3,1)+pas.System.Copy(e,3,1)+pas.System.Copy(e,2,1)+pas.System.Copy(e,2,1)+pas.System.Copy(e,1,1)+pas.System.Copy(e,1,1):"$"+pas.System.Copy(e,5,2)+pas.System.Copy(e,3,2)+pas.System.Copy(e,1,2),pas.SysUtils.StrToInt64(e)},this.FontSizeToPx=function(t){return 96*t/72},this.GetRValue=function(t){return 255&t},this.GetGValue=function(t){return 255&Math.floor(t/256)},this.GetBValue=function(t){return 255&Math.floor(t/65536)},this.CreateCanvasRectF=function(e,i,s,n){var o=t.TCanvasRectF.$new();return o.Left=e,o.Top=i,o.Right=s,o.Bottom=n,o},this.RGB=function(t,e,i){return t|e<<8|i<<16},t.$implcode=function(){rtl.createClass(e,"TGraphicCache",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FImage=null,this.FID=""},this.$final=function(){this.FImage=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t,e){return this.FImage=t,this.FID=e,this}})),rtl.createClass(e,"TGraphicCacheList",pas.contnrs.TObjectList,(function(){this.Find=function(t,i){var s=!1,n=0,o=null;s=!1;for(var a=0,r=this.GetCount()-1;a<=r;a++)if(n=a,(o=rtl.as(this.GetItem(n),e.TGraphicCache)).FID===t&&null!=o.FImage){i.set(o.FImage),s=!0;break}return s},this.Exists=function(t){var i=!1,s=0,n=null;i=!1;for(var o=0,a=this.GetCount()-1;o<=a;o++)if(s=o,(n=rtl.as(this.GetItem(s),e.TGraphicCache)).FID===t&&null!=n.FImage){i=!0;break}return i}})),e.FCache=null,e.FQueue=null,e.FCacheCount=0,e.MatrixIdentity=function(){var e=t.TMatrix.$new();return e.m11=1,e.m12=0,e.m13=0,e.m21=0,e.m22=1,e.m23=0,e.m31=0,e.m32=0,e.m33=1,e},e.GetPixelRatio=function(t){var e=t.FContext;return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},e.MatrixCreateScaling=function(i,s){var n=t.TMatrix.$new();return n.$assign(e.MatrixIdentity()),n.m11=i,n.m22=s,n},e.MatrixMultiply=function(e,i){var s=t.TMatrix.$new();return s.m11=e.m11*i.m11+e.m12*i.m21+e.m13*i.m31,s.m12=e.m11*i.m12+e.m12*i.m22+e.m13*i.m32,s.m13=e.m11*i.m13+e.m12*i.m23+e.m13*i.m33,s.m21=e.m21*i.m11+e.m22*i.m21+e.m23*i.m31,s.m22=e.m21*i.m12+e.m22*i.m22+e.m23*i.m32,s.m23=e.m21*i.m13+e.m22*i.m23+e.m23*i.m33,s.m31=e.m31*i.m11+e.m32*i.m21+e.m33*i.m31,s.m32=e.m31*i.m12+e.m32*i.m22+e.m33*i.m32,s.m33=e.m31*i.m13+e.m32*i.m23+e.m33*i.m33,s}},t.$init=function(){e.FCache=e.TGraphicCacheList.$create("Create$2"),e.FQueue=pas.Classes.TStringList.$create("Create$1")}}),["WEBLib.Forms","WEBLib.WebTools","Math","SysUtils","contnrs"]),rtl.module("WEBLib.Lang",["System"],(function(){"use strict";this.TUILanguage={0:"lNone",lNone:0,1:"lAfar",lAfar:1,2:"lAbkhazian",lAbkhazian:2,3:"lAvestan",lAvestan:3,4:"lAfrikaans",lAfrikaans:4,5:"lAkan",lAkan:5,6:"lAmharic",lAmharic:6,7:"lAragonese",lAragonese:7,8:"lArabic",lArabic:8,9:"lAssamese",lAssamese:9,10:"lAvaric",lAvaric:10,11:"lAymara",lAymara:11,12:"lAzerbaijani",lAzerbaijani:12,13:"lBashkir",lBashkir:13,14:"lBelarusian",lBelarusian:14,15:"lBulgarian",lBulgarian:15,16:"lBihari",lBihari:16,17:"lBislama",lBislama:17,18:"lBambara",lBambara:18,19:"lBengali",lBengali:19,20:"lTibetan",lTibetan:20,21:"lBreton",lBreton:21,22:"lBosnian",lBosnian:22,23:"lCatalan",lCatalan:23,24:"lChechen",lChechen:24,25:"lChamorro",lChamorro:25,26:"lCorsican",lCorsican:26,27:"lCree",lCree:27,28:"lCzech",lCzech:28,29:"lOldSlavic",lOldSlavic:29,30:"lChuvash",lChuvash:30,31:"lWelsh",lWelsh:31,32:"lDanish",lDanish:32,33:"lGerman",lGerman:33,34:"lDivehi",lDivehi:34,35:"lDzongkha",lDzongkha:35,36:"lEwe",lEwe:36,37:"lEnglish",lEnglish:37,38:"lEsperanto",lEsperanto:38,39:"lSpanish",lSpanish:39,40:"lEstonian",lEstonian:40,41:"lBasque",lBasque:41,42:"lPersian",lPersian:42,43:"lFulah",lFulah:43,44:"lFinnish",lFinnish:44,45:"lFijian",lFijian:45,46:"lFaroese",lFaroese:46,47:"lFrench",lFrench:47,48:"lWesternFrisian",lWesternFrisian:48,49:"lIrish",lIrish:49,50:"lGaelic",lGaelic:50,51:"lGalician",lGalician:51,52:"lGuarani",lGuarani:52,53:"lGujarati",lGujarati:53,54:"lManx",lManx:54,55:"lHausa",lHausa:55,56:"lHebrew",lHebrew:56,57:"lHindi",lHindi:57,58:"lHiriMotu",lHiriMotu:58,59:"lCroatian",lCroatian:59,60:"lHaitian",lHaitian:60,61:"lHungarian",lHungarian:61,62:"lArmenian",lArmenian:62,63:"lHerero",lHerero:63,64:"lInterlingua",lInterlingua:64,65:"lIndonesian",lIndonesian:65,66:"lInterlingue",lInterlingue:66,67:"lIgbo",lIgbo:67,68:"lSichuanYi",lSichuanYi:68,69:"lInupiaq",lInupiaq:69,70:"lIdo",lIdo:70,71:"lIcelandic",lIcelandic:71,72:"lItalian",lItalian:72,73:"lInuktitut",lInuktitut:73,74:"lJapanese",lJapanese:74,75:"lJavanese",lJavanese:75,76:"lGeorgian",lGeorgian:76,77:"lKongo",lKongo:77,78:"lKikuyu",lKikuyu:78,79:"lKuanyama",lKuanyama:79,80:"lKazakh",lKazakh:80,81:"lKalaallisut",lKalaallisut:81,82:"lCentralKhmer",lCentralKhmer:82,83:"lKannada",lKannada:83,84:"lKorean",lKorean:84,85:"lKanuri",lKanuri:85,86:"lKashmiri",lKashmiri:86,87:"lKurdish",lKurdish:87,88:"lKomi",lKomi:88,89:"lCornish",lCornish:89,90:"lKirghiz",lKirghiz:90,91:"lLatin",lLatin:91,92:"lLuxembourgish",lLuxembourgish:92,93:"lGanda",lGanda:93,94:"lLimburgan",lLimburgan:94,95:"lLingala",lLingala:95,96:"lLao",lLao:96,97:"lLithuanian",lLithuanian:97,98:"lLubaKatanga",lLubaKatanga:98,99:"lLatvian",lLatvian:99,100:"lMalagasy",lMalagasy:100,101:"lMarshallese",lMarshallese:101,102:"lMaori",lMaori:102,103:"lMacedonian",lMacedonian:103,104:"lMalayalam",lMalayalam:104,105:"lMongolian",lMongolian:105,106:"lMarathi",lMarathi:106,107:"lMalay",lMalay:107,108:"lMaltese",lMaltese:108,109:"lBurmese",lBurmese:109,110:"lNauru",lNauru:110,111:"lNdebele",lNdebele:111,112:"lNepali",lNepali:112,113:"lNdonga",lNdonga:113,114:"lDutch",lDutch:114,115:"lNorwegian",lNorwegian:115,116:"lNavajo",lNavajo:116,117:"lChichewa",lChichewa:117,118:"lOccitan",lOccitan:118,119:"lOjibwa",lOjibwa:119,120:"lOromo",lOromo:120,121:"lOriya",lOriya:121,122:"lOssetian",lOssetian:122,123:"lPanjabi",lPanjabi:123,124:"lPali",lPali:124,125:"lPolish",lPolish:125,126:"lPushto",lPushto:126,127:"lPortuguese",lPortuguese:127,128:"lQuechua",lQuechua:128,129:"lRomansh",lRomansh:129,130:"lRundi",lRundi:130,131:"lRomanian",lRomanian:131,132:"lRussian",lRussian:132,133:"lKinyarwanda",lKinyarwanda:133,134:"lSanskrit",lSanskrit:134,135:"lSardinian",lSardinian:135,136:"lSindhi",lSindhi:136,137:"lNorthernSami",lNorthernSami:137,138:"lSango",lSango:138,139:"lSinhala",lSinhala:139,140:"lSlovak",lSlovak:140,141:"lSlovenian",lSlovenian:141,142:"lSamoan",lSamoan:142,143:"lShona",lShona:143,144:"lSomali",lSomali:144,145:"lAlbanian",lAlbanian:145,146:"lSerbian",lSerbian:146,147:"lSwati",lSwati:147,148:"lSotho",lSotho:148,149:"lSundanese",lSundanese:149,150:"lSwedish",lSwedish:150,151:"lSwahili",lSwahili:151,152:"lTamil",lTamil:152,153:"lTelugu",lTelugu:153,154:"lTajik",lTajik:154,155:"lThai",lThai:155,156:"lTigrinya",lTigrinya:156,157:"lTurkmen",lTurkmen:157,158:"lTagalog",lTagalog:158,159:"lTswana",lTswana:159,160:"lTonga",lTonga:160,161:"lTurkish",lTurkish:161,162:"lTsonga",lTsonga:162,163:"lTatar",lTatar:163,164:"lTwi",lTwi:164,165:"lTahitian",lTahitian:165,166:"lUighur",lUighur:166,167:"lUkrainian",lUkrainian:167,168:"lUrdu",lUrdu:168,169:"lUzbek",lUzbek:169,170:"lVenda",lVenda:170,171:"lVietnamese",lVietnamese:171,172:"lWalloon",lWalloon:172,173:"lWolof",lWolof:173,174:"lXhosa",lXhosa:174,175:"lYiddish",lYiddish:175,176:"lYoruba",lYoruba:176,177:"lZhuang",lZhuang:177,178:"lChinese",lChinese:178,179:"lZulu",lZulu:179},this.GetLanguageISO639_1Code=function(t){var e="";return 0===t?e="":1===t?e="aa":2===t?e="ab":3===t?e="ae":4===t?e="af":5===t?e="ak":6===t?e="am":7===t?e="an":8===t?e="ar":9===t?e="as":10===t?e="av":11===t?e="ay":12===t?e="az":13===t?e="ba":14===t?e="be":15===t?e="bg":16===t?e="bh":17===t?e="bi":18===t?e="bm":19===t?e="bn":20===t?e="bo":21===t?e="br":22===t?e="bd":23===t?e="ca":24===t?e="ce":25===t?e="ch":26===t?e="co":27===t?e="cr":28===t?e="cs":29===t?e="cu":30===t?e="cv":31===t?e="cy":32===t?e="da":33===t?e="de":34===t?e="dv":35===t?e="dz":36===t?e="ee":37===t?e="en":38===t?e="eo":39===t?e="es":40===t?e="et":41===t?e="eu":42===t?e="fa":43===t?e="ff":44===t?e="fi":45===t?e="fj":46===t?e="fo":47===t?e="fr":48===t?e="fy":49===t?e="ga":50===t?e="gd":51===t?e="gl":52===t?e="gn":53===t?e="gu":54===t?e="gv":55===t?e="ha":56===t?e="he":57===t?e="hi":58===t?e="ho":59===t?e="hr":60===t?e="ht":61===t?e="hu":62===t?e="hy":63===t?e="hz":64===t?e="ia":65===t?e="id":66===t?e="ie":67===t?e="ig":68===t?e="ii":69===t?e="ik":70===t?e="id":71===t?e="is":72===t?e="it":73===t?e="iu":74===t?e="ja":75===t?e="jv":76===t?e="ka":77===t?e="kg":78===t?e="ki":79===t?e="kj":80===t?e="kk":81===t?e="kl":82===t?e="km":83===t?e="kn":84===t?e="ko":85===t?e="kr":86===t?e="ks":87===t?e="ku":88===t?e="kv":89===t?e="kw":90===t?e="ky":91===t?e="la":92===t?e="lb":93===t?e="lg":94===t?e="li":95===t?e="ln":96===t?e="lo":97===t?e="lt":98===t?e="lu":99===t?e="lv":100===t?e="mg":101===t?e="mh":102===t?e="mi":103===t?e="mk":104===t?e="ml":105===t?e="mn":106===t?e="mr":107===t?e="ms":108===t?e="mt":109===t?e="my":110===t?e="na":111===t?e="nb":112===t?e="nd":113===t?e="ng":114===t?e="nl":115===t?e="no":116===t?e="nv":117===t?e="ny":118===t?e="oc":119===t?e="oj":120===t?e="om":121===t?e="or":122===t?e="os":123===t?e="pa":124===t?e="pi":125===t?e="pl":126===t?e="ps":127===t?e="pt":128===t?e="qu":129===t?e="rm":130===t?e="rn":131===t?e="ro":132===t?e="ru":133===t?e="rw":134===t?e="sa":135===t?e="sc":136===t?e="sd":137===t?e="se":138===t?e="sg":139===t?e="si":140===t?e="sk":141===t?e="sl":142===t?e="sm":143===t?e="sn":144===t?e="so":145===t?e="sq":146===t?e="sr":147===t?e="ss":148===t?e="st":149===t?e="su":150===t?e="sv":151===t?e="sw":152===t?e="ta":153===t?e="te":154===t?e="tg":155===t?e="th":156===t?e="ti":157===t?e="tk":158===t?e="tl":159===t?e="tn":160===t?e="to":161===t?e="tr":162===t?e="ts":163===t?e="tt":164===t?e="tw":165===t?e="ty":166===t?e="ug":167===t?e="uk":168===t?e="ur":169===t?e="uz":170===t?e="ve":171===t?e="vi":172===t?e="wa":173===t?e="wo":174===t?e="xh":175===t?e="yi":176===t?e="yo":177===t?e="za":178===t?e="zh":179===t&&(e="zu"),e}})),rtl.module("WEBLib.Menus",["System","Classes","SysUtils","WEBLib.Controls","WEBLib.Graphics","Web"],(function(){"use strict";var t=this,e=t.$impl;this.$rtti.$Class("TMainMenu"),this.$rtti.$Class("TMenuItem"),this.$rtti.$Class("TCustomMainMenu"),this.TMenuItemAutoFlag={0:"maAutomatic",maAutomatic:0,1:"maManual",maManual:1,2:"maParent",maParent:2},this.$rtti.$Enum("TMenuItemAutoFlag",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMenuItemAutoFlag}),this.TMenuBreak={0:"mbNone",mbNone:0,1:"mbBreak",mbBreak:1,2:"mbBarBreak",mbBarBreak:2},this.$rtti.$Enum("TMenuBreak",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMenuBreak}),this.$rtti.$Int("THelpContext",{minvalue:-2147483647,maxvalue:2147483647,ordtype:4}),this.$rtti.$inherited("TShortCut",rtl.word,{}),this.TMainMenuHamburgerMenuVisible={0:"hmAlways",hmAlways:0,1:"hmNever",hmNever:1,2:"hmResponsive",hmResponsive:2},this.$rtti.$Enum("TMainMenuHamburgerMenuVisible",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMainMenuHamburgerMenuVisible}),this.$rtti.$MethodVar("TMainMenuChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TMenuItem],["Rebuild",rtl.boolean]]),methodkind:0}),rtl.createClass(this,"TMenuItemList",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(this,"TMenuItem",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FOwner$1=null,this.FCaption="",this.FItems=null,this.FParentItem=null,this.FOnClick=null,this.FChecked=!1,this.FEnabled=!1,this.FDefault=!1,this.FAutoCheck=!1,this.FHint="",this.FAutoHotkeys=0,this.FRadioItem=!1,this.FGroupIndex=0,this.FVisible=!1,this.FShortCut=0,this.FBreak=0,this.FImageIndex=0,this.FAutoLineReduction=0,this.FHelpContext=0,this.FElementClassName="",this.FParentMenu=null},this.$final=function(){this.FOwner$1=void 0,this.FItems=void 0,this.FParentItem=void 0,this.FOnClick=void 0,this.FParentMenu=void 0,pas.Classes.TComponent.$final.call(this)},this.SetChecked=function(e){var i=null,s=null,n=null,o=null,a=0;if(this.FChecked!==e){if(this.FChecked=e,null!=(o=this.FParentMenu)){if(t.TMenuItem.isPrototypeOf(o)&&e)for(var r=0,l=(s=o).FItems.GetCount()-1;r<=l;r++)a=r,(n=s.FItems.GetItem(a)).FRadioItem&&n!==this&&n.SetChecked(!1);for(;!t.TCustomMainMenu.isPrototypeOf(o)&&null!=o;)o=o.FOwner}null!=(i=this.GetParentMenu())&&i.UpdateElement()}},this.SetCaption=function(t){var e=null;this.FCaption=t,null!=(e=this.GetParentMenu())&&e.UpdateElement()},this.SetImageIndex=function(t){var e=null;this.FImageIndex=t,null!=(e=this.GetParentMenu())&&e.UpdateElement()},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.GetParentMenu().UpdateElement())},this.Create$1=function(e){return this.FParentMenu=null,t.TMainMenu.isPrototypeOf(e)&&(this.FParentMenu=e),pas.Classes.TComponent.Create$1.call(this,e),this.FAutoHotkeys=2,this.FAutoLineReduction=2,this.FImageIndex=-1,this.FHint="",this.FCaption="MenuItem",this.FChecked=!1,this.FEnabled=!0,this.FDefault=!1,this.FRadioItem=!1,this.FVisible=!0,this.FOwner$1=e,this},this.Destroy=function(){var t=0,e=null,i=null;if(e=this.GetParentMenu(),null!=this.FParentItem&&null!=e){e.BeginUpdate();for(var s=this.FParentItem.FItems.GetCount()-1;s>=0;s--)t=s,this.FParentItem.FItems.GetItem(t)===this&&this.FParentItem.FItems.Delete(t);e.EndUpdate()}if(null!=this.FItems)for(var n=this.FItems.GetCount()-1;n>=0;n--)t=n,(i=this.FItems.GetItem(t)).FParentItem=null,i=rtl.freeLoc(i),this.FItems.Delete(t);pas.Classes.TComponent.Destroy.call(this)},this.Assign=function(e){var i=0,s=null,n=null,o=null;if(t.TMenuItem.isPrototypeOf(e)&&(s=rtl.as(e,t.TMenuItem),this.FAutoCheck=s.FAutoCheck,this.FAutoHotkeys=s.FAutoHotkeys,this.FAutoLineReduction=s.FAutoLineReduction,this.FBreak=s.FBreak,this.FCaption=s.FCaption,this.FChecked=s.FChecked,this.FDefault=s.FDefault,this.FEnabled=s.FEnabled,this.FGroupIndex=s.FGroupIndex,this.FHelpContext=s.FHelpContext,this.FHint=s.FHint,this.FImageIndex=s.FImageIndex,this.FRadioItem=s.FRadioItem,this.FShortCut=s.FShortCut,this.FVisible=s.FVisible,this.FElementClassName=s.FElementClassName,o=this.GetParentMenu(),null!=this.FParentItem&&this.SetName(o.GetUniqueName(s.FCaption)),null!=s.FItems)){if(null!=this.FItems){for(var a=this.FItems.GetCount()-1;a>=0;a--)i=a,this.RemoveItem(this.GetParentMenu().FParent,this.FItems.GetItem(i));this.FItems.Clear()}else this.FItems=t.TMenuItemList.$create("Create$1");for(var r=0,l=s.FItems.GetCount()-1;r<=l;r++)i=r,(n=t.TMenuItem.$create("Create$1",[o.FOwner])).FParentMenu=o,n.FParentItem=this,n.Assign(s.FItems.GetItem(i)),this.FItems.Add(n)}},this.GetParentMenu=function(){var e=null,i=null;for(e=null,i=this.FParentMenu;null!=i&&t.TMenuItem.isPrototypeOf(i);)i=i.FParentMenu;return null!=i&&(e=i),e},this.SetChildOrder=function(t,e){var i;(i=this.FItems.IndexOf(t))>=0&&e<this.FItems.GetCount()&&this.FItems.Move(i,e)},this.RemoveItem=function(t,e){var i=0;if(null!=e.FItems)for(var s=e.FItems.GetCount()-1;s>=0;s--)i=s,this.RemoveItem(t,e.FItems.GetItem(i));t.RemoveComponent(e)},this.Click=function(){null!=this.FOnClick&&this.FOnClick(this)},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("AutoCheck",0,rtl.boolean,"FAutoCheck","FAutoCheck",{Default:!1}),e.addProperty("AutoHotkeys",0,t.$rtti.TMenuItemAutoFlag,"FAutoHotkeys","FAutoHotkeys",{Default:t.TMenuItemAutoFlag.maParent}),e.addProperty("AutoLineReduction",0,t.$rtti.TMenuItemAutoFlag,"FAutoLineReduction","FAutoLineReduction",{Default:t.TMenuItemAutoFlag.maParent}),e.addProperty("Break",0,t.$rtti.TMenuBreak,"FBreak","FBreak",{Default:t.TMenuBreak.mbNone}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("Checked",2,rtl.boolean,"FChecked","SetChecked",{Default:!1}),e.addProperty("Default",0,rtl.boolean,"FDefault","FDefault",{Default:!1}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("GroupIndex",0,rtl.byte,"FGroupIndex","FGroupIndex",{Default:0}),e.addProperty("HelpContext",0,t.$rtti.THelpContext,"FHelpContext","FHelpContext",{Default:0}),e.addProperty("Hint",0,rtl.string,"FHint","FHint"),e.addProperty("ImageIndex",2,rtl.longint,"FImageIndex","SetImageIndex",{Default:-1}),e.addProperty("RadioItem",0,rtl.boolean,"FRadioItem","FRadioItem",{Default:!1}),e.addProperty("ShortCut",0,t.$rtti.TShortCut,"FShortCut","FShortCut",{Default:0}),e.addProperty("Visible",0,rtl.boolean,"FVisible","FVisible",{Default:!0}),e.addProperty("ElementClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","FElementClassName"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick")})),this.$rtti.$Class("TMainMenuAppearance"),rtl.createClass(this,"THamburgerMenu",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FVisible=0,this.FCaption="",this.FBackgroundColor=0,this.FCaptionColor=0,this.FResponsiveMaxWidth=0},this.$final=function(){this.FOwner=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.FOwner.FOwner.UpdateElement())},this.SetBackgroundColor=function(t){this.FBackgroundColor!==t&&(this.FBackgroundColor=t,this.FOwner.FOwner.UpdateElement())},this.SetCaption=function(t){this.FCaption!==t&&(this.FCaption=t,this.FOwner.FOwner.UpdateElement())},this.SetCaptionColor=function(t){this.FCaptionColor!==t&&(this.FCaptionColor=t,this.FOwner.FOwner.UpdateElement())},this.SetResponsiveMaxWidth=function(t){this.FResponsiveMaxWidth!==t&&(this.FResponsiveMaxWidth=t,this.FOwner.FOwner.UpdateElement())},this.Create$1=function(t){return this.FBackgroundColor=12632256,this.FCaption="Menu",this.FCaptionColor=16777215,this.FVisible=2,this.FResponsiveMaxWidth=768,this.FOwner=t,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.Assign=function(e){pas.Classes.TPersistent.Assign.apply(this,arguments),t.THamburgerMenu.isPrototypeOf(e)&&(this.FBackgroundColor=rtl.as(e,t.THamburgerMenu).FBackgroundColor,this.FCaption=rtl.as(e,t.THamburgerMenu).FCaption,this.FCaptionColor=rtl.as(e,t.THamburgerMenu).FCaptionColor,this.FVisible=rtl.as(e,t.THamburgerMenu).FVisible,this.FResponsiveMaxWidth=rtl.as(e,t.THamburgerMenu).FResponsiveMaxWidth)};var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",t.$rtti.TMainMenuAppearance]]),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("CaptionColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FCaptionColor","SetCaptionColor",{Default:16777215}),e.addProperty("BackgroundColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBackgroundColor","SetBackgroundColor",{Default:12632256}),e.addProperty("Visible",2,t.$rtti.TMainMenuHamburgerMenuVisible,"FVisible","SetVisible",{Default:t.TMainMenuHamburgerMenuVisible.hmResponsive}),e.addProperty("ResponsiveMaxWidth",2,rtl.longint,"FResponsiveMaxWidth","SetResponsiveMaxWidth",{Default:768})})),rtl.createClass(this,"TMainMenuAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FBackgroundColor=0,this.FHoverFontColor=0,this.FHoverColor=0,this.FImageURLs=null,this.FHamburgerMenu=null,this.FImageSize=0,this.FSubmenuIndicator=""},this.$final=function(){this.FOwner=void 0,this.FImageURLs=void 0,this.FHamburgerMenu=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetBackgroundColor=function(t){this.FBackgroundColor!==t&&(this.FBackgroundColor=t,this.FOwner.UpdateElement())},this.SetHoverColor=function(t){this.FHoverColor!==t&&(this.FHoverColor=t,this.FOwner.UpdateElement())},this.SetHoverFontColor=function(t){this.FHoverFontColor!==t&&(this.FHoverFontColor=t,this.FOwner.UpdateElement())},this.SetImageURLs=function(t){this.FImageURLs.Assign(t)},this.SetImageSize=function(t){this.FImageSize!==t&&(this.FImageSize=t,this.FOwner.UpdateElement())},this.SetSubmenuIndicator=function(t){this.FSubmenuIndicator!==t&&(this.FSubmenuIndicator=t,this.FOwner.UpdateElement())},this.HandleImageURLsChanged=function(t){this.FOwner.UpdateElement()},this.Create$1=function(e){return this.FBackgroundColor=15790320,this.FHoverColor=14120960,this.FHoverFontColor=197379,this.FHamburgerMenu=t.THamburgerMenu.$create("Create$1",[this]),this.FImageURLs=pas.Classes.TStringList.$create("Create$1"),this.FImageURLs.SetSkipLastLineBreak(!0),this.FImageURLs.FOnChange=rtl.createCallback(this,"HandleImageURLsChanged"),this.FImageSize=16,this.FSubmenuIndicator="&#9658;",this.FOwner=e,this},this.Destroy=function(){rtl.free(this,"FHamburgerMenu"),rtl.free(this,"FImageURLs"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){pas.Classes.TPersistent.Assign.apply(this,arguments),t.TMainMenuAppearance.isPrototypeOf(e)&&(this.FBackgroundColor=rtl.as(e,t.TMainMenuAppearance).FBackgroundColor,this.FHoverColor=rtl.as(e,t.TMainMenuAppearance).FHoverColor,this.FHoverFontColor=rtl.as(e,t.TMainMenuAppearance).FHoverFontColor,this.FHamburgerMenu.Assign(rtl.as(e,t.TMainMenuAppearance).FHamburgerMenu),this.FImageURLs.Assign(rtl.as(e,t.TMainMenuAppearance).FImageURLs),this.FImageSize=rtl.as(e,t.TMainMenuAppearance).FImageSize,this.FSubmenuIndicator=rtl.as(e,t.TMainMenuAppearance).FSubmenuIndicator)};var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",t.$rtti.TMainMenu]]),e.addProperty("BackgroundColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBackgroundColor","SetBackgroundColor",{Default:15790320}),e.addProperty("HamburgerMenu",0,t.$rtti.THamburgerMenu,"FHamburgerMenu","FHamburgerMenu"),e.addProperty("HoverColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FHoverColor","SetHoverColor",{Default:14120960}),e.addProperty("HoverFontColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FHoverFontColor","SetHoverFontColor",{Default:197379}),e.addProperty("ImageURLs",2,pas.Classes.$rtti.TStringList,"FImageURLs","SetImageURLs"),e.addProperty("ImageSize",2,rtl.longint,"FImageSize","SetImageSize",{Default:16}),e.addProperty("SubmenuIndicator",2,rtl.string,"FSubmenuIndicator","SetSubmenuIndicator")})),rtl.createClass(this,"TCustomMainMenu",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FItems=null,this.FOnChange=null},this.$final=function(){this.FItems=void 0,this.FOnChange=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.IsUpdating()||null!=this.GetElementHandle()&&this.UpdateElement()},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this),this.IsUpdating()},this.GetUniqueName=function(t){var i="",s=0,n=0,o=!1;n=1,""===t&&(t=this.FName+"item"),t=e.MakeValidName(t);do{i=t+pas.SysUtils.IntToStr(n),o=!0;for(var a=0,r=this.FOwner.GetComponentCount()-1;a<=r;a++)if(s=a,this.FOwner.GetComponent(s).FName===i){o=!1,n+=1;break}}while(!o);return i},this.SetName=function(t){pas["WEBLib.Controls"].TCustomControl.SetName.apply(this,arguments),this.IsUpdating()||0 in this.FComponentState||this.UpdateElement()},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FItems=t.TMenuItem.$create("Create$1",[this]),this.FItems.FParentMenu=this,this.SetWidthStyle(2),this.SetHeight(30)},this.Destroy=function(){rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.SetChildOrder=function(t,e){var i;(i=this.FItems.FItems.IndexOf(t))>=0&&e<this.FItems.FItems.GetCount()&&this.FItems.FItems.Move(i,e)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("Items",0,t.$rtti.TMenuItem,"FItems",""),i.addProperty("OnChange",0,t.$rtti.TMainMenuChangeEvent,"FOnChange","FOnChange")})),rtl.createClass(this,"TMainMenu",this.TCustomMainMenu,(function(){this.$init=function(){t.TCustomMainMenu.$init.call(this),this.FMenu=null,this.FMainMenu=!1,this.FMenuIndex=0,this.FAppearance=null,this.FContainer$1=null,this.FIsPopupMenu=!1,this.FShowPopup=!1,this.FElementItemClassName=""},this.$final=function(){this.FMenu=void 0,this.FAppearance=void 0,this.FContainer$1=void 0,t.TCustomMainMenu.$final.call(this)},this.HandleChange=function(t){var e=null,i=null;return!0,this.FIsPopupMenu&&(this.FShowPopup=!1,this.UpdateElement()),(e=t.target).hasAttribute("id")||(e=e.parentElement),null!=(i=this.GetItemByName(this.FItems,e.id))&&(i.FAutoCheck&&i.SetChecked(!i.FChecked),null!=this.FOnChange&&this.FOnChange(this,i,!1),i.Click()),!0},this.Loaded=function(){t.TCustomMainMenu.Loaded.call(this),this.IsUpdating()||(null==this.FContainer$1&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,pas["WEBLib.Forms"].TCustomForm).FMenu===this&&(this.FContainer$1=this.FParent),null!=this.GetElementHandle()&&this.UpdateElement())},this.UpdateElement=function(){var e,i="",s="",n="",o="",a="",r=null,l=null,h=null,p=null,c=null,F=null,u=null;t.TCustomMainMenu.UpdateElement.call(this),this.IsUpdating()||null==this.GetElementHandle()&&null==this.FContainer$1||(null!=this.FContainer$1?(r=this.FContainer$1.GetElementHandle(),this.SetVisible(!1)):((r=this.GetElementHandle()).style.setProperty("top",pas.SysUtils.IntToStr(this.GetTop())+"px"),r.style.setProperty("left",pas.SysUtils.IntToStr(this.GetLeft())+"px"),4 in this.FComponentState&&null==this.FContainer$1&&this.GetElementHandle().style.setProperty("background-color","silver")),this.FMenu=r.firstChild,null!=this.FMenu&&this.FMenu.parentElement.removeChild(this.FMenu),3 in this.FComponentState||(this.FMenu=document.createElement("NAV"),this.FMenu.setAttribute("id",this.GetID()+"menu"),this.FMenu.innerHTML="",null!=this.FContainer$1&&(this.FMenu.style.setProperty("top","0"),this.FMenu.style.setProperty("left","0"),this.FMenu.style.setProperty("position","absolute"),this.FMenu.style.setProperty("width","100%"),this.FMenu.style.setProperty("z-index","999997")),r.innerHTML="",r.style.setProperty("overflow","visible"),0!==this.FAppearance.FHamburgerMenu.FVisible&&(a=this.FShowPopup?"block":"none",n="  #"+this.GetID()+"menu .main-menu {\r    display: block;\r  }\r  #"+this.GetID()+"menu #toggle-menu {\r    display: none;\r  }\r  #"+this.GetID()+"menu ul span.drop-label {\r    display: inline-block;\r  }\r  #"+this.GetID()+"menu li {\r    float: left;\r    border-width: 0 1px 0 0;\r  }\r  #"+this.GetID()+"menu .popup-menu li, \r  #"+this.GetID()+"menu .sub-menu li {\r    float: none;\r  }\r  #"+this.GetID()+"menu .sub-menu {\r    top: 100%;\r  }\r  #"+this.GetID()+"menu .popup-menu { \r    top: 0;\r  }\r  #"+this.GetID()+"menu .popup-menu, \r  #"+this.GetID()+"menu .sub-menu {\r    border-width: 0;\r    margin: 0;\r    position: absolute;\r    left: 0;\r    min-width: 12em;\r    z-index: 9999999;\r\t   white-space: nowrap;\r  }\r  #"+this.GetID()+"menu .sub-menu {\r    top: 100%;\r  }\r  #"+this.GetID()+"menu .popup-menu { \r    display: "+a+";\r  }\r  #"+this.GetID()+"menu .sub-menu,\r  #"+this.GetID()+'menu input[type="checkbox"]:checked + .popup-menu,\r  #'+this.GetID()+'menu input[type="checkbox"]:checked + .sub-menu {\r    display: none;\r  }\r  #'+this.GetID()+"menu .popup-menu li, \r  #"+this.GetID()+"menu .sub-menu li {\r    border-width: 1px;\r  }\r  #"+this.GetID()+"menu .popup-menu .sub-menu, \r  #"+this.GetID()+"menu .sub-menu .sub-menu {\r    top: 0;\r    left: 100%;\r  }\r  #"+this.GetID()+'menu li:hover > input[type="checkbox"] + .popup-menu, \r  #'+this.GetID()+'menu li:hover > input[type="checkbox"] + .sub-menu {\r    display: block;\r  }\r',2===this.FAppearance.FHamburgerMenu.FVisible&&(n="@media only screen and (min-width: "+pas.SysUtils.IntToStr(this.FAppearance.FHamburgerMenu.FResponsiveMaxWidth)+"px) {\r"+n+"}")),this.FAppearance.FImageSize>0&&(o="  width: "+pas.SysUtils.IntToStr(this.FAppearance.FImageSize)+"px;\r  height: "+pas.SysUtils.IntToStr(this.FAppearance.FImageSize)+"px;\r"),i="#"+this.GetID()+"menu ul {\r  margin: 0;\r  padding: 0;\r}\r#"+this.GetID()+"menu .main-menu {\r  display: none;\r}\r#"+this.GetID()+"menu .popup-menu {\r  display: block;\r}\r#"+this.GetID()+"menu label img.icon,#"+this.GetID()+"menu label span.checked {\r"+o+"  margin-right: 10px;\r  pointer-events: none;\r}\r#"+this.GetID()+"tm:checked + .main-menu {\r  display: block;\r}\r#"+this.GetID()+'menu input[type="checkbox"],\r#'+this.GetID()+"menu ul span.drop-label {\r  display: none;\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu .popup-menu,\r#"+this.GetID()+"menu .sub-menu {\r  border-width: 1px;\r  border-style: solid;\r  border-color: rgba(0, 0, 0, .05);\r  border-bottom: 0px;\r  border-top: 0px;\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu {\r  border-width: 0 0 3px;\r}\r#"+this.GetID()+"menu .popup-menu,\r#"+this.GetID()+"menu .sub-menu {\r  border-width: 1px 1px 0;\r  margin: 0 1em;\r}\r#"+this.GetID()+"menu .popup-menu li:first-child,\r#"+this.GetID()+"menu .sub-menu li:first-child {\r  border-top: 1px solid;\r  border-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu .popup-menu li:last-child,\r#"+this.GetID()+"menu .sub-menu li:last-child {\r  border-bottom: 1px solid;\r  border-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label {\r  position: relative;\r  display: block;\r}\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label { \r  padding: 0.75em 1.5em;\r  text-decoration: none;\r}\r#"+this.GetID()+"menu li span.menu-separator { \r  display: block;\r  width: 100%;\r  height: 1px;\r  background-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu .popup-menu, \r#"+this.GetID()+"menu .sub-menu {\r  display: none;\r}\r#"+this.GetID()+'menu input[type="checkbox"]:checked + .popup-menu,\r#'+this.GetID()+'menu input[type="checkbox"]:checked + .sub-menu {\r  display: block;\r  z-index: 3000;\r}\r#'+this.GetID()+"menu span.drop-icon {\r  margin-left: 10px;}\r#"+this.GetID()+"menu span.hamburger-icon {\r  float: right;\r  padding: 0;\r  margin: 0;\r  font-weight: 900;\r}\r@media only screen and (max-width: 64em) and (min-width: 52.01em) {\r  #"+this.GetID()+"menu li {\r    width: auto;\r  }\r  #"+this.GetID()+"menu .sub-menu li {\r    width: auto;\r  }\r}\r",s="",""===this.FElementClassName&&(s="#"+this.GetID()+"menu .popup-menu, \r#"+this.GetID()+"menu .sub-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FBackgroundColor)+";\r}\r@media only screen and (max-width: 64em) and (min-width: 52.01em) {\r#"+this.GetID()+"menu .sub-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FBackgroundColor)+";\r}\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label {\r}\r#"+this.GetID()+"menu #toggle-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FBackgroundColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FCaptionColor)+";\r}\r#"+this.GetID()+"menu .main-menu li label {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FBackgroundColor)+";\r}\r#"+this.GetID()+"menu li label:hover {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverFontColor)+";\r}\r#"+this.GetID()+"menu .popup-menu label:hover, \r#"+this.GetID()+"menu .sub-menu label:hover {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverFontColor)+";\r}\r"),i=i+s+n,this.FMainMenu=!0,this.FMenuIndex=0,(F=document.createElement("STYLE")).innerHTML=i,(u=document.createElement("SCRIPT")).innerHTML="function "+this.GetID()+'MenuClick(ctrl){  el = ctrl.parentElement.parentElement;  el.style.display = "none";  setTimeout(function(){el.style.removeProperty("display")}, 25);}function '+this.GetID()+'MenuOut(ctrl){  menuel = document.getElementById("'+this.GetID()+'");  if(menuel) {     popupel = menuel.getElementsByClassName("popup-menu");    if(popupel)       setTimeout(function(){popupel[0].style.display = "none"}, 25);  }}',(l=document.createElement("LABEL")).setAttribute("for",this.GetID()+"tm"),l.setAttribute("id","toggle-menu"),l.innerHTML=this.FAppearance.FHamburgerMenu.FCaption,h=document.createElement("SPAN"),""!==this.FElementItemClassName?h.setAttribute("class",this.FElementItemClassName):h.setAttribute("class","drop-label"),l.appendChild(h),(p=document.createElement("SPAN")).setAttribute("class","hamburger-icon"),p.innerHTML="&#9776;",h.appendChild(p),(c=document.createElement("INPUT")).setAttribute("type","checkbox"),c.setAttribute("id",this.GetID()+"tm"),this.FMenu.appendChild(F),this.FMenu.appendChild(u),this.FMenu.appendChild(l),this.FMenu.appendChild(c),null!==(e=this.GetMenuSource(this.FItems))&&this.FMenu.appendChild(e),r.appendChild(this.FMenu)))},this.GetMenuSource=function(t){var i=null,s=0,n=null,o="",a=null,r=null,l=null,h=null,p=0,c="";if(i=null,null!=t.FItems&&t.FItems.GetCount()>0){i=document.createElement("UL"),this.FMainMenu?(this.FMainMenu=!1,o=this.FIsPopupMenu?"popup-menu":"main-menu"):o="sub-menu",this.FMenuIndex=this.FMenuIndex+1,i.setAttribute("class",o);for(var F=0,u=t.FItems.GetCount()-1;F<=u;F++)s=F,p+=1,""===(n=t.FItems.GetItem(s)).FName&&(c=pas.SysUtils.StringReplace(n.FCaption," ","",rtl.createSet(0)),""===(c=e.MakeValidName(c))&&(c="MenuItem"+pas.SysUtils.IntToStr(p)),n.SetName(c+pas.SysUtils.IntToStr(p))),n.FVisible&&(a=document.createElement("LI"),"-"!==n.FCaption?(r=document.createElement("LABEL"),""!==this.FElementItemClassName?r.setAttribute("class",this.FElementItemClassName):r.setAttribute("class","drop-label"),r.setAttribute("title",n.FHint),n.FImageIndex>=0&&this.FAppearance.FImageURLs.GetCount()>n.FImageIndex?r.innerHTML='<img class="icon" src="'+this.FAppearance.FImageURLs.Get(n.FImageIndex)+'">':n.FChecked&&(n.FRadioItem?r.innerHTML='<span class="checked">&#9679;</span>':r.innerHTML='<span class="checked">&#10004;</span>'),r.innerHTML=r.innerHTML+n.FCaption):((r=document.createElement("SPAN")).setAttribute("class","menu-separator"),r.innerHTML=""),null!=n.FItems&&n.FItems.GetCount()>0?((h=document.createElement("SPAN")).setAttribute("class","drop-icon"),h.innerHTML=this.FAppearance.FSubmenuIndicator,r.setAttribute("for","sm"+pas.SysUtils.IntToStr(this.FMenuIndex)),r.appendChild(h),n.FEnabled||r.style.setProperty("color","gray"),(l=document.createElement("INPUT")).setAttribute("type","checkbox"),l.setAttribute("id","sm"+pas.SysUtils.IntToStr(this.FMenuIndex)),a.appendChild(r),a.appendChild(l),n.FEnabled&&a.appendChild(this.GetMenuSource(n))):(r.setAttribute("for",this.GetID()+"tm"),r.setAttribute("id",n.FName),n.FEnabled?("sub-menu"===o&&n.FEnabled&&r.setAttribute("onMouseUp",this.GetID()+"MenuClick(this);"),r.addEventListener("click",rtl.createSafeCallback(this,"HandleChange"))):r.style.setProperty("color","gray"),a.appendChild(r)),i.appendChild(a))}return i},this.GetItemByName=function(t,e){var i=null,s=0,n=null;if(i=null,null!=t.FItems)for(var o=0,a=t.FItems.GetCount()-1;o<=a;o++){if(s=o,(n=t.FItems.GetItem(s)).FName===e)return i=n,null!=n.FOnClick&&(i.FOnClick=n.FOnClick),i;null==i&&(i=this.GetItemByName(n,e))}return i},this.CreateInitialize=function(){t.TCustomMainMenu.CreateInitialize.call(this),this.FAppearance=t.TMainMenuAppearance.$create("Create$1",[this]),this.FContainer$1=null,this.FMainMenu=!0,this.FMenuIndex=0,this.FIsPopupMenu=!1,this.FShowPopup=!1,this.SetTop(0),this.SetLeft(0),this.SetWidth(100),4 in this.FComponentState&&(this.SetElementPosition(1),this.SetWidthPercent(100),this.SetWidthStyle(0))},this.CreateElement=function(){var t=null,e=null;return 4 in this.FComponentState?(t=document.createElement("DIV"),(e=document.createElement("DIV")).innerHTML="TWebMainMenu",this.SetBorderStyle(1),e.setAttribute("align","center"),e.style.setProperty("border","1px solid gray"),e.style.setProperty("vertical-align","middle"),e.style.setProperty("display","table-cell"),t.appendChild(e)):(t=document.createElement("DIV"),this.FIsPopupMenu&&t.setAttribute("onMouseLeave",this.GetID()+"MenuOut(this);")),t},this.Destroy=function(){rtl.free(this,"FAppearance"),t.TCustomMainMenu.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("Appearance",0,t.$rtti.TMainMenuAppearance,"FAppearance","FAppearance"),i.addProperty("Container",0,pas["WEBLib.Controls"].$rtti.TControl,"FContainer$1","FContainer$1"),i.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),i.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),i.addProperty("ElementItemClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementItemClassName","FElementItemClassName"),i.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),i.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0})})),rtl.createClass(this,"TPopupMenu",this.TMainMenu,(function(){this.$init=function(){t.TMainMenu.$init.call(this),this.FOnPopup=null},this.$final=function(){this.FOnPopup=void 0,t.TMainMenu.$final.call(this)},this.Create$1=function(t){return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),pas["WEBLib.Controls"].TControl.isPrototypeOf(t)&&this.SetParent(t),this},this.CreateInitialize=function(){t.TMainMenu.CreateInitialize.call(this),this.FAppearance.FHamburgerMenu.SetVisible(1),this.FIsPopupMenu=!0},this.Popup=function(t,e){null!=this.FOnPopup&&this.FOnPopup(this),this.SetTop(e),this.SetLeft(t),this.FShowPopup=!0,this.UpdateElement(),this.FShowPopup=!1},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("OnPopup",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPopup","FOnPopup")})),rtl.createClass(this,"TWebCustomControl",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FPopupMenu=null},this.$final=function(){this.FPopupMenu=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.HandleDoContextMenu=function(t){var e=!1,i=pas.Types.TPoint.$new(),s=null,n=null;return pas["WEBLib.Controls"].TControl.HandleDoContextMenu.apply(this,arguments),null!=this.FPopupMenu&&(t.stopPropagation(),t.preventDefault(),i.$assign(pas.Types.Point(Math.round(t.clientX),Math.round(t.clientY))),null!=(s=pas["WEBLib.Forms"].GetParentForm(this))&&null!=s.GetContainer()&&(n=s.GetContainer().getBoundingClientRect(),i.x=i.x-Math.round(n.left),i.y=i.y-Math.round(n.top)),this.FPopupMenu.Popup(i.x,i.y),e=!0),e},this.Notification=function(t,e){pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&t===this.FPopupMenu&&(this.FPopupMenu=null)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TWebGraphicControl",pas["WEBLib.Controls"].TGraphicControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TGraphicControl.$init.call(this),this.FPopupMenu=null},this.$final=function(){this.FPopupMenu=void 0,pas["WEBLib.Controls"].TGraphicControl.$final.call(this)},this.HandleDoContextMenu=function(t){var e=!1,i=pas.Types.TPoint.$new(),s=null,n=null;return pas["WEBLib.Controls"].TControl.HandleDoContextMenu.apply(this,arguments),null!=this.FPopupMenu&&(t.stopPropagation(),t.preventDefault(),i.$assign(pas.Types.Point(Math.round(t.clientX),Math.round(t.clientY))),null!=(s=pas["WEBLib.Forms"].GetParentForm(this))&&s.FPopup&&null!=s.GetContainer()&&(n=s.GetContainer().getBoundingClientRect(),i.x=i.x-Math.round(n.left),i.y=i.y-Math.round(n.top)),this.FPopupMenu.Popup(i.x,i.y),e=!0),e},this.Notification=function(t,e){pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&t===this.FPopupMenu&&(this.FPopupMenu=null)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),t.$implcode=function(){var t=rtl.createSet(null,65,90,null,97,122,95),i=rtl.unionSet(t,rtl.createSet(null,48,57));e.MakeValidName=function(t){var e="",s=0;e="";for(var n=1,o=t.length;n<=o;n++)s=n,t.charCodeAt(s-1)in i&&(e+=t.charAt(s-1));return e}}}),["Types","WEBLib.Forms"]),rtl.module("Rtl.BrowserLoadHelper",["System","Classes","SysUtils","JS","Web"],(function(){"use strict";var t=this;rtl.createClass(this,"TBrowserLoadHelper",pas.Classes.TLoadHelper,(function(){})),t.$init=function(){pas.Classes.SetLoadHelperClass(t.TBrowserLoadHelper)}})),rtl.module("WEBLib.Forms",["System","Classes","Types","SysUtils","WEBLib.Graphics","WEBLib.Controls","WEBLib.Lang","WEBLib.Menus","Web","JS","Rtl.BrowserLoadHelper"],(function(){"use strict";var t=this,e=t.$impl;this.idOK=1,this.idCancel=2,this.idAbort=3,this.idRetry=4,this.idIgnore=5,this.idYes=6,this.idNo=7,this.idClose=8,this.idHelp=9,this.idContinue=11,this.mrNone=0,this.mrOk=1,this.mrCancel=2,this.mrAbort=3,this.mrRetry=4,this.mrIgnore=5,this.mrYes=6,this.mrNo=7,this.mrClose=8,this.mrHelp=9,this.mrContinue=11,this.mrAll=12,this.mrNoToAll=13,this.mrYesToAll=14,this.rgiFirst=-1024,this.igiLast=511,this.clTMSBlue=14917120,this.$rtti.$Int("TConstraintSize",{minvalue:0,maxvalue:2147483647,ordtype:5}),this.TCloseAction={0:"caNone",caNone:0,1:"caHide",caHide:1,2:"caFree",caFree:2,3:"caMinimize",caMinimize:3},this.$rtti.$Enum("TCloseAction",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TCloseAction}),this.TFormStyle={0:"fsNormal",fsNormal:0,1:"fsStayOnTop",fsStayOnTop:1},this.$rtti.$Enum("TFormStyle",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TFormStyle}),this.$rtti.$Int("TGestureID",{minvalue:-1024,maxvalue:511,ordtype:2}),this.TInteractiveGestureFlag={0:"gfBegin",gfBegin:0,1:"gfInertia",gfInertia:1,2:"gfEnd",gfEnd:2},this.$rtti.$Enum("TInteractiveGestureFlag",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TInteractiveGestureFlag}),this.$rtti.$Set("TInteractiveGestureFlags",{comptype:this.$rtti.TInteractiveGestureFlag}),this.TMouseActivate={0:"maDefault",maDefault:0,1:"maActivate",maActivate:1,2:"maActivateAndEat",maActivateAndEat:2,3:"maNoActivate",maNoActivate:3,4:"maNoActivateAndEat",maNoActivateAndEat:4},this.$rtti.$Enum("TMouseActivate",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TMouseActivate}),this.TScreenOrientation={0:"soPortrait",soPortrait:0,1:"soLandscape",soLandscape:1},this.$rtti.$Enum("TScreenOrientation",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TScreenOrientation}),this.TApplicationColorScheme={0:"csNoScheme",csNoScheme:0,1:"csLight",csLight:1,2:"csDark",csDark:2},rtl.recNewT(this,"TSmallPoint",(function(){this.x=0,this.y=0,this.$eq=function(t){return this.x===t.x&&this.y===t.y},this.$assign=function(t){return this.x=t.x,this.y=t.y,this};var e=t.$rtti.$Record("TSmallPoint",{});e.addField("x",rtl.smallint),e.addField("y",rtl.smallint)})),rtl.recNewT(this,"TAlignInfo",(function(){this.AlignList=null,this.ControlIndex=0,this.Align=0,this.Scratch=0,this.$eq=function(t){return this.AlignList===t.AlignList&&this.ControlIndex===t.ControlIndex&&this.Align===t.Align&&this.Scratch===t.Scratch},this.$assign=function(t){return this.AlignList=t.AlignList,this.ControlIndex=t.ControlIndex,this.Align=t.Align,this.Scratch=t.Scratch,this};var e=t.$rtti.$Record("TAlignInfo",{});e.addField("AlignList",pas.Classes.$rtti.TList),e.addField("ControlIndex",rtl.longint),e.addField("Align",pas["WEBLib.Controls"].$rtti.TAlign),e.addField("Scratch",rtl.longint)})),rtl.recNewT(this,"TGestureEventInfo",(function(){this.GestureID=0,this.Angle=0,this.Distance=0,this.$new=function(){var e=Object.create(this);return e.Location=pas.Types.TPoint.$new(),e.Flags={},e.InertiaVector=t.TSmallPoint.$new(),e.TapLocation=t.TSmallPoint.$new(),e},this.$eq=function(t){return this.GestureID===t.GestureID&&this.Location.$eq(t.Location)&&rtl.eqSet(this.Flags,t.Flags)&&this.Angle===t.Angle&&this.InertiaVector.$eq(t.InertiaVector)&&this.Distance===t.Distance&&this.TapLocation.$eq(t.TapLocation)},this.$assign=function(t){return this.GestureID=t.GestureID,this.Location.$assign(t.Location),this.Flags=rtl.refSet(t.Flags),this.Angle=t.Angle,this.InertiaVector.$assign(t.InertiaVector),this.Distance=t.Distance,this.TapLocation.$assign(t.TapLocation),this};var e=t.$rtti.$Record("TGestureEventInfo",{});e.addField("GestureID",t.$rtti.TGestureID),e.addField("Location",pas.Types.$rtti.TPoint),e.addField("Flags",t.$rtti.TInteractiveGestureFlags),e.addField("Angle",rtl.double),e.addField("InertiaVector",t.$rtti.TSmallPoint),e.addField("Distance",rtl.longint),e.addField("TapLocation",t.$rtti.TSmallPoint)})),this.$rtti.$MethodVar("TCloseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Action",this.$rtti.TCloseAction,1]]),methodkind:0}),this.$rtti.$MethodVar("TCloseQueryEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["CanClose",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TOrientationChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AOrientation",this.$rtti.TScreenOrientation]]),methodkind:0}),this.$rtti.$MethodVar("TBeforeUnloadEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AMessage",rtl.string,1]]),methodkind:0}),this.$rtti.$MethodVar("TAlignInsertBeforeEvent",{procsig:rtl.newTIProcSig([["Sender",pas["WEBLib.Controls"].$rtti.TWinControl],["C1",pas["WEBLib.Controls"].$rtti.TControl],["C2",pas["WEBLib.Controls"].$rtti.TControl]],rtl.boolean),methodkind:1}),this.$rtti.$MethodVar("TAlignPositionEvent",{procsig:rtl.newTIProcSig([["Sender",pas["WEBLib.Controls"].$rtti.TWinControl],["Control",pas["WEBLib.Controls"].$rtti.TControl],["NewLeft",rtl.longint,1],["NewTop",rtl.longint,1],["NewWidth",rtl.longint,1],["NewHeight",rtl.longint,1],["AlignRect",pas.Types.$rtti.TRect,1],["AlignInfo",this.$rtti.TAlignInfo]]),methodkind:0}),this.$rtti.$MethodVar("TCanResizeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["NewWidth",rtl.longint,1],["NewHeight",rtl.longint,1],["Resize",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TConstrainedResizeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["MinWidth",rtl.longint,1],["MinHeight",rtl.longint,1],["MaxWidth",rtl.longint,1],["MaxHeight",rtl.longint,1]]),methodkind:0}),this.$rtti.$MethodVar("TContextPopupEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TDockDropEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TDragDockObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TDockOverEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TDragDockObject],["X",rtl.longint],["Y",rtl.longint],["State",pas["WEBLib.Controls"].$rtti.TDragState],["Accept",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TGestureEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["EventInfo",this.$rtti.TGestureEventInfo,2],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TGetSiteInfoEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DockClient",pas["WEBLib.Controls"].$rtti.TControl],["InfluenceRect",pas.Types.$rtti.TRect,1],["MousePos",pas.Types.$rtti.TPoint],["CanDock",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseActivateEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Button",pas["WEBLib.Controls"].$rtti.TMouseButton],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint],["HitTest",rtl.longint],["MouseActivate",this.$rtti.TMouseActivate,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelUpDownEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TStartDockEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DragObject",this.$rtti.TDragDockObject,1]]),methodkind:0}),this.$rtti.$MethodVar("TUnDockEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Client",pas["WEBLib.Controls"].$rtti.TControl],["NewTarget",pas["WEBLib.Controls"].$rtti.TWinControl],["Allow",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("THashChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["oldURL",rtl.string],["newURL",rtl.string]]),methodkind:0}),this.TPopupMode={0:"pmNone",pmNone:0,1:"pmAuto",pmAuto:1,2:"pmExplicit",pmExplicit:2},this.TPopupClose={0:"pcOnDeactivate",pcOnDeactivate:0,1:"pcNever",pcNever:1},this.TPosition={0:"poDesigned",poDesigned:0,1:"poDefault",poDefault:1,2:"poDefaultPosOnly",poDefaultPosOnly:2,3:"poDefaultSizeOnly",poDefaultSizeOnly:3,4:"poScreenCenter",poScreenCenter:4,5:"poDesktopCenter",poDesktopCenter:5,6:"poMainFormCenter",poMainFormCenter:6,7:"poOwnerFormCenter",poOwnerFormCenter:7},this.TApplicationErrorType={0:"aeSilent",aeSilent:0,1:"aeDialog",aeDialog:1,2:"aeAlert",aeAlert:2,3:"aeFooter",aeFooter:3},this.TFormBorderStyle={0:"fbNone",fbNone:0,1:"fbSingle",fbSingle:1,2:"fbSizeable",fbSizeable:2,3:"fbDialog",fbDialog:3,4:"fbDialogSizeable",fbDialogSizeable:4},rtl.createClass(this,"TCustomSizeConstraints",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FControl=null,this.FMaxHeight=0,this.FMaxWidth=0,this.FMinHeight=0,this.FMinWidth=0,this.FOnChange=null},this.$final=function(){this.FControl=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetConstraints=function(t,e){var i=t;0===i?e!==this.FMaxHeight&&(this.FMaxHeight=e,e>0&&e<this.FMinHeight&&(this.FMinHeight=e),this.Change()):1===i?e!==this.FMaxWidth&&(this.FMaxWidth=e,e>0&&e<this.FMinWidth&&(this.FMinWidth=e),this.Change()):2===i?e!==this.FMinHeight&&(this.FMinHeight=e,this.FMaxHeight>0&&e>this.FMaxHeight&&(this.FMaxHeight=e),this.Change()):3===i&&e!==this.FMinWidth&&(this.FMinWidth=e,this.FMaxWidth>0&&e>this.FMaxWidth&&(this.FMaxWidth=e),this.Change())},this.Change=function(){null!=this.FOnChange&&this.FOnChange(this)},this.AssignTo=function(e){t.TCustomSizeConstraints.isPrototypeOf(e)?(e.FMinHeight=this.FMinHeight,e.FMaxHeight=this.FMaxHeight,e.FMinWidth=this.FMinWidth,e.FMaxWidth=this.FMaxWidth,e.Change()):pas.Classes.TPersistent.AssignTo.call(this,e)},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.FControl=t,this},this.$rtti.addMethod("Create$1",2,[["AControl",pas["WEBLib.Controls"].$rtti.TControl]])})),rtl.createClass(this,"TSizeConstraints",this.TCustomSizeConstraints,(function(){var e=this.$rtti;e.addProperty("MaxHeight",18,t.$rtti.TConstraintSize,"FMaxHeight","SetConstraints",{index:0,Default:0}),e.addProperty("MaxWidth",18,t.$rtti.TConstraintSize,"FMaxWidth","SetConstraints",{index:1,Default:0}),e.addProperty("MinHeight",18,t.$rtti.TConstraintSize,"FMinHeight","SetConstraints",{index:2,Default:0}),e.addProperty("MinWidth",18,t.$rtti.TConstraintSize,"FMinWidth","SetConstraints",{index:3,Default:0})})),rtl.createClass(this,"TDragDockObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FBrush=null},this.$final=function(){this.FBrush=void 0,pas.System.TObject.$final.call(this)},this.Destroy=function(){rtl.free(this,"FBrush"),pas.System.TObject.Destroy.call(this)}})),rtl.createClass(this,"TCustomForm",pas["WEBLib.Controls"].TWinControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TWinControl.$init.call(this),this.FDesignContainer=null,this.FLayer$1=null,this.FPopup=!1,this.FPopupElement=null,this.FFormFileName="",this.FFormContainer="",this.FFormElement="",this.FFormStyle=0,this.FOnCreate=null,this.FOnShow=null,this.FModalResult=0,this.FOnPaint=null,this.FOnDeactivate=null,this.FOnCloseQuery=null,this.FOnClose=null,this.FModalProc=null,this.FCreatedProc=null,this.FCaption="",this.FIsResizing$1=!1,this.FOnScroll=null,this.FOnUnload=null,this.FOnBeforeUnload=null,this.FPopupMode=0,this.FPopupClose=0,this.FPosition=0,this.FMdx=0,this.FMdy=0,this.FDlgX=0,this.FDlgY=0,this.FCaptured$1=!1,this.FDown=!1,this.FHasCaption=!1,this.FMoveSpan=null,this.FCaptionElement=null,this.FCaptionCloseElement=null,this.FBorder=0,this.FShadow=!1,this.FTimerID=0,this.FOrigWidth=0,this.FOrigHeight=0,this.FOldWidth=0,this.FOldHeight=0,this.FOnDestroy=null,this.FPopupOpacity=0,this.FCreating=!1,this.FShown=!1,this.FLoadedPtr=null,this.FDOMContentLoadedPtr=null,this.FUnloadPtr=null,this.FBeforeUnloadPtr=null,this.FResizePtr=null,this.FScrollPtr=null,this.FDocMouseUpPtr=null,this.FDocMouseMovePtr=null,this.FTitleDownPtr=null,this.FDoClickPtr=null,this.FKeyDownPtr$1=null,this.FOrientationChangePtr=null,this.FHashChangePtr=null,this.FCSSLibrary=0,this.FNoHTML=!1,this.FPrevActiveForm=null,this.FElementCaptionClassName="",this.FElementPopupClassName="",this.FMenu=null,this.FResizeObserver=null,this.FOnOrientationChange=null,this.FOnDOMContentLoaded=null,this.FShowClose=!1,this.FOnHashChange=null},this.$final=function(){this.FDesignContainer=void 0,this.FLayer$1=void 0,this.FPopupElement=void 0,this.FOnCreate=void 0,this.FOnShow=void 0,this.FOnPaint=void 0,this.FOnDeactivate=void 0,this.FOnCloseQuery=void 0,this.FOnClose=void 0,this.FModalProc=void 0,this.FCreatedProc=void 0,this.FOnScroll=void 0,this.FOnUnload=void 0,this.FOnBeforeUnload=void 0,this.FMoveSpan=void 0,this.FCaptionElement=void 0,this.FCaptionCloseElement=void 0,this.FOnDestroy=void 0,this.FPrevActiveForm=void 0,this.FMenu=void 0,this.FResizeObserver=void 0,this.FOnOrientationChange=void 0,this.FOnDOMContentLoaded=void 0,this.FOnHashChange=void 0,pas["WEBLib.Controls"].TWinControl.$final.call(this)},this.SetModalResult=function(t){this.FModalResult=t,0!==this.FModalResult&&this.Close()},this.GetFormStyle=function(){return this.FFormStyle},this.SetFormStyle=function(t){this.FFormStyle=t},this.SetCaption=function(t){this.FCaption!==t&&(this.FCaption=t,this.UpdateElement())},this.SetShadow=function(t){this.FShadow!==t&&(this.FShadow=t,this.UpdateElement())},this.SetBorder=function(t){this.FBorder!==t&&(this.FBorder=t,null!=this.GetContainer()&&this.AlignControl(this))},this.SetFormContainer=function(t){var e,i=null,s=0;if(e=this.GetContainer(),4 in this.FComponentState?this.FFormContainer=t:"BODY"===pas.SysUtils.UpperCase(t)?this.FFormContainer="":this.FFormContainer=t,(!(0 in this.FComponentState)||4 in this.FComponentState)&&(null!=this.FLayer$1?i=this.FLayer$1:(""===t||null==(i=document.getElementById(t)))&&(i=document.body),null!=i&&(this.FContainer=i,null!=e)))for(var n=0,o=this.GetControlsCount()-1;n<=o;n++)s=n,this.GetControls(s).FParentElement===e&&(this.GetControls(s).FParentElement=i),null!=this.GetControls(s).GetElementHandle()&&this.GetControls(s).GetElementHandle().parentElement===e&&i.appendChild(this.GetControls(s).GetElementHandle())},this.SetWidth=function(t){var e=null;0 in this.FComponentState&&""!==this.FFormContainer||!this.FPopup&&null==this.GetElementHandle()?this.SetWidthInt(t):(pas["WEBLib.Controls"].TControl.SetWidth.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("width",pas.SysUtils.IntToStr(t)+"px"))},this.SetHeight=function(t){var e=null;if(0 in this.FComponentState&&""!==this.FFormContainer||!this.FPopup&&null==this.GetElementHandle())return this.SetHeightInt(t),void(null!=this.FormContainerElement()&&("BODY"===pas.SysUtils.UpperCase(this.FormContainerElement().tagName)||this.GetIsLinked()||this.FormContainerElement().style.setProperty("height",pas.SysUtils.IntToStr(t)+"px")));pas["WEBLib.Controls"].TControl.SetHeight.apply(this,arguments),""!==this.FFormContainer&&null!=this.FormContainerElement()&&(this.FormContainerElement().style.setProperty("height",pas.SysUtils.IntToStr(t)+"px"),this.Realign()),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("height",pas.SysUtils.IntToStr(t)+"px")},this.SetPosition=function(t){this.FPosition=t},this.GetClientHeight=function(){return this.FBorder in rtl.createSet(3,4)?this.GetHeight()-t.Application.FFormCaptionHeight:pas["WEBLib.Controls"].TControl.GetClientHeight.call(this)},this.HandleHashChange=function(e){var i,s,n="",o=null,a=null;return i=e.oldURL,s=e.newURL,null!=this.FOnHashChange&&this.FOnHashChange(this,i,s),t.Application.FRouting&&(n=pas.System.Copy(s,pas.System.Pos("#",s)+1,s.length),null!=(o=pas.Classes.GetClass("T"+this.FName))&&t.LastHash!==n&&(0!==pas.System.Pos("#"+this.FName+"_",i+"_")&&0===pas.System.Pos("#"+this.FName+"_",s+"_")&&this.Close(),this.FPopup||null!=(o=pas.Classes.GetClass("T"+n))&&t.Application.AutoCreateForm(o,{get:function(){return a},set:function(t){a=t}}))),!0,!0},this.HandleLoaded=function(t){return this.Resize$1(),this.InitAnchoring(),!0,!0},this.HandleDOMContentLoaded=function(t){return null!=this.FOnDOMContentLoaded&&this.FOnDOMContentLoaded(this),!0,!0},this.HandleScroll=function(t){return null!=this.FOnScroll&&this.FOnScroll(this),!0,!0},this.HandleUnload=function(t){return null!=this.FOnUnload&&this.FOnUnload(this),!0,!0},this.HandleBeforeUnload=function(t){var e="";return e="",null!=this.FOnBeforeUnload&&this.FOnBeforeUnload(this,{get:function(){return e},set:function(t){e=t}}),""!==e?(t.returnValue=e,e):(!0,!0)},this.HandleObserver=function(){return this.Resize$1(),!0,!0},this.HandleResize=function(t){return this.FVisible&&!(3 in this.FComponentState)&&(null==this.GetContainer()&&this.CreateControl(),this.Resize$1(),this.GetElementHandle()===document.body&&window.setTimeout(rtl.createSafeCallback(this,"Resize$1"),25)),!0,!0},this.HandleDocMouseMove=function(t){var e=0,i=0,s=null,n=0,o=0;return this.FDown&&null!=this.GetContainer()&&(e=t.clientX-this.FMdx,i=t.clientY-this.FMdy,(s=this.FHasCaption&&""!==this.FFormFileName?this.GetContainer().parentNode:this.GetContainer()).style.setProperty("transform",""),s.style.setProperty("position","absolute"),n=Math.round(this.FDlgX+e),o=Math.round(this.FDlgY+i),s.style.setProperty("left",pas.SysUtils.IntToStr(n)+"px"),s.style.setProperty("top",pas.SysUtils.IntToStr(o)+"px"),this.FLeft=n,this.FTop=o),!0,!0},this.HandleDocMouseUp=function(t){return this.FDown&&(this.FCaptured$1=!1,this.FDown=!1,document.body.removeEventListener("mousemove",this.FDocMouseMovePtr),document.body.removeEventListener("mouseup",this.FDocMouseUpPtr),null!=this.FMoveSpan&&document.body.removeChild(this.FMoveSpan),this.FEventStopPropagation=rtl.unionSet(this.FEventStopPropagation,rtl.createSet(3,2)),this.FMoveSpan=null),!0,!0},this.HandleTitleDown=function(t){var e=null;return t.stopPropagation(),t.preventDefault(),this.FPopupClose=1,this.FMdx=Math.round(t.clientX),this.FMdy=Math.round(t.clientY),e=this.FHasCaption&&""!==this.FFormFileName?this.GetContainer().parentNode.getBoundingClientRect():this.GetContainer().getBoundingClientRect(),this.FDlgX=Math.round(pas.System.Int(e.left)),this.FDlgY=Math.round(pas.System.Int(e.top)),this.FDown=!0,this.FCaptured$1||(this.FCaptured$1=!0,this.FMoveSpan=document.createElement("SPAN"),this.FMoveSpan.style.setProperty("top","0"),this.FMoveSpan.style.setProperty("left","0"),this.FMoveSpan.style.setProperty("right","0"),this.FMoveSpan.style.setProperty("bottom","0"),this.FMoveSpan.style.setProperty("position","absolute"),document.body.appendChild(this.FMoveSpan),this.FEventStopPropagation=rtl.diffSet(this.FEventStopPropagation,rtl.createSet(3,2)),document.body.addEventListener("mousemove",this.FDocMouseMovePtr),document.body.addEventListener("mouseup",this.FDocMouseUpPtr)),!0,!0},this.HandleCloseClick=function(t){var e=!1;return e=!0,null!=this.FOnCloseQuery&&this.FOnCloseQuery(this,{get:function(){return e},set:function(t){e=t}}),e&&this.Close(),!0,!0},this.SetLeft=function(t){var e=null;pas["WEBLib.Controls"].TControl.SetLeft.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("left",pas.SysUtils.IntToStr(t)+"px")},this.SetTop=function(t){var e=null;pas["WEBLib.Controls"].TControl.SetTop.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("top",pas.SysUtils.IntToStr(t)+"px")},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FLoadedPtr=null,this.FDOMContentLoadedPtr=null,this.FUnloadPtr=null,this.FBeforeUnloadPtr=null,this.FResizePtr=null,this.FScrollPtr=null,this.FDocMouseUpPtr=null,this.FDocMouseMovePtr=null,this.FTitleDownPtr=null,this.FDoClickPtr=null,this.FKeyDownPtr$1=null,this.FOrientationChangePtr=null,this.FHashChangePtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),null===this.FLoadedPtr&&(this.FLoadedPtr=rtl.createCallback(this,"HandleLoaded"),this.FDOMContentLoadedPtr=rtl.createCallback(this,"HandleDOMContentLoaded"),this.FUnloadPtr=rtl.createCallback(this,"HandleUnload"),this.FBeforeUnloadPtr=rtl.createCallback(this,"HandleBeforeUnload"),this.FResizePtr=rtl.createCallback(this,"HandleResize"),this.FScrollPtr=rtl.createCallback(this,"HandleScroll"),this.FDocMouseUpPtr=rtl.createCallback(this,"HandleDocMouseUp"),this.FDocMouseMovePtr=rtl.createCallback(this,"HandleDocMouseMove"),this.FTitleDownPtr=rtl.createCallback(this,"HandleTitleDown"),this.FDoClickPtr=rtl.createCallback(this,"HandleDoClick$1"),this.FKeyDownPtr$1=rtl.createCallback(this,"HandleKeyDown"),this.FOrientationChangePtr=rtl.createCallback(this,"HandleOrientationChange"),this.FHashChangePtr=rtl.createCallback(this,"HandleHashChange"))},this.VisibleChanged=function(){var t=!1;pas["WEBLib.Controls"].TControl.VisibleChanged.call(this),null!=this.FLayer$1?this.FVisible?this.FLayer$1.style.setProperty("display",""):this.FLayer$1.style.setProperty("display","none"):(t=pas.SysUtils.LowerCase(this.GetID())===pas["WEBLib.WebTools"].cBodyTag,null==this.GetContainer()||""===this.FFormContainer||t||(this.FVisible?this.GetContainer().style.setProperty("display",""):this.GetContainer().style.setProperty("display","none")))},this.Resize$1=function(){var t=0,e=0,i=0,s=0,n=null;if(!(3 in this.FComponentState)&&(this.FIsResizing$1=!0,this.FPopup&&null!=this.FPopupElement?(n=this.FPopupElement.getBoundingClientRect(),i=Math.round(n.right-n.left-2),this.FBorder in rtl.createSet(3,4)?(e=this.GetCaptionHeight(),s=Math.round(n.bottom-n.top-e-2)):s=Math.round(n.bottom-n.top-2)):(i=window.innerWidth,s=window.innerHeight),this.UpdateControlSize(i,s),pas["WEBLib.Controls"].IsAndroid()&&"INPUT"===document.activeElement.tagName||this.AlignControl(this),this.DoResize(),this.FIsResizing$1=!1,!this.IsUpdating())){-1===this.FOrigRect.Left&&-1===this.FOrigRect.Top&&this.InitAnchoring();for(var o=0,a=this.GetControlsCount()-1;o<=a;o++)t=o,this.GetControls(t).UpdateAnchoring()}},this.CreateControl=function(){var t="";if(this.FVisible||this.FPopup){if(pas["WEBLib.Controls"].TControl.CreateControl.call(this),t="","undefined"!=typeof CONTAINERID)try{t=CONTAINERID}catch(t){}""!==t&&this.SetFormContainer(t),this.UpdateSize()}},this.DoClose=function(t){null!=this.FModalProc&&0!==t.get()&&(this.FModalProc(this.FModalResult),this.FModalProc=null)},this.BindEvents=function(){var e="";pas["WEBLib.Controls"].TControl.BindEvents.call(this),"loading"!==document.readyState&&null!=this.FOnDOMContentLoaded&&this.FOnDOMContentLoaded(this),window.addEventListener("resize",this.FResizePtr),window.addEventListener("load",this.FLoadedPtr),window.addEventListener("DOMContentLoaded",this.FDOMContentLoadedPtr),document.addEventListener("scroll",this.FScrollPtr),window.addEventListener("unload",this.FUnloadPtr),window.addEventListener("beforeunload",this.FBeforeUnloadPtr),window.addEventListener("keydown",this.FKeyDownPtr$1),window.addEventListener("orientationchange",this.FOrientationChangePtr),window.addEventListener("hashchange",this.FHashChangePtr),null!=pas.Classes.GetClass(this.$classname)&&!this.FPopup&&t.Application.FRouting&&(e=this.$classname,pas.System.Delete({get:function(){return e},set:function(t){e=t}},1,1),t.LastHash=e,window.location.hash=e)},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.FLayer$1&&0===this.FPopupClose&&this.FLayer$1.removeEventListener("click",this.FDoClickPtr),null!=this.FResizeObserver&&this.FResizeObserver.disconnect(),window.removeEventListener("resize",this.FResizePtr),window.removeEventListener("load",this.FLoadedPtr),window.removeEventListener("DOMContentLoaded",this.FDOMContentLoadedPtr),document.removeEventListener("scroll",this.FScrollPtr),window.removeEventListener("unload",this.FUnloadPtr),window.removeEventListener("beforeunload",this.FBeforeUnloadPtr),window.removeEventListener("keydown",this.FKeyDownPtr$1),window.removeEventListener("orientationchange",this.FOrientationChangePtr),window.removeEventListener("hashchange",this.FHashChangePtr)},this.DoCreate=function(){this.BeginUpdate(),this.LoadDFMValues(),this.Loaded(),null!=this.FOnCreate&&this.FOnCreate(this),this.FCreating=!1,this.EndUpdate(),this.UpdateChildren(this),this.Realign(),this.DoResize()},this.Realign=function(){var t=null,e=null,i=pas.Types.TRect.$new();""!==this.FFormContainer&&0!==this.FAlign&&null!=(t=document.getElementById(this.FFormContainer))&&(0===(e=t.getBoundingClientRect()).width&&0===e.height&&"absolute"===t.style.getPropertyValue("position")?i.$assign(pas["WEBLib.Controls"].GetHTMLElementAbsoluteRect(t)):i.$assign(pas.Types.Rect(Math.round(e.left),Math.round(e.top),Math.round(e.right),Math.round(e.bottom))),this.SetBoundsInt(i.Left,i.Top,i.Right-i.Left,i.Bottom-i.Top)),pas["WEBLib.Controls"].TControl.Realign.call(this)},this.DoResize=function(){var t,e;t=this.GetWidth(),e=this.GetHeight(),t===this.FOldWidth&&e===this.FOldHeight||(this.FOldWidth=t,this.FOldHeight=e,null!=this.FOnResize&&this.FOnResize(this))},this.DoShow=function(){this.DoAutoFocus(),null==this.FOnShow||this.FShown||(this.FShown=!0,this.FOnShow(this))},this.DoAutoFocus=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,0===this.GetControls(t).FTabOrder&&this.GetControls(t).FTabStop&&this.GetControls(t).SetFocus()},this.Paint=function(){},this.HandleDoClick$1=function(t){return t.stopPropagation(),0===this.FPopupClose&&this.Close(),!0,!0},this.HandleKeyDown=function(t){var e,i=!1;return e=this.GetKeyCode(t.key,!0),pas.System.Assigned(e)?(27===e&&!(4 in this.FComponentState)&&this.FPopup&&this.Close(),i=!0):i},this.HandleOrientationChange=function(t){var e=0;(this.Resize$1(),this.Realign(),!0,null!=this.FOnOrientationChange)&&(e=window.matchMedia("(orientation: portrait)").matches?1:0,this.FOnOrientationChange(this,e));return null!=this.FOnResize&&this.FOnResize(this),!0},this.HandleDoResize=function(){var t,e,i=null;i=this.GetContainer().getBoundingClientRect(),t=Math.round(i.right-i.left),e=Math.round(i.bottom-i.top),t===this.FOrigWidth&&e===this.FOrigHeight||(this.SetWidth(t),this.SetHeight(e),i=this.GetContainer().getBoundingClientRect(),this.FOrigWidth=Math.round(i.right-i.left),this.FOrigHeight=Math.round(i.bottom-i.top),this.AlignControl(this))},this.KeyPreview=function(e,i){var s=0,n=0,o=0,a=0,r=0;n=-1,o=65535;for(var l=0,h=this.GetControlsCount()-1;l<=h;l++)s=l,!this.GetControls(s).FVisible&&this.GetControls(s).FEnabled||(this.GetControls(s).FTabOrder<o&&(o=this.GetControls(s).FTabOrder,r=s),this.GetControls(s).FTabOrder>n&&(n=this.GetControls(s).FTabOrder,a=s),13!==e.get()&&27!==e.get()||this.GetControls(s).HandleKeyPreview(e.get()));t.Application.FMainForm!==this&&(9===e.get()&&!(0 in i)&&a<this.GetControlsCount()&&r>=0&&r!==a&&this.GetControls(a).Focused()&&(this.GetControls(r).SetFocus(),e.set(0)),9===e.get()&&0 in i&&r>=0&&a<this.GetControlsCount()&&r!==a&&this.GetControls(r).Focused()&&(this.GetControls(a).SetFocus(),e.set(0)))},this.GetWidth=function(){var t=0,e=null,i=null;return""!==this.FFormElement&&null!=(i=document.getElementById(this.FFormElement))?(e=i.getBoundingClientRect(),t=Math.round(e.right-e.left)):(this.GetElementHandle()===document.body?(t=window.innerWidth,e=document.documentElement.getBoundingClientRect(),(t=Math.round(e.width))>window.innerWidth&&(t=window.innerWidth)):this.FPopup?t=pas["WEBLib.Controls"].TControl.GetWidth.call(this):0===(t=Math.round(this.GetElementHandle().offsetWidth))&&(t=""!==this.FFormContainer?pas["WEBLib.Controls"].TControl.GetWidth.call(this):window.innerWidth),t)},this.GetHeight=function(){var t=0,e=0,i="",s=null,n=null;return""!==this.FFormElement&&null!=(s=document.getElementById(this.FFormElement))?(n=s.getBoundingClientRect(),t=Math.round(n.bottom-n.top)):(this.GetElementHandle()===document.body?(i=window.getComputedStyle(this.GetElementHandle()).getPropertyValue("margin-top"),i=pas.System.Copy(i,1,i.length-2),e=Math.round(pas.SysUtils.StrToFloat$1(i,pas.SysUtils.TFormatSettings.Invariant())-2),n=document.documentElement.getBoundingClientRect(),(t=Math.round(n.height))>window.innerHeight&&(t=window.innerHeight-Math.max(0,e))):this.FPopup?t=pas["WEBLib.Controls"].TControl.GetHeight.call(this):0===(t=Math.round(this.GetElementHandle().offsetHeight))&&(t=""!==this.FFormContainer?pas["WEBLib.Controls"].TControl.GetHeight.call(this):window.innerHeight),t)},this.GetLeft=function(){var t=0,e=null,i=null;return this.FPopup?t=pas["WEBLib.Controls"].TControl.GetLeft.call(this):""!==this.FFormElement?null!=(e=document.getElementById(this.FFormElement))&&(i=e.getBoundingClientRect(),t=Math.round(i.left)):(e=null,""!==this.FFormContainer&&(e=document.getElementById(this.FFormContainer)),null==e&&(e=this.GetElementHandle()),t=Math.round(e.offsetLeft)),t},this.GetTop=function(){var t=0,e=null,i=null;return this.FPopup?t=pas["WEBLib.Controls"].TControl.GetTop.call(this):""!==this.FFormElement?null!=(e=document.getElementById(this.FFormElement))&&(i=e.getBoundingClientRect(),t=Math.round(i.top)):(e=null,""!==this.FFormContainer&&(e=document.getElementById(this.FFormContainer)),null==e&&(e=this.GetElementHandle()),t=Math.round(e.offsetTop)),t},this.GetClientRect=function(){var t=pas.Types.TRect.$new();return t.$assign(pas["WEBLib.Controls"].TControl.GetClientRect.call(this)),t},this.CreateElement=function(){var e=null,i=null,s=null;return this.FPopup||null==this.FormContainerElement()?(e=document.createElement("DIV"),this.FLayer$1=this.CreateLayer(),document.body.appendChild(this.FLayer$1),i=this.FLayer$1,0===this.FPopupClose&&(this.GetMethodPointers(),i.addEventListener("click",this.FDoClickPtr)),i.style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),2===this.FBorder&&(e.style.setProperty("resize","both"),e.style.setProperty("overflow","auto")),this.FHasCaption=!1,this.FBorder in rtl.createSet(2,3,4)&&(s=this.CreateCaption(),e.appendChild(s)),e):e=this.FormContainerElement()},this.UpdateElement=function(){var t="",e=null;this.FCreating||(pas["WEBLib.Controls"].TControl.UpdateElement.call(this),this.IsUpdating()||(null==this.GetElementHandle()&&null==this.GetContainer()||""!==this.FCaption&&(this.FPopup?null!=this.FCaptionElement&&(null!=(e=this.FCaptionElement.childNodes.item(0))&&(e.nodeValue=this.FCaption),this.FShowClose&&null==this.FCaptionCloseElement&&(this.FCaptionCloseElement=document.createElement("SPAN"),this.FCaptionCloseElement.style.setProperty("float","right"),this.FCaptionCloseElement.style.setProperty("cursor","default"),this.FCaptionCloseElement.style.setProperty("margin-right","8px"),this.FCaptionCloseElement.innerHTML="&#x2716;",this.FCaptionElement.appendChild(this.FCaptionCloseElement),this.FCaptionCloseElement.addEventListener("click",rtl.createSafeCallback(this,"HandleCloseClick"))),pas["WEBLib.Controls"].SetHTMLElementFont(this.FCaptionElement,this.FFont,!(""===this.FElementCaptionClassName&&0===this.FElementFont))):window.document.title=this.FCaption),null!=this.GetContainer()&&(t=pas["WEBLib.Graphics"].ColorToHTML(this.FColor),null!=this.GetContainer()&&(-1===this.FColor||16777215===this.FColor||this.FPopup||""!==this.FElementClassName||this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,t),this.FPopup||0===this.FCSSLibrary||document.body.style.removeProperty(pas["WEBLib.Controls"].CSSBackground),(""!==this.FElementClassName||-1===this.FColor||16777215===this.FColor&&!this.FPopup)&&this.GetContainer().style.removeProperty(pas["WEBLib.Controls"].CSSBackground),""!==this.FElementClassName||this.FPopup||document.documentElement.style.setProperty("height","100%"),pas["WEBLib.Controls"].SetHTMLElementFont(this.GetContainer(),this.FFont,!(""===this.FElementClassName&&0===this.FElementFont))),this.FPopup?(null==this.FPopupElement&&(this.FPopupElement=this.GetContainer()),""!==this.FElementPopupClassName?(this.GetContainer().style.removeProperty("border"),this.FPopupElement.setAttribute("class",this.FElementPopupClassName)):(this.FShadow?this.FPopupElement.style.setProperty("box-shadow","3px 3px 3px silver"):this.FPopupElement.style.removeProperty("box-shadow"),this.FPopupElement.style.setProperty("border","1px solid gray")),1===this.FCSSLibrary&&(this.FPopupElement.setAttribute("class","card"),this.GetContainer().style.removeProperty("box-shadow"))):this.GetContainer().style.removeProperty("box-shadow"))))},this.ContainerElement=function(){return this.FormContainerElement()},this.FormContainerElement=function(){var t=null;return 4 in this.FComponentState&&null!=this.FDesignContainer&&(t=this.FDesignContainer),""!==this.FFormContainer?null==(t=document.getElementById(this.FFormContainer))&&(t=document.body):t=document.body,t},this.GetElementBindHandle=function(){return 4 in this.FComponentState||""!==this.FFormContainer?window:this.FPopup?pas["WEBLib.Controls"].TControl.GetElementBindHandle.call(this):window},this.GetElementHandle=function(){return this.FPopup?pas["WEBLib.Controls"].TControl.GetElementHandle.call(this):this.FormContainerElement()},this.SetElementClassName=function(t){pas["WEBLib.Controls"].TControl.SetElementClassName.apply(this,arguments),this.FPopup&&null!=this.FPopupElement&&this.FPopupElement.setAttribute("class",t)},this.CloseQuery=function(){var t=!1;return t=!0,null!=this.FOnCloseQuery&&this.FOnCloseQuery(this,{get:function(){return t},set:function(e){t=e}}),t},this.LoadDFMValues=function(){},this.Init=function(){},this.IsFocused=function(){return!1,!1},this.CreateLayer=function(){var e=null;return(e=document.createElement("SPAN")).style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("right","0"),e.style.setProperty("bottom","0"),e.style.setProperty("webkit-user-select","none"),e.style.setProperty("moz-user-select","none"),e.style.setProperty("khtml-user-select","none"),e.style.setProperty("ms-user-select","none"),e.style.setProperty("user-select","none"),e.style.setProperty("position","absolute"),e.style.setProperty("z-index",t.Application.MaxZIndexStr()),e},this.CreateCaption=function(){var e;return e=pas.SysUtils.IntToStr(t.Application.FFormCaptionHeight),this.FCaptionElement=document.createElement("DIV"),this.FCaptionElement.innerHTML=this.FCaption,this.FCaptionElement.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(t.Application.FThemeColor)),this.FCaptionElement.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(t.Application.FThemeTextColor)),this.FCaptionElement.style.setProperty("cursor","move"),this.FCaptionElement.style.setProperty("height",e+"px"),this.FCaptionElement.style.setProperty("line-height",e+"px"),this.FCaptionElement.style.setProperty("border-bottom","1px solid black"),this.FCaptionElement.style.setProperty("padding-left","4px"),this.FCaptionElement.style.setProperty("-moz-user-select","none"),this.FCaptionElement.style.setProperty("-webkit-user-select","none"),this.FCaptionElement.style.setProperty("-ms-user-select","none"),this.FCaptionElement.style.setProperty("user-select","none"),this.FCaptionElement.style.setProperty("-o-user-select","none"),""!==this.FElementCaptionClassName&&this.FCaptionElement.setAttribute("class",this.FElementCaptionClassName),pas["WEBLib.Controls"].SetHTMLElementFont(this.FCaptionElement,this.FFont,!(""===this.FElementCaptionClassName&&0===this.FElementFont)),null==this.FTitleDownPtr&&this.GetMethodPointers(),this.FCaptionElement.innerHTML=this.FCaption,this.FCaptionElement.addEventListener("mousedown",this.FTitleDownPtr),this.FHasCaption=!0,this.FCaptionElement},this.GetCaptionHeight=function(){var t=0,e=null;return t=0,null!=this.FCaptionElement&&this.FBorder in rtl.createSet(3,4)&&(e=this.FCaptionElement.getBoundingClientRect(),t=Math.round(e.bottom-e.top)),t},this.SetColorScheme=function(e){var i="";if(t.Application.FThemed){var s=e;2===s?(this.SetColor(2105636),i="label,option,td,table,ul,li {background-color: #202124; color: #BEC1C6;}\r\nbody,input,textarea,select,fieldset {background-color: #202124; color: #BEC1C6; border: 1px solid gray;}\r\ninput:focus, textarea:focus, select:focus, span:focus { border: 1px solid silver; outline: none !important;}",this.AddCSS("appscheme",i)):1===s&&(this.SetColor(16777215),this.RemoveCSS("appscheme"))}},this.SetCSSLibrary=function(t){this.FCSSLibrary=t,1===t&&4 in this.FComponentState&&!(0 in this.FComponentState)&&this.SetElementFont(1)},this.SetFormPos=function(){null!=this.GetContainer()&&(4===this.FPosition&&(this.FLeft=Math.round((t.WinWidth()-this.GetWidth())/2)+window.scrollX,this.FTop=Math.round((t.WinHeight()-this.GetHeight())/2)+window.scrollY),this.GetContainer().style.setProperty("position","absolute"),this.GetContainer().style.setProperty("width",pas.SysUtils.IntToStr(this.GetWidth())+"px"),this.GetContainer().style.setProperty("height",pas.SysUtils.IntToStr(this.GetHeight())+"px"),this.GetContainer().style.setProperty("left",pas.SysUtils.IntToStr(this.GetLeft())+"px"),this.GetContainer().style.setProperty("top",pas.SysUtils.IntToStr(this.GetTop())+"px"))},this.GetHTMLFileName=function(){return this.$module.$name+t.Application.GetFormExtension()},this.LoadedDone=function(){t.Application.TriggerNotification()},this.Loaded=function(){var t=null;pas["WEBLib.Controls"].TControl.Loaded.call(this),""!==this.FFormContainer&&""!==this.FElementClassName&&null!=(t=this.FormContainerElement())&&t.setAttribute("class",this.FElementClassName),this.LoadedDone()},this.ColorChanging=function(){pas["WEBLib.Controls"].TControl.ColorChanging.call(this),null!=this.GetContainer()&&this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(this.FColor))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TControl.CreateInitialize.call(this),this.FAllowTouch=!0,this.FModalResult=0,this.FFormStyle=0,this.FBorder=2,this.FShadow=!0,this.FShowClose=!0,this.FTimerID=-1,this.FCaptionElement=null,this.FColor=16777215,window.addEventListener("load",this.FLoadedPtr)},this.Create$2=function(t){return this.FNoHTML=!1,this.FCreating=!0,this.FFormContainer=t,""===t?pas["WEBLib.Controls"].TControl.Create$2.call(this,pas["WEBLib.WebTools"].cBodyTag):pas["WEBLib.Controls"].TControl.Create$2.call(this,t),this.FFormElement="",this.FModalResult=0,this.FFormStyle=0,this.DoCreate(),this},this.Create$5=function(t,e){return this.FCreating=!0,this.FFormContainer=t,pas["WEBLib.Controls"].TControl.Create$2.call(this,t),e.set(this),this.FFormElement="",this.FModalResult=0,this.FFormStyle=0,this.DoCreate(),this},this.Create$1=function(t){return this.FNoHTML=!1,this.FCreating=!0,this.FResizeObserver=null,pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),this.FBorder=1,this.FFormFileName="",this.FPopupMode=0,this.FPopupClose=0,this.FPopup=!0,this.FPosition=4,this.FPopupOpacity=1,this},this.CreateNew=function(t,e){return this.Create$1(t),this},this.Destroy=function(){this.FVisible&&this.Close(),null!=this.FOnDestroy&&this.FOnDestroy(this),pas["WEBLib.Controls"].TControl.Destroy.call(this),null!=this.FLayer$1&&(this.FormContainerElement()===this.FLayer$1.parentNode&&this.FormContainerElement().removeChild(this.FLayer$1),this.FLayer$1=null)},this.Close=function(){var i=0,s=null;this.CloseQuery()&&(this.UnbindEvents(),i=1,-1!==this.FTimerID&&(window.clearInterval(this.FTimerID),this.FTimerID=-1),null!=this.FOnClose&&this.FOnClose(this,{get:function(){return i},set:function(t){i=t}}),0!==i&&(null!=this.FLayer$1&&(this.GetContainer().parentNode===this.FLayer$1?this.FLayer$1.removeChild(this.GetContainer()):this.GetContainer().parentNode.parentNode===this.FLayer$1&&this.FLayer$1.removeChild(this.GetContainer().parentNode),this.FContainer=null,this.FormContainerElement()===this.FLayer$1.parentNode&&(this.FormContainerElement().removeChild(this.FLayer$1),t.Application.ChangeMaxZIndex(-1)),this.FLayer$1=null),""===this.FFormFileName?""!==this.FFormElement&&null!=this.GetContainer()?(this.GetContainer().innerHTML="",this.FContainer=null):null!=this.GetContainer()&&(this.FormContainerElement()===this.GetContainer().parentNode&&this.FormContainerElement().removeChild(this.GetContainer()),this.FContainer=null):""!==this.FFormElement&&(this.GetContainer().innerHTML="",this.FContainer=null),this.FFormElement!==this.FFormContainer&&""!==this.FFormElement&&null!=(s=document.getElementById(this.FFormElement))&&(s.innerHTML=""),this.DoClose({get:function(){return i},set:function(t){i=t}}),2!==i||3 in this.FComponentState||(this.SetVisible(!1),e.ReleaseForm(this),t.Application.FMainForm===this&&(t.Application.FMainForm=null)),t.Application.FActiveForm=this.FPrevActiveForm,this.SetVisible(!1)))},this.IsMiletus=function(){var t=!1,e=null;e=this.$class.ClassType(),t=!1;do{if(null!=(e=e.$ancestor)&&"TMiletusForm"===e.$classname){t=!0;break}}while(null!=e&&"TForm"!==e.$classname);return t},this.SetBounds=function(t,e,i,s){4 in this.FComponentState?(this.Resize$1(),this.SetBoundsInt(t,e,i,s)):pas["WEBLib.Controls"].TControl.SetBounds.call(this,t,e,i,s)},this.Show$1=function(){var e=null;this.FCreating&&this.FPopup&&(t.Application.ChangeMaxZIndex(1),this.FCreating=!1,this.UpdateElement()),""===this.FFormFileName&&(null==this.GetContainer()?this.FPopup?(this.FContainer=this.CreateElement(),this.FPopupElement=this.GetContainer(),this.SetFormPos(),this.UpdateElement(),this.FLayer$1.appendChild(this.GetContainer())):(this.FContainer=this.CreateLayer(),this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(this.FColor)),document.body.appendChild(this.GetContainer())):this.FPopup?(this.SetFormPos(),this.FLayer$1.appendChild(this.GetContainer())):null!=this.FLayer$1?this.FLayer$1.appendChild(this.GetContainer()):document.body.appendChild(this.GetContainer()),this.FPopup&&(2===this.FBorder?(e=this.GetContainer().getBoundingClientRect(),this.FOrigWidth=Math.round(e.right-e.left),this.FOrigHeight=Math.round(e.bottom-e.top),this.FTimerID=window.setInterval(rtl.createSafeCallback(this,"HandleDoResize"),100)):(this.GetContainer().style.setProperty("resize",""),this.GetContainer().style.setProperty("overflow","")))),this.SetVisible(!0),this.DoShow()},this.ShowModal=function(){return this.ShowModal$1(null)},this.ShowModal$1=function(e){return(this.FNoHTML||""===this.FFormFileName)&&(this.FPrevActiveForm=t.Application.FActiveForm,t.Application.FActiveForm=this,t.Application.CreateNewForm(this,"")),0,this.FNoHTML=!1,this.FModalProc=e,this.SetModalResult(0),this.Show$1(),0},this.AddCSS=function(t,e){var i,s,n;i=t,s=e,(n=document.getElementById(i))?n.innerHTML=s:((n=document.createElement("style")).type="text/css",n.id=i,n.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(n))},this.RemoveCSS=function(t){var e;null!=(e=document.getElementById(t))&&document.head.removeChild(e)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addMethod("Create$2",2,[["id",rtl.string]]),i.addMethod("Create$5",2,[["id",rtl.string],["AReference",null,1]]),i.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),i.addMethod("CreateNew",2,[["AOwner",pas.Classes.$rtti.TComponent],["Dummy",rtl.longint]])})),rtl.createClass(this,"TForm",this.TCustomForm,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("CSSLibrary",2,pas["WEBLib.Controls"].$rtti.TCSSLibrary,"FCSSLibrary","SetCSSLibrary",{Default:pas["WEBLib.Controls"].TCSSLibrary.cssNone}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("FormContainer",2,pas["WEBLib.Controls"].$rtti.TElementID,"FFormContainer","SetFormContainer"),e.addProperty("FormStyle",3,t.$rtti.TFormStyle,"GetFormStyle","SetFormStyle"),e.addProperty("Menu",0,pas["WEBLib.Controls"].$rtti.TCustomControl,"FMenu","FMenu"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("Shadow",2,rtl.boolean,"FShadow","SetShadow",{Default:!0}),e.addProperty("ShowClose",0,rtl.boolean,"FShowClose","FShowClose",{Default:!0}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("OnBeforeUnload",0,t.$rtti.TBeforeUnloadEvent,"FOnBeforeUnload","FOnBeforeUnload"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnClose",0,t.$rtti.TCloseEvent,"FOnClose","FOnClose"),e.addProperty("OnCloseQuery",0,t.$rtti.TCloseQueryEvent,"FOnCloseQuery","FOnCloseQuery"),e.addProperty("OnCreate",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCreate","FOnCreate"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnDeactivate",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDeactivate","FOnDeactivate"),e.addProperty("OnDestroy",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDestroy","FOnDestroy"),e.addProperty("OnDOMContentLoaded",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDOMContentLoaded","FOnDOMContentLoaded"),e.addProperty("OnHashChange",0,t.$rtti.THashChangeEvent,"FOnHashChange","FOnHashChange"),e.addProperty("OnResize",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("OnShow",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnShow","FOnShow"),e.addProperty("OnScroll",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnScroll","FOnScroll"),e.addProperty("OnOrientationChange",0,t.$rtti.TOrientationChangeEvent,"FOnOrientationChange","FOnOrientationChange"),e.addProperty("OnPaint",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPaint","FOnPaint"),e.addProperty("OnTouchStart",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchStart","FOnTouchStart"),e.addProperty("OnTouchMove",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchMove","FOnTouchMove"),e.addProperty("OnTouchEnd",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchEnd","FOnTouchEnd"),e.addProperty("OnUnload",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnUnload","FOnUnload")})),rtl.createClass(this,"TCustomFrame",pas["WEBLib.Controls"].TCustomHTMLDiv,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomHTMLDiv.$init.call(this),this.FAutoScroll=!1,this.FAutoSize=!1,this.FBiDiMode$1=0,this.FConstraints=null,this.FCtl3D$1=!1,this.FDockSite=!1,this.FDragCursor=0,this.FDragKind=0,this.FDragMode$1=0,this.FOnAlignInsertBefore=null,this.FOnAlignPosition=null,this.FOnCanResize=null,this.FOnConstrainedResize=null,this.FOnContextPopup=null,this.FOnDockDrop=null,this.FOnDockOver=null,this.FOnEndDock=null,this.FOnGesture=null,this.FOnGetSiteInfo=null,this.FOnMouseActivate=null,this.FOnMouseWheelDown$1=null,this.FOnMouseWheelUp$1=null,this.FOnStartDock=null,this.FOnUnDock=null,this.FPadding=null,this.FParentBackground=!1,this.FParentCtl3D$1=!1,this.FPopupMenu=null},this.$final=function(){this.FConstraints=void 0,this.FOnAlignInsertBefore=void 0,this.FOnAlignPosition=void 0,this.FOnCanResize=void 0,this.FOnConstrainedResize=void 0,this.FOnContextPopup=void 0,this.FOnDockDrop=void 0,this.FOnDockOver=void 0,this.FOnEndDock=void 0,this.FOnGesture=void 0,this.FOnGetSiteInfo=void 0,this.FOnMouseActivate=void 0,this.FOnMouseWheelDown$1=void 0,this.FOnMouseWheelUp$1=void 0,this.FOnStartDock=void 0,this.FOnUnDock=void 0,this.FPadding=void 0,this.FPopupMenu=void 0,pas["WEBLib.Controls"].TCustomHTMLDiv.$final.call(this)};this.LoadHTMLFile=function(t){var e,i=null;""!==(e=this.$class.GetHTMLFileName())&&((i=new XMLHttpRequest).addEventListener("load",rtl.createSafeCallback(null,(function(e){var i;return null!==e&&(i=e.target.responseText,document.getElementById(t).innerHTML=i,!0,!0)}))),i.open("GET",e),i.send())},this.SetConstraints=function(t){this.FConstraints.Assign(t)},this.SetPopupMenu=function(t){this.FPopupMenu=t},this.SetPadding=function(t){this.FPadding.Assign(t)},this.GetHTMLFileName=function(){return this.$module.$name+t.Application.GetFormExtension()},this.UpdateElement=function(){var t;pas["WEBLib.Controls"].TControl.UpdateElement.call(this),t=this.FColor in rtl.createSet(15790320,-1,16777215,16711422),null!=this.GetElementHandle()&&!this.IsUpdating()&&4 in this.FComponentState&&t&&this.GetElementHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(15790320))},this.Create$2=function(t){return pas["WEBLib.Controls"].TControl.Create$2.call(this,t),this.FPadding=pas["WEBLib.Controls"].TPadding.$create("Create$1"),this.LoadHTMLFile(t),this},this.Create$1=function(e){return pas["WEBLib.Controls"].TControl.Create$1.call(this,e),this.FPadding=pas["WEBLib.Controls"].TPadding.$create("Create$1"),this.FConstraints=t.TSizeConstraints.$create("Create$1",[this]),this},this.Destroy=function(){rtl.free(this,"FConstraints"),rtl.free(this,"FPadding"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$2",2,[["AId",rtl.string]]),e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TFrame",this.TCustomFrame,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("AutoScroll",0,rtl.boolean,"FAutoScroll","FAutoScroll",{Default:!1}),e.addProperty("AutoSize",0,rtl.boolean,"FAutoSize","FAutoSize",{Default:!1}),e.addProperty("BiDiMode",4,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode$1","FBiDiMode$1"),e.addProperty("Constraints",2,t.$rtti.TSizeConstraints,"FConstraints","SetConstraints"),e.addProperty("DockSite",0,rtl.boolean,"FDockSite","FDockSite",{Default:!1}),e.addProperty("DoubleBuffered",0,rtl.boolean,"FDoubleBuffered","FDoubleBuffered",{Default:!1}),e.addProperty("DragCursor",0,pas["WEBLib.Controls"].$rtti.TCursor,"FDragCursor","FDragCursor",{Default:12}),e.addProperty("DragKind",0,pas["WEBLib.Controls"].$rtti.TDragKind,"FDragKind","FDragKind",{Default:pas["WEBLib.Controls"].TDragKind.dkDrag}),e.addProperty("DragMode",0,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode$1","FDragMode$1",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("Ctl3D",4,rtl.boolean,"FCtl3D$1","FCtl3D$1"),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Padding",2,pas["WEBLib.Controls"].$rtti.TPadding,"FPadding","SetPadding"),e.addProperty("ParentBackground",0,rtl.boolean,"FParentBackground","FParentBackground",{Default:!0}),e.addProperty("ParentBiDiMode",0,rtl.boolean,"FParentBiDiMode","FParentBiDiMode",{Default:!0}),e.addProperty("ParentColor",2,rtl.boolean,"FParentColor","SetParentColor",{Default:!1}),e.addProperty("ParentCtl3D",0,rtl.boolean,"FParentCtl3D$1","FParentCtl3D$1",{Default:!0}),e.addProperty("ParentDoubleBuffered",0,rtl.boolean,"FParentDoubleBuffered","FParentDoubleBuffered",{Default:!0}),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("ParentShowHint",0,rtl.boolean,"FParentShowHint","FParentShowHint"),e.addProperty("PopupMenu",2,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","SetPopupMenu"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("OnAlignInsertBefore",0,t.$rtti.TAlignInsertBeforeEvent,"FOnAlignInsertBefore","FOnAlignInsertBefore"),e.addProperty("OnAlignPosition",0,t.$rtti.TAlignPositionEvent,"FOnAlignPosition","FOnAlignPosition"),e.addProperty("OnCanResize",0,t.$rtti.TCanResizeEvent,"FOnCanResize","FOnCanResize"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnConstrainedResize",0,t.$rtti.TConstrainedResizeEvent,"FOnConstrainedResize","FOnConstrainedResize"),e.addProperty("OnContextPopup",0,t.$rtti.TContextPopupEvent,"FOnContextPopup","FOnContextPopup"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnDockDrop",0,t.$rtti.TDockDropEvent,"FOnDockDrop","FOnDockDrop"),e.addProperty("OnDockOver",0,t.$rtti.TDockOverEvent,"FOnDockOver","FOnDockOver"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDock",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FOnEndDock","FOnEndDock"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnGesture",0,t.$rtti.TGestureEvent,"FOnGesture","FOnGesture"),e.addProperty("OnGetSiteInfo",0,t.$rtti.TGetSiteInfoEvent,"FOnGetSiteInfo","FOnGetSiteInfo"),e.addProperty("OnMouseActivate",0,t.$rtti.TMouseActivateEvent,"FOnMouseActivate","FOnMouseActivate"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),e.addProperty("OnMouseWheelDown",0,t.$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelDown$1","FOnMouseWheelDown$1"),e.addProperty("OnMouseWheelUp",0,t.$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelUp$1","FOnMouseWheelUp$1"),e.addProperty("OnResize",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("OnStartDock",0,t.$rtti.TStartDockEvent,"FOnStartDock","FOnStartDock"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag"),e.addProperty("OnUnDock",0,t.$rtti.TUnDockEvent,"FOnUnDock","FOnUnDock")})),rtl.recNewT(this,"TApplicationError",(function(){this.AMessage="",this.AFile="",this.ALineNumber=0,this.AColNumber=0,this.AStack="",this.AError=null,this.$eq=function(t){return this.AMessage===t.AMessage&&this.AFile===t.AFile&&this.ALineNumber===t.ALineNumber&&this.AColNumber===t.AColNumber&&this.AStack===t.AStack&&this.AError===t.AError},this.$assign=function(t){return this.AMessage=t.AMessage,this.AFile=t.AFile,this.ALineNumber=t.ALineNumber,this.AColNumber=t.AColNumber,this.AStack=t.AStack,this.AError=t.AError,this}})),this.THintPosition={0:"hpLeft",hpLeft:0,1:"hpTop",hpTop:1,2:"hpRight",hpRight:2,3:"hpBottom",hpBottom:3},this.TOnlineStatus={0:"osOnline",osOnline:0,1:"osOffline",osOffline:1},rtl.createClass(this,"TApplication",pas["WEBLib.Controls"].TControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TControl.$init.call(this),this.FAppContainer="",this.FMainFormOnTaskBar=!1,this.FCanCreateForm=!1,this.FAppInitializing=!1,this.FLastReq=null,this.FFormCaptionHeight=0,this.FActiveForm=null,this.FMainForm=null,this.FInitFormClassName="",this.FFormStack=null,this.FParameters=null,this.FIsRedirect=!1,this.FLanguage=0,this.FOnImageCacheReady=null,this.FOnError=null,this.FOnHashChange=null,this.FAutoFormRoute=!1,this.FErrorType=0,this.FOnOnlineChange=null,this.FOnActivate=null,this.FThemeTextColor=0,this.FThemeColor=0,this.FThemed=!1,this.FThemeButtonClassName="",this.FOnOAuthToken=null,this.FOnOAuthCallBack=null,this.FOnPopState=null,this.FMaxZIndex=0,this.FHandleOAuth=!1,this.FHintPause=0,this.FHintHidePause=0,this.FHintPosition=0,this.FHintClassName="",this.FOnExit$1=null,this.FOnException=null,this.FOnAutoCreateForm=null,this.FRouting=!1,this.FSBW=0},this.$final=function(){this.FLastReq=void 0,this.FActiveForm=void 0,this.FMainForm=void 0,this.FFormStack=void 0,this.FParameters=void 0,this.FOnImageCacheReady=void 0,this.FOnError=void 0,this.FOnHashChange=void 0,this.FOnOnlineChange=void 0,this.FOnActivate=void 0,this.FOnOAuthToken=void 0,this.FOnOAuthCallBack=void 0,this.FOnPopState=void 0,this.FOnExit$1=void 0,this.FOnException=void 0,this.FOnAutoCreateForm=void 0,pas["WEBLib.Controls"].TControl.$final.call(this)},this.DoHandleError=function(e){var i,s=!1,n=t.TApplicationError.$new(),o=null,a=null,r=null,l="",h="",p="",c=!1,F=!1,u=void 0,C=null;if(c=!0,F=!1,u=null,n.AFile="",n.ALineNumber=0,n.AColNumber=0,n.AError=null,null==e.message&&(c=!1,e instanceof PromiseRejectionEvent&&(c=!0,F=!0,l=e.reason.FMessage,h=e.reason.FStack,u=e.reason)),!F&&"ResizeObserver loop limit exceeded"===e.message)return s;if(!F&&"ResizeObserver loop completed with undelivered notifications."===e.message)return s;if(!c)return n.AMessage="Undefined JavaScript exception",n.AFile="",n.ALineNumber=0,n.AColNumber=0,n.AError=null,null!=this.FOnError&&this.FOnError(this,t.TApplicationError.$clone(n),{get:function(){return s},set:function(t){s=t}}),s;if(F?(n.AMessage=l,n.AStack=h,n.AError=u):(n.AMessage=e.message,n.AFile=e.filename,n.ALineNumber=e.lineno,n.AColNumber=e.colno,n.AError=e.error,n.AStack=""),p="",null!=e.error){e.error.stack&&(n.AStack=e.error.stack),e.error.fMessage&&(n.AMessage=e.error.fMessage),e.error.hasOwnProperty("FJSError")&&(u=e.error.FJSError),p=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=i+"::"+t[i]+"\n");return e}(e.error)}pas.System.Assigned(u)&&(C=n.AError,null!=this.FOnException&&this.FOnException(this,C)),s=!1,i="ERROR<br>"+n.AMessage+" | "+p+n.AStack+"<BR> at "+n.AFile+" ["+pas.SysUtils.IntToStr(n.ALineNumber)+":"+pas.SysUtils.IntToStr(n.AColNumber)+"]";var d=this.FErrorType;return 3===d?null!=(o=document.getElementById("tmserrormessage"))?rtl.asExt(o.firstChild,HTMLElement).innerHTML=i:((o=document.createElement("DIV")).setAttribute("id","tmserrormessage"),o.style.setProperty("position","absolute"),o.style.setProperty("font-family","Courier"),o.style.setProperty("font-size","8pt"),o.style.setProperty("bottom","0"),o.style.setProperty("width","100%"),o.style.setProperty("height","100px"),o.style.setProperty("background","#ff0000"),o.style.setProperty("color","#ffffff"),document.body.style.setProperty("padding","0"),document.body.style.setProperty("margin","0"),(a=document.createElement("SPAN")).style.setProperty("margin-left","4px"),a.style.setProperty("float","left"),a.style.setProperty("overflow","hidden"),a.style.setProperty("display","block"),a.innerHTML=i,o.appendChild(a),(r=document.createElement("SPAN")).style.setProperty("font-family","Courier"),r.style.setProperty("font-size","8pt"),r.style.setProperty("font-weight","bold"),r.style.setProperty("position","absolute"),r.style.setProperty("width","20px"),r.style.setProperty("vertical-align","top"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-align","right"),r.style.setProperty("right","4px"),r.style.setProperty("display","block"),r.innerHTML="X",r.onclick=rtl.createSafeCallback(this,"DoErrorClose"),o.appendChild(r),document.body.appendChild(o)):2===d?window.alert(i):1===d&&(this.AddControlLink("googlematerial","https://fonts.googleapis.com/icon?family=Material+Icons"),pas["WEBLib.Dialogs"].MessageDlg(i,1,rtl.createSet(2),null)),null!=this.FOnError&&this.FOnError(this,t.TApplicationError.$clone(n),{get:function(){return s},set:function(t){s=t}}),s},this.DoHandleExit=function(t){return!0,null!=this.FOnExit$1&&this.FOnExit$1(this),!0},this.DoHashChange=function(t){var e="",i=null,s=null,n=null,o=!1;return!0,!this.FAutoFormRoute||(e=location.hash,pas.System.Delete({get:function(){return e},set:function(t){e=t}},1,1),o=!1,null!=this.FOnHashChange&&this.FOnHashChange(this,e,{get:function(){return o},set:function(t){o=t}}),o||(""===e&&(e=this.FInitFormClassName),""!==e&&(""===this.FInitFormClassName&&(this.FInitFormClassName=this.FActiveForm.$classname),null!=(i=pas.Classes.GetClass(e))&&(n=document.body,this.CreateForm$6(i,n,{get:function(){return s},set:function(t){s=t}})))),!0)},this.DoPopState=function(t){return null!=this.FOnPopState&&this.FOnPopState(this,t.state),!0,!0},this.DoErrorClose=function(t){return document.body.removeChild(t.target.parentElement),!0,!0},this.DoUpdateOnlineStatus=function(t){return!0,null!=this.FOnOnlineChange&&(window.navigator.onLine?this.FOnOnlineChange(this,0):this.FOnOnlineChange(this,1)),!0},this.DoVisibilityChange=function(t){var e;return!0,e="visible"===document.visibilityState,null!=this.FOnActivate&&this.FOnActivate(this,e),!0},this.CreateNewForm=function(e,i){var s=null,n=null,o=null,a=null,r=null,l=0,h=0,p=0,c=0,F=null,u=null,C=0,d=null;if(null===this.FMainForm&&(this.FMainForm=e),o=null,r=null,C=0,e.FPopup||""===e.FFormElement){if(e.ClearControls(),e.FLayer$1=e.CreateLayer(),document.body.appendChild(e.FLayer$1),s=e.FLayer$1,e.FPopup&&e.FPopupOpacity<1&&((n=e.CreateLayer()).style.setProperty(pas["WEBLib.Controls"].CSSBackground,"black"),n.style.setProperty("opacity",pas["WEBLib.WebTools"].DoubleToHTML(e.FPopupOpacity)),n.style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),s.appendChild(n)),t.Application.ChangeMaxZIndex(1),(o=document.createElement("DIV")).style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),e.FPopupElement=o,4===e.FBorder){o.style.setProperty("resize","both"),o.style.setProperty("overflow","auto"),d=null;try{var T=e;(d=new ResizeObserver((function(t){window.requestAnimationFrame(()=>{Array.isArray(t)&&t.length&&t.forEach((function(t){T.HandleObserver()}))})}))).observe(o)}catch(t){o.style.removeProperty("resize"),o.style.removeProperty("overflow")}e.FResizeObserver=d}""!==e.FElementClassName&&o.setAttribute("class",e.FElementClassName),e.FShadow&&e.FPopup&&o.style.setProperty("box-shadow","3px 3px 3px silver"),s.appendChild(o),e.GetMethodPointers(),e.FBorder in rtl.createSet(3,4)?(u=e.CreateCaption(),o.appendChild(u),(a=document.createElement("DIV")).style.setProperty("position","absolute"),a.style.setProperty("width","100%"),a.setAttribute("id","childspan"),o.appendChild(a),r=a,C=t.Application.FFormCaptionHeight):r=o,r.innerHTML=i,e.FContainer=r}else e.FLayer$1=null,null!=(s=document.getElementById(e.FFormElement))&&(s.innerHTML=i,""===e.FElementClassName&&0===e.FCSSLibrary&&s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)));e.Init(),e.LoadDFMValues(),e.FBorder in rtl.createSet(3,4)&&""!==e.FElementCaptionClassName&&(u.classList.add(e.FElementCaptionClassName),u.style.removeProperty("background-color"),u.style.removeProperty("color")),null!=e.FLayer$1&&(e.FPopup||(""===e.FElementClassName?-1!==e.FColor?s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)):s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,"white"):s.setAttribute("class",e.FElementClassName),1===e.FCSSLibrary&&""===e.FElementClassName&&(s.setAttribute("class","card"),s.style.removeProperty("background-color")))),null!=o&&""===e.FFormContainer&&e.FPopup&&(o.style.setProperty("position","absolute"),l=Math.max(0,Math.round((t.WinWidth()-e.GetWidth())/2))+window.scrollX,h=Math.max(0,Math.round((t.WinHeight()-e.GetHeight())/2))+window.scrollY,p=e.GetWidth(),c=e.GetClientHeight()+C,""===e.FElementClassName&&0===e.FCSSLibrary&&(o.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)),o.style.setProperty("border","1px Black solid")),o.style.setProperty("top",pas.SysUtils.IntToStr(h)+"px"),o.style.setProperty("left",pas.SysUtils.IntToStr(l)+"px"),o.style.setProperty("width",pas.SysUtils.IntToStr(p)+"px"),o.style.setProperty("height",pas.SysUtils.IntToStr(c)+"px")),null!=r&&this.ActivateChildScripts(r),null!=e.FOnCreate&&e.FOnCreate(e),null!=e.FCreatedProc&&(F=e.FCreatedProc,e.FCreatedProc=null,F(e)),e.Loaded(),e.InitAnchoring(),e.UpdateChildAnchoring(),e.FCreating=!1,e.UpdateElement(),e.EventsBound()||e.BindEvents(),e.Resize$1(),e.DoShow()},this.GetFormExtension=function(){return 0!==this.FLanguage?"_"+pas["WEBLib.Lang"].GetLanguageISO639_1Code(this.FLanguage)+pas["WEBLib.WebTools"].cHTMLExt:pas["WEBLib.WebTools"].cHTMLExt};this.GetAuthorizationPageHTML=function(t){function e(t,e){var i=0,s="";s='<!doctype html>\r\n<html lang="en">\r\n<head>\r\n  <title>Authentication Result</title>\r\n  <meta name="viewport" content="width=device-width, initial-scale=1">\r\n</head>\r\n<body>\r\n<style>\r\n  hr\r\n  {\r\n    border: none;\r\n    height: 1px;\r\n    background-color: rgb(171, 171, 171);\r\n  }\r\n  div.container\r\n  {\r\n    position: fixed;\r\n    font-family: Arial;\r\n    font-size: 12pt;\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n  div.section\r\n  {\r\n    display: inline-block;\r\n    margin: 15px;\r\n    padding: 5px;\r\n    float: left;\r\n  }\r\n  div.image img\r\n  {\r\n    height: 100%;\r\n  }\r\n  div.text\r\n  {\r\n    padding-top: 15px;\r\n  }\r\n  div.text2\r\n  {\r\n    font-size: 18pt;\r\n    color: #PLACEHOLDERCOLOR#;\r\n  }\r\n  span.title\r\n  {\r\n    font-size: 26px;\r\n  }\r\n</style>\r\n  <div class="container">\r\n  <div class="section image">\r\n    <img src="#PLACEHOLDERIMAGE#">\r\n  </div>\r\n  <div class="section text">\r\n  #PLACEHOLDERTEXT#\r\n  </div>\r\n  </div>\r\n </body>\r\n</html>';for(var n=0,o=rtl.length(t)-1;n<=o;n++)i=n,s=pas.SysUtils.StringReplace(s,t[i],e[i],rtl.createSet(0));return s}return e(["#PLACEHOLDERIMAGE#","#PLACEHOLDERTEXT#","#PLACEHOLDERCOLOR#"],t?["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACC0lEQVR4nO2Zv3GDMBSHv+QyQEbICM4EOW+Q9BS4o2QTU9LZBQNkg6zgETyCR0iRkOMIAv3Xk0+/zsiI931nI3iCkpKSkpKSkpKSkpJ7SDN0x2bo3nW//xCymNhphu4E1MAN2PdVe9k6524ETODHXIHXvmpva+c9BqwpWhbgAV6Ar61zsxeggB+z+x1XJmsBG/Bj6mboWtVgtvcATfhpPvqq/ZwfzFKABTwoVobsBFjCj7kyWxmyugc4wsPCypCNAA/wY/L7C3iEP/dVe5geEC8gJDwIFxAaHgQLiAEPQgXEggeBAmLCgzABseFBkIAU8CBEQCp4ECAgJTwYChibCzYXWpmv9jCVFTwYCJgVa31BxXwucapFS4CiWOsLS4EHDQEbxRoXIAkeNgRoFqtdiDR4WBFgWOxmQRLhQdEQsSi2bobuqBqUCg8LvwDHYg991Z49zjeNd3iYCfBU7J8E6fAAT7PPOw9znpqhA3hDODz8F7Dnp2vqKmJ1O8ogQeFh+R7wjB8JrgkOD4plUICEKPCw/hyQSkI0eNh+EowtISo86L0LxJIQHR703wZDS0gCD2b9gFASksGDeUfIt4Sk8GDRE/QoITk8WDZFPUgQAQ8OXWEHCWLgwbEtbiFBFDx42BcwkCAOHjxtjGhIEAkPHneGViSIhQfPW2MLEkTDQ4C9wYmEi3T4kpKSkm+5ax+YhPsUTQAAAABJRU5ErkJggg==",'<div class="text2">Application succesfully authorized</div>You can close this browser window',"rgb(104, 164, 144)"]:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABtElEQVR4nO2bUY7CMAxEhz0NB+EgrDjXCg6yB+E4+9NKCAiN7XHcjf1+ED+Z6ahNHScFiqIoBNwvp+v9crpG+3hG6+sgFQFwXv7ejj+/31JBDyy+ugN4ElkJD8HqqyuAhohYjA3D12YAGyIiMSYsXx8D6BTpFmPB9NUMQCjSJcaA7ettAEqRTTErHr5eAjCKfBSz4OXryzhgizOzWCJd/Fs8HoFHzHeCtxf2JNgt3MMID8zXoMpAtDarEDIbidJklMJUQ6MDty6GNDSNRdxtluWwhReDUfONKADAx2jkZCsOAOAaXn4pY2let6oAAN/qTIG61lAHAOwmBFO1aQoACA/BXGqbAwDCQqCsOCkBAMNDoC23aQEAw0Kg9hqoAQDuIdAbLfQAALcQXFptLgEA9BDc+oxeLbF/Qz0C7AFTT4KpX4OpC6HUpXDqxVDq5fBOLn5lbEMkdUssdVM0dVs89cZI6q2x1JujqbfHUx+Q2MPFj/LidUqsKajB05NXS4y6Zl/GurHGe6QOSpLF5jgqqxSb67C0UGzO4/KdYnN/MLEhluOTmYZY+MWvDPU122dzRVHk5g+X6Lw5aVkK9AAAAABJRU5ErkJggg==",'<div class="text2">Application authorization failed</div><br/>Please try again.',"rgb(216, 99, 68)"])},this.GetColorScheme=function(){var t=0;return t=0,"not all"!==window.matchMedia("(prefers-color-scheme)").media&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?2:1),t},this.ActivateChildScripts=function(t){!function t(e){if(!0===function(t){return"SCRIPT"===t.tagName}(e))e.parentNode.replaceChild(function(t){var e=document.createElement("script");e.async=!1,e.text=t.innerHTML;for(var i=t.attributes.length-1;i>=0;i--)e.setAttribute(t.attributes[i].name,t.attributes[i].value);return e}(e),e);else for(var i=0,s=e.childNodes;i<s.length;)t(s[i++]);return e}(t)},this.ChangeMaxZIndex=function(t){this.FMaxZIndex=this.FMaxZIndex+t},this.TriggerNotification=function(){},this.AutoCreateForm=function(t,e){null!=this.FOnAutoCreateForm?this.FOnAutoCreateForm(this,t,e):this.CreateForm(t,e)},this.LockForm=function(t){for(var e=0,i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,t.GetControls(e).DisableTab()},this.UnLockForm=function(t){for(var e=0,i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,t.GetControls(e).EnableTab()},this.Create$1=function(t){return this.FFormStack=pas.Classes.TList.$create("Create$1"),this.FParameters=pas.Classes.TStringList.$create("Create$1"),this.FAppContainer=pas["WEBLib.WebTools"].cBodyTag,this.FMainForm=null,this.FActiveForm=null,this.FInitFormClassName="",this.FIsRedirect=!1,this.FAutoFormRoute=!1,this.FThemed=!1,this.FThemeColor=14917120,this.FThemeTextColor=16777215,this.FFormCaptionHeight=22,this.FMaxZIndex=999998,this.FHandleOAuth=!0,this.FHintPause=200,this.FHintHidePause=250,this.FHintPosition=1,this.FHintClassName="",this.FSBW=-1,window.addEventListener("error",rtl.createCallback(this,"DoHandleError")),window.addEventListener("unhandledrejection",rtl.createCallback(this,"DoHandleError")),window.addEventListener("beforeunload",rtl.createSafeCallback(this,"DoHandleExit")),this.FErrorType=0,this},this.Destroy=function(){rtl.free(this,"FFormStack"),rtl.free(this,"FParameters"),pas["WEBLib.Controls"].TControl.Destroy.call(this)},this.MaxZIndexStr=function(){return pas.SysUtils.IntToStr(this.FMaxZIndex)},this.CalcScrollBarWidth=function(){var t=0;if(-1!==this.FSBW)return this.FSBW;return function(){const e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",document.body.appendChild(e);const i=e.offsetWidth-e.clientWidth;document.body.removeChild(e),t=i}(),this.FSBW=t,this.FSBW},this.CreateForm=function(t,e){this.CreateForm$2(t,this.FAppContainer,e,null)},this.CreateForm$2=function(t,e,i,s){this.CreateForm$3(t,e,i,s,!0)},this.CreateForm$3=function(e,i,s,n,o){var a=this,r="";function l(o){var l,h=null,p=null,c="",F=!1;return(l=null!=o)?(c=o.target.responseText,(h=(F=pas.SysUtils.LowerCase(i)===pas["WEBLib.WebTools"].cBodyTag)?document.body:document.getElementById(i)).innerHTML=c):h=document.body,(p=e.$create("Create$5",[i,s])).FFormFileName=r,""===p.FFormContainer&&p.SetFormContainer(i),F||(p.FFormElement=i,p.FContainer=h),p.CreateControl(),p.Init(),p.SetColorScheme(t.Application.GetColorScheme()),p.FPrevActiveForm=a.FActiveForm,a.FActiveForm=p,null===a.FMainForm&&(a.FMainForm=p),null!=n&&n(p),!0,l&&a.ActivateChildScripts(h),a.FActiveForm.DoShow(),a.FActiveForm.Resize$1(),!0}if(!this.FIsRedirect){if(this.FAppInitializing){if(!this.FCanCreateForm)return;this.FCanCreateForm=!1}""!==(r=e.GetHTMLFileName())&&o?(this.FLastReq=new XMLHttpRequest,this.FLastReq.addEventListener("load",rtl.createSafeCallback(null,l)),this.FLastReq.open("GET",r),this.FLastReq.send()):l(null)}},this.CreateForm$6=function(t,e,i){this.CreateForm$2(t,e.id,i,null)},this.HasCSS=function(t){var e=!1,i=null,s=0,n="";e=!1;for(var o=0,a=(i=document.querySelectorAll("head > link")).length-1;o<=a;o++)if(s=o,n=i.item(s).href,0===pas.SysUtils.CompareText(n,t)){e=!0;break}return e},this.Initialize=function(){var t,e,i="",s="";if(this.FCanCreateForm=!0,this.FAppInitializing=!0,this.FParameters.Clear(),i=window.location.href,this.InitFormatSettings(pas["WEBLib.WebTools"].GetBrowserLocale()),this.FParameters.SetDelimiter("&"),this.FParameters.FStrictDelimiter=!0,(t=pas.System.Pos("?",i))>0&&(i=pas.System.Copy(i,t+1,i.length)),this.FParameters.SetDelimitedText(i),e="Authentication"==window.name,null!=this.FOnOAuthCallBack&&(-1!==this.FParameters.IndexOfName("oauthcallback")||e))return this.FOnOAuthCallBack(this,i),this.FIsRedirect=!0,void(document.body.innerHTML=this.GetAuthorizationPageHTML(!0));-1!==this.FParameters.IndexOfName("code")&&this.FHandleOAuth&&(null!=this.FOnOAuthToken&&this.FOnOAuthToken(this,i),this.FIsRedirect=!0,s=this.FParameters.GetValue("code"),window.opener&&window.opener.processAuthData&&(window.opener.processAuthData(s),window.close())),window.addEventListener("hashchange",rtl.createSafeCallback(this,"DoHashChange")),window.addEventListener("online",rtl.createSafeCallback(this,"DoUpdateOnlineStatus")),window.addEventListener("offline",rtl.createSafeCallback(this,"DoUpdateOnlineStatus")),window.addEventListener("popstate",rtl.createCallback(this,"DoPopState")),document.addEventListener("visibilitychange",rtl.createSafeCallback(this,"DoVisibilityChange")),null!==window.opener&&-1!==this.FParameters.IndexOfName("access_token")&&(this.FIsRedirect=!0,s=this.FParameters.GetValue("access_token"),window.opener&&window.opener.processAuthData&&(window.opener.processAuthData(s),window.close()))},this.InitFormatSettings=function(t){var e,i,s=0;i=t,pas.SysUtils.FormatSettings.ShortDateFormat=pas["WEBLib.WebTools"].GetLocaleShortDateFormat(i),pas.System.Pos("/",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="/"),pas.System.Pos(".",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="."),pas.System.Pos("-",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="-");var n=new Date("Jan 1, 1980 06:07:08 GMT+00:00"),o="";for(o=""==i?navigator.language:i,e=n.toLocaleTimeString(o),pas.System.Pos(":",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator=":"),pas.System.Pos(".",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator="."),pas.System.Pos("-",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator="-"),s=1;s<=7;s++)pas.SysUtils.FormatSettings.ShortDayNames[s-1]=pas["WEBLib.WebTools"].GetLocaleShortDayName(s,i),pas.SysUtils.FormatSettings.LongDayNames[s-1]=pas["WEBLib.WebTools"].GetLocaleLongDayName(s,i);for(s=1;s<=12;s++)pas.SysUtils.FormatSettings.ShortMonthNames[s-1]=pas["WEBLib.WebTools"].GetLocaleShortMonthName(s,i),pas.SysUtils.FormatSettings.LongMonthNames[s-1]=pas["WEBLib.WebTools"].GetLocaleLongMonthName(s,i);pas.SysUtils.FormatSettings.DecimalSeparator=pas["WEBLib.WebTools"].GetLocaleDecimalSeparator(""),"."===pas.SysUtils.FormatSettings.DecimalSeparator?pas.SysUtils.FormatSettings.ThousandSeparator=",":pas.SysUtils.FormatSettings.ThousandSeparator="."},this.Run=function(){this.FCanCreateForm=!0,this.FAppInitializing=!1},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),this.GetParentForm=function(e){var i=null,s=null;for(i=null,s=e;null!=s&&!t.TCustomForm.isPrototypeOf(s);)s=s===e&&null===s.FOwner?e.FParent:s.FOwner;return null!=s&&t.TCustomForm.isPrototypeOf(s)&&(i=rtl.as(s,t.TCustomForm)),i},this.WinWidth=function(){return null!=t.VSIDE?pas["WEBLib.Forms"].VSIDE.clientWidth():window.innerWidth},this.WinHeight=function(){return null!=t.VSIDE?pas["WEBLib.Forms"].VSIDE.clientHeight():window.innerHeight},this.Application=null,this.HandShakeScript=null,this.VSIDE=null,this.LastHash="",t.$implcode=function(){e.ReleaseForm=function(t){t=rtl.freeLoc(t),t=null}},t.$init=function(){t.HandShakeScript=document.createElement("script"),t.HandShakeScript.id="HandShakeScript",t.HandShakeScript.type="text/javascript",t.HandShakeScript.innerHTML='var IDE = null;\r\nvar TMSWEBCoreClientIdentifier = "unknown";\r\nvar TMSWEBCoreOAuthCallback = "unknown";\r\nfunction HandShake(cid){\r\n  TMSWEBCoreClientIdentifier = cid;\r\n}',document.body.appendChild(t.HandShakeScript),t.Application=t.TApplication.$create("Create$1",[null])}}),["WEBLib.Dialogs","WEBLib.WebTools","WEBLib.Utils","Math"]),rtl.module("WEBLib.StdCtrls",["System","Classes","WEBLib.Controls","SysUtils","Web","WEBLib.Graphics","Types","WEBLib.WebTools","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this;this.TAutoCompletion={0:"acOff",acOff:0,1:"acHonorificPrefix",acHonorificPrefix:1,2:"acGivenName",acGivenName:2,3:"acAdditionalName",acAdditionalName:3,4:"acFamilyName",acFamilyName:4,5:"acHonorificSuffix",acHonorificSuffix:5,6:"acNickName",acNickName:6,7:"acEmail",acEmail:7,8:"acUserName",acUserName:8,9:"acNewPassword",acNewPassword:9,10:"acCurrentPassword",acCurrentPassword:10,11:"acOrganizationTitle",acOrganizationTitle:11,12:"acOrganization",acOrganization:12,13:"acStreetAddress",acStreetAddress:13,14:"acAddressLine1",acAddressLine1:14,15:"acAddressLine2",acAddressLine2:15,16:"acAddressLine3",acAddressLine3:16,17:"acAddressLevel1",acAddressLevel1:17,18:"acAddressLevel2",acAddressLevel2:18,19:"acAddressLevel3",acAddressLevel3:19,20:"acAddressLevel4",acAddressLevel4:20,21:"acCountry",acCountry:21,22:"acCountryName",acCountryName:22,23:"acPostalCode",acPostalCode:23,24:"acCCName",acCCName:24,25:"acCCGivenName",acCCGivenName:25,26:"acCCAdditionalName",acCCAdditionalName:26,27:"acCCFamilyName",acCCFamilyName:27,28:"acCCNumber",acCCNumber:28,29:"acExpiry",acExpiry:29,30:"acExpiryMonth",acExpiryMonth:30,31:"acExpiryYear",acExpiryYear:31,32:"acCSC",acCSC:32,33:"acType",acType:33,34:"acTransactionCurrency",acTransactionCurrency:34,35:"acTransactionAmount",acTransactionAmount:35,36:"acLanguage",acLanguage:36,37:"acBirthday",acBirthday:37,38:"acBirthdayDay",acBirthdayDay:38,39:"acBirthDayMonth",acBirthDayMonth:39,40:"acBirthDayYear",acBirthDayYear:40,41:"acSex",acSex:41,42:"acTelephone",acTelephone:42,43:"acTelephoneCountryCode",acTelephoneCountryCode:43,44:"acTelephoneNational",acTelephoneNational:44,45:"acTelephoneAreaCode",acTelephoneAreaCode:45,46:"acTelephoneLocal",acTelephoneLocal:46,47:"acTelephoneExtension",acTelephoneExtension:47,48:"acIMPP",acIMPP:48,49:"acURL",acURL:49,50:"acPhoto",acPhoto:50,51:"acNone",acNone:51,52:"acNope",acNope:52},rtl.createClass(this,"TCustomMemo",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FWordWrap=!1,this.FBlockChange=!1,this.FLines=null,this.FSelStart=0,this.FSelLength=0,this.FAutoSize=!1,this.FOnChange=null,this.FReadOnly=!1,this.FTextHint="",this.FHandleChangePtr=null,this.FHandlePastePtr=null,this.FHandleCutPtr=null,this.FHandleInputPtr=null,this.FHandleInvalidPtr=null,this.FWantTabs=!1,this.FAutoCompletion=0,this.FSpellCheck=!1,this.FModified=!1,this.FScrollbars=0,this.FRequiredText="",this.FRequired=!1},this.$final=function(){this.FLines=void 0,this.FOnChange=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.GetText=function(){return null!=this.GetElementInputHandle()&&(this.FBlockChange=!0,this.FLines.SetTextStr(this.GetElementInputHandle().value),this.FBlockChange=!1),this.FLines.GetTextStr()},this.SetSelLength=function(t){this.FSelLength!==t&&(this.FSelLength=t,this.UpdateElement())},this.SetSelStart=function(t){this.FSelStart!==t&&(this.FSelStart=t,this.UpdateElement())},this.SetAutoSize=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.UpdateElement())},this.GetElementInputHandle=function(){return this.GetContainer()},this.SetReadOnly=function(t){this.FReadOnly!==t&&(this.FReadOnly=t,this.UpdateElement())},this.GetSelLength=function(){var t=0;return t=-1,null!=this.GetElementInputHandle()&&(t=this.GetElementInputHandle().selectionEnd-this.GetElementInputHandle().selectionStart),t},this.GetSelStart=function(){var t=0;return t=-1,null!=this.GetElementInputHandle()&&(t=this.GetElementInputHandle().selectionStart),t},this.SetSpellCheck=function(t){this.FSpellCheck!==t&&(this.FSpellCheck=t,this.UpdateElement())},this.SetRequired=function(t){this.FRequired!==t&&(this.FRequired=t,this.UpdateElement())},this.IsInputControl=function(){return!0,!0},this.HandleDoKeyDown=function(t){var e=!1,i=null;if(9===this.GetKeyCode(t.key,!0)&&this.FWantTabs){var s=(i=this.GetElementInputHandle()).selectionStart,n=i.selectionEnd;i.value=i.value.substring(0,s)+"\t"+i.value.substring(n),i.selectionStart=i.selectionEnd=s+1,t.stopPropagation(),t.preventDefault()}else pas["WEBLib.Controls"].TControl.HandleDoKeyDown.apply(this,arguments);return e},this.CreateElement=function(){return document.createElement("TEXTAREA")},this.DoHandlePaste=function(t){var e="",i=!1;i=!1;var s=t.clipboardData||window.clipboardData;return s&&(e=s.getData("Text"),i=!0),i&&!this.CanPaste(e)&&(t.preventDefault(),t.stopPropagation()),!1,!1},this.DoHandleCut=function(t){return this.CanCut()||(t.preventDefault(),t.stopPropagation()),!1,!1},this.DoHandleInput=function(t){return this.GetText(),this.Change(),this.FAutoSize&&this.DoAutoSize(),!0,!0},this.DoHandleChange=function(t){return this.FModified=!0,this.Change(),""!==this.FRequiredText&&this.GetElementInputHandle().setCustomValidity(""),!0,!0},this.DoHandleInvalid=function(t){return this.GetElementInputHandle().setCustomValidity(this.FRequiredText),!0,!0},this.IsReadOnly=function(){return this.FReadOnly},this.GetDisplayText=function(){return this.FLines.GetTextStr()},this.DoAutoSize=function(){var t,e=0;this.GetElementInputHandle().style.setProperty("overflow","hidden"),this.GetElementInputHandle().style.setProperty("height","auto"),t=this.GetElementInputHandle(),e=t.scrollHeight,this.GetElementInputHandle().style.setProperty("height",pas.SysUtils.TIntegerHelper.ToString$1.call({get:function(){return e},set:function(t){e=t}})+"px")},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementInputHandle()&&(this.GetElementInputHandle().addEventListener("input",this.FHandleInputPtr),this.GetElementInputHandle().addEventListener("change",this.FHandleChangePtr),this.GetElementInputHandle().addEventListener("paste",this.FHandlePastePtr),this.GetElementInputHandle().addEventListener("cut",this.FHandleCutPtr),this.GetElementInputHandle().addEventListener("invalid",this.FHandleInvalidPtr))},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.GetElementInputHandle()&&(this.GetElementInputHandle().removeEventListener("input",this.FHandleInputPtr),this.GetElementInputHandle().removeEventListener("change",this.FHandleChangePtr),this.GetElementInputHandle().removeEventListener("paste",this.FHandlePastePtr),this.GetElementInputHandle().removeEventListener("cut",this.FHandleCutPtr),this.GetElementInputHandle().removeEventListener("invalid",this.FHandleInvalidPtr))},this.UpdateElementData=function(){var e=0,i=0,s=null;pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),null==this.GetElementInputHandle()||this.FBlockChange||(this.FRequired?this.GetElementInputHandle().setAttribute("required",""):this.GetIsLinked()||this.GetElementInputHandle().removeAttribute("required"),this.GetElementInputHandle().value=this.GetDisplayText(),"TEXTAREA"===this.GetElementInputHandle().tagName&&this.GetElementInputHandle().setSelectionRange(this.GetSelStart(),this.GetSelStart()+this.GetSelLength()),this.GetIsLinked()||this.GetElementInputHandle().style.setProperty("resize","none"),this.GetElementInputHandle().readOnly=this.IsReadOnly(),""!==this.FTextHint&&(this.GetElementInputHandle().placeholder=this.FTextHint),this.GetIsLinked()||(51===this.FAutoCompletion?(this.GetElementInputHandle().setAttribute("autocomplete","none"),this.GetIsLinked()||this.GetElementInputHandle().removeAttribute("name")):0!==this.FAutoCompletion?(this.GetElementInputHandle().setAttribute("autocomplete","on"),this.GetIsLinked()||this.GetElementInputHandle().setAttribute("name",t.GetAutoCompletionName(this.FAutoCompletion))):(this.GetElementInputHandle().removeAttribute("autocomplete"),this.GetIsLinked()||this.GetElementInputHandle().removeAttribute("name")),e=this.FSelStart,i=this.FSelStart+this.FSelLength,s=this.GetElementInputHandle(),setTimeout((function(){s.setSelectionRange(e,i)}),1)))},this.UpdateElementVisual=function(){if(pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),null!=this.GetElementInputHandle()&&!this.FBlockChange&&!this.GetIsLinked()){if(this.FAutoSize)this.GetElementInputHandle().style.setProperty("overflow","hidden"),this.GetElementInputHandle().style.setProperty("height","auto");else{this.GetElementInputHandle().style.setProperty("overflow","auto");var t=this.FScrollbars;0===t?this.GetElementInputHandle().style.setProperty("overflow","hidden"):2===t?(this.GetElementInputHandle().style.removeProperty("overflow"),this.GetElementInputHandle().style.setProperty("overflow-x","hidden"),this.GetElementInputHandle().style.setProperty("overflow-y","auto")):1===t?(this.GetElementInputHandle().style.removeProperty("overflow"),this.GetElementInputHandle().style.setProperty("overflow-x","auto"),this.GetElementInputHandle().style.setProperty("overflow-y","hidden")):3===t&&this.GetElementInputHandle().style.setProperty("overflow","auto")}this.GetElementInputHandle().style.setProperty("margin","0"),-1!==this.FColor&&16711422!==this.FColor?this.GetElementInputHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(this.FColor)):this.GetElementInputHandle().style.removeProperty("background-color"),this.FSpellCheck?this.GetElementInputHandle().hasAttribute("spellcheck")&&this.GetElementInputHandle().removeAttribute("spellcheck"):this.GetElementInputHandle().setAttribute("spellcheck","false"),this.FWordWrap?this.GetElementInputHandle().hasAttribute("wrap")&&this.GetElementInputHandle().removeAttribute("wrap"):this.GetElementInputHandle().setAttribute("wrap","off")}},this.UpdateElementSize=function(){pas["WEBLib.Controls"].TControl.UpdateElementSize.call(this),this.FAutoSize&&this.DoAutoSize()},this.SetLines=function(t){this.FLines.Assign(t)},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FHandleChangePtr=null,this.FHandleInputPtr=null,this.FHandlePastePtr=null,this.FHandleCutPtr=null,this.FHandleInvalidPtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),this.FHandleChangePtr=rtl.createCallback(this,"DoHandleChange"),this.FHandleInputPtr=rtl.createCallback(this,"DoHandleInput"),this.FHandlePastePtr=rtl.createCallback(this,"DoHandlePaste"),this.FHandleCutPtr=rtl.createCallback(this,"DoHandleCut"),this.FHandleInvalidPtr=rtl.createCallback(this,"DoHandleInvalid")},this.DoLinesChange=function(t){null==this.GetElementInputHandle()||this.FBlockChange||(this.GetElementInputHandle().value=this.GetDisplayText(),this.GetElementInputHandle().readOnly=this.IsReadOnly())},this.CanPaste=function(t){return!0,!0},this.CanCut=function(){return!0,!0},this.Change=function(){null!=this.FOnChange&&this.FOnChange(this)},this.InitCSSLibrary=function(t){1===t&&(this.SetElementFont(1),this.SetElementClassName("form-control"))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FSpellCheck=!0,this.FLines=pas.Classes.TStringList.$create("Create$1"),this.FLines.SetSkipLastLineBreak(!0),this.FLines.FOnChange=rtl.createCallback(this,"DoLinesChange"),4 in this.FComponentState&&(this.SetWidth(400),this.SetHeight(300)),this.SetShowFocus(!0),this.SetClipChildren(!1),this.FWantTabs=!1,this.FAutoSize=!1,this.FAutoCompletion=0,this.FWordWrap=!0,this.FScrollbars=3,this.FNoUserSelect=!1},this.Destroy=function(){rtl.free(this,"FLines"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TMemo",this.TCustomMemo,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize"),t.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),t.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),t.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),t.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("Hint",2,rtl.string,"FHint","SetHint"),t.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),t.addProperty("Lines",2,pas.Classes.$rtti.TStrings,"FLines","SetLines"),t.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),t.addProperty("ParentColor",2,rtl.boolean,"FParentColor","SetParentColor",{Default:!1}),t.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),t.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),t.addProperty("ReadOnly",2,rtl.boolean,"FReadOnly","SetReadOnly"),t.addProperty("Required",2,rtl.boolean,"FRequired","SetRequired",{Default:!1}),t.addProperty("RequiredText",0,rtl.string,"FRequiredText","FRequiredText"),t.addProperty("Role",3,rtl.string,"GetRole","SetRole"),t.addProperty("SelStart",3,rtl.longint,"GetSelStart","SetSelStart"),t.addProperty("SelLength",3,rtl.longint,"GetSelLength","SetSelLength"),t.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus","SetShowFocus",{Default:!1}),t.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),t.addProperty("Spellcheck",2,rtl.boolean,"FSpellCheck","SetSpellCheck",{Default:!0}),t.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),t.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),t.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),t.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),t.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),t.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),t.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),t.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),t.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),t.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),t.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),t.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),t.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),t.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),t.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),this.GetAutoCompletionName=function(t){var e="";return 0===t?e="":1===t?e="honorific-prefix":2===t?e="given-name":3===t?e="additional-name":4===t?e="family-name":5===t?e="honorific-suffix":6===t?e="nickname":7===t?e="email":8===t?e="username":9===t?e="new-password":10===t?e="current-password":11===t?e="organization-title":12===t?e="organization":13===t?e="street-address":14===t?e="address-line1":15===t?e="address-line2":16===t?e="address-line3":17===t?e="address-level1":18===t?e="address-level2":19===t?e="address-level3":20===t?e="address-level4":21===t?e="country":22===t?e="country-name":23===t?e="postal-code":24===t?e="cc-name":25===t?e="cc-given-name":26===t?e="cc-additional-name":27===t?e="cc-family-name":28===t?e="cc-number":29===t?e="cc-exp":30===t?e="cc-exp-month":31===t?e="cc-exp-year":32===t?e="cc-csc":33===t?e="cc-type":34===t?e="transaction-currency":35===t?e="transaction-amount":36===t?e="language":37===t?e="bday":38===t?e="bday-day":39===t?e="bday-month":40===t?e="bday-year":41===t?e="sex":42===t?e="tel":43===t?e="tel-country-code":44===t?e="tel-national":45===t?e="tel-area-code":46===t?e="tel-local":47===t?e="tel-extension":48===t?e="impp":49===t?e="url":50===t?e="photo":52===t&&(e="nope"),e}})),rtl.module("WEBLib.TMSFNCUtils",["System","Classes","SysUtils","Types","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.Controls","WEBLib.Forms","JS","WEBLib.Dialogs","Web"],(function(){"use strict";var t=this,e=t.$impl;rtl.createClass(this,"TTMSFNCUtils",pas.System.TObject,(function(){this.OpenURL=function(t){window.open(t,"_blank")},this.SetFontSize=function(t,e,i){t.SetSize(Math.round(e/96*72))},this.ScaleForCurrentDPI=function(t){},this.IsHTML=function(t){return pas.System.Pos("</",t)>0||pas.System.Pos("/>",t)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(t))>0},this.GetMousePos=function(){var t=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),e=pas.Types.TPoint.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].PointF(-1,-1)),e.$assign(pas["WEBLib.Controls"].GetMousePos()),t.$assign(pas["WEBLib.TMSFNCTypes"].PointF(e.x,e.y)),t},this.GetDPIScale=function(t,e){return 1,1},this.Clone=function(t){throw null,pas.SysUtils.Exception.$create("Create$1",["Implement Clone"])},this.VarPos=function(t,e,i){rtl.rc(i.get(),-2147483648,2147483647);return i.set(pas.System.Pos(t,e)),rtl.rc(i.get(),-2147483648,2147483647)},this.CharInStr=function(t,e){var i="\0";return i="\0",e>0&&e<=t.length&&(i=t.charAt(e-1)),i},this.MulDivInt=function(t,e,i){var s,n=0;return 0===i?n=-1:n=(s=t*e/i)>=0?pas.System.Trunc(s+.5):pas.System.Trunc(s-.5),n},this.LoadBitmapFromBase64=function(t,e,i){var s="";s=t,pas.System.Pos(";base64,",s)>0||(s="data:image/png;base64,"+s),e.LoadFromResource(s)},this.CharInSet=function(t,e){var i=!1;i=!1;for(var s=0,n=rtl.length(e)-1;s<=n;s++)if(t===e[s]){i=!0;break}return i},this.CreateCharSet=function(t){var e=[],i=0;e=rtl.arraySetLength(e,"\0",t.length);for(var s=1,n=t.length;s<=n;s++)e[(i=s)-1]=this.CharInStr(t,i);return e},this.IPos=function(t,e){return pas.System.Pos(pas.SysUtils.UpperCase(t),pas.SysUtils.UpperCase(e))},this.UnFixMarkup=function(t,i,s){var n=0;if(!s){for(;pas.System.Pos("&lt;",t)>0;)this.TagReplaceString("&lt;","<",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&gt;",t)>0;)this.TagReplaceString("&gt;",">",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&amp;",t)>0;)this.TagReplaceString("&amp;","&",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&quot;",t)>0;)this.TagReplaceString("&quot;",'"',{get:function(){return t},set:function(e){t=e}})}if(i)for(n=4;n<=92;n++)for(;pas.System.Pos(e.HTMLSpecialChar[n-1],t)>0;)this.TagReplaceString(e.HTMLSpecialChar[n-1],e.HTMLEncodedChar[n-1],{get:function(){return t},set:function(e){t=e}});return t},this.TagReplaceString=function(t,e,i){var s,n=!1;return(s=this.IPos(t,i.get()))>0?(n=!0,pas.System.Delete(i,s,t.length),i.set(pas.System.Copy(i.get(),1,s-1)+e+pas.System.Copy(i.get(),s,i.get().length))):n=!1,n},this.GetParentForm=function(t){var e,i=null;return i=null,null==(e=t)?i:i=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(e.FParent)?rtl.as(e.FParent,pas["WEBLib.Forms"].TCustomForm):this.GetParentForm(e.FParent)},this.GetOwnerForm=function(t){var e,i=null;return i=null,null==(e=t)?i:i=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(e.FOwner)?rtl.as(e.FOwner,pas["WEBLib.Forms"].TCustomForm):this.GetOwnerForm(e.FOwner)}})),this.FNCFormatSettings=pas.SysUtils.TFormatSettings.$new(),t.$implcode=function(){e.HTMLNumSpecialChar=92,e.HTMLEncodedChar=["&","<",">",'"'," ","é","è","ë","ê","ó","ò","ö","ô","í","ì","ï","î","ú","ù","ü","û","á","à","ä","â","É","È","Ë","Ê","Ó","Ò","Ö","Ô","Í","Ì","Ï","Î","Ú","Ù","Ü","Û","Á","À","Ä","Â","ç","Ç","ø","Ø","å","Å","©","®","€","«","»","ã","Ã","õ","Õ","™","§","¶","ß","£","$","§","‰","¶","'","¥","¤","¢","±","¡","°","ý","Ý","¼","½","¾","Æ","æ","Ñ","ñ","Ð","´","µ","¶","·","²","³"],e.HTMLSpecialChar=["&amp;","&lt;","&gt;","&quot;","&nbsp;","&eacute;","&egrave;","&euml;","&ecirc;","&oacute;","&ograve;","&ouml;","&ocirc;","&iacute;","&igrave;","&iuml;","&icirc;","&uacute;","&ugrave;","&uuml;","&ucirc;","&aacute;","&agrave;","&auml;","&acirc;","&Eacute;","&Egrave;","&Euml;","&Ecirc;","&Oacute;","&Ograve;","&Ouml;","&Ocirc;","&Iacute;","&Igrave;","&Iuml;","&Icirc;","&Uacute;","&Ugrave;","&Uuml;","&Ucirc;","&Aacute;","&Agrave;","&Auml;","&Acirc;","&ccedil;","&Ccedil;","&oslash;","&Oslash;","&aring;","&Aring;","&copy;","&reg;","&euro;","&laquo;","&raquo;","&atilde;","&Atilde;","&otilde;","&Otilde","&trade;","&sect;","&para;","&szlig;","&pound;","&#36;","&sect;","&permil;","&para;","&#39;","&yen;","&curren;","&cent;","&plusmn;","&iexcl;","&deg;","&#x00FD;","&#221;","&frac14;","&frac12;","&frac34;","&AElig;","&aelig;","&Ntilde;","&ntilde;","&ETH;","&acute;","&micro;","&para;","&middot","&sup2;","&sup3;"],e.FMimeTypes=null,e.RegisterMimeTypes=function(){function t(t,i){e.FMimeTypes.Add(t+e.FMimeTypes.GetNameValueSeparator()+i)}t("ez","application/andrew-inset"),t("aw","application/applixware"),t("atom","application/atom+xml"),t("atomcat","application/atomcat+xml"),t("atomsvc","application/atomsvc+xml"),t("bson","application/bson"),t("ccxml","application/ccxml+xml"),t("cdmia","application/cdmi-capability"),t("cdmic","application/cdmi-container"),t("cdmid","application/cdmi-domain"),t("cdmio","application/cdmi-object"),t("cdmiq","application/cdmi-queue"),t("cu","application/cu-seeme"),t("davmount","application/davmount+xml"),t("dbk","application/docbook+xml"),t("dssc","application/dssc+der"),t("xdssc","application/dssc+xml"),t("ecma","application/ecmascript"),t("emma","application/emma+xml"),t("epub","application/epub+zip"),t("exi","application/exi"),t("pfr","application/font-tdpfr"),t("gml","application/gml+xml"),t("gpx","application/gpx+xml"),t("gxf","application/gxf"),t("stk","application/hyperstudio"),t("ink","application/inkml+xml"),t("inkml","application/inkml+xml"),t("ipfix","application/ipfix"),t("jar","application/java-archive"),t("ser","application/java-serialized-object"),t("class","application/java-vm"),t("js","application/javascript"),t("json","application/json"),t("jsonml","application/jsonml+json"),t("lostxml","application/lost+xml"),t("hqx","application/mac-binhex40"),t("cpt","application/mac-compactpro"),t("mads","application/mads+xml"),t("mrc","application/marc"),t("mrcx","application/marcxml+xml"),t("ma","application/mathematica"),t("nb","application/mathematica"),t("mb","application/mathematica"),t("mathml","application/mathml+xml"),t("mbox","application/mbox"),t("mscml","application/mediaservercontrol+xml"),t("metalink","application/metalink+xml"),t("meta4","application/metalink4+xml"),t("mets","application/mets+xml"),t("mods","application/mods+xml"),t("m21","application/mp21"),t("mp21","application/mp21"),t("mp4s","application/mp4"),t("doc","application/msword"),t("dot","application/msword"),t("mxf","application/mxf"),t("bin","application/octet-stream"),t("bpk","application/octet-stream"),t("class","application/octet-stream"),t("deploy","application/octet-stream"),t("dist","application/octet-stream"),t("distz","application/octet-stream"),t("dmg","application/octet-stream"),t("dms","application/octet-stream"),t("dump","application/octet-stream"),t("elc","application/octet-stream"),t("iso","application/octet-stream"),t("lha","application/octet-stream"),t("lrf","application/octet-stream"),t("lzh","application/octet-stream"),t("mar","application/octet-stream"),t("pkg","application/octet-stream"),t("so","application/octet-stream"),t("oda","application/oda"),t("opf","application/oebps-package+xml"),t("ogx","application/ogg"),t("omdoc","application/omdoc+xml"),t("onetoc","application/onenote"),t("onetoc2","application/onenote"),t("onetmp","application/onenote"),t("onepkg","application/onenote"),t("oxps","application/oxps"),t("xer","application/patch-ops-error+xml"),t("pdf","application/pdf"),t("pgp","application/pgp-encrypted"),t("asc","application/pgp-signature"),t("sig","application/pgp-signature"),t("prf","application/pics-rules"),t("p10","application/pkcs10"),t("p7m","application/pkcs7-mime"),t("p7c","application/pkcs7-mime"),t("p7s","application/pkcs7-signature"),t("p8","application/pkcs8"),t("ac","application/pkix-attr-cert"),t("cer","application/pkix-cert"),t("crl","application/pkix-crl"),t("pkipath","application/pkix-pkipath"),t("pki","application/pkixcmp"),t("pls","application/pls+xml"),t("ai","application/postscript"),t("eps","application/postscript"),t("ps","application/postscript"),t("cww","application/prs.cww"),t("pskcxml","application/pskc+xml"),t("rdf","application/rdf+xml"),t("rif","application/reginfo+xml"),t("rnc","application/relax-ng-compact-syntax"),t("rl","application/resource-lists+xml"),t("rld","application/resource-lists-diff+xml"),t("rs","application/rls-services+xml"),t("gbr","application/rpki-ghostbusters"),t("mft","application/rpki-manifest"),t("roa","application/rpki-roa"),t("rsd","application/rsd+xml"),t("rss","application/rss+xml"),t("rtf","application/rtf"),t("sbml","application/sbml+xml"),t("scq","application/scvp-cv-request"),t("scs","application/scvp-cv-response"),t("spq","application/scvp-vp-request"),t("spp","application/scvp-vp-response"),t("sdp","application/sdp"),t("setpay","application/set-payment-initiation"),t("setreg","application/set-registration-initiation"),t("shf","application/shf+xml"),t("smi","application/smil+xml"),t("smil","application/smil+xml"),t("soap","application/soap+xml"),t("rq","application/sparql-query"),t("srx","application/sparql-results+xml"),t("gram","application/srgs"),t("grxml","application/srgs+xml"),t("sru","application/sru+xml"),t("ssdl","application/ssdl+xml"),t("ssml","application/ssml+xml"),t("tei","application/tei+xml"),t("teicorpus","application/tei+xml"),t("tfi","application/thraud+xml"),t("tsd","application/timestamped-data"),t("plb","application/vnd.3gpp.pic-bw-large"),t("psb","application/vnd.3gpp.pic-bw-small"),t("pvb","application/vnd.3gpp.pic-bw-var"),t("tcap","application/vnd.3gpp2.tcap"),t("pwn","application/vnd.3m.post-it-notes"),t("aso","application/vnd.accpac.simply.aso"),t("imp","application/vnd.accpac.simply.imp"),t("acu","application/vnd.acucobol"),t("atc","application/vnd.acucorp"),t("acutc","application/vnd.acucorp"),t("air","application/vnd.adobe.air-application-installer-package+zip"),t("fcdt","application/vnd.adobe.formscentral.fcdt"),t("fxp","application/vnd.adobe.fxp"),t("fxpl","application/vnd.adobe.fxp"),t("xdp","application/vnd.adobe.xdp+xml"),t("xfdf","application/vnd.adobe.xfdf"),t("ahead","application/vnd.ahead.space"),t("azf","application/vnd.airzip.filesecure.azf"),t("azs","application/vnd.airzip.filesecure.azs"),t("azw","application/vnd.amazon.ebook"),t("acc","application/vnd.americandynamics.acc"),t("ami","application/vnd.amiga.ami"),t("apk","application/vnd.android.package-archive"),t("cii","application/vnd.anser-web-certificate-issue-initiation"),t("fti","application/vnd.anser-web-funds-transfer-initiation"),t("atx","application/vnd.antix.game-component"),t("mpkg","application/vnd.apple.installer+xml"),t("m3u8","application/vnd.apple.mpegurl"),t("swi","application/vnd.aristanetworks.swi"),t("iota","application/vnd.astraea-software.iota"),t("aep","application/vnd.audiograph"),t("mpm","application/vnd.blueice.multipass"),t("bmi","application/vnd.bmi"),t("rep","application/vnd.businessobjects"),t("cdxml","application/vnd.chemdraw+xml"),t("mmd","application/vnd.chipnuts.karaoke-mmd"),t("cdy","application/vnd.cinderella"),t("cla","application/vnd.claymore"),t("rp9","application/vnd.cloanto.rp9"),t("c4g","application/vnd.clonk.c4group"),t("c4d","application/vnd.clonk.c4group"),t("c4f","application/vnd.clonk.c4group"),t("c4p","application/vnd.clonk.c4group"),t("c4u","application/vnd.clonk.c4group"),t("c11amc","application/vnd.cluetrust.cartomobile-config"),t("c11amz","application/vnd.cluetrust.cartomobile-config-pkg"),t("csp","application/vnd.commonspace"),t("cdbcmsg","application/vnd.contact.cmsg"),t("cmc","application/vnd.cosmocaller"),t("clkx","application/vnd.crick.clicker"),t("clkk","application/vnd.crick.clicker.keyboard"),t("clkp","application/vnd.crick.clicker.palette"),t("clkt","application/vnd.crick.clicker.template"),t("clkw","application/vnd.crick.clicker.wordbank"),t("wbs","application/vnd.criticaltools.wbs+xml"),t("pml","application/vnd.ctc-posml"),t("ppd","application/vnd.cups-ppd"),t("car","application/vnd.curl.car"),t("pcurl","application/vnd.curl.pcurl"),t("dart","application/vnd.dart"),t("rdz","application/vnd.data-vision.rdz"),t("uvf","application/vnd.dece.data"),t("uvvf","application/vnd.dece.data"),t("uvd","application/vnd.dece.data"),t("uvvd","application/vnd.dece.data"),t("uvt","application/vnd.dece.ttml+xml"),t("uvvt","application/vnd.dece.ttml+xml"),t("uvx","application/vnd.dece.unspecified"),t("uvvx","application/vnd.dece.unspecified"),t("uvz","application/vnd.dece.zip"),t("uvvz","application/vnd.dece.zip"),t("fe_launch","application/vnd.denovo.fcselayout-link"),t("dna","application/vnd.dna"),t("mlp","application/vnd.dolby.mlp"),t("dpg","application/vnd.dpgraph"),t("dfac","application/vnd.dreamfactory"),t("kpxx","application/vnd.ds-keypoint"),t("ait","application/vnd.dvb.ait"),t("svc","application/vnd.dvb.service"),t("geo","application/vnd.dynageo"),t("mag","application/vnd.ecowin.chart"),t("nml","application/vnd.enliven"),t("esf","application/vnd.epson.esf"),t("msf","application/vnd.epson.msf"),t("qam","application/vnd.epson.quickanime"),t("slt","application/vnd.epson.salt"),t("ssf","application/vnd.epson.ssf"),t("es3","application/vnd.eszigno3+xml"),t("et3","application/vnd.eszigno3+xml"),t("ez2","application/vnd.ezpix-album"),t("ez3","application/vnd.ezpix-package"),t("fdf","application/vnd.fdf"),t("mseed","application/vnd.fdsn.mseed"),t("seed","application/vnd.fdsn.seed"),t("dataless","application/vnd.fdsn.seed"),t("json","application/vnd.firedac.json"),t("xml","application/vnd.firedac.xml"),t("bin","application/vnd.firedac.bin"),t("gph","application/vnd.flographit"),t("ftc","application/vnd.fluxtime.clip"),t("fm","application/vnd.framemaker"),t("frame","application/vnd.framemaker"),t("maker","application/vnd.framemaker"),t("book","application/vnd.framemaker"),t("fnc","application/vnd.frogans.fnc"),t("ltf","application/vnd.frogans.ltf"),t("fsc","application/vnd.fsc.weblaunch"),t("oas","application/vnd.fujitsu.oasys"),t("oa2","application/vnd.fujitsu.oasys2"),t("oa3","application/vnd.fujitsu.oasys3"),t("fg5","application/vnd.fujitsu.oasysgp"),t("bh2","application/vnd.fujitsu.oasysprs"),t("ddd","application/vnd.fujixerox.ddd"),t("xdw","application/vnd.fujixerox.docuworks"),t("xbd","application/vnd.fujixerox.docuworks.binder"),t("fzs","application/vnd.fuzzysheet"),t("txd","application/vnd.genomatix.tuxedo"),t("ggb","application/vnd.geogebra.file"),t("ggt","application/vnd.geogebra.tool"),t("gex","application/vnd.geometry-explorer"),t("gre","application/vnd.geometry-explorer"),t("gxt","application/vnd.geonext"),t("g2w","application/vnd.geoplan"),t("g3w","application/vnd.geospace"),t("gmx","application/vnd.gmx"),t("kml","application/vnd.google-earth.kml+xml"),t("kmz","application/vnd.google-earth.kmz"),t("gqf","application/vnd.grafeq"),t("gqs","application/vnd.grafeq"),t("gac","application/vnd.groove-account"),t("ghf","application/vnd.groove-help"),t("gim","application/vnd.groove-identity-message"),t("grv","application/vnd.groove-injector"),t("gtm","application/vnd.groove-tool-message"),t("tpl","application/vnd.groove-tool-template"),t("vcg","application/vnd.groove-vcard"),t("hal","application/vnd.hal+xml"),t("zmm","application/vnd.handheld-entertainment+xml"),t("hbci","application/vnd.hbci"),t("les","application/vnd.hhe.lesson-player"),t("hpgl","application/vnd.hp-hpgl"),t("hpid","application/vnd.hp-hpid"),t("hps","application/vnd.hp-hps"),t("jlt","application/vnd.hp-jlyt"),t("pcl","application/vnd.hp-pcl"),t("pclxl","application/vnd.hp-pclxl"),t("sfd-hdstx","application/vnd.hydrostatix.sof-data"),t("mpy","application/vnd.ibm.minipay"),t("afp","application/vnd.ibm.modcap"),t("listafp","application/vnd.ibm.modcap"),t("list3820","application/vnd.ibm.modcap"),t("irm","application/vnd.ibm.rights-management"),t("sc","application/vnd.ibm.secure-container"),t("icc","application/vnd.iccprofile"),t("icm","application/vnd.iccprofile"),t("igl","application/vnd.igloader"),t("ivp","application/vnd.immervision-ivp"),t("ivu","application/vnd.immervision-ivu"),t("igm","application/vnd.insors.igm"),t("xpw","application/vnd.intercon.formnet"),t("xpx","application/vnd.intercon.formnet"),t("i2g","application/vnd.intergeo"),t("qbo","application/vnd.intu.qbo"),t("qfx","application/vnd.intu.qfx"),t("rcprofile","application/vnd.ipunplugged.rcprofile"),t("irp","application/vnd.irepository.package+xml"),t("xpr","application/vnd.is-xpr"),t("fcs","application/vnd.isac.fcs"),t("jam","application/vnd.jam"),t("rms","application/vnd.jcp.javame.midlet-rms"),t("jisp","application/vnd.jisp"),t("joda","application/vnd.joost.joda-archive"),t("ktz","application/vnd.kahootz"),t("ktr","application/vnd.kahootz"),t("karbon","application/vnd.kde.karbon"),t("chrt","application/vnd.kde.kchart"),t("kfo","application/vnd.kde.kformula"),t("flw","application/vnd.kde.kivio"),t("kon","application/vnd.kde.kontour"),t("kpr","application/vnd.kde.kpresenter"),t("kpt","application/vnd.kde.kpresenter"),t("ksp","application/vnd.kde.kspread"),t("kwd","application/vnd.kde.kword"),t("kwt","application/vnd.kde.kword"),t("htke","application/vnd.kenameaapp"),t("kia","application/vnd.kidspiration"),t("kne","application/vnd.kinar"),t("knp","application/vnd.kinar"),t("skp","application/vnd.koan"),t("skd","application/vnd.koan"),t("skt","application/vnd.koan"),t("skm","application/vnd.koan"),t("sse","application/vnd.kodak-descriptor"),t("lasxml","application/vnd.las.las+xml"),t("lbd","application/vnd.llamagraphics.life-balance.desktop"),t("lbe","application/vnd.llamagraphics.life-balance.exchange+xml"),t("123","application/vnd.lotus-1-2-3"),t("apr","application/vnd.lotus-approach"),t("pre","application/vnd.lotus-freelance"),t("nsf","application/vnd.lotus-notes"),t("org","application/vnd.lotus-organizer"),t("scm","application/vnd.lotus-screencam"),t("lwp","application/vnd.lotus-wordpro"),t("portpkg","application/vnd.macports.portpkg"),t("mcd","application/vnd.mcd"),t("mc1","application/vnd.medcalcdata"),t("cdkey","application/vnd.mediastation.cdkey"),t("mwf","application/vnd.mfer"),t("mfm","application/vnd.mfmp"),t("flo","application/vnd.micrografx.flo"),t("igx","application/vnd.micrografx.igx"),t("mif","application/vnd.mif"),t("daf","application/vnd.mobius.daf"),t("dis","application/vnd.mobius.dis"),t("mbk","application/vnd.mobius.mbk"),t("mqy","application/vnd.mobius.mqy"),t("msl","application/vnd.mobius.msl"),t("plc","application/vnd.mobius.plc"),t("txf","application/vnd.mobius.txf"),t("mpn","application/vnd.mophun.application"),t("mpc","application/vnd.mophun.certificate"),t("xul","application/vnd.mozilla.xul+xml"),t("cil","application/vnd.ms-artgalry"),t("cab","application/vnd.ms-cab-compressed"),t("xls","application/vnd.ms-excel"),t("xlm","application/vnd.ms-excel"),t("xla","application/vnd.ms-excel"),t("xlc","application/vnd.ms-excel"),t("xlt","application/vnd.ms-excel"),t("xlw","application/vnd.ms-excel"),t("xlam","application/vnd.ms-excel.addin.macroenabled.12"),t("xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"),t("xlsm","application/vnd.ms-excel.sheet.macroenabled.12"),t("xltm","application/vnd.ms-excel.template.macroenabled.12"),t("eot","application/vnd.ms-fontobject"),t("chm","application/vnd.ms-htmlhelp"),t("ims","application/vnd.ms-ims"),t("lrm","application/vnd.ms-lrm"),t("thmx","application/vnd.ms-officetheme"),t("cat","application/vnd.ms-pki.seccat"),t("stl","application/vnd.ms-pki.stl"),t("ppt","application/vnd.ms-powerpoint"),t("pps","application/vnd.ms-powerpoint"),t("pot","application/vnd.ms-powerpoint"),t("ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"),t("pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"),t("sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"),t("ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"),t("potm","application/vnd.ms-powerpoint.template.macroenabled.12"),t("mpp","application/vnd.ms-project"),t("mpt","application/vnd.ms-project"),t("docm","application/vnd.ms-word.document.macroenabled.12"),t("dotm","application/vnd.ms-word.template.macroenabled.12"),t("wps","application/vnd.ms-works"),t("wks","application/vnd.ms-works"),t("wcm","application/vnd.ms-works"),t("wdb","application/vnd.ms-works"),t("wpl","application/vnd.ms-wpl"),t("xps","application/vnd.ms-xpsdocument"),t("mseq","application/vnd.mseq"),t("mus","application/vnd.musician"),t("msty","application/vnd.muvee.style"),t("taglet","application/vnd.mynfc"),t("nlu","application/vnd.neurolanguage.nlu"),t("ntf","application/vnd.nitf"),t("nitf","application/vnd.nitf"),t("nnd","application/vnd.noblenet-directory"),t("nns","application/vnd.noblenet-sealer"),t("nnw","application/vnd.noblenet-web"),t("ngdat","application/vnd.nokia.n-gage.data"),t("n-gage","application/vnd.nokia.n-gage.symbian.install"),t("rpst","application/vnd.nokia.radio-preset"),t("rpss","application/vnd.nokia.radio-presets"),t("edm","application/vnd.novadigm.edm"),t("edx","application/vnd.novadigm.edx"),t("FExt","application/vnd.novadigm.FExt"),t("odc","application/vnd.oasis.opendocument.chart"),t("otc","application/vnd.oasis.opendocument.chart-template"),t("odb","application/vnd.oasis.opendocument.database"),t("odf","application/vnd.oasis.opendocument.formula"),t("odft","application/vnd.oasis.opendocument.formula-template"),t("odg","application/vnd.oasis.opendocument.graphics"),t("otg","application/vnd.oasis.opendocument.graphics-template"),t("odi","application/vnd.oasis.opendocument.image"),t("oti","application/vnd.oasis.opendocument.image-template"),t("odp","application/vnd.oasis.opendocument.presentation"),t("otp","application/vnd.oasis.opendocument.presentation-template"),t("ods","application/vnd.oasis.opendocument.spreadsheet"),t("ots","application/vnd.oasis.opendocument.spreadsheet-template"),t("odt","application/vnd.oasis.opendocument.text"),t("odm","application/vnd.oasis.opendocument.text-master"),t("ott","application/vnd.oasis.opendocument.text-template"),t("oth","application/vnd.oasis.opendocument.text-web"),t("xo","application/vnd.olpc-sugar"),t("dd2","application/vnd.oma.dd2+xml"),t("oxt","application/vnd.openofficeorg.extension"),t("pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"),t("sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"),t("ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"),t("potx","application/vnd.openxmlformats-officedocument.presentationml.template"),t("xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),t("xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"),t("docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"),t("dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"),t("mgp","application/vnd.osgeo.mapguide.package"),t("dp","application/vnd.osgi.dp"),t("esa","application/vnd.osgi.subsystem"),t("pdb","application/vnd.palm"),t("pqa","application/vnd.palm"),t("oprc","application/vnd.palm"),t("paw","application/vnd.pawaafile"),t("str","application/vnd.pg.format"),t("ei6","application/vnd.pg.osasli"),t("efif","application/vnd.picsel"),t("wg","application/vnd.pmi.widget"),t("plf","application/vnd.pocketlearn"),t("pbd","application/vnd.powerbuilder6"),t("box","application/vnd.previewsystems.box"),t("mgz","application/vnd.proteus.magazine"),t("qps","application/vnd.publishare-delta-tree"),t("ptid","application/vnd.pvi.ptid1"),t("qxd","application/vnd.quark.quarkxpress"),t("qxt","application/vnd.quark.quarkxpress"),t("qwd","application/vnd.quark.quarkxpress"),t("qwt","application/vnd.quark.quarkxpress"),t("qxl","application/vnd.quark.quarkxpress"),t("qxb","application/vnd.quark.quarkxpress"),t("bed","application/vnd.realvnc.bed"),t("mxl","application/vnd.recordare.musicxml"),t("musicxml","application/vnd.recordare.musicxml+xml"),t("cryptonote","application/vnd.rig.cryptonote"),t("cod","application/vnd.rim.cod"),t("rm","application/vnd.rn-realmedia"),t("rmvb","application/vnd.rn-realmedia-vbr"),t("link66","application/vnd.route66.link66+xml"),t("st","application/vnd.sailingtracker.track"),t("see","application/vnd.seemail"),t("sema","application/vnd.sema"),t("semd","application/vnd.semd"),t("semf","application/vnd.semf"),t("ifm","application/vnd.shana.informed.formdata"),t("itp","application/vnd.shana.informed.formtemplate"),t("iif","application/vnd.shana.informed.interchange"),t("ipk","application/vnd.shana.informed.package"),t("twd","application/vnd.simtech-mindmapper"),t("twds","application/vnd.simtech-mindmapper"),t("mmf","application/vnd.smaf"),t("teacher","application/vnd.smart.teacher"),t("sdkm","application/vnd.solent.sdkm+xml"),t("sdkd","application/vnd.solent.sdkm+xml"),t("dxp","application/vnd.spotfire.dxp"),t("sfs","application/vnd.spotfire.sfs"),t("sdc","application/vnd.stardivision.calc"),t("sda","application/vnd.stardivision.draw"),t("sdd","application/vnd.stardivision.impress"),t("smf","application/vnd.stardivision.math"),t("sdw","application/vnd.stardivision.writer"),t("vor","application/vnd.stardivision.writer"),t("sgl","application/vnd.stardivision.writer-global"),t("smzip","application/vnd.stepmania.package"),t("sm","application/vnd.stepmania.stepchart"),t("sxc","application/vnd.sun.xml.calc"),t("stc","application/vnd.sun.xml.calc.template"),t("sxd","application/vnd.sun.xml.draw"),t("std","application/vnd.sun.xml.draw.template"),t("sxi","application/vnd.sun.xml.impress"),t("sti","application/vnd.sun.xml.impress.template"),t("sxm","application/vnd.sun.xml.math"),t("sxw","application/vnd.sun.xml.writer"),t("sxg","application/vnd.sun.xml.writer.global"),t("stw","application/vnd.sun.xml.writer.template"),t("sus","application/vnd.sus-calendar"),t("susp","application/vnd.sus-calendar"),t("svd","application/vnd.svd"),t("sis","application/vnd.symbian.install"),t("sisx","application/vnd.symbian.install"),t("xsm","application/vnd.syncml+xml"),t("bdm","application/vnd.syncml.dm+wbxml"),t("xdm","application/vnd.syncml.dm+xml"),t("tao","application/vnd.tao.intent-module-archive"),t("pcap","application/vnd.tcpdump.pcap"),t("cap","application/vnd.tcpdump.pcap"),t("dmp","application/vnd.tcpdump.pcap"),t("tmo","application/vnd.tmobile-livetv"),t("tpt","application/vnd.trid.tpt"),t("mxs","application/vnd.triscape.mxs"),t("tra","application/vnd.trueapp"),t("ufd","application/vnd.ufdl"),t("ufdl","application/vnd.ufdl"),t("utz","application/vnd.uiq.theme"),t("umj","application/vnd.umajin"),t("unityweb","application/vnd.unity"),t("uoml","application/vnd.uoml+xml"),t("vcx","application/vnd.vcx"),t("vsd","application/vnd.visio"),t("vst","application/vnd.visio"),t("vss","application/vnd.visio"),t("vsw","application/vnd.visio"),t("vis","application/vnd.visionary"),t("vsf","application/vnd.vsf"),t("wbxml","application/vnd.wap.wbxml"),t("wmlc","application/vnd.wap.wmlc"),t("wmlsc","application/vnd.wap.wmlscriptc"),t("wtb","application/vnd.webturbo"),t("nbp","application/vnd.wolfram.player"),t("wpd","application/vnd.wordperfect"),t("wqd","application/vnd.wqd"),t("stf","application/vnd.wt.stf"),t("xar","application/vnd.xara"),t("xfdl","application/vnd.xfdl"),t("hvd","application/vnd.yamaha.hv-dic"),t("hvs","application/vnd.yamaha.hv-script"),t("hvp","application/vnd.yamaha.hv-voice"),t("osf","application/vnd.yamaha.openscoreformat"),t("osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"),t("saf","application/vnd.yamaha.smaf-audio"),t("spf","application/vnd.yamaha.smaf-phrase"),t("cmp","application/vnd.yellowriver-custom-menu"),t("zir","application/vnd.zul"),t("zirz","application/vnd.zul"),t("zaz","application/vnd.zzazz.deck+xml"),t("vxml","application/voicexml+xml"),t("wgt","application/widget"),t("hlp","application/winhlp"),t("wsdl","application/wsdl+xml"),t("wspolicy","application/wspolicy+xml"),t("7z","application/x-7z-compressed"),t("abw","application/x-abiword"),t("ace","application/x-ace-compressed"),t("dmg","application/x-apple-diskimage"),t("aab","application/x-authorware-bin"),t("x32","application/x-authorware-bin"),t("u32","application/x-authorware-bin"),t("vox","application/x-authorware-bin"),t("aam","application/x-authorware-map"),t("aas","application/x-authorware-seg"),t("bcpio","application/x-bcpio"),t("torrent","application/x-bittorrent"),t("blb","application/x-blorb"),t("blorb","application/x-blorb"),t("bz","application/x-bzip"),t("bz2","application/x-bzip2"),t("boz","application/x-bzip2"),t("cbr","application/x-cbr"),t("cba","application/x-cbr"),t("cbt","application/x-cbr"),t("cbz","application/x-cbr"),t("cb7","application/x-cbr"),t("vcd","application/x-cdlink"),t("cfs","application/x-cfs-compressed"),t("chat","application/x-chat"),t("pgn","application/x-chess-pgn"),t("nsc","application/x-conference"),t("cpio","application/x-cpio"),t("csh","application/x-csh"),t("deb","application/x-debian-package"),t("udeb","application/x-debian-package"),t("dgc","application/x-dgc-compressed"),t("dir","application/x-director"),t("dcr","application/x-director"),t("dxr","application/x-director"),t("cst","application/x-director"),t("cct","application/x-director"),t("cxt","application/x-director"),t("w3d","application/x-director"),t("fgd","application/x-director"),t("swa","application/x-director"),t("wad","application/x-doom"),t("ncx","application/x-dtbncx+xml"),t("dtb","application/x-dtbook+xml"),t("res","application/x-dtbresource+xml"),t("dvi","application/x-dvi"),t("evy","application/x-envoy"),t("eva","application/x-eva"),t("bdf","application/x-font-bdf"),t("gsf","application/x-font-ghostscript"),t("psf","application/x-font-linux-psf"),t("otf","application/x-font-otf"),t("pcf","application/x-font-pcf"),t("snf","application/x-font-snf"),t("ttf","application/x-font-ttf"),t("ttc","application/x-font-ttf"),t("pfa","application/x-font-type1"),t("pfb","application/x-font-type1"),t("pfm","application/x-font-type1"),t("afm","application/x-font-type1"),t("woff","application/x-font-woff"),t("arc","application/x-freearc"),t("spl","application/x-futuresplash"),t("gca","application/x-gca-compressed"),t("ulx","application/x-glulx"),t("gnumeric","application/x-gnumeric"),t("gramps","application/x-gramps-xml"),t("gtar","application/x-gtar"),t("hdf","application/x-hdf"),t("install","application/x-install-instructions"),t("iso","application/x-iso9660-image"),t("jnlp","application/x-java-jnlp-file"),t("latex","application/x-latex"),t("lzh","application/x-lzh-compressed"),t("lha","application/x-lzh-compressed"),t("mie","application/x-mie"),t("prc","application/x-mobipocket-ebook"),t("mobi","application/x-mobipocket-ebook"),t("application","application/x-ms-application"),t("lnk","application/x-ms-shortcut"),t("wmd","application/x-ms-wmd"),t("wmz","application/x-ms-wmz"),t("xbap","application/x-ms-xbap"),t("mdb","application/x-msaccess"),t("obd","application/x-msbinder"),t("crd","application/x-mscardfile"),t("clp","application/x-msclip"),t("exe","application/x-msdownload"),t("dll","application/x-msdownload"),t("com","application/x-msdownload"),t("bat","application/x-msdownload"),t("msi","application/x-msdownload"),t("mvb","application/x-msmediaview"),t("m13","application/x-msmediaview"),t("m14","application/x-msmediaview"),t("wmf","application/x-msmetafile"),t("wmz","application/x-msmetafile"),t("emf","application/x-msmetafile"),t("emz","application/x-msmetafile"),t("mny","application/x-msmoney"),t("pub","application/x-mspublisher"),t("scd","application/x-msschedule"),t("trm","application/x-msterminal"),t("wri","application/x-mswrite"),t("nc","application/x-netcdf"),t("cdf","application/x-netcdf"),t("nzb","application/x-nzb"),t("p12","application/x-pkcs12"),t("pfx","application/x-pkcs12"),t("p7b","application/x-pkcs7-certificates"),t("spc","application/x-pkcs7-certificates"),t("p7r","application/x-pkcs7-certreqresp"),t("rar","application/x-rar-compressed"),t("ris","application/x-research-info-systems"),t("sh","application/x-sh"),t("shar","application/x-shar"),t("swf","application/x-shockwave-flash"),t("xap","application/x-silverlight-app"),t("sql","application/x-sql"),t("sit","application/x-stuffit"),t("sitx","application/x-stuffitx"),t("srt","application/x-subrip"),t("sv4cpio","application/x-sv4cpio"),t("sv4crc","application/x-sv4crc"),t("t3","application/x-t3vm-image"),t("gam","application/x-tads"),t("tar","application/x-tar"),t("tcl","application/x-tcl"),t("tex","application/x-tex"),t("tfm","application/x-tex-tfm"),t("texinfo","application/x-texinfo"),t("texi","application/x-texinfo"),t("obj","application/x-tgif"),t("ustar","application/x-ustar"),t("src","application/x-wais-source"),t("der","application/x-x509-ca-cert"),t("crt","application/x-x509-ca-cert"),t("fig","application/x-xfig"),t("xlf","application/x-xliff+xml"),t("xpi","application/x-xpinstall"),t("xz","application/x-xz"),t("z1","application/x-zmachine"),t("z2","application/x-zmachine"),t("z3","application/x-zmachine"),t("z4","application/x-zmachine"),t("z5","application/x-zmachine"),t("z6","application/x-zmachine"),t("z7","application/x-zmachine"),t("z8","application/x-zmachine"),t("xaml","application/xaml+xml"),t("xdf","application/xcap-diff+xml"),t("xenc","application/xenc+xml"),t("xhtml","application/xhtml+xml"),t("xht","application/xhtml+xml"),t("xml","application/xml"),t("xsl","application/xml"),t("dtd","application/xml-dtd"),t("xop","application/xop+xml"),t("xpl","application/xproc+xml"),t("xslt","application/xslt+xml"),t("xspf","application/xspf+xml"),t("mxml","application/xv+xml"),t("xhvml","application/xv+xml"),t("xvml","application/xv+xml"),t("xvm","application/xv+xml"),t("yang","application/yang"),t("yin","application/yin+xml"),t("zip","application/zip"),t("adp","audio/adpcm"),t("au","audio/basic"),t("snd","audio/basic"),t("mid","audio/midi"),t("midi","audio/midi"),t("kar","audio/midi"),t("rmi","audio/midi"),t("mp4a","audio/mp4"),t("mpga","audio/mpeg"),t("mp2","audio/mpeg"),t("mp2a","audio/mpeg"),t("mp3","audio/mpeg"),t("m2a","audio/mpeg"),t("m3a","audio/mpeg"),t("oga","audio/ogg"),t("ogg","audio/ogg"),t("spx","audio/ogg"),t("s3m","audio/s3m"),t("sil","audio/silk"),t("uva","audio/vnd.dece.audio"),t("uvva","audio/vnd.dece.audio"),t("eol","audio/vnd.digital-winds"),t("dra","audio/vnd.dra"),t("dts","audio/vnd.dts"),t("dtshd","audio/vnd.dts.hd"),t("lvp","audio/vnd.lucent.voice"),t("pya","audio/vnd.ms-playready.media.pya"),t("ecelp4800","audio/vnd.nuera.ecelp4800"),t("ecelp7470","audio/vnd.nuera.ecelp7470"),t("ecelp9600","audio/vnd.nuera.ecelp9600"),t("rip","audio/vnd.rip"),t("weba","audio/webm"),t("aac","audio/aac"),t("aif","audio/x-aiff"),t("aiff","audio/x-aiff"),t("aifc","audio/x-aiff"),t("caf","audio/x-caf"),t("flac","audio/x-flac"),t("mka","audio/x-matroska"),t("m3u","audio/x-mpegurl"),t("wax","audio/x-ms-wax"),t("wma","audio/x-ms-wma"),t("ram","audio/x-pn-realaudio"),t("ra","audio/x-pn-realaudio"),t("rmp","audio/x-pn-realaudio-plugin"),t("wav","audio/x-wav"),t("xm","audio/xm"),t("cdx","chemical/x-cdx"),t("cif","chemical/x-cif"),t("cmdf","chemical/x-cmdf"),t("cml","chemical/x-cml"),t("csml","chemical/x-csml"),t("xyz","chemical/x-xyz"),t("bmp","image/bmp"),t("cgm","image/cgm"),t("g3","image/g3fax"),t("gif","image/gif"),t("ief","image/ief"),t("jpeg","image/jpeg"),t("jpg","image/jpeg"),t("jpe","image/jpeg"),t("ktx","image/ktx"),t("png","image/png"),t("btif","image/prs.btif"),t("sgi","image/sgi"),t("svg","image/svg+xml");t("svgz","image/svg+xml"),t("tiff","image/tiff"),t("tif","image/tiff"),t("psd","image/vnd.adobe.photoshop"),t("uvi","image/vnd.dece.graphic"),t("uvvi","image/vnd.dece.graphic"),t("uvg","image/vnd.dece.graphic"),t("uvvg","image/vnd.dece.graphic"),t("sub","image/vnd.dvb.subtitle"),t("djvu","image/vnd.djvu"),t("djv","image/vnd.djvu"),t("dwg","image/vnd.dwg"),t("dxf","image/vnd.dxf"),t("fbs","image/vnd.fastbidsheet"),t("fpx","image/vnd.fpx"),t("fst","image/vnd.fst"),t("mmr","image/vnd.fujixerox.edmics-mmr"),t("rlc","image/vnd.fujixerox.edmics-rlc"),t("mdi","image/vnd.ms-modi"),t("wdp","image/vnd.ms-photo"),t("npx","image/vnd.net-fpx"),t("wbmp","image/vnd.wap.wbmp"),t("xif","image/vnd.xiff"),t("webp","image/webp"),t("3ds","image/x-3ds"),t("ras","image/x-cmu-raster"),t("cmx","image/x-cmx"),t("fh","image/x-freehand"),t("fhc","image/x-freehand"),t("fh4","image/x-freehand"),t("fh5","image/x-freehand"),t("fh7","image/x-freehand"),t("ico","image/x-icon"),t("sid","image/x-mrsid-image"),t("pcx","image/x-pcx"),t("pic","image/x-pict"),t("pct","image/x-pict"),t("pnm","image/x-portable-anymap"),t("pbm","image/x-portable-bitmap"),t("pgm","image/x-portable-graymap"),t("ppm","image/x-portable-pixmap"),t("rgb","image/x-rgb"),t("tga","image/x-tga"),t("xbm","image/x-xbitmap"),t("xpm","image/x-xpixmap"),t("xwd","image/x-xwindowdump"),t("eml","message/rfc822"),t("mime","message/rfc822"),t("igs","model/iges"),t("iges","model/iges"),t("msh","model/mesh"),t("mesh","model/mesh"),t("silo","model/mesh"),t("dae","model/vnd.collada+xml"),t("dwf","model/vnd.dwf"),t("gdl","model/vnd.gdl"),t("gtw","model/vnd.gtw"),t("mts","model/vnd.mts"),t("vtu","model/vnd.vtu"),t("wrl","model/vrml"),t("vrml","model/vrml"),t("x3db","model/x3d+binary"),t("x3dbz","model/x3d+binary"),t("x3dv","model/x3d+vrml"),t("x3dvz","model/x3d+vrml"),t("x3d","model/x3d+xml"),t("x3dz","model/x3d+xml"),t("appcache","text/cache-manifest"),t("ics","text/calendar"),t("ifb","text/calendar"),t("cmd","text/cmd"),t("css","text/css"),t("csv","text/csv"),t("html","text/html"),t("htm","text/html"),t("n3","text/n3"),t("txt","text/plain"),t("text","text/plain"),t("conf","text/plain"),t("def","text/plain"),t("list","text/plain"),t("log","text/plain"),t("in","text/plain"),t("js","text/plain"),t("dsc","text/prs.lines.tag"),t("rtx","text/richtext"),t("sgml","text/sgml"),t("sgm","text/sgml"),t("tsv","text/tab-separated-values"),t("t","text/troff"),t("tr","text/troff"),t("roff","text/troff"),t("man","text/troff"),t("me","text/troff"),t("ms","text/troff"),t("ttl","text/turtle"),t("uri","text/uri-list"),t("uris","text/uri-list"),t("urls","text/uri-list"),t("vcard","text/vcard"),t("curl","text/vnd.curl"),t("dcurl","text/vnd.curl.dcurl"),t("scurl","text/vnd.curl.scurl"),t("mcurl","text/vnd.curl.mcurl"),t("sub","text/vnd.dvb.subtitle"),t("fly","text/vnd.fly"),t("flx","text/vnd.fmi.flexstor"),t("gv","text/vnd.graphviz"),t("3dml","text/vnd.in3d.3dml"),t("spot","text/vnd.in3d.spot"),t("jad","text/vnd.sun.j2me.app-descriptor"),t("wml","text/vnd.wap.wml"),t("wmls","text/vnd.wap.wmlscript"),t("s","text/x-asm"),t("asm","text/x-asm"),t("c","text/x-c"),t("cc","text/x-c"),t("cxx","text/x-c"),t("cpp","text/x-c"),t("h","text/x-c"),t("hh","text/x-c"),t("dic","text/x-c"),t("f","text/x-fortran"),t("for","text/x-fortran"),t("f77","text/x-fortran"),t("f90","text/x-fortran"),t("java","text/x-java-source"),t("opml","text/x-opml"),t("p","text/x-pascal"),t("pas","text/x-pascal"),t("nfo","text/x-nfo"),t("etx","text/x-setext"),t("sfv","text/x-sfv"),t("uu","text/x-uuencode"),t("vcs","text/x-vcalendar"),t("vcf","text/x-vcard"),t("xml","text/xml"),t("xsl","text/xml"),t("dtd","text/xml-dtd"),t("3gp","video/3gpp"),t("3g2","video/3gpp2"),t("h261","video/h261"),t("h263","video/h263"),t("h264","video/h264"),t("jpgv","video/jpeg"),t("jpm","video/jpm"),t("jpgm","video/jpm"),t("mj2","video/mj2"),t("mjp2","video/mj2"),t("mp4","video/mp4"),t("mp4v","video/mp4"),t("mpg4","video/mp4"),t("mpeg","video/mpeg"),t("mpg","video/mpeg"),t("mpe","video/mpeg"),t("m1v","video/mpeg"),t("m2v","video/mpeg"),t("ogv","video/ogg"),t("qt","video/quicktime"),t("mov","video/quicktime"),t("uvh","video/vnd.dece.hd"),t("uvvh","video/vnd.dece.hd"),t("uvm","video/vnd.dece.mobile"),t("uvvm","video/vnd.dece.mobile"),t("uvp","video/vnd.dece.pd"),t("uvvp","video/vnd.dece.pd"),t("uvs","video/vnd.dece.sd"),t("uvvs","video/vnd.dece.sd"),t("uvv","video/vnd.dece.video"),t("uvvv","video/vnd.dece.video"),t("dvb","video/vnd.dvb.file"),t("fvt","video/vnd.fvt"),t("mxu","video/vnd.mpegurl"),t("m4u","video/vnd.mpegurl"),t("pyv","video/vnd.ms-playready.media.pyv"),t("uvu","video/vnd.uvvu.mp4"),t("uvvu","video/vnd.uvvu.mp4"),t("viv","video/vnd.vivo"),t("webm","video/webm"),t("f4v","video/x-f4v"),t("fli","video/x-fli"),t("flv","video/x-flv"),t("m4v","video/x-m4v"),t("mkv","video/x-matroska"),t("mk3d","video/x-matroska"),t("mks","video/x-matroska"),t("mng","video/x-mng"),t("asf","video/x-ms-asf"),t("asx","video/x-ms-asf"),t("vob","video/x-ms-vob"),t("wm","video/x-ms-wm"),t("wmv","video/x-ms-wmv"),t("wmx","video/x-ms-wmx"),t("wvx","video/x-ms-wvx"),t("avi","video/x-msvideo"),t("movie","video/x-sgi-movie"),t("smv","video/x-smv"),t("ice","x-conference/x-cooltalk")}},t.$init=function(){t.FNCFormatSettings.$assign(pas.SysUtils.TFormatSettings.Create()),t.FNCFormatSettings.DecimalSeparator=".",t.FNCFormatSettings.ThousandSeparator=",",e.FMimeTypes=pas.Classes.TStringList.$create("Create$1"),e.RegisterMimeTypes()}}),[]),rtl.module("WEBLib.TMSFNCPersistence",["System","Classes","TypInfo","SysUtils","WEBLib.TMSFNCTypes"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCPersistence",pas.System.TObject,(function(){this.ClassTypeVariable="",this.IgnoreExceptions=!1})),t.$init=function(){t.TTMSFNCPersistence.ClassTypeVariable="$type",t.TTMSFNCPersistence.IgnoreExceptions=!1}}),["WEBLib.Controls","WEBLib.Graphics","JS","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCTypes",["System","Types","Classes","WEBLib.Graphics","SysUtils","WEBLib.Controls","Math"],(function(){"use strict";var t=this;this.TMSPlatformsWeb=0,this.KEY_ESCAPE=27,this.KEY_TAB=9,this.KEY_UP=38,this.KEY_DOWN=40,this.KEY_RIGHT=39,this.KEY_LEFT=37,this.KEY_HOME=36,this.KEY_END=35,this.KEY_RETURN=13,this.KEY_SPACE=32,this.KEY_F2=113,this.KEY_F4=115,rtl.recNewT(this,"TSizeF",(function(){this.cx=0,this.cy=0,this.$eq=function(t){return this.cx===t.cx&&this.cy===t.cy},this.$assign=function(t){return this.cx=t.cx,this.cy=t.cy,this}})),rtl.recNewT(this,"TPointF",(function(){this.X=0,this.Y=0,this.$eq=function(t){return this.X===t.X&&this.Y===t.Y},this.$assign=function(t){return this.X=t.X,this.Y=t.Y,this}})),rtl.recNewT(this,"TRectF",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this};var e=t.$rtti.$Record("TRectF",{});e.addField("Left",rtl.double),e.addField("Top",rtl.double),e.addField("Right",rtl.double),e.addField("Bottom",rtl.double)})),rtl.createClass(this,"TTMSFNCBitmap",pas["WEBLib.Graphics"].TBitmap,(function(){})),rtl.createClass(this,"TTMSFNCMargins",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FRight=0,this.FBottom=0,this.FTop=0,this.FLeft=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetBottom=function(t){this.FBottom!==t&&(this.FBottom=t,this.Changed())},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.Changed())},this.SetRight=function(t){this.FRight!==t&&(this.FRight=t,this.Changed())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.Changed())},this.IsLeftStored=function(){return 0!==this.FLeft},this.IsTopStored=function(){return 0!==this.FTop},this.IsRightStored=function(){return 0!==this.FRight},this.IsBottomStored=function(){return 0!==this.FBottom},this.Changed=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return this.FLeft=0,this.FBottom=0,this.FRight=0,this.FTop=0,this},this.Assign=function(e){t.TTMSFNCMargins.isPrototypeOf(e)&&(this.FLeft=rtl.as(e,t.TTMSFNCMargins).FLeft,this.FTop=rtl.as(e,t.TTMSFNCMargins).FTop,this.FRight=rtl.as(e,t.TTMSFNCMargins).FRight,this.FBottom=rtl.as(e,t.TTMSFNCMargins).FBottom)},this.Empty=function(){var e=t.TRectF.$new();return e.$assign(t.RectF(this.FLeft,this.FTop,this.FRight,this.FBottom)),t.RectIsEmpty(e)},this.Rect=function(){var e=t.TRectF.$new();return e.$assign(t.RectF(this.FLeft,this.FTop,this.FRight,this.FBottom)),e};var e=this.$rtti;e.addMethod("Create$1",2,[]),e.addProperty("Left",14,rtl.double,"FLeft","SetLeft",{stored:"IsLeftStored"}),e.addProperty("Top",14,rtl.double,"FTop","SetTop",{stored:"IsTopStored"}),e.addProperty("Right",14,rtl.double,"FRight","SetRight",{stored:"IsRightStored"}),e.addProperty("Bottom",14,rtl.double,"FBottom","SetBottom",{stored:"IsBottomStored"}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange")})),rtl.createClass(this,"TTMSFNCScaledBitmap",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FBitmap=null,this.FScale=0,this.FBitmapName=""},this.$final=function(){this.FBitmap=void 0,pas.Classes.TCollectionItem.$final.call(this)},this.IsScaleStored=function(){return 1!==this.FScale},this.SetBitmap=function(t){this.FBitmap!==t&&(this.FBitmap.Assign(t),this.Changed(!1))},this.SetScale=function(t){this.FScale!==t&&(this.FScale=t,this.Changed(!1))},this.SetBitmapName=function(t){this.FBitmapName!==t&&(this.FBitmapName=t,this.Changed(!1))},this.BitmapChanged=function(t){this.Changed(!1)},this.Create$1=function(e){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FBitmap=t.TTMSFNCBitmap.$create("Create$3"),this.FBitmap.FOnChange=rtl.createCallback(this,"BitmapChanged"),this.FScale=1,this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas.Classes.TCollectionItem.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCScaledBitmap.isPrototypeOf(e)&&(this.FBitmap.Assign(rtl.as(e,t.TTMSFNCScaledBitmap).FBitmap),this.FBitmapName=rtl.as(e,t.TTMSFNCScaledBitmap).FBitmapName,this.FScale=rtl.as(e,t.TTMSFNCScaledBitmap).FScale)};var e=this.$rtti;e.addMethod("Create$1",2,[["ACollection",pas.Classes.$rtti.TCollection]]),e.addProperty("Bitmap",2,t.$rtti.TTMSFNCBitmap,"FBitmap","SetBitmap"),e.addProperty("BitmapName",2,rtl.string,"FBitmapName","SetBitmapName"),e.addProperty("Scale",14,rtl.double,"FScale","SetScale",{stored:"IsScaleStored"})})),rtl.createClass(this,"TTMSFNCScaledBitmaps",pas.Classes.TOwnedCollection,(function(){this.$init=function(){pas.Classes.TOwnedCollection.$init.call(this),this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TOwnedCollection.$final.call(this)},this.GetItems=function(t){return this.GetItem(t)},this.Update=function(t){pas.Classes.TCollection.Update.apply(this,arguments),null!=this.FOnChange&&this.FOnChange(this)},this.Create$3=function(e){return pas.Classes.TOwnedCollection.Create$2.call(this,e,t.TTMSFNCScaledBitmap),this},this.Add$1=function(t){var e=null;return(e=pas.Classes.TCollection.Add.call(this)).SetScale(t),e},this.AddBitmapFromResource$1=function(t,e,i){var s=null;return(s=this.Add$1(i)).FBitmap.LoadFromResource$1(t,e),s},this.GetItemByScale=function(t){var e=null,i=0,s=null,n=null,o=0;e=null,s=null,o=0;for(var a=0,r=this.GetCount()-1;a<=r;a++){if(i=a,(n=this.GetItems(i)).FScale===t){e=n;break}n.FScale!==t&&n.FScale>o&&(s=n,o=n.FScale)}return null===e&&(e=s),e},this.$rtti.addMethod("Create$3",2,[["AOwner",pas.Classes.$rtti.TPersistent]])})),rtl.createClass(this,"TTMSFNCOwnedCollection",pas.Classes.TOwnedCollection,(function(){})),this.InflateRectEx=function(t,e,i){t.Left=t.Left-e,t.Right=t.Right+e,t.Top=t.Top-i,t.Bottom=t.Bottom+i},this.OffsetRectEx$1=function(t,e,i){return t.Left=t.Left+e,t.Right=t.Right+e,t.Top=t.Top+i,t.Bottom=t.Bottom+i,!0,!0},this.PtInRectEx=function(t,e){return e.X>=t.Left&&e.X<t.Right&&e.Y>=t.Top&&e.Y<t.Bottom},this.IntersectRectEx=function(t,e){return t.Left<e.Right&&t.Right>e.Left&&t.Top<e.Bottom&&t.Bottom>e.Top},this.IntersectRectEx$1=function(e,i,s){var n,o=t.TRectF.$new();return o.$assign(i),s.Left>i.Left&&(o.Left=s.Left),s.Top>i.Top&&(o.Top=s.Top),s.Right<i.Right&&(o.Right=s.Right),s.Bottom<i.Bottom&&(o.Bottom=s.Bottom),(n=!t.RectIsEmpty(o))||(o.Top=0,o.Bottom=0,o.Left=0,o.Right=0),e.$assign(o),n},this.RectWidthEx$1=function(t){return t.Right-t.Left},this.RectHeightEx$1=function(t){return t.Bottom-t.Top},this.RectCenterEx$1=function(e,i){var s=t.TRectF.$new();return t.OffsetRectEx$1(e,-e.Left,-e.Top),t.OffsetRectEx$1(e,Math.round((t.RectWidthEx$1(i)-t.RectWidthEx$1(e))/2),Math.round((t.RectHeightEx$1(i)-t.RectHeightEx$1(e))/2)),t.OffsetRectEx$1(e,i.Left,i.Top),s.$assign(e),s},this.RectCenterAtEx=function(e,i){var s=t.TRectF.$new();return s.$assign(e),t.RectCenterEx$1(s,i),s},this.RectSnapToPixelEx=function(e,i,s){var n=t.TRectF.$new(),o=0,a=0;return o=i<=0?1:i,n.Left=pas.System.Trunc(e.Left*o)/o,n.Top=pas.System.Trunc(e.Top*o)/o,n.Right=n.Left+Math.round((e.Right-e.Left)*o)/o,n.Bottom=n.Top+Math.round((e.Bottom-e.Top)*o)/o,s&&(a=1/(2*o),t.OffsetRectEx$1(n,a,a)),n},this.RectFitIntoEx=function(e,i,s){var n=t.TRectF.$new();return i.Right-i.Left<=0||i.Bottom-i.Top<=0?(s.set(1),e):((e.Right-e.Left)/(i.Right-i.Left)>(e.Bottom-e.Top)/(i.Bottom-i.Top)?s.set((e.Right-e.Left)/(i.Right-i.Left)):s.set((e.Bottom-e.Top)/(i.Bottom-i.Top)),n.$assign(t.RectF(0,0,(e.Right-e.Left)/s.get(),(e.Bottom-e.Top)/s.get())),t.RectCenterEx$1(n,i),n)},this.RectFitIntoEx$1=function(e,i){var s=t.TRectF.$new(),n=0;return s.$assign(t.RectFitIntoEx(e,i,{get:function(){return n},set:function(t){n=t}})),s},this.GetPointLength=function(t){return Math.sqrt(pas.System.Sqr$1(t.X)+pas.System.Sqr$1(t.Y))},this.CenterPointEx=function(e){var i=t.TPointF.$new();return i.X=(e.Right-e.Left)/2+e.Left,i.Y=(e.Bottom-e.Top)/2+e.Top,i},this.RectIsEmpty=function(t){return t.Right<t.Left||pas.Math.SameValue(t.Right,t.Left,0)||t.Bottom<t.Top||pas.Math.SameValue(t.Bottom,t.Top,0)},this.RectF=function(e,i,s,n){var o=t.TRectF.$new();return o.Left=e,o.Top=i,o.Bottom=n,o.Right=s,o},this.PointF=function(e,i){var s=t.TPointF.$new();return s.X=e,s.Y=i,s},this.BitmapToDrawBitmap=function(t){var e=null;return e=null,null!=t&&(e=t),e},this.IsBitmapEmpty=function(e){var i=!1,s=null;return i=!0,null!=e&&null!=(s=t.BitmapToDrawBitmap(e))&&(i=s.Empty()),i},this.HInstance=function(){return 0,0}}),["WEBLib.TMSFNCUtils","WEBLib.TMSFNCPersistence","JS"]),rtl.module("WEBLib.TMSFNCGraphicsTypes",["System","Classes","Types","WEBLib.TMSFNCTypes","WEBLib.Graphics"],(function(){"use strict";var t=this,e=t.$impl;this.PathPosition=.001,this.gcAliceblue=16775408,this.gcAntiquewhite=14150650,this.gcAqua=16776960,this.gcAquamarine=13959039,this.gcAzure=16777200,this.gcBeige=14480885,this.gcBisque=12903679,this.gcBlack=0,this.gcBlanchedalmond=13495295,this.gcBlue=16711680,this.gcBlueviolet=14822282,this.gcBrown=2763429,this.gcBurlywood=8894686,this.gcCadetblue=10526303,this.gcChartreuse=65407,this.gcChocolate=1993170,this.gcCoral=5275647,this.gcCornflowerblue=15570276,this.gcCornsilk=14481663,this.gcCrimson=3937500,this.gcCyan=16776960,this.gcDarkblue=9109504,this.gcDarkcyan=9145088,this.gcDarkgoldenrod=755384,this.gcDarkgray=11119017,this.gcDarkgreen=25600,this.gcDarkgrey=11119017,this.gcDarkkhaki=7059389,this.gcDarkmagenta=9109643,this.gcDarkolivegreen=3107669,this.gcDarkorange=36095,this.gcDarkorchid=13382297,this.gcDarkred=139,this.gcDarksalmon=8034025,this.gcDarkseagreen=9419919,this.gcDarkslateblue=9125192,this.gcDarkslategray=5197615,this.gcDarkslategrey=5197615,this.gcDarkturquoise=13749760,this.gcDarkviolet=13828244,this.gcDeeppink=9639167,this.gcDeepskyblue=16760576,this.gcDimgray=6908265,this.gcDimgrey=6908265,this.gcDodgerblue=16748574,this.gcFirebrick=2237106,this.gcFloralwhite=15792895,this.gcForestgreen=2263842,this.gcFuchsia=16711935,this.gcGainsboro=14474460,this.gcGhostwhite=16775416,this.gcGold=55295,this.gcGoldenrod=2139610,this.gcGray=8421504,this.gcGreen=32768,this.gcGreenyellow=3145645,this.gcGrey=8421504,this.gcHoneydew=15794160,this.gcHotpink=11823615,this.gcIndianred=6053069,this.gcIndigo=8519755,this.gcIvory=15794175,this.gcKhaki=9234160,this.gcLavender=16443110,this.gcLavenderblush=16118015,this.gcLawngreen=64636,this.gcLemonchiffon=13499135,this.gcLightblue=15128749,this.gcLightcoral=8421616,this.gcLightcyan=16777184,this.gcLightgoldenrodyellow=13826810,this.gcLightgray=13882323,this.gcLightgreen=9498256,this.gcLightgrey=13882323,this.gcLightpink=12695295,this.gcLightsalmon=8036607,this.gcLightseagreen=11186720,this.gcLightskyblue=16436871,this.gcLightslategray=10061943,this.gcLightslategrey=10061943,this.gcLightsteelblue=14599344,this.gcLightyellow=14745599,this.gcLime=65280,this.gcLimegreen=3329330,this.gcLinen=15134970,this.gcMagenta=16711935,this.gcMaroon=128,this.gcMediumaquamarine=11193702,this.gcMediumblue=13434880,this.gcMediumorchid=13850042,this.gcMediumpurple=14381203,this.gcMediumseagreen=7451452,this.gcMediumslateblue=15624315,this.gcMediumspringgreen=10156544,this.gcMediumturquoise=13422920,this.gcMediumvioletred=8721863,this.gcMidnightblue=7346457,this.gcMintcream=16449525,this.gcMistyrose=14804223,this.gcMoccasin=11920639,this.gcNavajowhite=11394815,this.gcNavy=8388608,this.gcOldlace=15136253,this.gcOlive=32896,this.gcOlivedrab=2330219,this.gcOrange=42495,this.gcOrangered=17919,this.gcOrchid=14053594,this.gcPalegoldenrod=11200750,this.gcPalegreen=10025880,this.gcPaleturquoise=15658671,this.gcPalevioletred=9662683,this.gcPapayawhip=14020607,this.gcPeachpuff=12180223,this.gcPeru=4163021,this.gcPink=13353215,this.gcPlum=14524637,this.gcPowderblue=15130800,this.gcPurple=8388736,this.gcRed=255,this.gcRosybrown=9408444,this.gcRoyalblue=14772545,this.gcSaddlebrown=1262987,this.gcSalmon=7504122,this.gcSandybrown=6333684,this.gcSeagreen=5737262,this.gcSeashell=15660543,this.gcSienna=2970272,this.gcSilver=12632256,this.gcSkyblue=15453831,this.gcSlateblue=13458026,this.gcSlategray=9470064,this.gcSlategrey=9470064,this.gcSnow=16448255,this.gcSpringgreen=8388352,this.gcSteelblue=11829830,this.gcTan=9221330,this.gcTeal=8421376,this.gcThistle=14204888,this.gcTomato=4678655,this.gcTurquoise=13688896,this.gcViolet=15631086,this.gcWheat=11788021,this.gcWhite=16777215,this.gcWhitesmoke=16119285,this.gcYellow=65535,this.gcYellowgreen=3329434,this.gcNull=-1,this.TTMSFNCGraphicsStrokeKind={0:"gskNone",gskNone:0,1:"gskSolid",gskSolid:1,2:"gskDash",gskDash:2,3:"gskDot",gskDot:3,4:"gskDashDot",gskDashDot:4,5:"gskDashDotDot",gskDashDotDot:5},this.$rtti.$Enum("TTMSFNCGraphicsStrokeKind",{minvalue:0,maxvalue:5,ordtype:1,enumtype:this.TTMSFNCGraphicsStrokeKind}),this.TTMSFNCGraphicsTextureMode={0:"gtmOriginal",gtmOriginal:0,1:"gtmFit",gtmFit:1,2:"gtmStretch",gtmStretch:2,3:"gtmCenter",gtmCenter:3,4:"gtmTile",gtmTile:4},this.$rtti.$Enum("TTMSFNCGraphicsTextureMode",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TTMSFNCGraphicsTextureMode}),this.TTMSFNCGraphicsFillKind={0:"gfkNone",gfkNone:0,1:"gfkSolid",gfkSolid:1,2:"gfkGradient",gfkGradient:2,3:"gfkTexture",gfkTexture:3},this.$rtti.$Enum("TTMSFNCGraphicsFillKind",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTMSFNCGraphicsFillKind}),this.TTMSFNCGraphicsFillGradientMode={0:"gfgmDefault",gfgmDefault:0,1:"gfgmCollection",gfgmCollection:1},this.TTMSFNCGraphicsFillGradientType={0:"gfgtLinear",gfgtLinear:0,1:"gfgtRadial",gfgtRadial:1},this.TTMSFNCGraphicsFillOrientation={0:"gfoHorizontal",gfoHorizontal:0,1:"gfoVertical",gfoVertical:1,2:"gfoCustom",gfoCustom:2},this.$rtti.$Enum("TTMSFNCGraphicsFillOrientation",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCGraphicsFillOrientation}),this.TTMSFNCGraphicsTextAlign={0:"gtaCenter",gtaCenter:0,1:"gtaLeading",gtaLeading:1,2:"gtaTrailing",gtaTrailing:2},this.$rtti.$Enum("TTMSFNCGraphicsTextAlign",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCGraphicsTextAlign}),this.TTMSFNCGraphicsTextTrimming={0:"gttNone",gttNone:0,1:"gttCharacter",gttCharacter:1,2:"gttWord",gttWord:2},this.$rtti.$Enum("TTMSFNCGraphicsTextTrimming",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCGraphicsTextTrimming}),this.TTMSFNCGraphicsSide={0:"gsLeft",gsLeft:0,1:"gsTop",gsTop:1,2:"gsRight",gsRight:2,3:"gsBottom",gsBottom:3},this.TTMSFNCGraphicsTextQuality={0:"gtqDefault",gtqDefault:0,1:"gtqAntiAliasing",gtqAntiAliasing:1,2:"gtqClearType",gtqClearType:2},this.AllSides=rtl.createSet(0,1,2,3),rtl.recNewT(this,"TTMSFNCGraphicsMatrix",(function(){this.m11=0,this.m12=0,this.m13=0,this.m21=0,this.m22=0,this.m23=0,this.m31=0,this.m32=0,this.m33=0,this.$eq=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m21===t.m21&&this.m22===t.m22&&this.m23===t.m23&&this.m31===t.m31&&this.m32===t.m32&&this.m33===t.m33},this.$assign=function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this}})),this.$rtti.$Class("TTMSFNCGraphicsStroke"),this.$rtti.$Class("TTMSFNCGraphicsFill"),this.$rtti.$Class("TTMSFNCGraphicsFont"),rtl.createClass(this,"TTMSFNCGraphicsSaveState",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FSaveDC=0,this.FFont=null,this.FStroke=null,this.FFill=null},this.$final=function(){this.FFont=void 0,this.FStroke=void 0,this.FFill=void 0,pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FFill=t.TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FStroke=t.TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FFont=t.TTMSFNCGraphicsFont.$create("Create$2"),this},this.Destroy=function(){rtl.free(this,"FFill"),rtl.free(this,"FStroke"),rtl.free(this,"FFont"),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[])})),rtl.createClass(this,"TTMSFNCGraphicsFillGradientItem",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FColor=0,this.FPosition=0,this.FOpacity=0},this.IsPositionStored=function(){return 0!==this.FPosition},this.SetColor=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColor!==t&&(this.FColor=rtl.rc(t,-9007199254740991,9007199254740991),this.UpdateGradient())},this.SetPosition=function(t){this.FPosition!==t&&(this.FPosition=t,this.UpdateGradient())},this.IsOpacityStored=function(){return 1!==this.FOpacity},this.SetOpacity=function(t){this.FOpacity!==t&&(this.FOpacity=t,this.UpdateGradient())},this.UpdateGradient=function(){t.TTMSFNCGraphicsFillGradientItems.isPrototypeOf(this.FCollection)&&rtl.as(this.FCollection,t.TTMSFNCGraphicsFillGradientItems).UpdateGradient()},this.Create$1=function(t){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FColor=16777215,this.FPosition=0,this.FOpacity=1,this},this.Assign=function(e){t.TTMSFNCGraphicsFillGradientItem.isPrototypeOf(e)?(this.FColor=rtl.rc(rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FColor,-9007199254740991,9007199254740991),this.FOpacity=rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FOpacity,this.FPosition=rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FPosition):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addMethod("Create$1",2,[["ACollection",pas.Classes.$rtti.TCollection]]),e.addProperty("Opacity",14,rtl.double,"FOpacity","SetOpacity",{stored:"IsOpacityStored"}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{Default:16777215}),e.addProperty("Position",14,rtl.double,"FPosition","SetPosition",{stored:"IsPositionStored"})})),rtl.createClass(this,"TTMSFNCGraphicsFillGradientItems",pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection,(function(){this.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$init.call(this),this.FOwner$1=null},this.$final=function(){this.FOwner$1=void 0,pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$final.call(this)},this.UpdateGradient=function(){null!=this.FOwner$1&&this.FOwner$1.Changed()},this.GetGradientClass=function(){return t.TTMSFNCGraphicsFillGradientItem},this.Create$3=function(t){return pas.Classes.TOwnedCollection.Create$2.call(this,t,this.GetGradientClass()),this.FOwner$1=t,this},this.$rtti.addMethod("Create$3",2,[["AOwner",t.$rtti.TTMSFNCCustomGraphicsFill]])})),rtl.createClass(this,"TTMSFNCCustomGraphicsFill",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null,this.FOrientation=0,this.FKind=0,this.FDefaultKind=0,this.FColor=0,this.FDefaultColor=0,this.FColorTo=0,this.FColorMirror=0,this.FColorMirrorTo=0,this.FDefaultColorTo=0,this.FDefaultColorMirror=0,this.FDefaultColorMirrorTo=0,this.FOpacity=0,this.FTexture=null,this.FTextureMode=0,this.FGradientMode=0,this.FGradientItems=null,this.FGradientType=0,this.FGradientAngle=0,this.FGradientCenterPoint=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FGradientCenterColor=0,this.FGradientMatrix=t.TTMSFNCGraphicsMatrix.$new()},this.$final=function(){this.FOnChanged=void 0,this.FTexture=void 0,this.FGradientItems=void 0,this.FGradientCenterPoint=void 0,this.FGradientMatrix=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetKind=function(t){rtl.rc(t,0,3),this.FKind!==t&&(this.FKind=rtl.rc(t,0,3),this.Changed())},this.SetOrientation=function(t){rtl.rc(t,0,2),this.FOrientation!==t&&(this.FOrientation=rtl.rc(t,0,2),this.Changed())},this.SetColor=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColor!==t&&(this.FColor=rtl.rc(t,-9007199254740991,9007199254740991),-1===this.FColor?this.FColor=-1:536870912===this.FColor&&(this.FColor=15790320),this.Changed())},this.SetColorTo=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColorTo!==t&&(this.FColorTo=rtl.rc(t,-9007199254740991,9007199254740991),-1===this.FColorTo?this.FColorTo=-1:536870912===this.FColorTo&&(this.FColorTo=15790320),this.Changed())},this.SetColorMirror=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColorMirror!==t&&(this.FColorMirror=rtl.rc(t,-9007199254740991,9007199254740991),-1===this.FColorMirror?this.FColorMirror=-1:536870912===this.FColorMirror&&(this.FColorMirror=15790320),this.Changed())},this.SetColorMirrorTo=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColorMirrorTo!==t&&(this.FColorMirrorTo=rtl.rc(t,-9007199254740991,9007199254740991),-1===this.FColorMirrorTo?this.FColorMirrorTo=-1:536870912===this.FColorMirrorTo&&(this.FColorMirrorTo=15790320),this.Changed())},this.SetTexture=function(t){this.FTexture!==t&&(this.FTexture.Assign(t),this.Changed())},this.SetTextureMode=function(t){rtl.rc(t,0,4),this.FTextureMode!==t&&(this.FTextureMode=rtl.rc(t,0,4),this.Changed())},this.IsColorStored=function(){return this.FColor!==this.FDefaultColor},this.IsKindStored=function(){return this.FKind!==this.FDefaultKind},this.IsColorMirrorStored=function(){return this.FColorMirror!==this.FDefaultColorMirror},this.IsColorMirrorToStored=function(){return this.FColorMirrorTo!==this.FDefaultColorMirrorTo},this.IsColorToStored=function(){return this.FColorTo!==this.FDefaultColorTo},this.Changed=function(){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.TextureChanged=function(t){this.Changed()},this.Create$1=function(e,i,s,n,o){return rtl.rc(e,0,3),rtl.rc(i,-9007199254740991,9007199254740991),rtl.rc(s,-9007199254740991,9007199254740991),rtl.rc(n,-9007199254740991,9007199254740991),rtl.rc(o,-9007199254740991,9007199254740991),this.FGradientItems=t.TTMSFNCGraphicsFillGradientItems.$create("Create$3",[this]),this.FKind=rtl.rc(e,0,3),this.FDefaultKind=rtl.rc(e,0,3),this.FGradientMatrix.$assign(t.MatrixIdentity()),this.FGradientCenterColor=-1,this.FGradientMode=0,this.FGradientAngle=0,this.FGradientCenterPoint.$assign(pas["WEBLib.TMSFNCTypes"].PointF(0,0)),this.FGradientType=0,this.FColor=rtl.rc(i,-9007199254740991,9007199254740991),this.FDefaultColor=rtl.rc(i,-9007199254740991,9007199254740991),this.FOpacity=1,this.FOrientation=1,this.FColorTo=rtl.rc(s,-9007199254740991,9007199254740991),this.FColorMirror=rtl.rc(n,-9007199254740991,9007199254740991),this.FColorMirrorTo=rtl.rc(o,-9007199254740991,9007199254740991),this.FDefaultColorTo=rtl.rc(s,-9007199254740991,9007199254740991),this.FDefaultColorMirror=rtl.rc(n,-9007199254740991,9007199254740991),this.FDefaultColorMirrorTo=rtl.rc(o,-9007199254740991,9007199254740991),this.FTextureMode=2,this.FTexture=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FTexture.FOnChange=rtl.createCallback(this,"TextureChanged"),this},this.Destroy=function(){rtl.free(this,"FTexture"),rtl.free(this,"FGradientItems"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCCustomGraphicsFill.isPrototypeOf(e)?(this.FColor=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColor,-9007199254740991,9007199254740991),this.FColorTo=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorTo,-9007199254740991,9007199254740991),this.FColorMirror=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorMirror,-9007199254740991,9007199254740991),this.FColorMirrorTo=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorMirrorTo,-9007199254740991,9007199254740991),this.FKind=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FKind,0,3),this.FOrientation=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FOrientation,0,2),this.FOpacity=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FOpacity,this.FTexture.Assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FTexture),this.FTextureMode=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FTextureMode,0,4),this.FGradientMode=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientMode,0,1),this.FGradientAngle=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientAngle,this.FGradientCenterPoint.$assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientCenterPoint),this.FGradientItems.Assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientItems),this.FGradientType=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientType,0,1),this.FGradientCenterColor=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientCenterColor,-9007199254740991,9007199254740991)):t.TTMSFNCCustomGraphicsStroke.isPrototypeOf(e)&&(this.FColor=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FColor,-9007199254740991,9007199254740991),this.FColorTo=-1,this.FColorMirror=-1,this.FColorMirrorTo=-1,this.FKind=1,this.FOrientation=1,this.FOpacity=1),this.Changed()},this.$rtti.addMethod("Create$1",2,[["AKind",t.$rtti.TTMSFNCGraphicsFillKind,2],["AColor",pas["WEBLib.Graphics"].$rtti.TColor,2],["AColorTo",pas["WEBLib.Graphics"].$rtti.TColor,2],["AColorMirror",pas["WEBLib.Graphics"].$rtti.TColor,2],["AColorMirrorTo",pas["WEBLib.Graphics"].$rtti.TColor,2]])})),rtl.createClass(this,"TTMSFNCGraphicsFill",this.TTMSFNCCustomGraphicsFill,(function(){var e=this.$rtti;e.addProperty("OnChanged",0,pas.Classes.$rtti.TNotifyEvent,"FOnChanged","FOnChanged"),e.addProperty("Kind",14,t.$rtti.TTMSFNCGraphicsFillKind,"FKind","SetKind",{stored:"IsKindStored"}),e.addProperty("Orientation",2,t.$rtti.TTMSFNCGraphicsFillOrientation,"FOrientation","SetOrientation",{Default:t.TTMSFNCGraphicsFillOrientation.gfoVertical}),e.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),e.addProperty("ColorTo",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorTo","SetColorTo",{stored:"IsColorToStored"}),e.addProperty("ColorMirror",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorMirror","SetColorMirror",{stored:"IsColorMirrorStored"}),e.addProperty("ColorMirrorTo",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorMirrorTo","SetColorMirrorTo",{stored:"IsColorMirrorToStored"}),e.addProperty("TextureMode",2,t.$rtti.TTMSFNCGraphicsTextureMode,"FTextureMode","SetTextureMode",{Default:t.TTMSFNCGraphicsTextureMode.gtmStretch}),e.addProperty("Texture",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap,"FTexture","SetTexture")})),rtl.createClass(this,"TTMSFNCGraphicsFont",pas["WEBLib.Graphics"].TFont,(function(){this.$init=function(){pas["WEBLib.Graphics"].TFont.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null},this.$final=function(){this.FOnChanged=void 0,pas["WEBLib.Graphics"].TFont.$final.call(this)},this.DoChanged=function(t){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.Create$2=function(){return pas["WEBLib.Graphics"].TFont.Create$1.call(this),this.SetHeight(-11),this.FOnChange=rtl.createCallback(this,"DoChanged"),this},this.Assign=function(t){pas["WEBLib.Graphics"].TFont.Assign.call(this,t),this.DoChanged(this)},this.AssignSource=function(t){this.Assign(t)},this.$rtti.addMethod("Create$2",2,[])})),rtl.createClass(this,"TTMSFNCCustomGraphicsStroke",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null,this.FKind=0,this.FColor=0,this.FWidth=0,this.FOpacity=0,this.FDefaultKind=0,this.FDefaultColor=0},this.$final=function(){this.FOnChanged=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetKind=function(t){rtl.rc(t,0,5),this.FKind!==t&&(this.FKind=rtl.rc(t,0,5),this.Changed())},this.SetColor=function(t){rtl.rc(t,-9007199254740991,9007199254740991),this.FColor!==t&&(this.FColor=rtl.rc(t,-9007199254740991,9007199254740991),-1===this.FColor?this.FColor=-1:536870912===this.FColor&&(this.FColor=15790320),this.Changed())},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed())},this.IsWidthStored=function(){return 1!==this.FWidth},this.IsKindStored=function(){return this.FKind!==this.FDefaultKind},this.IsColorStored=function(){return this.FColor!==this.FDefaultColor},this.Changed=function(){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.Create$1=function(t,e){return rtl.rc(t,0,5),rtl.rc(e,-9007199254740991,9007199254740991),this.FKind=rtl.rc(t,0,5),this.FDefaultKind=rtl.rc(t,0,5),this.FColor=rtl.rc(e,-9007199254740991,9007199254740991),this.FDefaultColor=rtl.rc(e,-9007199254740991,9007199254740991),this.FOpacity=1,this.FWidth=1,this},this.Assign=function(e){t.TTMSFNCCustomGraphicsStroke.isPrototypeOf(e)?(this.FColor=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FColor,-9007199254740991,9007199254740991),this.FKind=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FKind,0,5),this.FOpacity=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FOpacity,this.FWidth=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FWidth):t.TTMSFNCCustomGraphicsFill.isPrototypeOf(e)&&(this.FColor=rtl.rc(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColor,-9007199254740991,9007199254740991),this.FKind=1,this.FOpacity=1,this.FWidth=1),this.Changed()},this.$rtti.addMethod("Create$1",2,[["AKind",t.$rtti.TTMSFNCGraphicsStrokeKind,2],["AColor",pas["WEBLib.Graphics"].$rtti.TColor,2]])})),rtl.createClass(this,"TTMSFNCGraphicsStroke",this.TTMSFNCCustomGraphicsStroke,(function(){var e=this.$rtti;e.addProperty("OnChanged",0,pas.Classes.$rtti.TNotifyEvent,"FOnChanged","FOnChanged"),e.addProperty("Kind",14,t.$rtti.TTMSFNCGraphicsStrokeKind,"FKind","SetKind",{stored:"IsKindStored"}),e.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),e.addProperty("Width",14,rtl.double,"FWidth","SetWidth",{stored:"IsWidthStored"})})),this.TTMSFNCGraphicsPathPointKind={0:"gppMoveTo",gppMoveTo:0,1:"gppLineTo",gppLineTo:1,2:"gppCurveTo",gppCurveTo:2,3:"gppClose",gppClose:3},this.TTMSFNCGraphicsPathCubicBezier$clone=function(t){var e=[];e.length=4;for(var i=0;i<4;i++)e[i]=pas["WEBLib.TMSFNCTypes"].TPointF.$clone(t[i]);return e},rtl.recNewT(this,"TTMSFNCGraphicsPathPoint",(function(){this.Kind=0,this.$new=function(){var t=Object.create(this);return t.Point=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),t},this.$eq=function(t){return this.Kind===t.Kind&&this.Point.$eq(t.Point)},this.$assign=function(t){return this.Kind=t.Kind,this.Point.$assign(t.Point),this}})),this.TTMSFNCGraphicsPathDrawMode={0:"pdmPolygon",pdmPolygon:0,1:"pdmPolyline",pdmPolyline:1,2:"pdmPath",pdmPath:2},rtl.createClass(this,"TTMSFNCGraphicsPathPoints",pas.Classes.TList,(function(){this.GetItem=function(e){rtl.rc(e,-2147483648,2147483647);var i=t.TTMSFNCGraphicsPathPoint.$new();return i.$assign(rtl.getObject(this.Get(e))),i},this.SetItem=function(e,i){rtl.rc(e,-2147483648,2147483647);var s=t.TTMSFNCGraphicsPathPoint.$new();s.$assign(i),this.Put(e,s)}})),this.TTMSFNCGraphicsCorner={0:"gcTopLeft",gcTopLeft:0,1:"gcTopRight",gcTopRight:1,2:"gcBottomLeft",gcBottomLeft:2,3:"gcBottomRight",gcBottomRight:3},this.$rtti.$Enum("TTMSFNCGraphicsCorner",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTMSFNCGraphicsCorner}),this.$rtti.$Set("TTMSFNCGraphicsCorners",{comptype:this.$rtti.TTMSFNCGraphicsCorner}),rtl.createClass(this,"TTMSFNCGraphicsPath",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FStartPoint=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FClippable=!1,this.FPoints=null},this.$final=function(){this.FStartPoint=void 0,this.FPoints=void 0,pas.Classes.TPersistent.$final.call(this)},this.CalculateBezierCoefficients=function(t,e,i,s,n,o,a){s.set(3*(t[1].X-t[0].X)),a.set(3*(t[1].Y-t[0].Y)),i.set(3*(t[2].X-t[1].X)-s.get()),o.set(3*(t[2].Y-t[1].Y)-a.get()),e.set(t[3].X-t[0].X-s.get()-i.get()),n.set(t[3].Y-t[0].Y-a.get()-o.get())},this.GetCount=function(){return rtl.rc(this.FPoints.GetCount(),-2147483648,2147483647)},this.GetPoint=function(e){rtl.rc(e,-2147483648,2147483647);var i=t.TTMSFNCGraphicsPathPoint.$new();return i.$assign(this.FPoints.GetItem(e)),i},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FPoints=t.TTMSFNCGraphicsPathPoints.$create("Create$1"),this},this.Destroy=function(){rtl.free(this,"FPoints"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){var i=0;if(t.TTMSFNCGraphicsPath.isPrototypeOf(e)){this.FPoints.SetCount(e.GetCount());for(var s=0,n=e.GetCount()-1;s<=n;s++)i=s,this.FPoints.SetItem(i,e.GetPoint(i))}else pas.Classes.TPersistent.Assign.apply(this,arguments)},this.PointOnBezier=function(t,e,i,s,n,o,a,r){var l,h,p=pas["WEBLib.TMSFNCTypes"].TPointF.$new();return h=(l=r*r)*r,p.X=e*h+i*l+s*r+t.X,p.Y=n*h+o*l+a*r+t.Y,p},this.CreateBezier=function(t,e){rtl.rc(e,-2147483648,2147483647);var i,s=[],n=0,o=0,a=0,r=0,l=0,h=0,p=0,c=0;if(0===e)return s;i=1/(1*e-1),p=0,s=rtl.arraySetLength(s,pas["WEBLib.TMSFNCTypes"].TPointF,e),this.CalculateBezierCoefficients(t,{get:function(){return n},set:function(t){n=t}},{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return r},set:function(t){r=t}},{get:function(){return l},set:function(t){l=t}},{get:function(){return h},set:function(t){h=t}});for(var F=0,u=e-1;F<=u;F++)c=F,rtl.rcArrR(s,c).$assign(this.PointOnBezier(t[0],n,o,a,r,l,h,p)),p+=i;return s};this.GetBounds=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=0,s=t.TTMSFNCGraphicsPathPoint.$new();if(this.FPoints.GetCount()<1)return pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0);e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(65535,65535,-65535,-65535));for(var n=0,o=this.FPoints.GetCount()-1;n<=o;n++)i=n,s.$assign(this.FPoints.GetItem(i)),3!==s.Kind&&(s.Point.X<e.Left&&(e.Left=s.Point.X),s.Point.X>e.Right&&(e.Right=s.Point.X),s.Point.Y<e.Top&&(e.Top=s.Point.Y),s.Point.Y>e.Bottom&&(e.Bottom=s.Point.Y));return pas.Math.SameValue(e.Right-e.Left,0,.001)&&(e.Right=e.Left+.001),pas.Math.SameValue(e.Bottom-e.Top,0,.001)&&(e.Bottom=e.Top+.001),e},this.MoveTo=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();i.Kind=0,i.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(i)),this.FStartPoint.$assign(this.FPoints.GetItem(this.FPoints.GetCount()-1).Point)},this.LineTo=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();i.Kind=1,i.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(i)),e.X===this.FStartPoint.X&&e.Y===this.FStartPoint.Y&&(this.FClippable=!0)},this.CurveTo=function(e,i,s){var n=t.TTMSFNCGraphicsPathPoint.$new();n.Kind=2,n.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n)),n.Kind=2,n.Point.$assign(i),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n)),n.Kind=2,n.Point.$assign(s),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n))},this.ClosePath=function(){var e=t.TTMSFNCGraphicsPathPoint.$new();e.Kind=3,e.Point.$assign(this.FStartPoint),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(e)),this.FClippable=!0},this.AddEllipse=function(t){var e,i,s,n,o;o=.5522847498,e=(t.Left+t.Right)/2,i=(t.Top+t.Bottom)/2,s=o*((t.Right-t.Left)/2),n=o*((t.Bottom-t.Top)/2),this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i-n),pas["WEBLib.TMSFNCTypes"].PointF(e-s,t.Top),pas["WEBLib.TMSFNCTypes"].PointF(e,t.Top)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s,t.Top),pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i-n),pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i+n),pas["WEBLib.TMSFNCTypes"].PointF(e+s,t.Bottom),pas["WEBLib.TMSFNCTypes"].PointF(e,t.Bottom)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(e-s,t.Bottom),pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i+n),pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i)),this.FClippable=!0},this.AddRectangle=function(t,e,i,s){0===e&&0===i?(this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom))):(2 in s?(this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom-i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-270,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom-i))):this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom)),0 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top+i)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Top+i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-180,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Top))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top)),1 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Top)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Top+i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-90,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top+i))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top)),3 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom-i)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Bottom-i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),0,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Bottom))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom)),2 in s?this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom)):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom))),this.ClosePath(),this.FClippable=!0};this.AddArc=function(t,i,s,n){var o=!1,a=0,r=0,l=0,h=!1;if(s=pas.Math.DegToRad(s),n=pas.Math.DegToRad(n),s=s-2*rtl.rc(pas.System.Trunc(s/(2*Math.PI)),-2147483648,2147483647)*Math.PI,n>=2*Math.PI&&(n=2*Math.PI),n<=-2*Math.PI&&(n=-2*Math.PI),!(Math.abs(n)<1e-10)){a=0,h=!1,o=!0;do{n<0?(l=a,r=-Math.PI/2,(a-=Math.PI/2)<=n+.01&&(r=n-l,h=!0)):(l=a,r=Math.PI/2,(a+=Math.PI/2)>=n-.01&&(r=n-l,h=!0)),e.DrawArcWithBezier(this,t.X,t.Y,i.X,i.Y,s,r,o),o=!1,s+=r}while(!h)}},this.FlattenToPolygon=function(t,e){function i(e){rtl.length(t.get())>0&&pas.Math.SameValue(e.X,rtl.rcArrR(t.get(),rtl.length(t.get())-1).X,.001)&&pas.Math.SameValue(e.Y,rtl.rcArrR(t.get(),rtl.length(t.get())-1).Y,.001)||(t.set(rtl.arraySetLength(t.get(),pas["WEBLib.TMSFNCTypes"].TPointF,rtl.length(t.get())+1)),rtl.rcArrR(t.get(),rtl.length(t.get())-1).$assign(e))}var s=0,n=0,o=[],a=rtl.arraySetLength(null,pas["WEBLib.TMSFNCTypes"].TPointF,4),r=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),l=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),h=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),p=0,c=0,F=0;if(t.set(rtl.arraySetLength(t.get(),pas["WEBLib.TMSFNCTypes"].TPointF,0)),this.FPoints.GetCount()>0)for(p=Math.max(e,.05),s=0;s<this.FPoints.GetCount();){var u=this.FPoints.GetItem(s).Kind;if(0===u)i(this.FPoints.GetItem(s).Point),l.$assign(this.FPoints.GetItem(s).Point),r.$assign(l);else if(1===u)i(this.FPoints.GetItem(s).Point),l.$assign(this.FPoints.GetItem(s).Point);else if(2===u){a[0].$assign(l),a[1].$assign(this.FPoints.GetItem(s).Point),s+=1,a[2].$assign(this.FPoints.GetItem(s).Point),s+=1,a[3].$assign(this.FPoints.GetItem(s).Point),o=this.CreateBezier(a,6),c=0;for(var C=0,d=rtl.length(o)-1-1;C<=d;C++)n=C,h.X=rtl.rcArrR(o,n).X-rtl.rcArrR(o,n+1).X,h.Y=rtl.rcArrR(o,n).Y-rtl.rcArrR(o,n+1).Y,c+=pas["WEBLib.TMSFNCTypes"].GetPointLength(h);if((F=rtl.rc(Math.round(c/p),-2147483648,2147483647))<2)i(a[0]),i(a[3]);else{o=this.CreateBezier(a,F);for(var T=0,m=rtl.length(o)-1;T<=m;T++)n=T,i(rtl.rcArrR(o,n))}l.$assign(this.FPoints.GetItem(s).Point)}else 3===u&&i(r);s+=1}},this.$rtti.addMethod("Create$1",2,[])})),rtl.createClass(this,"TTMSFNCGraphicsColorObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FColor=0},this.Create$1=function(t){return rtl.rc(t,-9007199254740991,9007199254740991),this.FColor=rtl.rc(t,-9007199254740991,9007199254740991),this}})),this.TTMSFNCGraphicsModifyRectMode={0:"gcrmNone",gcrmNone:0,1:"gcrmExpandAll",gcrmExpandAll:1,2:"gcrmShrinkAll",gcrmShrinkAll:2,3:"gcrmShiftRightAndExpandHeight",gcrmShiftRightAndExpandHeight:3,4:"gcrmShiftDownAndExpandWidth",gcrmShiftDownAndExpandWidth:4,5:"gcrmShiftRightAndShrinkHeight",gcrmShiftRightAndShrinkHeight:5,6:"gcrmShiftRightDown",gcrmShiftRightDown:6,7:"gcrmShiftRightUp",gcrmShiftRightUp:7,8:"gcrmShiftLeftUp",gcrmShiftLeftUp:8,9:"gcrmShiftLeftDown",gcrmShiftLeftDown:9,10:"gcrmShiftUpAndExpandWidth",gcrmShiftUpAndExpandWidth:10,11:"gcrmShiftLeftAndExpandHeight",gcrmShiftLeftAndExpandHeight:11},this.TTMSFNCGraphicsModifyPointMode={0:"gcpmNone",gcpmNone:0,1:"gcpmLeftUp",gcpmLeftUp:1,2:"gcpmRightDown",gcpmRightDown:2,3:"gcpmLeftDown",gcpmLeftDown:3,4:"gcpmRightUp",gcpmRightUp:4},this.ModifyRect=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();i.$assign(t);var s=e;return 1===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):2===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)-.5)):3===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):6===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):5===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):4===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):10===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):7===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):8===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)-.5)):9===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)+.5)):11===s&&i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)+.5)),i},this.MakeGraphicsColor=function(t,e,i){rtl.rc(t,0,255),rtl.rc(e,0,255),rtl.rc(i,0,255);return rtl.rc(pas["WEBLib.Graphics"].RGB(t,e,i),-9007199254740991,9007199254740991)},this.Lighter=function(e,i){rtl.rc(e,-9007199254740991,9007199254740991),rtl.rc(i,0,255);var s=0,n=0,o=0;return e=rtl.rc(pas["WEBLib.Graphics"].ColorToRGB(e),-9007199254740991,9007199254740991),s=rtl.rc(pas["WEBLib.Graphics"].GetRValue(e),0,255),n=rtl.rc(pas["WEBLib.Graphics"].GetGValue(e),0,255),o=rtl.rc(pas["WEBLib.Graphics"].GetBValue(e),0,255),s=rtl.rc(s+Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-s,i,100)),0,255),n=rtl.rc(n+Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-n,i,100)),0,255),o=rtl.rc(o+Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-o,i,100)),0,255),rtl.rc(t.MakeGraphicsColor(s,n,o),-9007199254740991,9007199254740991)},this.Blend=function(t,e,i){var s,n,o,a,r=0,l=0;return i=Math.round(2.55*i),r=255&(s=pas["WEBLib.Graphics"].ColorToRGB(t)),l=255&(n=pas["WEBLib.Graphics"].ColorToRGB(e)),o=Math.max(0,Math.min(255,(i*(r-l)>>>8)+l)),r=255&Math.floor(s/256),l=255&Math.floor(n/256),a=Math.max(0,Math.min(255,(i*(r-l)>>>8)+l)),r=255&Math.floor(s/65536),l=255&Math.floor(n/65536),(Math.max(0,Math.min(255,(i*(r-l)>>>8)+l))<<16)+(a<<8)+o},this.ColorLookup=function(){return e.FColorLookup},this.DrawGradient=function(t,e,i,s,n,o,a){rtl.rc(e,-9007199254740991,9007199254740991),rtl.rc(i,-9007199254740991,9007199254740991);var r,l,h,p,c,F,u,C,d,T,m=0,S=0,y=0,g=0,f=0,M=0,B=0,b=0,L=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),E=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),v=0,N=0;L.$assign(s),0===(b=a?rtl.rc(Math.round(L.Right-L.Left),-2147483648,2147483647):rtl.rc(Math.round(L.Bottom-L.Top),-2147483648,2147483647))&&(b=1),e=rtl.rc(pas["WEBLib.Graphics"].ColorToRGB(e),-9007199254740991,9007199254740991),i=rtl.rc(pas["WEBLib.Graphics"].ColorToRGB(i),-9007199254740991,9007199254740991),r=rtl.rc(255&e,-2147483648,2147483647),l=rtl.rc(Math.floor((65280&e)/256),-2147483648,2147483647),h=rtl.rc(Math.floor((16711680&e)/65536),-2147483648,2147483647),m=rtl.rc(255&i,-2147483648,2147483647),S=rtl.rc(Math.floor((65280&i)/256),-2147483648,2147483647),y=rtl.rc(Math.floor((16711680&i)/65536),-2147483648,2147483647),p=rtl.rc(m-r,-2147483648,2147483647)/b,c=rtl.rc(S-l,-2147483648,2147483647)/b,F=rtl.rc(y-h,-2147483648,2147483647)/b,f=a?(L.Right-L.Left)/b:(L.Bottom-L.Top)/b,C=rtl.rc(t.FBrush.FColor,-9007199254740991,9007199254740991),T=rtl.rc(t.FBrush.FStyle,0,7),u=rtl.rc(t.FPen.FColor,-9007199254740991,9007199254740991),d=rtl.rc(t.FPen.FStyle,0,8),t.FPen.FStyle=0,t.FBrush.FStyle=0;for(var P=0,D=b-1;P<=D;P++)M=P,m=rtl.rc(r+Math.round(p*M),-2147483648,2147483647),S=rtl.rc(l+Math.round(c*M),-2147483648,2147483647),y=rtl.rc(h+Math.round(F*M),-2147483648,2147483647),B=rtl.rc(Math.round(M*f),0,65535),t.FPen.SetColor(m+(S<<8)+(y<<16)),t.FBrush.FColor=rtl.rc(t.FPen.FColor,-9007199254740991,9007199254740991),a?(g=rtl.rc(pas.System.Trunc(f),-2147483648,2147483647),v=L.Left+B+g,v=Math.min(v,L.Right),E.$assign(L),M<=n&&(0 in o||2 in o)?(N=Math.sqrt(Math.pow(n,2)-Math.pow(n-M,2)),0 in o&&(E.Top=E.Top+Math.round(n-N)),2 in o&&(E.Bottom=E.Bottom-Math.round(n-N))):M>=b-n&&(3 in o||1 in o)&&(N=Math.sqrt(Math.pow(n,2)-Math.pow(n-(b-M),2)),1 in o&&(E.Top=E.Top+Math.round(n-N)),3 in o&&(E.Bottom=E.Bottom-Math.round(n-N))),t.Rectangle(E.Left+B,E.Top,v,E.Bottom)):(g=rtl.rc(pas.System.Trunc(f),-2147483648,2147483647),v=L.Top+B+g,v=Math.min(v,L.Bottom),E.$assign(L),M<=n&&(0 in o||1 in o)?(N=Math.sqrt(Math.pow(n,2)-Math.pow(n-M,2)),0 in o&&(E.Left=E.Left+Math.round(n-N)),1 in o&&(E.Right=E.Right-Math.round(n-N))):M>=b-n&&(2 in o||3 in o)&&(N=Math.sqrt(Math.pow(n,2)-Math.pow(n-(b-M),2)),2 in o&&(E.Left=E.Left+Math.round(n-N)),3 in o&&(E.Right=E.Right-Math.round(n-N))),t.Rectangle(E.Left,E.Top+B,E.Right,v));t.FBrush.FColor=rtl.rc(C,-9007199254740991,9007199254740991),t.FBrush.FStyle=rtl.rc(T,0,7),t.FPen.SetColor(u),t.FPen.FStyle=rtl.rc(d,0,8)},this.MatrixIdentity=function(){var e=t.TTMSFNCGraphicsMatrix.$new();return e.m11=1,e.m12=0,e.m13=0,e.m21=0,e.m22=1,e.m23=0,e.m31=0,e.m32=0,e.m33=1,e},t.$implcode=function(){e.FColorLookup=null,e.DrawArcWithBezier=function(t,e,i,s,n,o,a,r){var l,h,p,c,F,u,C=[],d=[],T=0;if(0===a)return r&&(t.FPoints.GetCount()<1?t.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(o),i-n*Math.sin(o))):t.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(o),i-n*Math.sin(o)))),void t.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(o),i-n*Math.sin(o)));for(h=(c=Math.sin(a/2))-(l=4*(1-(p=Math.cos(a/2)))/3)*p/c,u=Math.sin(o+a/2),F=Math.cos(o+a/2),(C=rtl.arraySetLength(C,pas["WEBLib.TMSFNCTypes"].TPointF,4))[0].$assign(pas["WEBLib.TMSFNCTypes"].PointF(p,-c)),C[1].$assign(pas["WEBLib.TMSFNCTypes"].PointF(p+l,-h)),C[2].$assign(pas["WEBLib.TMSFNCTypes"].PointF(p+l,h)),C[3].$assign(pas["WEBLib.TMSFNCTypes"].PointF(p,c)),d=rtl.arraySetLength(d,pas["WEBLib.TMSFNCTypes"].TPointF,4),T=0;T<=3;T++)rtl.rcArrR(d,T).$assign(pas["WEBLib.TMSFNCTypes"].PointF(e+s*(rtl.rcArrR(C,T).X*F-rtl.rcArrR(C,T).Y*u),i+n*(rtl.rcArrR(C,T).X*u+rtl.rcArrR(C,T).Y*F)));r&&(t.FPoints.GetCount()<1?t.MoveTo(d[0]):t.LineTo(d[0])),t.CurveTo(d[1],d[2],d[3])}},t.$init=function(){e.FColorLookup=pas.Classes.TStringList.$create("Create$1"),e.FColorLookup.AddObject("aliceblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16775408])),e.FColorLookup.AddObject("antiquewhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14150650])),e.FColorLookup.AddObject("aqua",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("aquamarine",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13959039])),e.FColorLookup.AddObject("azure",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777200])),e.FColorLookup.AddObject("beige",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14480885])),e.FColorLookup.AddObject("bisque",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12903679])),e.FColorLookup.AddObject("black",t.TTMSFNCGraphicsColorObject.$create("Create$1",[0])),e.FColorLookup.AddObject("blanchedalmond",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13495295])),e.FColorLookup.AddObject("blue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711680])),e.FColorLookup.AddObject("blueviolet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14822282])),e.FColorLookup.AddObject("brown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2763429])),e.FColorLookup.AddObject("burlywood",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8894686])),e.FColorLookup.AddObject("cadetblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10526303])),e.FColorLookup.AddObject("chartreuse",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65407])),e.FColorLookup.AddObject("chocolate",t.TTMSFNCGraphicsColorObject.$create("Create$1",[1993170])),e.FColorLookup.AddObject("coral",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5275647])),e.FColorLookup.AddObject("cornflowerblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15570276])),e.FColorLookup.AddObject("cornsilk",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14481663])),e.FColorLookup.AddObject("crimson",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3937500])),e.FColorLookup.AddObject("cyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("darkblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9109504])),e.FColorLookup.AddObject("darkcyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9145088])),e.FColorLookup.AddObject("darkgoldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[755384])),e.FColorLookup.AddObject("darkgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[25600])),e.FColorLookup.AddObject("darkgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkkhaki",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7059389])),e.FColorLookup.AddObject("darkmagenta",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9109643])),e.FColorLookup.AddObject("darkolivegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3107669])),e.FColorLookup.AddObject("darkorange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[36095])),e.FColorLookup.AddObject("darkorchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13382297])),e.FColorLookup.AddObject("darkred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[139])),e.FColorLookup.AddObject("darksalmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8034025])),e.FColorLookup.AddObject("darkseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9419919])),e.FColorLookup.AddObject("darkslateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9125192])),e.FColorLookup.AddObject("darkslategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkslategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13749760])),e.FColorLookup.AddObject("darkviolet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13828244])),e.FColorLookup.AddObject("deeppink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9639167])),e.FColorLookup.AddObject("deepskyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16760576])),e.FColorLookup.AddObject("dimgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dimgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dodgerblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16748574])),e.FColorLookup.AddObject("firebrick",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2237106])),e.FColorLookup.AddObject("floralwhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15792895])),e.FColorLookup.AddObject("forestgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2263842])),e.FColorLookup.AddObject("fuchsia",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("gainsboro",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14474460])),e.FColorLookup.AddObject("ghostwhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16775416])),e.FColorLookup.AddObject("gold",t.TTMSFNCGraphicsColorObject.$create("Create$1",[55295])),e.FColorLookup.AddObject("goldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2139610])),e.FColorLookup.AddObject("gray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("green",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32768])),e.FColorLookup.AddObject("greenyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3145645])),e.FColorLookup.AddObject("grey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("honeydew",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15794160])),e.FColorLookup.AddObject("hotpink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11823615])),e.FColorLookup.AddObject("indianred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6053069])),e.FColorLookup.AddObject("indigo",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8519755])),e.FColorLookup.AddObject("ivory",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15794175])),e.FColorLookup.AddObject("khaki",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9234160])),e.FColorLookup.AddObject("lavender",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16443110])),e.FColorLookup.AddObject("lavenderblush",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16118015])),e.FColorLookup.AddObject("lawngreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[64636])),e.FColorLookup.AddObject("lemonchiffon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13499135])),e.FColorLookup.AddObject("lightblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15128749])),e.FColorLookup.AddObject("lightcoral",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421616])),e.FColorLookup.AddObject("lightcyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777184])),e.FColorLookup.AddObject("lightgoldenrodyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13826810])),e.FColorLookup.AddObject("lightgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9498256])),e.FColorLookup.AddObject("lightgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightpink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12695295])),e.FColorLookup.AddObject("lightsalmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8036607])),e.FColorLookup.AddObject("lightseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11186720])),e.FColorLookup.AddObject("lightskyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16436871])),e.FColorLookup.AddObject("lightslategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightslategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightsteelblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14599344])),e.FColorLookup.AddObject("lightyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14745599])),e.FColorLookup.AddObject("lime",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65280])),e.FColorLookup.AddObject("limegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3329330])),e.FColorLookup.AddObject("linen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15134970])),e.FColorLookup.AddObject("magenta",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("maroon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[128])),e.FColorLookup.AddObject("mediumaquamarine",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11193702])),e.FColorLookup.AddObject("mediumblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13434880])),e.FColorLookup.AddObject("mediumorchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13850042])),e.FColorLookup.AddObject("mediumpurple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14381203])),e.FColorLookup.AddObject("mediumseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7451452])),e.FColorLookup.AddObject("mediumslateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15624315])),e.FColorLookup.AddObject("mediumspringgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10156544])),e.FColorLookup.AddObject("mediumturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13422920])),e.FColorLookup.AddObject("mediumvioletred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8721863])),e.FColorLookup.AddObject("midnightblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7346457])),e.FColorLookup.AddObject("mintcream",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16449525])),e.FColorLookup.AddObject("mistyrose",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14804223])),e.FColorLookup.AddObject("moccasin",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11920639])),e.FColorLookup.AddObject("navajowhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11394815])),e.FColorLookup.AddObject("navy",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388608])),e.FColorLookup.AddObject("oldlace",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15136253])),e.FColorLookup.AddObject("olive",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32896])),e.FColorLookup.AddObject("olivedrab",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2330219])),e.FColorLookup.AddObject("orange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[42495])),e.FColorLookup.AddObject("orangered",t.TTMSFNCGraphicsColorObject.$create("Create$1",[17919])),e.FColorLookup.AddObject("orchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14053594])),e.FColorLookup.AddObject("palegoldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11200750])),e.FColorLookup.AddObject("palegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10025880])),e.FColorLookup.AddObject("paleturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15658671])),e.FColorLookup.AddObject("palevioletred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9662683])),e.FColorLookup.AddObject("papayawhip",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14020607])),e.FColorLookup.AddObject("peachpuff",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12180223])),e.FColorLookup.AddObject("peru",t.TTMSFNCGraphicsColorObject.$create("Create$1",[4163021])),e.FColorLookup.AddObject("pink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13353215])),e.FColorLookup.AddObject("plum",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14524637])),e.FColorLookup.AddObject("powderblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15130800])),e.FColorLookup.AddObject("purple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388736])),e.FColorLookup.AddObject("red",t.TTMSFNCGraphicsColorObject.$create("Create$1",[255])),e.FColorLookup.AddObject("rosybrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9408444])),e.FColorLookup.AddObject("royalblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14772545])),e.FColorLookup.AddObject("saddlebrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[1262987])),e.FColorLookup.AddObject("salmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7504122])),e.FColorLookup.AddObject("sandybrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6333684])),e.FColorLookup.AddObject("seagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5737262])),e.FColorLookup.AddObject("seashell",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15660543])),e.FColorLookup.AddObject("sienna",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2970272])),e.FColorLookup.AddObject("skyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15453831])),e.FColorLookup.AddObject("slateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13458026])),e.FColorLookup.AddObject("slategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9470064])),e.FColorLookup.AddObject("slategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9470064])),e.FColorLookup.AddObject("snow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16448255])),e.FColorLookup.AddObject("springgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388352])),e.FColorLookup.AddObject("steelblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11829830])),e.FColorLookup.AddObject("violet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15631086])),e.FColorLookup.AddObject("thistle",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14204888])),e.FColorLookup.AddObject("tan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9221330])),e.FColorLookup.AddObject("tomato",t.TTMSFNCGraphicsColorObject.$create("Create$1",[4678655])),e.FColorLookup.AddObject("turquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13688896])),e.FColorLookup.AddObject("wheat",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11788021])),e.FColorLookup.AddObject("whitesmoke",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16119285])),e.FColorLookup.AddObject("yellowgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3329434])),e.FColorLookup.AddObject("red",t.TTMSFNCGraphicsColorObject.$create("Create$1",[255])),e.FColorLookup.AddObject("black",t.TTMSFNCGraphicsColorObject.$create("Create$1",[0])),e.FColorLookup.AddObject("blue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711680])),e.FColorLookup.AddObject("green",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32768])),e.FColorLookup.AddObject("aqua",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("yellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65535])),e.FColorLookup.AddObject("fuchsia",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("white",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777215])),e.FColorLookup.AddObject("lime",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65280])),e.FColorLookup.AddObject("silver",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12632256])),e.FColorLookup.AddObject("gray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("olive",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32896])),e.FColorLookup.AddObject("navy",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388608])),e.FColorLookup.AddObject("purple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388736])),e.FColorLookup.AddObject("teal",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421376])),e.FColorLookup.AddObject("orange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[42495])),e.FColorLookup.AddObject("maroon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[128])),e.FColorLookup.Sort()}}),["WEBLib.TMSFNCUtils","SysUtils","Math"]),rtl.module("WEBLib.DesignIntf",["System","Classes","Web","JS","TypInfo","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this.$impl;rtl.createClass(this,"TRegisteredComponent",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FIcon=""}})),this.GetRegisteredComponent=function(e){var i=null,s=null;if(i=null,""===e)return i;s=null;var n=Object.keys(t.RegisteredComponentList).map((function(e){return[t.RegisteredComponentList[e]]}));for(let t of n)if(t[0].FClass.$classname.toLowerCase()==e.toLowerCase()){s=t[0];break}return i=s},this.$implcode=function(){t.RegisteredComponentList=null,t.RegisteredSelectionEditorList=null,t.RegisteredPropertyEditorList=null,t.RegisteredIgnoredPropertyList=null,t.RegisteredLibraryRequirementsEditorList=null,t.RegisteredComponentEditorList=null,t.RegisteredIdentToIntList=null},this.$init=function(){t.RegisteredComponentList=Object.create(null),t.RegisteredSelectionEditorList=Object.create(null),t.RegisteredPropertyEditorList=Object.create(null),t.RegisteredIgnoredPropertyList=Object.create(null),t.RegisteredLibraryRequirementsEditorList=Object.create(null),t.RegisteredComponentEditorList=Object.create(null),t.RegisteredIdentToIntList=Object.create(null)}}),["SysUtils"]),rtl.module("WEBLib.TMSFNCCustomComponent",["System","Classes","WEBLib.Controls","WEBLib.TMSFNCTypes","WEBLib.TMSFNCPersistence","TypInfo"],(function(){"use strict";var t=this;this.$rtti.$MethodVar("TTMSFNCCustomComponentCanSavePropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanSave",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomComponentCanLoadPropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanLoad",rtl.boolean,1]]),methodkind:0}),rtl.createClass(this,"TTMSFNCCustomComponent",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FDesigntimeFormPixelsPerInch=0,this.FAdaptToStyle=!1,this.FOnCanSaveProperty=null,this.FOnCanLoadProperty=null},this.$final=function(){this.FOnCanSaveProperty=void 0,this.FOnCanLoadProperty=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.GetVersionNumber=function(t,e,i,s){return"",""},this.SetAdaptToStyle=function(t){this.FAdaptToStyle=t},this.Paint=function(){var t=null,e=null,i=null,s=null;pas["WEBLib.Controls"].TCustomControl.Paint.call(this),i=null,t=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),!1]);try{e.FStroke.SetKind(1),e.FStroke.SetColor(0),e.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),2),null!=(s=pas["WEBLib.DesignIntf"].GetRegisteredComponent(this.$classname))&&t.LoadFromResource(s.FIcon),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(2,2,this.GetWidth()-2,this.GetHeight()-2)),t,!0,!0,!0,!1)}finally{null!=i&&(i=rtl.freeLoc(i)),t=rtl.freeLoc(t),e=rtl.freeLoc(e)}},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),4 in this.FComponentState||this.SetVisible(!1)},this.RegisterRuntimeClasses=function(){},this.Create$1=function(t){var e=0;return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),e=96,this.FDesigntimeFormPixelsPerInch=e,this.SetWidth(26),this.SetHeight(26),this.IsDesigning()||this.RegisterRuntimeClasses(),this},this.SetBounds=function(t,e,i,s){var n;n=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(this,-1),pas["WEBLib.Controls"].TControl.SetBounds.call(this,t,e,Math.round(26*n),Math.round(26*n))},this.BeginUpdate=function(){pas["WEBLib.Controls"].TControl.BeginUpdate.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this)},this.IsDesigning=function(){return 4 in this.FComponentState||null!=pas["WEBLib.Forms"].VSIDE},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("OnCanSaveProperty",0,t.$rtti.TTMSFNCCustomComponentCanSavePropertyEvent,"FOnCanSaveProperty","FOnCanSaveProperty"),e.addProperty("OnCanLoadProperty",0,t.$rtti.TTMSFNCCustomComponentCanLoadPropertyEvent,"FOnCanLoadProperty","FOnCanLoadProperty")}))}),["WEBLib.TMSFNCUtils","WEBLib.Forms","SysUtils","WEBLib.TMSFNCGraphics","WEBLib.Graphics","WEBLib.TMSFNCGraphicsTypes","Types","WEBLib.DesignIntf"]),rtl.module("WEBLib.TMSFNCBitmapContainer",["System","Classes","WEBLib.TMSFNCTypes","WEBLib.TMSFNCCustomComponent","WEBLib.Controls"],(function(){"use strict";var t=this;this.MAJ_VER=1,this.MIN_VER=0,this.REL_VER=0,this.BLD_VER=0,this.$rtti.$Class("TTMSFNCBitmapContainer"),rtl.createClass(this,"TTMSFNCBitmapItem",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FBitmap=null,this.FTag=0,this.FName=""},this.$final=function(){this.FBitmap=void 0,pas.Classes.TCollectionItem.$final.call(this)},this.SetBitmap=function(t){this.FBitmap.Assign(t)},this.Create$1=function(t){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FBitmap.FOnChange=rtl.createCallback(this,"DoBitmapChanged"),this.FName="Item"+pas.SysUtils.IntToStr(this.FCollection.GetCount()),this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas.Classes.TCollectionItem.Destroy.call(this)},this.DoBitmapChanged=function(e){t.TTMSFNCBitmapCollection.isPrototypeOf(this.FCollection)&&null!=rtl.as(this.FCollection,t.TTMSFNCBitmapCollection).FOwner$1&&rtl.as(this.FCollection,t.TTMSFNCBitmapCollection).FOwner$1.DoBitmapChanged(this)},this.Assign=function(e){this.FName=rtl.as(e,t.TTMSFNCBitmapItem).FName,this.FTag=rtl.as(e,t.TTMSFNCBitmapItem).FTag,this.FBitmap.Assign(rtl.as(e,t.TTMSFNCBitmapItem).FBitmap)};var e=this.$rtti;e.addMethod("Create$1",2,[["ACollection",pas.Classes.$rtti.TCollection]]),e.addProperty("Bitmap",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap,"FBitmap","SetBitmap"),e.addProperty("Name",0,rtl.string,"FName","FName"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag")})),rtl.createClass(this,"TTMSFNCBitmapCollection",pas.Classes.TOwnedCollection,(function(){this.$init=function(){pas.Classes.TOwnedCollection.$init.call(this),this.FOwner$1=null},this.$final=function(){this.FOwner$1=void 0,pas.Classes.TOwnedCollection.$final.call(this)},this.GetItemEx=function(t){return this.GetItem(t)},this.GetBitmapItemClass=function(){return t.TTMSFNCBitmapItem},this.Create$3=function(t){return pas.Classes.TOwnedCollection.Create$2.call(this,t,this.GetBitmapItemClass()),this.FOwner$1=t,this},this.$rtti.addMethod("Create$3",2,[["AOwner",t.$rtti.TTMSFNCBitmapContainer]])})),rtl.createClass(this,"TControlList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCBitmapContainer",pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$init.call(this),this.FControls$1=null,this.FItems=null,this.FOnBitmapChanged=null},this.$final=function(){this.FControls$1=void 0,this.FItems=void 0,this.FOnBitmapChanged=void 0,pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$final.call(this)},this.SetItems=function(t){this.FItems.Assign(t)},this.GetItems=function(){return this.FItems},this.GetVersion=function(){return this.$class.GetVersionNumber(1,0,0,0)},this.CreateItems=function(){return t.TTMSFNCBitmapCollection.$create("Create$3",[this])},this.RegisterRuntimeClasses=function(){pas.Classes.RegisterClass(t.TTMSFNCBitmapContainer)},this.Notification=function(t,e){var i=0;if(pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&null!=this.FControls$1)for(var s=this.FControls$1.GetCount()-1;s>=0;s--)i=s,this.FControls$1.Get(i)==t&&this.FControls$1.Delete(i)},this.DoBitmapChanged=function(t){var e=null,i=0;if(null!=(e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetParentForm(this)))for(var s=0,n=e.GetControlsCount()-1;s<=n;s++)i=s,pas["WEBLib.Controls"].TWinControl.isPrototypeOf(e.GetControls(i))&&this.InvalidateMembers(rtl.as(e.GetControls(i),pas["WEBLib.Controls"].TWinControl));null!=this.FOnBitmapChanged&&this.FOnBitmapChanged(this)},this.InvalidateMembers=function(t){var e=0;if(null!=t){null!=pas.TypInfo.GetPropInfo$2(t,"BitmapContainer")&&t.Invalidate();for(var i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,pas["WEBLib.Controls"].TWinControl.isPrototypeOf(t.GetControls(e))&&this.InvalidateMembers(rtl.as(t.GetControls(e),pas["WEBLib.Controls"].TWinControl))}},this.Create$1=function(e){return pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.Create$1.apply(this,arguments),this.FItems=this.CreateItems(),this.FControls$1=t.TControlList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FControls$1},set:function(t){this.p.FControls$1=t}}),rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCBitmapContainer.isPrototypeOf(e)?this.FItems.Assign(rtl.as(e,t.TTMSFNCBitmapContainer).GetItems()):pas["WEBLib.Controls"].TControl.Assign.apply(this,arguments)},this.FindBitmap$1=function(t){var e=null,i=0;for(e=null,t=pas.SysUtils.UpperCase(t),i=1;i<=this.GetItems().GetCount();){if(pas.SysUtils.UpperCase(this.GetItems().GetItemEx(i-1).FName)===t){e=this.GetItems().GetItemEx(i-1).FBitmap;break}i+=1}return e},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("Items",3,t.$rtti.TTMSFNCBitmapCollection,"GetItems","SetItems"),e.addProperty("Version",1,rtl.string,"GetVersion",""),e.addProperty("OnBitmapChanged",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnBitmapChanged","FOnBitmapChanged"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]}))}),["TypInfo","WEBLib.Forms","SysUtils","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCHTMLEngine",["System","Classes","WEBLib.TMSFNCGraphics","Types","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphicsTypes"],(function(){"use strict";var t=this,e=t.$impl;this.TMSFNCHTMLENGINE_ATTR_DELIM='"';this.HTMLDrawEx$1=function(i,s,n,o,a,r,l,h,p,c,F,u,C,d,T,m,S,y,g,f,M,B,b,L,E,v,N,P,D,A,$,W,G,O,R,I,x,w,k,H,U,j){var z,V,K,J=!1,Y="",Q=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),q=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),X=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),_=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),Z=0,tt=0,et=0,it=0,st=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),nt=0,ot=0,at=null,rt=0,lt=null,ht=0,pt=null,ct=0,Ft=0,ut=null,Ct=0,dt=0,Tt=0,mt=null,St=0,yt=!1,gt=!1,ft=!1,Mt=!1,Bt=!1,bt=!1,Lt=0,Et=0,vt=0,Nt=0,Pt=0,Dt="",At="",$t="",Wt=pas.Types.TPoint.$new(),Gt=!1,Ot=!1,Rt=!1,It=!1,xt=0,wt=0,kt=0,Ht=0,Ut=0,jt=0,zt=!1,Vt=!1,Kt=0,Jt={},Yt=0,Qt=0,qt=0,Xt=0,_t=0,Zt=0,te=0,ee=!1,ie=pas.Types.TRect.$new(),se=pas.Types.TPoint.$new(),ne=0,oe=0,ae=0;function re(i,s,o,a,c,F,N,R,I,w,z,V,K,J,Y,Q,q,Z,tt){var et="",st="",nt="",ot="",lt="",ht="",pt=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),ct=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),ut={},Ct=!1,mt=!1,St=!1,yt=0,gt=0,Mt=0,At=0,xt=0,wt=0,kt=0,Ht=0,Ut=0,Vt=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),qt=0,te=0,ie=0,ne=0,oe=null,re=!1,le=0,he=0,pe=0,ce=0,Fe=0,ue="\0",Ce=!1,de=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),Te=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),me="",Se="",ye="",ge="",fe="",Me="",Be="";for("","",Fe=0,o.Bottom=o.Bottom-N.get(),c.set(0),kt=0,Ct=!1,mt=!1,St=!1,J.set(!1),Y.set(!1),pt.$assign(o),st="",a||(pt.Left=pt.Left+Q),Rt&&!a&&(Et=i.FStroke.FColor,i.FStroke.SetColor(i.FFill.FColor),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,o.Top,n.Right,o.Top+F.get())),2));s.get().length>0&&!Ct&&!mt;){for(qt=pas.System.Pos("<",s.get()),te=T?e.PosBreak(s.get()):0,ce=(et=qt>0&&(te>qt||0===te)?pas.System.Copy(s.get(),1,qt-1):te>0?pas.System.Copy(s.get(),1,te):s.get()).length;pas.System.Pos("&nbsp;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&nbsp;"," ",{get:function(){return et},set:function(t){et=t}});for(;pas.System.Pos("&lt;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&lt;","<",{get:function(){return et},set:function(t){et=t}});for(;pas.System.Pos("&gt;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&gt;",">",{get:function(){return et},set:function(t){et=t}});if(ce>0&&(Vt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),Ht=Vt.Bottom-Vt.Top,Ot&&N.get()<Ht/4&&N.set(Ht/4),Gt&&R.get()<Ht/4&&R.set(Ht/4),Ht>F.get()&&F.set(Ht),L.set(L.get()+et),zt&&pas.System.Delete(s,1,ce),!zt)){if(a)pt.$assign(o),Vt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),pt.Right=pt.Left+(Vt.Right-Vt.Left),K>pt.Top&&K<pt.Bottom&&V>c.get()&&((Kt=0)===ce?ce:Kt),Fe=pt.Right-pt.Left,c.set(c.get()+Fe),V-pt.Left>=c.get()-Fe&&V-pt.Left<=c.get()&&ft&&(J.set(!0),K>pt.Top&&(b.set(Dt),Bt=!0));else{if(Gt&&(pt.Bottom=pt.Bottom-R.get()),Ot&&(pt.Bottom=pt.Bottom+N.get()),pt.Bottom=pt.Bottom-I.get(),Vt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),Ut=Vt.Right-Vt.Left,-1!==dt&&(i.FFill.SetColor(dt),i.FStroke.SetColor(dt),i.FFill.SetKind(1),i.FStroke.SetKind(1),Vt.$assign(i.CalculateText$1("gh")),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left,pt.Top,pt.Left+Ut,pt.Top+(Vt.Bottom-Vt.Top))),2)),dt=-1,It&&(pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(pt,h,h),i.FFont.SetColor(B),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),et,!1,1,0,0,0,-1,-1,!1,!1,-1,-1),pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(pt,-h,-h),i.FFont.SetColor(rt)),ht=""!==et&&" "===et.charAt(et.length-1)&&ft?et+"\0":et,i.FFont.SetColor(Ft),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),ht,!1,1,0,0,0,-1,-1,!1,!1,-1,-1),pt.Right=pt.Left+Ut,ft&&P.get()-1===r&&E.set(Dt),bt)for(i.FStroke.SetColor(255),i.FStroke.SetKind(1),i.FStroke.SetWidth(1),ie=(ne=Math.round(pt.Left/2*2))%4==0?2:0;ne<pt.Right;)de.$assign(pas["WEBLib.TMSFNCTypes"].PointF(ne,o.Bottom+ie-1)),ie=2===ie?0:2,Te.$assign(pas["WEBLib.TMSFNCTypes"].PointF(ne+2,o.Bottom+ie-1)),i.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(de),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Te),2,2),ne+=2;pt.Left=pt.Right,pt.Right=o.Right,pt.Bottom=o.Bottom,pt.Top=o.Top}Ce=c.get()+z.get()<o.Right-o.Left-Zt+1||o.Right-o.Left-Zt<=Fe,et,Ce||!T?(st+=pas.System.Copy(s.get(),1,ce),pas.System.Delete(s,1,ce),et.length>=ce&&" "===pas.System.Copy(et,ce,1)?(Vt.$assign(i.CalculateText$1(" ")),kt=Vt.Right-Vt.Left):kt=0):(Ct=!0,c.set(c.get()-Fe))}if(1===(qt=pas.System.Pos("<",s.get()))&&s.get().length<=2&&s.set(""),!Ct&&1===qt&&s.get().length>2){if("/"===s.get().charAt(1)&&s.get().length>3){var be=pas.System.upcase(s.get().charAt(2));"A"===be?(d&&l!==P.get()||a||(i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(3))),-1!==f&&(dt=f),-1!==M&&(Ft=M)),u||(Ft=rt),ft=!1,Bt&&(X.Bottom=o.Bottom,X.Right=o.Left+c.get(),o.Top!==X.Top&&(X.Left=o.Left,X.Top=o.Top),A.$assign(X),D.set(P.get()),Bt=!1),r===P.get()-1&&(_.Right=pt.Left,_.Bottom=pt.Bottom-I.get(),Vt.$assign(i.CalculateText$1("gh")),_.Top=_.Bottom-(Vt.Bottom-Vt.Top),pas["WEBLib.TMSFNCTypes"].InflateRectEx(_,1,0))):"E"===be?a||(bt=!1):"B"===be?">"!==s.get().charAt(3)?Ft=rt:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(0))):"S"===be?"U"===(ue=pas.System.upcase(s.get().charAt(3)))?(Gt=!1,Ot=!1):"H"===ue?It=!1:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(2))):"F"===be?(i.FFont.SetName(at.FName),i.FFont.SetSize(at.FSize),a||u||(Ft=rt,i.FFill.SetColor(Tt))):"H"===be?a||(Ft=Nt,dt=Pt,i.FFont.SetStyle(rtl.refSet(Jt)),i.FFill.SetColor(Pt)):"I"===be?i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(1))):"L"===be?Ct=!0:"O"===be?q.set(0):"P"===be?(Ct=!0,a||(i.FFill.SetColor(Lt),Rt=!1)):"U"===be?">"!==s.get().charAt(3)&&jt>0?jt-=1:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(3))):"R"===be||"Z"===be&&(zt=!1)}else{var Le=pas.System.upcase(s.get().charAt(1));if("A"===Le)r!==P.get()||a||(_.Left=pt.Left,_.Top=pt.Top),P.set(P.get()+1),d&&l!==P.get()||a||(k&&i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(3))),-1===f||a||(dt=f),-1!==M&&(Ft=M)),u||-1!==M&&l===P.get()&&d||(rt=Ft,Ft=g),nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),ot=pas.System.Copy(nt,pas.System.Pos('"',nt)+1,nt.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),Dt=ot,ft=!0,X.Left=c.get(),X.Top=o.Top;else if("B"===Le){var Ee=ue=pas.System.upcase(s.get().charAt(2));if(">"===Ee)i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(0)));else if("R"===Ee)Ct=!0,L.set(L.get()+"\r");else if("L"===Ee)C||(Ft=vt);else if("O"===Ee&&(Mt=0,st+=pas.System.Copy(s.get(),1,pas.System.Pos(">",s.get())),!a&&!u)){if(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),6,pas.System.Pos(">",s.get())-1)),pas.System.Pos("BACKGROUND",nt)>0&&(ot=pas.System.Copy(nt,pas.System.Pos("BACKGROUND",nt)+10,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),pas.System.Pos("IDX:",pas.SysUtils.UpperCase(ot))>0&&pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,4),oe=null,re=!1,0===pas.System.Pos(":",ot)&&null!=x&&(oe=x.FindBitmap$1(ot)),pas.System.Pos("URL://",pas.SysUtils.UpperCase(ot))>0&&(pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,6),oe=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromURL(ot),re=!0),null!=oe)){if(!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(oe)&&oe.GetWidth()>0&&oe.GetHeight()>0)for(;Mt<n.Bottom-n.Top;){for(gt=0;gt<n.Right-n.Left;)i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Left+gt),Math.round(n.Top+Mt),Math.round(n.Left+gt)+oe.GetWidth(),Math.round(n.Top+Mt)+oe.GetHeight())),oe,!0,!1,!0,!1),gt+=oe.GetWidth();Mt+=oe.GetHeight()}re&&(oe=rtl.freeLoc(oe))}pas.System.Pos("BGTOPLEFT",nt)>0&&(ot=pas.System.Copy(nt,pas.System.Pos("BGTOPLEFT",nt)+10,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),oe=null,0===pas.System.Pos(":",ot)&&null!=x&&(oe=x.FindBitmap$1(ot)),null!=oe&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(oe)&&oe.GetWidth()>0&&oe.GetHeight()>0&&i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Left),Math.round(n.Top+Mt),Math.round(n.Left)+oe.GetWidth(),Math.round(n.Top)+oe.GetHeight())),oe,!0,!1,!0,!1)),pas.System.Pos("BGTOPRIGHT",nt)>0&&(ot=pas.System.Copy(nt,pas.System.Pos("BGTOPRIGHT",nt)+10,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),oe=null,0===pas.System.Pos(":",ot)&&null!=x&&(oe=x.FindBitmap$1(ot)),null!=oe&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(oe)&&oe.GetWidth()>0&&oe.GetHeight()>0&&i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Right)-oe.GetWidth(),Math.round(n.Top+Mt),Math.round(n.Right),Math.round(n.Top)+oe.GetHeight())),oe,!0,!1,!0,!1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),le=-1,(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)).length>0&&(le="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(pas.SysUtils.LowerCase(ot))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLORTO",nt,{get:function(){return qt},set:function(t){qt=t}})>0?(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),ot="H",pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("DIR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+3,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)),i.FStroke.SetColor(le)):(Tt=i.FFill.FColor,i.FFill.SetColor(le),Et=i.FStroke.FColor,i.FStroke.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left-2,n.Top,n.Right,n.Bottom)),2),i.FStroke.SetColor(Et)))}}else if("E"===Le)a||(bt=!0);else if("C"===Le)nt=pas.System.Copy(s.get(),9,pas.System.Pos(">",s.get())-1),me="",ge="",fe="",Se="",ye="",Me="",Be="",t.ParseControl(nt,{get:function(){return me},set:function(t){me=t}},{get:function(){return ge},set:function(t){ge=t}},{get:function(){return fe},set:function(t){fe=t}},{get:function(){return Se},set:function(t){Se=t}},{get:function(){return ye},set:function(t){ye=t}},{get:function(){return Me},set:function(t){Me=t}},{get:function(){return Be},set:function(t){Be=t}}),it=25,""!==ye&&(pas.System.val$8(ye,{get:function(){return it},set:function(t){it=t}},{get:function(){return wt},set:function(t){wt=t}}),0!==wt&&(it=25)),""===Se&&"CHECK"!==me&&"RADIO"!==me||(pas.System.val$6(Se,{get:function(){return yt},set:function(t){yt=t}},{get:function(){return wt},set:function(t){wt=t}}),0===wt&&(Wt.x=yt,Wt.y=Math.round(i.CalculateTextHeight$1("gh"))+10),"CHECK"===me||"RADIO"===me?F.set(16):F.set(23),it>25&&F.set(it-2),a||("CHECK"===me&&(Wt.x=Math.round(16*y)+2,Wt.y=Wt.x,yt=Wt.x,ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left+1,pt.Top+(pt.Bottom-pt.Top-(Wt.y-2))/2,pt.Left+Wt.x-1,pt.Top+(pt.Bottom-pt.Top-(Wt.y-2))/2+(Wt.y-2))),ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Right),Math.round(ct.Bottom))),i.DrawCheckBox(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(ct),"TRUE"===pas.SysUtils.UpperCase(fe),m&&S===ge,!0,1)),"RADIO"===me&&(Wt.x=Math.round(16*y)+2,Wt.y=Wt.x,yt=Wt.x,ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left+1,pt.Top+(pt.Bottom-pt.Top-(Wt.y-2))/2,pt.Left+Wt.x-1,pt.Top+(pt.Bottom-pt.Top-(Wt.y-2))/2+(Wt.y-2))),ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Right),Math.round(ct.Bottom))),i.DrawRadioButton(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(ct),"TRUE"===pas.SysUtils.UpperCase(fe),m&&S===ge,!0,1)),"BUTTON"===me&&(Wt.y=22,ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left+2,pt.Top+(pt.Bottom-pt.Top-Wt.y)/2,pt.Left+yt-2,pt.Top+(pt.Bottom-pt.Top-Wt.y)/2+Wt.y)),ee=pas["WEBLib.TMSFNCTypes"].PtInRectEx(ct,pas["WEBLib.TMSFNCTypes"].PointF(V,K)),ct.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Right),Math.round(ct.Bottom))),i.DrawButton(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(ct),m&&S===ge,ee,!0,!0,1),pas["WEBLib.TMSFNCTypes"].InflateRectEx(ct,-2,-2),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(ct),fe,!1,0,0,0,0,-1,-1,!0,!1,-1,-1))),"BUTTON"===me&&(Wt.y=22),"COMBO"===me&&(Wt.y=25),"CHECK"!==me&&"RADIO"!==me||(Wt.x=Math.round(16*y)+2,Wt.y=Wt.x),(V-o.Left>c.get()&&V-o.Left<c.get()+Wt.x&&K>pt.Top&&K<pt.Top+Wt.y||p&&W.get()===ge)&&(Y.set(!0),b.set("ctrl"),Yt=Qt,ct.Left=o.Left+c.get(),ct.Right=ct.Left+Wt.x,ct.Top=pt.Top,ct.Bottom=pt.Top+Wt.y,$.$assign(ct),G.set(fe),W.set(ge),O.set(me)),c.get()+Wt.x>o.Right-o.Left&&Wt.x<o.Right-o.Left?mt=!0:(c.set(c.get()+Wt.x),pt.Left=pt.Left+Wt.x,Wt.y>F.get()&&F.set(Wt.y)));else if("H"===Le){var ve=pas.System.upcase(s.get().charAt(2));"R"===ve?(Ct=!0,a||(nt=pas.System.Copy(s.get(),4,pas.System.Pos(">",s.get())-1),le=0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("COLOR",pas.SysUtils.UpperCase(nt),{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)).length>0&&(le="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(pas.SysUtils.LowerCase(ot)))),i.FStroke.SetKind(1),Et=i.FStroke.FColor,i.FStroke.SetColor(le),de.$assign(pas["WEBLib.TMSFNCTypes"].PointF(o.Left,pt.Bottom+1)),Te.$assign(pas["WEBLib.TMSFNCTypes"].PointF(o.Right,pt.Bottom+1)),i.FStroke.SetKind(1),i.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(de),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Te),2,2),i.FStroke.SetColor(Et))):"I"===ve&&(a||(Nt=Ft,Pt=dt,Jt=rtl.refSet(i.FFont.FStyle),dt=H,Ft=U),i.FFont.SetStyle(rtl.refSet(j)))}else if("I"===Le)">"===(ue=pas.System.upcase(s.get().charAt(2)))?i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(1))):"N"===ue?(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),ot=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("x",nt)+2,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),pas.System.val$6(ot,{get:function(){return yt},set:function(t){yt=t}},{get:function(){return wt},set:function(t){wt=t}}),0===wt&&yt>c.get()&&(c.set(yt),pt.Left=n.Left+yt)):"M"===ue&&(0,0,ae=0,Math.round(i.CalculateTextHeight$1("gh")),Qt+=1,ct.$assign(pt),nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),ot=pas.System.Copy(nt,pas.System.Pos("SRC",pas.SysUtils.UpperCase(nt))+4,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),nt=pas.SysUtils.UpperCase(nt),pas.System.Pos("ALT",nt)>0&&Yt===Qt&&(ot=pas.System.Copy(nt,pas.System.Pos("ALT",nt)+4,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)),he=0,pe=0,pas.System.Pos("WIDTH",nt)>0&&(lt=pas.System.Copy(nt,pas.System.Pos("WIDTH",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1),pas.System.val$6(lt,{get:function(){return he},set:function(t){he=t}},{get:function(){return wt},set:function(t){wt=t}}),pas.System.Pos("%",lt)>0&&(he=Math.round(he/100*(pt.Right-pt.Left)))),pas.System.Pos("HEIGHT",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("HEIGHT",nt)+7,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1),pas.System.val$6(lt,{get:function(){return pe},set:function(t){pe=t}},{get:function(){return wt},set:function(t){wt=t}}),pas.System.Pos("%",lt)>0&&(pe=Math.round(pe/100*(pt.Bottom-pt.Top)))),pas.System.Pos("ALIGN",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("ALIGN",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),"MIDDLE"===(lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1))&&1,"TOP"===lt&&2),pas.System.Pos("FLOAT",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("FLOAT",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),"LEFT"===(lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1))&&(ae=1,ct.Left=n.Left),"RIGHT"===lt&&(ae=2)),Wt.x=0,Wt.y=0,pas.System.Pos("IDX:",pas.SysUtils.UpperCase(ot))>0&&pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,4),oe=null,re=!1,0===pas.System.Pos(":",ot)&&null!=x&&(oe=x.FindBitmap$1(ot)),pas.System.Pos("URL://",pas.SysUtils.UpperCase(ot))>0&&(pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,6),oe=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromURL(ot),re=!0),pas.System.Pos("DATA:",pas.SysUtils.UpperCase(ot))>0&&pas.System.Pos("BASE64,",pas.SysUtils.UpperCase(ot))>0&&(pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,pas.System.Pos("BASE64,",pas.SysUtils.UpperCase(ot))+6),oe=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.LoadBitmapFromBase64(ot,oe,!1),re=!0),At=0,xt=0,null!=oe&&(pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(oe)||(he>0&&pe>0&&(At=he,xt=pe),he>0&&0===pe&&(At=he,xt=Math.round(he/oe.GetWidth()*oe.GetHeight())),0===he&&pe>0&&(At=Math.round(pe/oe.GetHeight()*oe.GetWidth()),xt=pe),0===he&&0===pe&&(At=oe.GetWidth(),xt=oe.GetHeight()),2===ae&&(ct.Left=o.Right-At),a||(he>0||pe>0?i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Left)+At,Math.round(ct.Top)+xt)),oe,!0,!1,!0,!1):he>0&&0===pe?i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Left)+he,Math.round(ct.Top)+pe)),oe,!0,!1,!0,!1):i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(ct.Left),Math.round(ct.Top),Math.round(ct.Left)+oe.GetWidth(),Math.round(ct.Top)+oe.GetHeight())),oe,!0,!1,!0,!1)),he>0||pe>0?(Wt.x=At,Wt.y=xt):(Wt.x=oe.GetWidth(),Wt.y=oe.GetHeight())),re&&(oe=rtl.freeLoc(oe))),V-o.Left>c.get()&&V-o.Left<c.get()+Wt.x&&K>pt.Top&&K<pt.Top+Wt.y&&ft&&(Y.set(!0),b.set(Dt),Yt=Qt),c.get()+Wt.x>o.Right-o.Left&&Wt.x<o.Right-o.Left?mt=!0:(c.set(c.get()+Wt.x+2),pt.Left=pt.Left+Wt.x+2,Wt.y>F.get()&&F.set(Wt.y)),pas.System.Pos("ALIGN",nt)>0&&(pas.System.Pos('"TOP',nt)>0?(Vt.$assign(i.CalculateText$1("gh")),I.set(F.get()-(Vt.Bottom-Vt.Top))):pas.System.Pos('"MIDDLE',nt)>0&&(Vt.$assign(i.CalculateText$1("gh")),I.set((F.get()-(Vt.Bottom-Vt.Top))/2))),pas.System.Pos("WRAP",nt)>0&&(Vt.$assign(i.CalculateText$1("gh")),F.set(Vt.Bottom-Vt.Top),I.set(0)),1===ae&&(Vt.$assign(i.CalculateText$1("gh")),I.set(F.get()-(Vt.Bottom-Vt.Top)),Z.Left=At,Z.Bottom=xt,a||(Vt.$assign(i.CalculateText$1("gh")),F.set(Vt.Bottom-Vt.Top))),2===ae&&(Vt.$assign(i.CalculateText$1("gh")),I.set(F.get()-(Vt.Bottom-Vt.Top)),Z.Right=At,Z.Bottom=xt,a||(Vt.$assign(i.CalculateText$1("gh")),F.set(Vt.Bottom-Vt.Top)),c.set(n.Right)));else if("L"===Le)le=-1,$t="",pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return qt},set:function(t){qt=t}})>0&&(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),3,qt-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("TYPE",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+4,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),$t=ot),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("COLOR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)).length>0&&(le="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(ot)))),c.set(c.get()+12*jt),St?mt=!0:St=!0,pt.Left=pt.Left+12*(jt-1),a||zt||(""===$t?(-1!==le&&(Xt=i.FFont.FColor,Ft=le),ot=i.FFont.FName,ut=rtl.refSet(i.FFont.FStyle),i.FFont.SetStyle({}),pas.System.Odd(jt)?i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),"•",!1,1,0,0,0,-1,-1,!1,!1,-1,-1):i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),"o",!1,1,0,0,0,-1,-1,!1,!1,-1,-1),i.FFont.SetName(ot),i.FFont.SetStyle(rtl.refSet(ut)),-1!==le&&(Ft=Xt)):(_t=-1,"SQUARE"===$t&&(_t=i.FFill.FColor,i.FStroke.SetColor(le),i.FFill.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left,pt.Top+2,pt.Left+8,pt.Top+10)),2),i.FFill.SetColor(_t)),"CIRCLE"===$t&&(_t=i.FFill.FColor,i.FStroke.SetColor(le),i.FFill.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(pt.Left,pt.Top+2,pt.Left+8,pt.Top+10)),2),i.FFill.SetColor(_t)))),pt.Left=pt.Left+12;else if("U"===Le)">"!==s.get().charAt(2)?(jt+=1,Ct=!0):i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(3)));else if("O"===Le)"F"===(ue=pas.System.upcase(s.get().charAt(2)))&&(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),ot=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("x",nt)+2,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),pas.System.val$6(ot,q,{get:function(){return wt},set:function(t){wt=t}}),pt.Left=q.get(),c.set(q.get()));else if("P"===Le)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return qt},set:function(t){qt=t}})>0&&(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),3,qt-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("ALIGN",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),pas.System.Pos("RIGHT",ot)>0&&w.set(1),pas.System.Pos("LEFT",ot)>0&&w.set(0),pas.System.Pos("CENTER",ot)>0&&w.set(2)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("INDENT",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+6,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),z.set(e.IStrToInt(ot))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("FLOAT",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),"LEFT"===(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1))&&tt.set(1),"RIGHT"===ot&&tt.set(2),se.$assign(pas.Types.Point(Math.round(o.Left),Math.round(o.Top)))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),le=-1,(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)).length>0&&(le="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(ot)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLORTO",nt,{get:function(){return qt},set:function(t){qt=t}})>0?(ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),a||(Rt=!0,i.FStroke.SetColor(le))):a||(Rt=!0,Lt=i.FFill.FColor,i.FFill.SetColor(le),Et=i.FStroke.FColor,i.FStroke.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,o.Top,n.Right,o.Bottom)),2))));else if("F"===Le){if(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return qt},set:function(t){qt=t}})>0)if(Tt=0===i.FFill.FKind?-1:i.FFill.FColor,nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),6,qt-6)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("FACE",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&(ot=pas.System.Copy(nt,qt+4,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),i.FFont.SetName(ot)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(" COLOR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&!u&&(ot=pas.System.Copy(nt,qt+6,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1),rt=-1!==i.FFill.FColor?i.FFont.FColor:0,ot.length>0&&(Ft="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(ot))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return qt},set:function(t){qt=t}})>0&&!a&&!u&&(ot=pas.System.Copy(nt,qt+7,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),(ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)).length>0&&(dt="#"===ot.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(ot):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(ot))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("STYLE",nt,{get:function(){return qt},set:function(t){qt=t}})>0)ot=pas.System.Copy(nt,qt+5,nt.length),ot=pas.System.Copy(ot,pas.System.Pos("=",ot)+1,ot.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),pas.System.Pos("FONT-SIZE:",pas.SysUtils.UpperCase(ot))>0&&(pas.System.Delete({get:function(){return ot},set:function(t){ot=t}},1,10),pas.System.Pos("PT",pas.SysUtils.UpperCase(ot))>0&&(ot=pas.SysUtils.Trim(pas.System.Copy(ot,1,pas.System.Pos("PT",pas.SysUtils.UpperCase(ot))-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,e.IStrToInt(ot),1)));else if(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("SIZE",nt,{get:function(){return qt},set:function(t){qt=t}})>0){ot=pas.System.Copy(nt,qt+4,nt.length),ot=pas.System.Copy(ot,pas.System.Pos("=",ot)+1,ot.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1);var Ne=e.IStrToInt(ot);1===Ne?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,8,1):2===Ne?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,10,1):3===Ne?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,12,1):4===Ne?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,14,1):5===Ne?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,16,1):pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,e.IStrToInt(ot),1)}}else"S"===Le?">"===(ue=pas.System.upcase(s.get().charAt(2)))?i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(2))):"H"===ue?It=!0:1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUB>",s.get())?Ot=!0:1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUP>",s.get())&&(Gt=!0):"R"===Le?(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),ot=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("a",nt)+2,nt.length),ot=pas.System.Copy(ot,pas.System.Pos('"',ot)+1,ot.length),ot=pas.System.Copy(ot,1,pas.System.Pos('"',ot)-1)):"Z"===Le&&(zt=!0)}pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return qt},set:function(t){qt=t}})>0&&!mt?(st+=pas.System.Copy(s.get(),1,qt),pas.System.Delete(s,1,qt)):mt||pas.System.Delete(s,1,s.get().length)}}return c.set(c.get()-kt),c.get()>v.get()&&v.set(c.get()+2),r===P.get()-1&&ft&&!a&&(_.Right=pt.Left,_.Bottom=pt.Bottom,pas["WEBLib.TMSFNCTypes"].InflateRectEx(_,1,0),_.Left=o.Left+1,_.Top=_.Bottom),st}if(ft=!1,bt=!1,(at=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),rt=i.FFont.FColor,(pt=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),ct=i.FFont.FColor,(lt=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),ht=i.FFont.FColor,(mt=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),St=i.FFont.FColor,(ut=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),Ct=i.FFont.FColor,vt=i.FFill.FColor,z=i.FStroke.FColor,K=i.FFill.FKind,V=i.FStroke.FKind,Tt=-1,dt=-1,Lt=-1,Rt=!1,It=!1,zt=!1,$.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),G.set(""),O.set(""),p||W.set(""),Zt=0,te=0,ne=0,ie.$assign(pas.Types.Rect(0,0,0,0)),J=!1,Q.$assign(n),nt=0,ot=0,v.set(0),N.set(0),P.set(0),xt=0,jt=0,wt=0,L.set(""),E.set(""),D.set(-1),Bt=!1,Qt=0,Yt=-1,pas.System.Pos("&",s)>0){s=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(s,!0,!0);do{Vt=!1,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&amp;","&",{get:function(){return s},set:function(t){s=t}})&&(Vt=!0)}while(Vt)}for(s=e.DBTagStrip(s),s=e.UnicodeTagStrip(s),s=e.CRLFStrip(s,!0),0,R.set(0);s.length>0;){at.AssignSource(ut),rt=Ct,i.FFont.AssignSource(lt),Ft=ht,Mt=ft,At=Dt,Ut=0,Ht=0,kt=0,Gt=!1,Ot=!1,yt=!1,gt=!1,Z=0,st.$assign(i.CalculateText$1("gh")),et=tt=st.Bottom-st.Top,qt=Qt,s=pas.SysUtils.Trim(s),oe=ne,Y=re(i,{get:function(){return s},set:function(t){s=t}},pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Q),!0,{get:function(){return Z},set:function(t){Z=t}},{get:function(){return tt},set:function(t){tt=t}},{get:function(){return Ht},set:function(t){Ht=t}},{get:function(){return Ut},set:function(t){Ut=t}},{get:function(){return kt},set:function(t){kt=t}},{get:function(){return nt},set:function(t){nt=t}},{get:function(){return ot},set:function(t){ot=t}},o,a,{get:function(){return yt},set:function(t){yt=t}},{get:function(){return gt},set:function(t){gt=t}},Zt,{get:function(){return te},set:function(t){te=t}},ie,{get:function(){return ne},set:function(t){ne=t}}),R.set(R.get()+1),ft=Mt,Dt=At,lt.AssignSource(i.FFont),ht=i.FFont.FColor,ut.AssignSource(at),Ct=rt,tt+=I,q.$assign(Q);var le=nt;2===le?Q.Right-Q.Left-Z>0&&(q.Left=Q.Left+(Q.Right-Q.Left-Z)/2):1===le&&Q.Right-Z>Q.Left&&(q.Left=Q.Right-Z),q.Left=q.Left+ot,q.Right=q.Right+ot,q.Bottom=q.Top+tt+Ht+Ut,c||(at.AssignSource(mt),rt=St,i.FFont.AssignSource(pt),Ft=ct,P.set(xt),jt=wt,Qt=qt,re(i,{get:function(){return Y},set:function(t){Y=t}},pas["WEBLib.TMSFNCTypes"].TRectF.$clone(q),p,{get:function(){return Z},set:function(t){Z=t}},{get:function(){return tt},set:function(t){tt=t}},{get:function(){return Ht},set:function(t){Ht=t}},{get:function(){return Ut},set:function(t){Ut=t}},{get:function(){return kt},set:function(t){kt=t}},{get:function(){return nt},set:function(t){nt=t}},{get:function(){return ot},set:function(t){ot=t}},o,a,{get:function(){return yt},set:function(t){yt=t}},{get:function(){return gt},set:function(t){gt=t}},Zt,{get:function(){return te},set:function(t){te=t}},ie,{get:function(){return ne},set:function(t){ne=t}}),xt=P.get(),wt=jt,Q.Left=n.Left+ie.Left,Q.Right=n.Right-ie.Right,q.Top>ie.Bottom&&(ie.Left=0,ie.Right=0,Q.Left=n.Left),st.$assign(i.CalculateText$1("gh")),(yt&&a>q.Bottom-kt-(st.Bottom-st.Top)&&a<q.Bottom-kt||gt)&&(J=!0),Zt=te,pt.AssignSource(i.FFont),ct=Ft,mt.AssignSource(at),St=rt),0!==ne&&ne!==oe?(Q.Left=se.x,Q.Top=se.y,ne=0):(Q.Top=Q.Top+tt+Ht+Ut,N.set(N.get()+tt+Ht+Ut)),Q.Top+et>Q.Bottom+1&&!c&&(s="")}return 0===N.get()&&(st.$assign(i.CalculateText$1("gh")),N.set(st.Bottom-st.Top)),1,i.FStroke.SetKind(V),i.FFill.SetKind(K),i.FStroke.SetColor(z),i.FFill.SetColor(vt),i.FFont.AssignSource(at),at=rtl.freeLoc(at),pt=rtl.freeLoc(pt),lt=rtl.freeLoc(lt),mt=rtl.freeLoc(mt),ut=rtl.freeLoc(ut),J},this.ParseControl=function(i,s,n,o,a,r,l,h){var p="",c=0;s.set(""),a.set(""),r.set(""),o.set(""),n.set(""),l.set(""),h.set(""),c=0,e.VarIPos("TYPE=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),s.set(pas.SysUtils.UpperCase(p))),e.VarIPos("WIDTH=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),a.set(p)),e.VarIPos("HEIGHT=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),r.set(p)),e.VarIPos("ID=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),n.set(p)),e.VarIPos("VALUE=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),o.set(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(p,!0,!1))),e.VarIPos("PROP=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),l.set(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(p,!0,!1))),e.VarIPos("MAXLEN=",i,{get:function(){return c},set:function(t){c=t}})>0&&(p=pas.System.Copy(i,c+1,i.length),p=pas.System.Copy(p,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,p)-1),h.set(p))},t.$implcode=function(){e.VarIPos=function(t,e,i){return i.set(pas.System.Pos(t,pas.SysUtils.UpperCase(e))),i.get()},e.IStrToInt=function(t){var e=0,i=0;return pas.System.val$6(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}}),i},e.DBTagStrip=function(t){var e,i="",s=0;return(e=pas.System.Pos("<#",t))>0?(i=pas.System.Copy(t,1,e-1),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,e),(s=pas.System.Pos(">",t))>0&&pas.System.Delete({get:function(){return t},set:function(e){t=e}},s,1),i+=t):i=t,i},e.HexVal=function(t){return t.length<2?0:((t.charAt(0)>="A"?t.charCodeAt(0)-65+10:t.charCodeAt(0)-48)<<4)+(t.charAt(1)>="A"?t.charCodeAt(1)-65+10:t.charCodeAt(1)-48)},e.UnicodeTagStrip=function(t){var i=0,s=0,n=0,o=0,a="",r="",l=0,h=!1;function p(t,e){var i=0,s=0,n=0;i=n=e?4:3;for(var o=n,a=t.length;o<=a;o++){if(s=o,!(t.charAt(s-1)>="0"&&t.charAt(s-1)<="9")){i=s;break}if(e&&!(t.charAt(s-1)>="A"&&t.charAt(s-1)<="F")&&e&&!(t.charAt(s-1)>="a"&&t.charAt(s-1)<="f")){i=s;break}}return i}r="";do{if(i=pas.System.Pos("&#",t),(n=pas.System.Pos("&&#",t))===i-1&&0!==n&&(i=0),i>0)if(r+=pas.System.Copy(t,1,i-1),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,i-1),h=1===pas.System.Pos("&#x",t),(s=pas.System.Pos(";",t))>7&&(s=p(t,h)),s>0){if(h){a=pas.System.Copy(t,4,s-4);try{l=e.HexVal(a),o=0}catch(t){l=0}}else a=pas.System.Copy(t,3,s-3),pas.System.val$6(a,{get:function(){return l},set:function(t){l=t}},{get:function(){return o},set:function(t){o=t}});a.length>0&&a.length<=6&&0===o&&(r+=String.fromCharCode(l),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,s))}else r+="&#",pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,2);else r+=t}while(!(i<=0));return r},e.CRLFStrip=function(t,e){var i="",s=0;i="";for(var n=1,o=t.length;n<=o;n++)s=n,"\r"!==t.charAt(s-1)&&"\n"!==t.charAt(s-1)?i+=t.charAt(s-1):"\r"===t.charAt(s-1)&&e&&(i+="<BR>");return i},e.IsCJKChar=function(t){var e=!1;if(e=!1,t<"✐")return e;var i=4294967295&t.charCodeAt();return(i>=19968&&i<=40959||i>=13312&&i<=19903||i>=131072&&i<=173791||i>=173824&&i<=177983||i>=177984&&i<=178207||i>=178208&&i<=183983||i>=63744&&i<=64255||i>=194560&&i<=195103)&&(e=!0),e},e.PosBreak=function(t){var i=0,s=0,n="\0";i=0;for(var o=1,a=t.length;o<=a;o++)if(s=o,n=t.charAt(s-1),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.CharInSet(n,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.CreateCharSet(" "))||e.IsCJKChar(n)){i=s;break}return i}}}),["SysUtils","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCGraphics.General",["System","Classes","WEBLib.TMSFNCGraphicsTypes","Types","WEBLib.Graphics","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCTypes"],(function(){"use strict";rtl.createClass(this,"TTMSFNCGraphicsContextGeneral",pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext,(function(){this.$init=function(){pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$init.call(this),this.FOldPenStyle=0,this.FOldPenWidth=0},this.DrawRotatedText=function(t,e,i,s,n,o){var a,r=0,l=0,h=pas["WEBLib.Graphics"].TCanvasRectF.$new();a=i,e.Left,e.Top,t.TextWidth(a),t.TextHeight(a);1===n?r=0:0===n?r=2:2===n&&(r=1);0===o?l=2:1===o?l=0:2===o&&(l=1),h.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),t.TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(h),a,!1,!1,r,l)},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.GetFillColor=function(){return this.GetCanvas().FBrush.FColor},this.CalculateText=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.Graphics"].TCanvasRectF.$new();return n.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n.$assign(this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(n),t,i,!0,0,0)),s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Bottom)),s},this.SetTextAngle=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0,n=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),o=0,a=0,r=0,l=0,h=0,p=0;return i.$assign(t),0!==e&&(s=pas.Math.DegToRad(e),n.X=i.Left+(i.Right-i.Left)/2,n.Y=i.Top+(i.Bottom-i.Top)/2,this.GetCanvas().Transform(Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),n.X,n.Y),r=i.Right-i.Left,h=i.Bottom-i.Top,o=Math.cos(s),a=Math.sin(s),l=Math.abs(r*o)+Math.abs(h*a),p=Math.abs(r*a)+Math.abs(h*o),i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-l/2,-p/2,l/2,p/2))),i},this.Render=function(){},this.SetTextQuality=function(t){},this.SetAntiAliasing=function(t){},this.SetShowAcceleratorChar=function(t){},this.SetSize=function(t,e){},this.ResetTextAngle=function(t){0!==t&&this.GetCanvas().SetTransform(1,0,0,1,0,0)},this.BeginScene=function(){null!=this.GetCanvas()&&(this.GetCanvas().BeginScene(),this.GetCanvas().Clear())},this.EndScene=function(){this.GetCanvas().EndScene()},this.StartSpecialPen=function(){this.FOldPenStyle=this.GetCanvas().FPen.FStyle,this.FOldPenWidth=this.GetCanvas().FPen.FWidth,this.GetCanvas().FPen.FStyle=2,this.GetCanvas().FPen.FWidth=1},this.StopSpecialPen=function(){this.GetCanvas().FPen.FStyle=this.FOldPenStyle,this.GetCanvas().FPen.FWidth=this.FOldPenWidth},this.RestoreState=function(t){null!=t&&(t.FSaveDC=0),this.GetCanvas().Restore(),this.GetCanvas().Refresh()},this.SaveState=function(t){this.GetCanvas().Refresh(),this.GetCanvas().Save()},this.SetFont=function(t){this.GetCanvas().FFont.Assign(t)},this.SetFill=function(t){this.GetCanvas().FBrush.FColor=t.FColor,this.GetCanvas().FBrush.FGradient=0,this.GetCanvas().FBrush.ClearGradient();var e=t.FKind;if(1===e)this.GetCanvas().FBrush.FStyle=0;else if(2===e){this.GetCanvas().FBrush.ClearGradient(),-1!==t.FColorMirror&&-1!==t.FColorMirrorTo?(this.GetCanvas().FBrush.AddGradientColor(t.FColor,0),this.GetCanvas().FBrush.AddGradientColor(t.FColorTo,.5),this.GetCanvas().FBrush.AddGradientColor(t.FColorMirror,.5),this.GetCanvas().FBrush.AddGradientColor(t.FColorMirrorTo,1)):(this.GetCanvas().FBrush.AddGradientColor(t.FColor,0),this.GetCanvas().FBrush.AddGradientColor(t.FColorTo,1));var i=t.FOrientation;0===i?this.GetCanvas().FBrush.FGradient=2:1===i&&(this.GetCanvas().FBrush.FGradient=1)}else 0===e&&(this.GetCanvas().FBrush.FStyle=1)},this.SetFillColor=function(t){this.GetCanvas().FBrush.FColor=t},this.SetStroke=function(t){this.GetCanvas().FPen.SetColor(t.FColor),this.GetCanvas().FPen.FWidth=Math.round(t.FWidth);var e=t.FKind;1===e?this.GetCanvas().FPen.FStyle=0:0===e?this.GetCanvas().FPen.FStyle=5:2===e?this.GetCanvas().FPen.FStyle=1:3===e?this.GetCanvas().FPen.FStyle=2:4===e?this.GetCanvas().FPen.FStyle=3:5===e&&(this.GetCanvas().FPen.FStyle=4)},this.DrawLine=function(t,e,i,s,n){this.GetCanvas().MoveTo$1(e.X,e.Y),this.GetCanvas().LineTo$1(i.X,i.Y)},this.FillRect=function(t,e,i){var s,n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a=0;if(e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Bottom)),o=-1,a=1,2===t.FKind){if(-1!==t.FColor&&-1!==t.FColorTo)if(-1!==t.FColorMirror&&-1!==t.FColorMirrorTo){var r=t.FOrientation;0===r?(pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(n.Right-n.Left)/2,n.Bottom)),0,{},!0),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left+(n.Right-n.Left)/2,n.Top,n.Right,n.Bottom)),0,{},!0)):1===r&&(pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Top+(n.Bottom-n.Top)/2)),0,{},!1),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top+(n.Bottom-n.Top)/2,n.Right,n.Bottom)),0,{},!1))}else pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),0,{},0===t.FOrientation);o=this.GetCanvas().FBrush.FColor,a=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1}s=this.GetCanvas().FPen.FStyle,this.GetCanvas().FPen.FStyle=5,-1!==t.FColor&&1===t.FKind&&this.GetCanvas().Rectangle$3(pas["WEBLib.Graphics"].CreateCanvasRectF(n.Left,n.Top,n.Right,n.Bottom)),this.GetCanvas().FPen.FStyle=s,2===t.FKind&&(this.GetCanvas().FBrush.FColor=o,this.GetCanvas().FBrush.FStyle=a)},this.DrawRect=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,s)),n.$assign(e),1 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),2,2),0 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),2,2),3 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2),2 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2)},this.FillRoundRect=function(t,e,i,s,n){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r={};if(e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,n)),o.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Bottom)),a.$assign(o),a.Bottom=a.Bottom-1,a.Right=a.Right-1,2===t.FKind){if(-1!==t.FColor&&-1!==t.FColorTo)if(-1!==t.FColorMirror&&-1!==t.FColorMirrorTo){var l=t.FOrientation;0===l?(r={},0 in s&&(r=rtl.unionSet(r,rtl.createSet(0))),2 in s&&(r=rtl.unionSet(r,rtl.createSet(2))),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(a.Left,a.Top,a.Left+(a.Right-a.Left)/2,o.Bottom)),i,rtl.refSet(r),!0),r={},1 in s&&(r=rtl.unionSet(r,rtl.createSet(1))),3 in s&&(r=rtl.unionSet(r,rtl.createSet(3))),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(a.Left+(a.Right-o.Left)/2,a.Top,a.Right,a.Bottom)),i,rtl.refSet(r),!0)):1===l&&(r={},0 in s&&(r=rtl.unionSet(r,rtl.createSet(0))),1 in s&&(r=rtl.unionSet(r,rtl.createSet(1))),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(a.Left,a.Top,a.Right,a.Top+(a.Bottom-a.Top)/2)),i,rtl.refSet(r),!1),r={},2 in s&&(r=rtl.unionSet(r,rtl.createSet(2))),3 in s&&(r=rtl.unionSet(r,rtl.createSet(3))),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(a.Left,a.Top+(a.Bottom-a.Top)/2,a.Right,a.Bottom)),i,rtl.refSet(r),!1))}else pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),i,rtl.refSet(s),0===t.FOrientation)}else-1!==t.FColor&&1===t.FKind&&pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColor,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),i,rtl.refSet(s),0===t.FOrientation)},this.DrawRoundRect=function(t,e,i,s,n){var o,a,r,l=pas["WEBLib.Graphics"].TCanvasRectF.$new(),h=pas["WEBLib.Graphics"].TCanvasRectF.$new();function p(t,e,i,s,n){t.AngleArc$1(e.X,e.Y,i.X,pas.Math.DegToRad(s),pas.Math.DegToRad(n))}e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,n)),l.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),h.$assign(l),h.Bottom=h.Bottom-1,h.Right=h.Right-1,a=this.GetCanvas().FBrush.FColor,r=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,o=Math.round(i),rtl.eqSet(s,rtl.createSet(0,1,2,3))?this.GetCanvas().RoundRect$3(l,2*o,2*o):rtl.eqSet(s,{})?this.GetCanvas().Rectangle$3(l):(2 in s?(this.GetCanvas().MoveTo$1(l.Left+o,l.Bottom),p(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(l.Left+o,l.Bottom-o)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o,o)),-270,90),this.GetCanvas().MoveTo$1(l.Left,l.Bottom-o)):this.GetCanvas().MoveTo$1(l.Left,l.Bottom),0 in s?(this.GetCanvas().LineTo$1(l.Left,l.Top+o),p(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(l.Left+o,l.Top+o)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o,o)),-180,90),this.GetCanvas().MoveTo$1(l.Left+o,l.Top)):this.GetCanvas().LineTo$1(l.Left,l.Top),1 in s?(this.GetCanvas().LineTo$1(l.Right-o,l.Top),p(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(l.Right-o,l.Top+o)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o,o)),-90,90),this.GetCanvas().MoveTo$1(l.Right,l.Top+o)):this.GetCanvas().LineTo$1(l.Right,l.Top),3 in s?(this.GetCanvas().LineTo$1(l.Right,l.Bottom-o),p(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(l.Right-o,l.Bottom-o)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o,o)),0,90),this.GetCanvas().MoveTo$1(l.Right-o,l.Bottom)):this.GetCanvas().LineTo$1(l.Right,l.Bottom),2 in s?this.GetCanvas().LineTo$1(l.Left+o,l.Bottom):this.GetCanvas().LineTo$1(l.Left,l.Bottom)),this.GetCanvas().FBrush.FColor=a,this.GetCanvas().FBrush.FStyle=r},this.FillEllipse=function(t,e,i){var s,n=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),n.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),s=this.GetCanvas().FPen.FStyle,this.GetCanvas().FPen.FStyle=5,this.GetCanvas().Ellipse$3(n),this.GetCanvas().FPen.FStyle=s},this.DrawEllipse=function(t,e,i){var s,n,o=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),o.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n=this.GetCanvas().FBrush.FColor,s=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,this.GetCanvas().Ellipse$3(o),this.GetCanvas().FBrush.FStyle=s,this.GetCanvas().FBrush.FColor=n},this.DrawBitmap=function(t,e,i,s){this.GetCanvas().StretchDraw$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(i.Left,i.Top,i.Right,i.Bottom)),t)},this.ClipRect=function(t){this.GetCanvas().SetClipRect(pas["WEBLib.Graphics"].CreateCanvasRectF(t.Left,t.Top,t.Right,t.Bottom))},this.DrawFocusRectangle=function(t,e,i,s){var n,o,a=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,s)),a.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n=this.GetCanvas().FBrush.FColor,o=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,this.GetCanvas().FPen.SetColor(i),this.StartSpecialPen(),this.GetCanvas().Rectangle$3(a),this.StopSpecialPen(),this.GetCanvas().FBrush.FColor=n,this.GetCanvas().FBrush.FStyle=o},this.DrawText=function(t,e,i,s,n,o,a){var r,l,h=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),p=0,c=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=null;if(r=this.GetCanvas().FBrush.FColor,l=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Bottom)),i){var u=n;0===u?(h.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),p=Math.round(h.Bottom-h.Top),c.Top=c.Top+Math.max(0,(c.Bottom-c.Top-p)/2),c.Bottom=Math.max(0,Math.min(Math.round(e.Bottom),c.Top+p))):2===u&&(h.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),p=Math.round(h.Bottom-h.Top),c.Top=c.Bottom-p,c.Bottom=c.Top+p)}if(0!==a)this.DrawRotatedText(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(c),t,a,s,n);else{F=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsSaveState.$create("Create$1");try{this.SaveState(F),this.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(c));var C=s;if(1===C){var d=n;1===d?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,0,0):0===d?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,0,2):2===d&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,0,1)}else if(0===C){var T=n;1===T?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,2,0):0===T?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,2,2):2===T&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,2,1)}else if(2===C){var m=n;1===m?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,1,0):0===m?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,1,2):2===m&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(c.Left,c.Top,c.Right,c.Bottom)),t,i,!1,1,1)}}finally{this.RestoreState(F)}}this.GetCanvas().FBrush.FColor=r,this.GetCanvas().FBrush.FStyle=l}}))}),["Math"]),rtl.module("WEBLib.TMSFNCGraphics.WEB",["System","Classes","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCUtils","Types","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.Graphics"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCGraphicsContextWEB",pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext,(function(){this.$init=function(){pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$init.call(this),this.FActivePath=null,this.FScale=0,this.FNeedsRendering=!1,this.FFont=null,this.FFill=null,this.FStroke=null,this.FContextSize=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),this.FNCanvas=null,this.FBitmap=null},this.$final=function(){this.FActivePath=void 0,this.FFont=void 0,this.FFill=void 0,this.FStroke=void 0,this.FContextSize=void 0,this.FBitmap=void 0,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$final.call(this)},this.DestroyResources=function(){null!=this.FNCanvas&&(this.RestoreContext(),this.FNCanvas=null),null!=this.FBitmap&&(rtl.free(this,"FBitmap"),this.FBitmap=null)},this.DrawTextInternal=function(t,e,i,s,n){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=0,r="",l="",h=0,p=0,c=!1,F=0,u=0,C=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),d=0;function T(t,e){var i,s="",n=0;if(s="",i=t.length,e.get()>i)return s;for(n=e.get();;){if("\n"===t.charAt(n-1)&&"\r"===t.charAt(n-1-1)||"\r"===t.charAt(n-1)&&"\n"===t.charAt(n-1-1)||" "===t.charAt(n-1)){s=" "===t.charAt(n-1)?pas.System.Copy(t,e.get(),n-(e.get()-1)):pas.System.Copy(t,e.get(),n-e.get());break}if("\n"===t.charAt(n-1)||"\r"===t.charAt(n-1)||" "===t.charAt(n-1)){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}if(n>=i){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}n+=1}return e.set(n+1),s}if(i){for(C.$assign(e),p=0,a=1,u=0,d=0,F=0,p+=0,(r=T(t,{get:function(){return a},set:function(t){a=t}})).length>0&&" "===r.charAt(r.length-1)&&(p+=d);a<=t.length&&((h=r.length)>=2&&("\n"===r.charAt(h-1)&&"\r"===r.charAt(h-1-1)||"\r"===r.charAt(h-1)&&"\n"===r.charAt(h-1-1))?(r=pas.System.Copy(r,1,h-2),c=!0):h>=1&&("\n"===r.charAt(h-1)||"\r"===r.charAt(h-1))?(r=pas.System.Copy(r,1,h-1),c=!0):c=!1,l=T(t,{get:function(){return a},set:function(t){a=t}}),!((e.Left+p+0>e.Right||c)&&(""!==r&&(u+=1,p>F&&(F=p),p=0),r="",e.Top=e.Top+0,pas.System.Trunc(e.Top)>pas.System.Trunc(e.Bottom-0)&&!n)));)p+=0,l.length>0&&" "===l.charAt(l.length-1)&&(p+=d),r+=l;""!==r&&(u+=1,p>F&&(F=p)),o.$assign(pas["WEBLib.TMSFNCTypes"].RectF(C.Left,C.Top,C.Left+F,C.Top+0*u))}else;return o},this.DrawLinearGradient=function(t){if(null!=this.FNCanvas){this.FFill.FOrientation;-1!==this.FFill.FColorTo&&-1!==this.FFill.FColorMirror||this.FFill.FColorTo}},this.FontChanged=function(t){},this.FillChanged=function(t){null!=this.FNCanvas&&this.ApplyFill()},this.StrokeChanged=function(t){null!=this.FNCanvas&&this.ApplyStroke()},this.RestoreContext=function(){this.FNCanvas},this.SaveContext=function(){this.FNCanvas},this.ApplyStroke=function(){this.FNCanvas},this.ApplyFill=function(){if(null!=this.FNCanvas)this.FFill.FKind},this.Create$1=function(t){return pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.Create$1.apply(this,arguments),this.FScale=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(null,-1),this.FNeedsRendering=!0,this.FContextSize.cx=0,this.FContextSize.cy=0,this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this},this.Destroy=function(){this.Render(),null!=this.FFont&&(rtl.free(this,"FFont"),this.FFont=null),null!=this.FFill&&(rtl.free(this,"FFill"),this.FFill=null),null!=this.FStroke&&(rtl.free(this,"FStroke"),this.FStroke=null),this.DestroyResources(),pas.System.TObject.Destroy.call(this)},this.GetFillColor=function(){return this.GetGraphics().FFill.FColor},this.CalculateText=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),null==this.FNCanvas||(this.SaveContext(),s.$assign(this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,1,!0)),this.RestoreContext()),s},this.SetTextAngle=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0,n=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),o=0,a=0,r=0,l=0,h=0,p=0;return i.$assign(t),null==this.FNCanvas||0!==e&&(s=pas.Math.DegToRad(e),n.X=i.Left+(i.Right-i.Left)/2,n.Y=i.Top+(i.Bottom-i.Top)/2,this.SaveContext(),o=i.Right-i.Left,a=i.Bottom-i.Top,r=Math.cos(s),l=Math.sin(s),h=Math.abs(o*r)+Math.abs(a*l),p=Math.abs(o*l)+Math.abs(a*r),i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-h/2,-p/2,h/2,p/2))),i},this.Render=function(){this.FNeedsRendering&&(this.FNeedsRendering=!1,this.DestroyResources())},this.ScaleTransform=function(t,e){this.FNCanvas},this.SetTextQuality=function(t){},this.SetAntiAliasing=function(t){this.FNCanvas},this.SetShowAcceleratorChar=function(t){},this.SetSize=function(t,e){this.FContextSize.cx=t,this.FContextSize.cy=e,this.DestroyResources(),this.FBitmap=pas["WEBLib.Graphics"].TBitmap.$create("Create$3"),this.ScaleTransform(this.FScale,this.FScale),this.SaveContext()},this.ResetTextAngle=function(t){null!=this.FNCanvas&&0!==t&&this.RestoreContext()},this.BeginScene=function(){this.FNCanvas},this.EndScene=function(){null!=this.FNCanvas&&this.Render()},this.RestoreState=function(t){null!=this.FNCanvas&&this.RestoreContext()},this.SaveState=function(t){null!=this.FNCanvas&&this.SaveContext()},this.SetFont=function(t){null!=this.FNCanvas&&this.FFont.AssignSource(t)},this.SetFill=function(t){null!=this.FNCanvas&&this.FFill.Assign(t)},this.SetFillColor=function(t){null!=this.FNCanvas&&this.FFill.SetColor(t)},this.SetStroke=function(t){null!=this.FNCanvas&&this.FStroke.Assign(t)},this.DrawLine=function(t,e,i,s,n){null!=this.FNCanvas&&(this.SaveContext(),this.RestoreContext())},this.DrawPolygon=function(t,e){null!=this.FNCanvas&&0!==rtl.length(e)&&(this.SaveContext(),this.ApplyStroke(),this.RestoreContext())},this.FillPolygon=function(t,e){if(null!=this.FNCanvas&&0!==rtl.length(e)){this.SaveContext();var i=t.FKind;1===i?this.ApplyFill():2===i&&null!=this.FActivePath&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.FActivePath.GetBounds())),this.RestoreContext()}},this.DrawPolyline=function(t,e){null!=this.FNCanvas&&0!==rtl.length(e)&&(this.SaveContext(),this.ApplyStroke(),this.RestoreContext())},this.FillPolyline=function(t,e){if(null!=this.FNCanvas&&0!==rtl.length(e)){this.SaveContext();var i=t.FKind;1===i?this.ApplyFill():2===i&&null!=this.FActivePath&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.FActivePath.GetBounds())),this.RestoreContext()}},this.FillRect=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){s.$assign(e),this.SaveContext();var n=t.FKind;1===n?this.ApplyFill():2===n&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s)),this.RestoreContext()}},this.DrawRect=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=this.FNCanvas&&(n.$assign(e),1 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),2,2),0 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),2,2),3 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2),2 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2))},this.FillRoundRect=function(t,e,i,s,n){var o,a=null,r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();r.$assign(e),o=i,a=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{2 in s?(a.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom-o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-270,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom-o))):a.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),0 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top+o)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Top+o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-180,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Top))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top)),1 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Top)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Top+o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-90,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top+o))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top)),3 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom-o)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Bottom-o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),0,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Bottom))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom)),2 in s?a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom)):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),a.ClosePath(),this.FillPath(this.FFill,a,0)}finally{a=rtl.freeLoc(a)}},this.DrawRoundRect=function(t,e,i,s,n){var o,a=null,r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();r.$assign(e),o=i,a=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{2 in s?(a.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom-o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-270,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom-o))):a.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),0 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top+o)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Top+o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-180,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Top))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top)),1 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Top)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Top+o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),-90,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top+o))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top)),3 in s?(a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom-o)),a.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Bottom-o),pas["WEBLib.TMSFNCTypes"].PointF(o,o),0,90),a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-o,r.Bottom))):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom)),2 in s?a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+o,r.Bottom)):a.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),a.ClosePath(),this.DrawPath(this.FStroke,a,0)}finally{a=rtl.freeLoc(a)}},this.FillEllipse=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){s.$assign(e),this.SaveContext();var n=t.FKind;1===n?this.ApplyFill():2===n&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s)),this.RestoreContext()}},this.DrawEllipse=function(t,e,i){null!=this.FNCanvas&&(this.SaveContext(),this.ApplyStroke(),this.RestoreContext())},this.DrawBitmap=function(t,e,i,s){null!=t&&null!=this.FNCanvas&&(this.SaveContext(),this.RestoreContext())},this.ClipRect=function(t){null!=this.FNCanvas&&this.SaveContext()},this.DrawFocusRectangle=function(t,e,i,s){this.FNCanvas},this.DrawText=function(t,e,i,s,n,o,a){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){this.SaveContext(),r.$assign(this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s,!0));var l=n;0===l?this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top+(e.Bottom-e.Top-(r.Bottom-r.Top))/2,e.Right,e.Top+(e.Bottom-e.Top-(r.Bottom-r.Top))/2+(r.Bottom-r.Top))),i,s,!1):1===l?this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Top+(r.Bottom-r.Top))),i,s,!1):2===l&&this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Bottom-(r.Bottom-r.Top),e.Right,e.Bottom)),i,s,!1),this.RestoreContext()}},this.DrawPath=function(t,e,i){var s=[];if(null!=e){this.FActivePath=e,s=rtl.arraySetLength(s,pas["WEBLib.TMSFNCTypes"].TPointF,0),e.FlattenToPolygon({get:function(){return s},set:function(t){s=t}},.25);var n=i;0===n?this.DrawPolygon(t,rtl.arrayRef(s)):1===n&&this.DrawPolyline(t,rtl.arrayRef(s)),this.FActivePath=null}},this.FillPath=function(t,e,i){var s=[];if(null!=e){this.FActivePath=e,s=rtl.arraySetLength(s,pas["WEBLib.TMSFNCTypes"].TPointF,0),e.FlattenToPolygon({get:function(){return s},set:function(t){s=t}},.25);var n=i;0===n?this.FillPolygon(t,rtl.arrayRef(s)):1===n&&this.FillPolyline(t,rtl.arrayRef(s)),this.FActivePath=null}}})),this.GetNativeContextClass=function(){return t.TTMSFNCGraphicsContextWEB}}),["SysUtils","Math"]),rtl.module("WEBLib.TMSFNCGraphics",["System","Classes","WEBLib.TMSFNCGraphicsTypes","WEBLib.Graphics","JS","WEBLib.TMSFNCBitmapContainer","Types","WEBLib.TMSFNCTypes"],(function(){"use strict";var t=this;this.$rtti.$Class("TTMSFNCGraphics"),rtl.createClass(this,"TTMSFNCGraphicsContext",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FGraphics=null},this.$final=function(){this.FGraphics=void 0,pas.System.TObject.$final.call(this)},this.GetCanvas=function(){var t=null;return t=null,null!=this.GetGraphics()&&(t=this.GetGraphics().GetCanvas()),t},this.GetGraphics=function(){return this.FGraphics},this.Create$1=function(t){return this.FGraphics=t,this}})),rtl.createClass(this,"TTMSFNCGraphics",pas.System.TObject,(function(){this.DefaultSelectionFillColor=0,this.DefaultTextFontColor=0,this.DefaultPopupFillColor=0,this.DefaultPopupStrokeColor=0,this.DefaultButtonStrokeColorFocused=0,this.DefaultButtonFillColorFocused=0,this.DefaultButtonStrokeColorDisabled=0,this.DefaultButtonFillColorDisabled=0,this.DefaultButtonStrokeColor=0,this.DefaultButtonFillColor=0,this.$init=function(){pas.System.TObject.$init.call(this),this.FSaveFont=null,this.FActiveCanvas=null,this.FBlockUpdate=0,this.FNative=!1,this.FContextNative=null,this.FContextGeneral=null,this.FBitmap=null,this.FFill=null,this.FStroke=null,this.FFont=null,this.FHighlightColor=0,this.FOptimizedHTMLDrawing=!1,this.FHighlightTextColor=0,this.FHighlightFontStyles={},this.FURLUnderline=!1,this.FURLColor=0,this.FBitmapContainer=null},this.$final=function(){this.FSaveFont=void 0,this.FActiveCanvas=void 0,this.FContextNative=void 0,this.FContextGeneral=void 0,this.FBitmap=void 0,this.FFill=void 0,this.FStroke=void 0,this.FFont=void 0,this.FHighlightFontStyles=void 0,this.FBitmapContainer=void 0,pas.System.TObject.$final.call(this)},this.GetCanvas=function(){return this.FActiveCanvas},this.GetContext=function(){return this.FNative?this.FContextNative:this.FContextGeneral},this.FontChanged=function(t){this.SetFont(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont))},this.FillChanged=function(t){this.SetFill(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill))},this.StrokeChanged=function(t){this.SetStroke(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke))},this.InitializeDefaultAppearance=function(){this.FURLColor=16711680,this.FURLUnderline=!0,this.SetFill(this.FFill),this.SetStroke(this.FStroke),this.SetFont(this.FFont)},this.InternalCalculateText=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o="",a="",r="",l=0,h=0,p=0,c=0,F=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),u=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),C=0,d="",T="",m="";return n.$assign(e),Math.round(n.Right-n.Left)<=0?(n.Bottom=n.Top,n):(""!==t?s&&(pas.System.Pos("</",t)>0||pas.System.Pos("/>",t)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(t))>0)?(F.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),l=0,h=0,p=-1,c=-1,r="",a="",o="",C=0,u.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),d="",m="",T="",pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),0,0,-1,-1,0,!1,!0,!1,!1,!1,!1,i,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return r},set:function(t){r=t}},{get:function(){return l},set:function(t){l=t}},{get:function(){return h},set:function(t){h=t}},{get:function(){return p},set:function(t){p=t}},{get:function(){return c},set:function(t){c=t}},F,u,{get:function(){return d},set:function(t){d=t}},{get:function(){return m},set:function(t){m=t}},{get:function(){return T},set:function(t){T=t}},{get:function(){return C},set:function(t){C=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),h+=1,n.Right=n.Left+l,n.Bottom=n.Top+h):(n.$assign(this.GetContext().CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),n.Bottom=n.Bottom+1):(n.Right=n.Left,n.Bottom=n.Top),n)},this.InternalDrawText=function(t,e,i,s,n,o,a,r,l,h,p,c,F,u,C,d){var T,m="",S="",y="",g="",f=0,M=0,B=0,b=0,L=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),E=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),v=0,N=0,P=0,D=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),A=!1,$=null;if(T=this.GetContext().GetFillColor(),this.GetContext().SetFillColor(this.FFont.FColor),c>-1&&t.Bottom-t.Top<c&&(t.Bottom=t.Top+c),p>-1&&t.Right-t.Left<p&&(t.Right=t.Left+p),t.$assign(this.GetContext().SetTextAngle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),h)),m="",(pas.System.Pos("</",e)>0||pas.System.Pos("/>",e)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(e))>0)&&F){if(L.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),f=0,M=0,B=-1,b=-1,g="",y="",S="",P=0,E.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),i.set(""),s.set(""),n.set(""),pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),0,0,-1,-1,0,!1,!0,!1,!1,!1,!1,o,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return S},set:function(t){S=t}},{get:function(){return y},set:function(t){y=t}},{get:function(){return g},set:function(t){g=t}},{get:function(){return f},set:function(t){f=t}},{get:function(){return M},set:function(t){M=t}},{get:function(){return B},set:function(t){B=t}},{get:function(){return b},set:function(t){b=t}},L,E,i,s,n,{get:function(){return P},set:function(t){P=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),M+=1,f+=1,o&&P<=1||!o){v=t.Left,N=t.Top;var W=a;0===W?v+=(t.Right-t.Left-f)/2:2===W&&(v=t.Left+(t.Right-t.Left)-f);var G=r;0===G?N+=(t.Bottom-t.Top-M)/2:2===G&&(N=N+(t.Bottom-t.Top)-M),D.$assign(pas["WEBLib.TMSFNCTypes"].RectF(v,N,v+f,N+M))}else D.$assign(t);$=this.SaveState(!0),this.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t)),A=pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(D),Math.round(C),Math.round(d),-1,-1,0,u,!1,!1,!1,!1,!1,o,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return S},set:function(t){S=t}},{get:function(){return y},set:function(t){y=t}},{get:function(){return g},set:function(t){g=t}},{get:function(){return f},set:function(t){f=t}},{get:function(){return M},set:function(t){M=t}},{get:function(){return B},set:function(t){B=t}},{get:function(){return b},set:function(t){b=t}},L,E,i,s,n,{get:function(){return P},set:function(t){P=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),this.RestoreState($,!0),A&&(m=S)}else u||this.GetContext().DrawText(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),o,a,r,l,h);return this.GetContext().ResetTextAngle(h),this.GetContext().SetFillColor(T),m},this.DrawTexture=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=0,r=0;if(!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)){s.$assign(t);var l=i;if(0===l)n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Top,t.Left+e.GetWidth(),t.Top+e.GetHeight())),pas["WEBLib.TMSFNCTypes"].IntersectRectEx$1(o,s,n),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,o.Right-o.Left,o.Bottom-o.Top)),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(o.Right-o.Left),n.Top+(o.Bottom-o.Top))),e,!1,!1,!1,!1);else if(1===l)n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),n.$assign(pas["WEBLib.TMSFNCTypes"].RectSnapToPixelEx(pas["WEBLib.TMSFNCTypes"].RectFitIntoEx$1(n,t),1,!1)),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),e,!1,!0,!1,!1);else if(2===l)this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,!1,!0,!1,!1);else if(4===l)for(var h=0,p=pas.System.Trunc((s.Right-s.Left)/e.GetWidth())+1;h<=p;h++){a=h;for(var c=0,F=pas.System.Trunc((s.Bottom-s.Top)/e.GetHeight())+1;c<=F;c++)r=c,n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top,s.Left+e.GetWidth(),s.Top+e.GetHeight())),pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(n,a*e.GetWidth(),r*e.GetHeight()),pas["WEBLib.TMSFNCTypes"].IntersectRectEx$1(o,s,n),pas["WEBLib.TMSFNCTypes"].IntersectRectEx(o,n)&&this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(o.Right-o.Left),n.Top+(o.Bottom-o.Top))),e,!1,!1,!1,!1)}else 3===l&&(n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),n.$assign(pas["WEBLib.TMSFNCTypes"].RectSnapToPixelEx(pas["WEBLib.TMSFNCTypes"].RectCenterAtEx(n,t),1,!1)),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),e,!0,!1,!0,!1))}},this.DrawSVG=function(t,e){return!1,!1},this.Create$1=function(t,e){return this.FNative=e,this.FActiveCanvas=t,e?(this.FContextNative=pas["WEBLib.TMSFNCGraphics.WEB"].GetNativeContextClass().$create("Create$1",[this]),this.FContextNative.SetSize(1,1)):(this.FContextGeneral=pas["WEBLib.TMSFNCGraphics.General"].TTMSFNCGraphicsContextGeneral.$create("Create$1",[this]),this.FContextGeneral.SetSize(1,1)),this.FSaveFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FSaveFont.Assign(t.FFont),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FHighlightColor=16711680,this.FHighlightTextColor=16777215,this.FHighlightFontStyles={},this.InitializeDefaultAppearance(),this},this.CreateBitmapCanvas=function(t,e,i,s){return this.FNative=i,this.FBitmap=pas["WEBLib.Graphics"].TBitmap.$create("Create$3"),this.FBitmap.SetWidth(t),this.FBitmap.SetHeight(e),this.FActiveCanvas=this.FBitmap.GetCanvas(),i?(this.FContextNative=pas["WEBLib.TMSFNCGraphics.WEB"].GetNativeContextClass().$create("Create$1",[this]),this.FContextNative.SetSize(t,e)):(this.FContextGeneral=pas["WEBLib.TMSFNCGraphics.General"].TTMSFNCGraphicsContextGeneral.$create("Create$1",[this]),this.FContextGeneral.SetSize(t,e)),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.InitializeDefaultAppearance(),this},this.Destroy=function(){null!=this.FContextNative&&(rtl.free(this,"FContextNative"),this.FContextNative=null),null!=this.FContextGeneral&&(rtl.free(this,"FContextGeneral"),this.FContextGeneral=null),null!=this.FFont&&(rtl.free(this,"FFont"),this.FFont=null),null!=this.FSaveFont&&null!=this.FActiveCanvas&&(this.FActiveCanvas.FFont.Assign(this.FSaveFont),rtl.free(this,"FSaveFont"),this.FSaveFont=null),null!=this.FFill&&(this.FFill.FOnChanged=null,rtl.free(this,"FFill"),this.FFill=null),null!=this.FStroke&&(this.FStroke.FOnChanged=null,rtl.free(this,"FStroke"),this.FStroke=null),this.FBitmapContainer=null,null!=this.FBitmap&&(rtl.free(this,"FBitmap"),this.FBitmap=null),pas.System.TObject.Destroy.call(this)},this.BeginScene=function(){this.GetContext().BeginScene()},this.EndScene=function(){this.GetContext().EndScene()},this.SetFill=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetFill(t),this.FFill.Assign(t),this.FBlockUpdate-=1)},this.SetStroke=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetStroke(t),this.FStroke.Assign(t),this.FBlockUpdate-=1)},this.RestoreState=function(t,e){e||(this.SetFill(t.FFill),this.SetStroke(t.FStroke),this.SetFont(t.FFont)),this.GetContext().RestoreState(t),t=rtl.freeLoc(t)},this.SetFont=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetFont(t),this.FFont.AssignSource(t),this.FBlockUpdate-=1)},this.DrawLine$1=function(t,e,i,s){-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawLine(this.FStroke,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(t),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e),i,s)},this.DrawFocusRectangle$2=function(t,e,i,s,n,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();a.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),this.GetContext().DrawFocusRectangle(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),n,o)},this.DrawFocusRectangle$3=function(t,e,i){this.DrawFocusRectangle$2(t.Left,t.Top,t.Right,t.Bottom,e,i)},this.DrawRectangle=function(t,e,i,s,n){this.DrawRectangle$1(t,e,i,s,pas["WEBLib.TMSFNCGraphicsTypes"].AllSides,n)},this.DrawRectangle$1=function(t,e,i,s,n,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=null;if(a.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind)if(3===this.FFill.FKind){r=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{r.AddRectangle(a,0,0,rtl.createSet(0,1,2,3)),this.DrawTexture(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),this.FFill.FTexture,this.FFill.FTextureMode)}finally{r=rtl.freeLoc(r)}}else this.GetContext().FillRect(this.FFill,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),o);-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawRect(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),rtl.refSet(n),o)},this.DrawEllipse=function(t,e,i,s,n){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=null;if(o.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind)if(3===this.FFill.FKind){a=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{a.AddEllipse(o),this.DrawTexture(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),this.FFill.FTexture,this.FFill.FTextureMode)}finally{a=rtl.freeLoc(a)}}else this.GetContext().FillEllipse(this.FFill,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),n);-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawEllipse(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),n)},this.DrawRectangle$2=function(t,e){this.DrawRectangle(t.Left,t.Top,t.Right,t.Bottom,e)},this.DrawRoundRectangle=function(t,e,i,s,n,o,a){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),l=0,h=null;if(r.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind)if(3===this.FFill.FKind){h=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{l=n,2 in o?(h.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+l,r.Bottom)),h.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+l,r.Bottom-l),pas["WEBLib.TMSFNCTypes"].PointF(l,l),-270,90),h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom-l))):h.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),0 in o?(h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top+l)),h.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+l,r.Top+l),pas["WEBLib.TMSFNCTypes"].PointF(l,l),-180,90),h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+l,r.Top))):h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Top)),1 in o?(h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-l,r.Top)),h.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-l,r.Top+l),pas["WEBLib.TMSFNCTypes"].PointF(l,l),-90,90),h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top+l))):h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Top)),3 in o?(h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom-l)),h.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-l,r.Bottom-l),pas["WEBLib.TMSFNCTypes"].PointF(l,l),0,90),h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right-l,r.Bottom))):h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,r.Bottom)),2 in o?h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left+l,r.Bottom)):h.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,r.Bottom)),h.ClosePath(),this.DrawTexture(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),this.FFill.FTexture,this.FFill.FTextureMode)}finally{h=rtl.freeLoc(h)}}else this.GetContext().FillRoundRect(this.FFill,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),n,rtl.refSet(o),a);-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawRoundRect(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),n,rtl.refSet(o),a)},this.DrawRoundRectangle$1=function(t,e,i,s){this.DrawRoundRectangle(t.Left,t.Top,t.Right,t.Bottom,e,rtl.refSet(i),s)},this.DrawEllipse$2=function(t,e){this.DrawEllipse(t.Left,t.Top,t.Right,t.Bottom,e)},this.DrawBitmapPart=function(e,i,s,n,o,a,r,l,h,p,c,F,u){var C=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),d=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),T=null,m=null;if(C.$assign(pas["WEBLib.TMSFNCTypes"].RectF(o,a,r,l)),d.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e,i,s,n)),!pas["WEBLib.TMSFNCTypes"].RectIsEmpty(C)&&!pas["WEBLib.TMSFNCTypes"].RectIsEmpty(d)&&!this.DrawSVG(h,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(C))){T=t.TTMSFNCGraphics.$create("CreateBitmapCanvas",[Math.round(s-e),Math.round(n-i),this.FNative,!0]);try{T.BeginScene(),T.DrawBitmap(-e,-i,-e+T.FBitmap.GetWidth(),-i+T.FBitmap.GetHeight(),h,!1,!1,!1,!1),T.EndScene(),m=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{m.Assign(T.FBitmap),this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(C),m,p,c,F,u)}finally{m=rtl.freeLoc(m)}}finally{T=rtl.freeLoc(T)}}},this.DrawBitmapPart$1=function(t,e,i,s,n,o,a){this.DrawBitmapPart(t.Left,t.Top,t.Right,t.Bottom,e.Left,e.Top,e.Right,e.Bottom,i,s,n,o,a)},this.DrawBitmap=function(t,e,i,s,n,o,a,r,l){var h=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=n&&(h.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),h.$assign(this.GetBitmapDrawRectangle$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),n,o,a,r,l)),this.DrawSVG(n,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h))||this.GetContext().DrawBitmap(pas["WEBLib.TMSFNCTypes"].BitmapToDrawBitmap(n),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,n.GetWidth(),n.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),1))},this.DrawBitmap$1=function(t,e,i,s,n,o){this.DrawBitmap(t.Left,t.Top,t.Right,t.Bottom,e,i,s,n,o)},this.DrawCheckBox=function(t,e,i,s,n){var o=0,a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();a.$assign(t),pas["WEBLib.TMSFNCTypes"].InflateRectEx(a,-1,-1),o=s?i?11829830:0:11119017,this.FFill.SetKind(1),s?this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(13882323,85)):this.FFill.SetColor(13882323),this.FStroke.SetWidth(1),this.FStroke.SetKind(1),this.FStroke.SetColor(o),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(a,-(a.Right-a.Left)/5,-(a.Bottom-a.Top)/5),this.FStroke.SetWidth(2),this.FStroke.SetColor(o),e&&(this.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(a.Left,a.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(a.Right-1,a.Bottom-1)),2,2),this.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(a.Right-1,a.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(a.Left,a.Bottom-1)),2,2))},this.DrawButton=function(e,i,s,n,o,a){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();r.$assign(e),this.FStroke.SetKind(1),this.FStroke.SetWidth(1),this.FFill.SetKind(1),o?n?s?(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColorFocused),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColorFocused)):(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColor),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColor)):(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColorDisabled),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColorDisabled)):n?s?(this.FStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)),this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251))):(this.FStroke.SetColor(11119017),this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225))):(this.FStroke.SetColor(11119017),this.FFill.SetColor(13882323)),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(r,-1,-1),this.FFill.SetKind(0),i?this.FStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(this.FStroke.FColor,40)):this.FStroke.SetColor(this.FFill.FColor),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),2)},this.DrawRadioButton=function(t,e,i,s,n){var o=0,a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();a.$assign(t),pas["WEBLib.TMSFNCTypes"].InflateRectEx(a,-1,-1),o=s?i?11829830:0:11119017,this.FFill.SetKind(1),s?this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(13882323,85)):this.FFill.SetColor(13882323),this.FStroke.SetKind(1),this.FStroke.SetWidth(1),this.FStroke.SetColor(o),this.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(a,-(a.Right-a.Left)/5,-(a.Bottom-a.Top)/5),this.FFill.SetKind(1),this.FFill.SetColor(o),e&&this.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),2)},this.DrawBitmapWithName$1=function(t,e,i,s,n,o,a,r){var l;null!=(l=this.$class.GetBitmapFromBitmapContainer(this.FBitmapContainer,e,i,s))&&this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),l,n,o,a,r)},this.DrawScaledBitmap=function(t,e,i,s,n,o,a){var r=null,l=null;null!=e&&null!=(r=i>0?e.GetItemByScale(i):e.GetItemByScale(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(null,-1)))&&(null==r.FBitmap||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(r.FBitmap)?null==(l=this.$class.GetBitmapFromBitmapContainer(this.FBitmapContainer,r.FBitmapName,!0,i))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(l)?this.DrawBitmapWithName$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),r.FBitmapName,!1,r.FScale,s,n,o,a):this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),l,s,n,o,a):this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),r.FBitmap,s,n,o,a))},this.GetBitmapDrawRectangle=function(t,e,i,s,n,o,a,r,l){var h=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),p=null,c=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=0,u=0,C=0,d=0;return h.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),null!=(p=n)&&(C=0,d=0,F=0,u=0,this.$class.GetAspectSize({get:function(){return F},set:function(t){F=t}},{get:function(){return u},set:function(t){u=t}},p.GetWidth(),p.GetHeight(),i-t,s-e,o,a,l),(r||l)&&(C=Math.round((i-t-F)/2),d=Math.round((s-e-u)/2)),c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t+C,e+d,t+C+F,e+d+u)),h.$assign(c)),h},this.GetBitmapDrawRectangle$1=function(t,e,i,s,n,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return a.$assign(this.GetBitmapDrawRectangle(t.Left,t.Top,t.Right,t.Bottom,e,i,s,n,o)),a},this.ClipRect=function(t){this.GetContext().ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t))},this.CalculateTextSize=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),o=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return o.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)),n.cx=o.Right-o.Left,n.cy=o.Bottom-o.Top,n},this.CalculateTextHeight=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return n.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)),n.Bottom-n.Top};var e=["<BR>","<BR/>"];this.CalculateText=function(t,i,s,n){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=null,r=0,l=0,h=0,p=!1,c=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=0;if(o.$assign(i),p=this.FOptimizedHTMLDrawing&&pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTML(t)){for(r=0;r<=1;r++)h=pas.System.Pos(e[r],pas.SysUtils.UpperCase(t)),l=e[r].length;if(h>0&&l>0){a=pas.Classes.TStringList.$create("Create$1");try{a.SetLineBreak(pas.System.Copy(t,h,l)),a.SetTextStr(t),F=0;for(var u=0,C=a.GetCount()-1;u<=C;u++)r=u,c.$assign(this.InternalCalculateText(a.Get(r),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),s,n)),F+=c.Bottom-c.Top;o.Bottom=o.Top+F}finally{a=rtl.freeLoc(a)}}else p=!1}return p||o.$assign(this.InternalCalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),s,n)),o},this.CalculateTextHeight$1=function(t){return this.CalculateTextHeight(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!0)},this.CalculateText$1=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return e.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!0)),e},this.DrawText$1=function(t,e,i,s,n,o,a,r,l,h,p,c,F){var u="",C="",d="";return u="",C="",d="",this.DrawText$5(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,{get:function(){return u},set:function(t){u=t}},{get:function(){return C},set:function(t){C=t}},{get:function(){return d},set:function(t){d=t}},i,s,n,o,a,r,l,h,p,c,F)};var i=["<BR>","<BR/>"];this.DrawText$5=function(t,e,s,n,o,a,r,l,h,p,c,F,u,C,d,T){var m="",S=null,y=0,g=0,f=0,M=!1,B=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),b=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(b.$assign(t),M=(M=!C&&this.FOptimizedHTMLDrawing)&&pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTML(e)){for(y=0;y<=1;y++)f=pas.System.Pos(i[y],pas.SysUtils.UpperCase(e)),g=i[y].length;if(f>0&&g>0){S=pas.Classes.TStringList.$create("Create$1");try{S.SetLineBreak(pas.System.Copy(e,f,g)),S.SetTextStr(e);for(var L=0,E=S.GetCount()-1;L<=E;L++)y=L,B.$assign(this.CalculateText(S.Get(y),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(b),a,u)),this.InternalDrawText(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(B.Left,B.Top,B.Right+1,B.Bottom)),S.Get(y),s,n,o,a,r,l,h,p,c,F,u,C,d,T),b.Top=b.Top+(B.Bottom-B.Top),b.Bottom=b.Bottom+(B.Bottom-B.Top)}finally{S=rtl.freeLoc(S)}}else M=!1}return M||(m=this.InternalDrawText(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,s,n,o,a,r,l,h,p,c,F,u,C,d,T)),m},this.SaveState=function(t){var e=null;return e=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsSaveState.$create("Create$1"),t||(e.FFill.Assign(this.FFill),e.FStroke.Assign(this.FStroke),e.FFont.AssignSource(this.FFont)),this.GetContext().SaveState(e),e},this.GetBitmapFromBitmapContainer=function(t,e,i,s){var n=null;return n=null,null!=t&&""!==e&&(i&&(n=s>0?t.FindBitmap$1(e+"_"+pas.SysUtils.FloatToStr(s)):t.FindBitmap$1(e+"_"+pas.SysUtils.FloatToStr(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(null,-1)))),null==n&&(n=t.FindBitmap$1(e))),n},this.GetScaledBitmap=function(t,e,i){var s=null,n=null,o=null;return s=null,null!=t&&null!=(n=e>0?t.GetItemByScale(e):t.GetItemByScale(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(null,-1)))&&(null==n.FBitmap||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(n.FBitmap)?(null==(o=this.GetBitmapFromBitmapContainer(i,n.FBitmapName,!0,e))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(o))&&(null==(o=this.GetBitmapFromBitmapContainer(i,n.FBitmapName,!1,0))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(o))||(s=o):s=n.FBitmap),s},this.GetAspectSize=function(t,e,i,s,n,o,a,r,l){var h=0,p=0;a?i>0&&s>0&&n>0&&o>0?i<n&&s<o&&!r?(t.set(i),e.set(s)):i/s<n/o?(e.set(o),t.set(o*i/s)):(t.set(n),e.set(n*s/i)):(t.set(0),e.set(0)):r?(t.set(n),e.set(o)):(t.set(i),e.set(s),l&&(t.get()>=e.get()&&t.get()>0?(e.set(i/t.get()*e.get()),t.set(i)):e.get()>=t.get()&&e.get()>0&&(t.set(s/e.get()*t.get()),e.set(s)),h=0===s?1:i/s,(p=0===e.get()?1:t.get()/e.get())<1||h>p?(e.set(i/p),t.set(i)):(t.set(p*s),e.set(s))))},this.HTMLToColor=function(t){var e=0,i=0,s=0,n=0;return e=-1,""===t?e:(4===t.length?(i=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,2,1)+pas.System.Copy(t,2,1)),s=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,3,1)+pas.System.Copy(t,3,1)),n=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,4,1)+pas.System.Copy(t,4,1))):(i=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,2,2)),s=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,4,2)),n=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,6,2))),e=pas["WEBLib.Graphics"].RGB(i,s,n))},this.TextToColor=function(t){var e=0,i=0,s="",n=null;return s=t,s=pas.SysUtils.LowerCase(s),1===pas.System.Pos("cl",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,2),1===pas.System.Pos("cla",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,3),1===pas.System.Pos("gc",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,2),e=0,null!=(n=pas["WEBLib.TMSFNCGraphicsTypes"].ColorLookup())&&(i=n.IndexOf(pas.SysUtils.LowerCase(s)))>=0&&i<=n.GetCount()-1&&(e=n.GetObject(i).FColor),e}})),this.TMSFNCGRAPHICSCLOSE="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAABVSURBVDhPYxh+QBSI/0OYWAFIThjCxA5ACmAYHeCTQwHYFGITwwuQNSBjkgBFmkGAIgNAGv5BaZINQdYMA0Qbgk0zDBBlCCiR4FMAkhOCMIcJYGAAAHvVMBv6PIFYAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSDOWN="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGdJREFUOI3tzjsOwjAURNGDUqSgTxU5K2AVrJtswjUsgHSR0qdxAZZFPrS+3ZvRzBsqf9MUtBtazJk+oMe0VTriiZCFX8nbpENMgfARjsn74vKj5IFruhfc8d6zIF9S/Hyk5HS4spMVeFcOjszaOwMAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSDOWN2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAdElEQVQ4T6XMsQ2AMBBD0UxBBwyA2L9jCWpY5bCLSJfgSFgUr+AHX4mIX2R0yOiQ0SGjQ8Ud5q7RClvX5IEDLlhS4/gGvuV/5YEJTuCAR+qYjW/N/81Hko8Mx/QKST0yHJOMCYfDMcnokNEho0NGh4zfRXkAxSYKjdpwcIUAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSUP="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEZJREFUOI3tjLEJACAMwLLo5EM+rTjpXV7g0oI4tYKbgYwJfJ6Txet4iu6Jxk10TTSuQACidzKAIrGik24ZpCPeJ8ky+DhZ1JENPrPndiwAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSUP2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAcklEQVQ4T6XMMQ6AMAiF4S46eSEvremk5/IC+GggKfE1ER2+gZ9AEZFfaMygMYPGDBozaOyshu0aGo0eXmb4hEbw42qGTx4B/HiHCWYYPgmDOWEDPfbmT46uNWEwC/THTp/oLvQwfEFjBo0ZNGbQ+J6UG5Y9CmuVGrAsAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSPIN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAABKklEQVQ4T2PAB0JDQ5mjoqIEgUxGiAiRIDo6WiY8PHwdEGvW19czQYUJA6AGhbCwsO9Aek1ISIiZvb09C1QKPwBqaAbi/1DNJ4HYiqDNIE1ADZ9AGqGa/wLp6xERESZAaVQ/AyUUgDgIiOdCbQFrQsL/gPgxUM4OFACSQMYdIP4FFPwNxH+gpqNoAortAYayHNSfjAwgNwMFvaCaMTQA8W+g+M7IyEgNiLuQAMgUoNsDgYruoWkCOe1gcHCwHlQpJgA6wwCo6DySJhD+BDQwCaoEEwA1SQAVzQLiq0BcBMRXgBhk25PAwEBJqDJUkJaWxgr0QzoQbwYqdABGNCeQrQPSDKTv44w3oFPEgYqmAmk9UNqECjMCxWSBeAeUjx1ANWAkZCSD0AADAwDRpKHlJfOjAwAAAABJRU5ErkJggg==",this.TMSFNCGRAPHICSPIN2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAA/UlEQVQ4T33Su2oCQRTGcddLYWmlQhTLCBIsQgoLSW2nj2Bj7yv4DGkCeYOQxiaBNJapbCI2ooU+gY3gbf1/w47MjosHfsvM7DlzY1JhGN6TQQGBM2bEOgke8IU60tGY4SYlqWGHT7wgC/PPT/SNoFDxH1owKyclWyrawsYJczwj8JO1tR4+oFX8OGONtpLLWGCPA47Q7H78ogqd06yoPXeg4qQCTfaDR1x3ZxuapYsl3NDWJnjCtUjcThNTuKHL6cPNM2yjhHfMMMQ/tNoGuoNYkeiTwwBjvCKPBlS8QuzFWPoU8QadQ29TY3qbFXxH/Ru2oYKbhww7kSdMXQD8wIToOQZE/AAAAABJRU5ErkJggg==",this.TMSFNCGRAPHICSRIGHT="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAFNJREFUOI3tzzsSQFAQRNFDqSezHUuwYBJLsBuhEomE4/ll3HBq+nY1PxENRrS5xzK4L1jPSiISesxPJcORJJqwU9xthjrX/ko4mpBQocN0tf1rbDeZDIfcSud0AAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSLEFT="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEpJREFUOI3lzKENgEAQAMEJBkkIDdDTSxp6gqMyCkB8IQgMFdwZAutn+U19Bi84MUbxhZrBawSXB+8RDDMaDkyvmQyZyYYuOvh6N24uDUKEV//MAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSEXPAND="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOvwAADr8BOAVTJAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4zjOaXUAAAACVJREFUGFdj+P//P07MEBYW9h8Xxi8JAjglYACnBAzglMAEDAwARZ1DA4NRF38AAAAASUVORK5CYII=",this.TMSFNCGRAPHICSEXPANDSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgMi44ODY3MTkgQyAxMS42Mjg5MDYgMi42NzU3ODEgMTEuMjgxMjUgMi42NzU3ODEgMTEuMDcwMzEyIDIuODg2NzE5IEwgNiA3Ljk1NzAzMSBMIDAuOTI5Njg4IDIuODg2NzE5IEMgMC43MTg3NSAyLjY3NTc4MSAwLjM3MTA5NCAyLjY3NTc4MSAwLjE2MDE1NiAyLjg4NjcxOSBDIC0wLjA1NDY4NzUgMy4xMDE1NjIgLTAuMDU0Njg3NSAzLjQ0NTMxMiAwLjE2MDE1NiAzLjY2MDE1NiBMIDUuNjEzMjgxIDkuMTEzMjgxIEMgNS43MTQ4NDQgOS4yMTQ4NDQgNS44NTU0NjkgOS4yNzM0MzggNiA5LjI3MzQzOCBDIDYuMTQ0NTMxIDkuMjczNDM4IDYuMjg1MTU2IDkuMjE0ODQ0IDYuMzg2NzE5IDkuMTEzMjgxIEwgMTEuODM5ODQ0IDMuNjYwMTU2IEMgMTIuMDU0Njg4IDMuNDQ1MzEyIDEyLjA1NDY4OCAzLjEwMTU2MiAxMS44Mzk4NDQgMi44ODY3MTkgWiBNIDExLjgzOTg0NCAyLjg4NjcxOSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSDOWNSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgMi44ODY3MTkgQyAxMS42Mjg5MDYgMi42NzU3ODEgMTEuMjgxMjUgMi42NzU3ODEgMTEuMDcwMzEyIDIuODg2NzE5IEwgNiA3Ljk1NzAzMSBMIDAuOTI5Njg4IDIuODg2NzE5IEMgMC43MTg3NSAyLjY3NTc4MSAwLjM3MTA5NCAyLjY3NTc4MSAwLjE2MDE1NiAyLjg4NjcxOSBDIC0wLjA1NDY4NzUgMy4xMDE1NjIgLTAuMDU0Njg3NSAzLjQ0NTMxMiAwLjE2MDE1NiAzLjY2MDE1NiBMIDUuNjEzMjgxIDkuMTEzMjgxIEMgNS43MTQ4NDQgOS4yMTQ4NDQgNS44NTU0NjkgOS4yNzM0MzggNiA5LjI3MzQzOCBDIDYuMTQ0NTMxIDkuMjczNDM4IDYuMjg1MTU2IDkuMjE0ODQ0IDYuMzg2NzE5IDkuMTEzMjgxIEwgMTEuODM5ODQ0IDMuNjYwMTU2IEMgMTIuMDU0Njg4IDMuNDQ1MzEyIDEyLjA1NDY4OCAzLjEwMTU2MiAxMS44Mzk4NDQgMi44ODY3MTkgWiBNIDExLjgzOTg0NCAyLjg4NjcxOSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSUPSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgOC4zMzk4NDQgTCA2LjM4NjcxOSAyLjg4NjcxOSBDIDYuMjg1MTU2IDIuNzg1MTU2IDYuMTQ0NTMxIDIuNzI2NTYyIDYgMi43MjY1NjIgQyA1Ljg1NTQ2OSAyLjcyNjU2MiA1LjcxNDg0NCAyLjc4NTE1NiA1LjYxMzI4MSAyLjg4NjcxOSBMIDAuMTYwMTU2IDguMzM5ODQ0IEMgLTAuMDU0Njg3NSA4LjU1NDY4OCAtMC4wNTQ2ODc1IDguODk4NDM4IDAuMTYwMTU2IDkuMTEzMjgxIEMgMC4zNzEwOTQgOS4zMjQyMTkgMC43MTg3NSA5LjMyNDIxOSAwLjkyOTY4OCA5LjExMzI4MSBMIDYgNC4wNDI5NjkgTCAxMS4wNzAzMTIgOS4xMTMyODEgQyAxMS4xNzU3ODEgOS4yMTg3NSAxMS4zMTY0MDYgOS4yNzM0MzggMTEuNDUzMTI1IDkuMjczNDM4IEMgMTEuNTkzNzUgOS4yNzM0MzggMTEuNzM0Mzc1IDkuMjE4NzUgMTEuODM5ODQ0IDkuMTEzMjgxIEMgMTIuMDU0Njg4IDguODk4NDM4IDEyLjA1NDY4OCA4LjU1NDY4OCAxMS44Mzk4NDQgOC4zMzk4NDQgWiBNIDExLjgzOTg0NCA4LjMzOTg0NCAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSRIGHTSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA5LjExMzI4MSA1LjYxMzI4MSBMIDMuNjYwMTU2IDAuMTYwMTU2IEMgMy40NDUzMTIgLTAuMDU0Njg3NSAzLjEwMTU2MiAtMC4wNTQ2ODc1IDIuODg2NzE5IDAuMTYwMTU2IEMgMi42NzU3ODEgMC4zNzEwOTQgMi42NzU3ODEgMC43MTg3NSAyLjg4NjcxOSAwLjkyOTY4OCBMIDcuOTU3MDMxIDYgTCAyLjg4NjcxOSAxMS4wNzAzMTIgQyAyLjY3NTc4MSAxMS4yODEyNSAyLjY3NTc4MSAxMS42Mjg5MDYgMi44ODY3MTkgMTEuODM5ODQ0IEMgMi45OTIxODggMTEuOTQ1MzEyIDMuMTMyODEyIDEyIDMuMjczNDM4IDEyIEMgMy40MTQwNjIgMTIgMy41NTA3ODEgMTEuOTQ1MzEyIDMuNjYwMTU2IDExLjgzOTg0NCBMIDkuMTEzMjgxIDYuMzg2NzE5IEMgOS4yMTQ4NDQgNi4yODUxNTYgOS4yNzM0MzggNi4xNDQ1MzEgOS4yNzM0MzggNiBDIDkuMjczNDM4IDUuODU1NDY5IDkuMjE0ODQ0IDUuNzE0ODQ0IDkuMTEzMjgxIDUuNjEzMjgxIFogTSA5LjExMzI4MSA1LjYxMzI4MSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSLEFTSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA0LjA0Mjk2OSA2IEwgOS4xMTMyODEgMC45Mjk2ODggQyA5LjMyNDIxOSAwLjcxODc1IDkuMzI0MjE5IDAuMzcxMDk0IDkuMTEzMjgxIDAuMTYwMTU2IEMgOC44OTg0MzggLTAuMDU0Njg3NSA4LjU1NDY4OCAtMC4wNTQ2ODc1IDguMzM5ODQ0IDAuMTYwMTU2IEwgMi44ODY3MTkgNS42MTMyODEgQyAyLjc4NTE1NiA1LjcxNDg0NCAyLjcyNjU2MiA1Ljg1NTQ2OSAyLjcyNjU2MiA2IEMgMi43MjY1NjIgNi4xNDQ1MzEgMi43ODUxNTYgNi4yODUxNTYgMi44ODY3MTkgNi4zODY3MTkgTCA4LjMzOTg0NCAxMS44Mzk4NDQgQyA4LjQ0OTIxOSAxMS45NDUzMTIgOC41ODU5MzggMTIgOC43MjY1NjIgMTIgQyA4Ljg2NzE4OCAxMiA5LjAwNzgxMiAxMS45NDUzMTIgOS4xMTMyODEgMTEuODM5ODQ0IEMgOS4zMjQyMTkgMTEuNjI4OTA2IDkuMzI0MjE5IDExLjI4MTI1IDkuMTEzMjgxIDExLjA3MDMxMiBaIE0gNC4wNDI5NjkgNiAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSCLOSESVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA3LjA2MjUgNiBMIDExLjc4MTI1IDEuMjgxMjUgQyAxMi4wNzQyMTkgMC45ODgyODEgMTIuMDc0MjE5IDAuNTExNzE5IDExLjc4MTI1IDAuMjE4NzUgQyAxMS40ODgyODEgLTAuMDc0MjE4OCAxMS4wMTE3MTkgLTAuMDc0MjE4OCAxMC43MTg3NSAwLjIxODc1IEwgNiA0LjkzNzUgTCAxLjI4MTI1IDAuMjE4NzUgQyAwLjk4ODI4MSAtMC4wNzQyMTg4IDAuNTExNzE5IC0wLjA3NDIxODggMC4yMTg3NSAwLjIxODc1IEMgLTAuMDc0MjE4OCAwLjUxMTcxOSAtMC4wNzQyMTg4IDAuOTg4MjgxIDAuMjE4NzUgMS4yODEyNSBMIDQuOTM3NSA2IEwgMC4yMTg3NSAxMC43MTg3NSBDIC0wLjA3NDIxODggMTEuMDExNzE5IC0wLjA3NDIxODggMTEuNDg4MjgxIDAuMjE4NzUgMTEuNzgxMjUgQyAwLjM2NzE4OCAxMS45MjU3ODEgMC41NTg1OTQgMTIgMC43NSAxMiBDIDAuOTQxNDA2IDEyIDEuMTMyODEyIDExLjkyNTc4MSAxLjI4MTI1IDExLjc4MTI1IEwgNiA3LjA2MjUgTCAxMC43MTg3NSAxMS43ODEyNSBDIDEwLjg2NzE4OCAxMS45MjU3ODEgMTEuMDU4NTk0IDEyIDExLjI1IDEyIEMgMTEuNDQxNDA2IDEyIDExLjYzMjgxMiAxMS45MjU3ODEgMTEuNzgxMjUgMTEuNzgxMjUgQyAxMi4wNzQyMTkgMTEuNDg4MjgxIDEyLjA3NDIxOSAxMS4wMTE3MTkgMTEuNzgxMjUgMTAuNzE4NzUgWiBNIDcuMDYyNSA2ICIvPgo8L2c+Cjwvc3ZnPgo=",t.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSCLOSE),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSRIGHT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSLEFT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSEXPAND),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSPIN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSPIN2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUP),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUP2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSEXPANDSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUPSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSRIGHTSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSLEFTSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWNSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSCLOSESVG)}}),["SysUtils","Math","WEBLib.TMSFNCUtils","WEBLib.TMSFNCHTMLEngine","WEBLib.TMSFNCGraphics.General","WEBLib.TMSFNCGraphics.WEB"]),rtl.module("WEBLib.TMSFNCStyles",["System","Classes","WEBLib.Graphics","WEBLib.Controls","WEBLib.Forms","WEBLib.TMSFNCTypes","WEBLib.TMSFNCCustomComponent","WEBLib.TMSFNCGraphicsTypes","JS"],(function(){"use strict";var t=this;rtl.createInterface(this,"ITMSFNCAdaptToStyle","{3EFF288D-3927-4E86-8E9D-EF684B501C9E}",["SetAdaptToStyle"],pas.System.IUnknown),rtl.createClass(this,"TTMSFNCStyles",pas.System.TObject,(function(){this.ExtractColor=function(t){var e=0,i="",s="",n=null,o=0,a=0;function r(t){return pas.SysUtils.StrToInt(pas.SysUtils.Trim(pas.SysUtils.StringReplace(t,"rgb(","",rtl.createSet(0))))}if(e=-1,""!==t)if(i=pas.SysUtils.LowerCase(pas.SysUtils.StringReplace(t," ","",rtl.createSet(0))),1===pas.System.Pos("linear-gradient",i))0===(o=pas.System.Pos("rgb",i))&&(o=pas.System.Pos("#",i)),a=pas.System.Pos$1(")",i,o),s=pas.System.Copy(i,o,a-o+1),0===(o=pas.System.Pos$1("rgb",i,a))&&(o=pas.System.Pos("#",i)),a=pas.System.Pos$1(")",i,o),e=this.ExtractColor(s);else if(1===pas.System.Pos("rgb",i)){n=pas.Classes.TStringList.$create("Create$1");try{n.SetDelimiter(","),n.SetDelimitedText(i),e=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(r(n.Get(0)),r(n.Get(1)),r(n.Get(2)))}finally{n=rtl.freeLoc(n)}}else 1===pas.System.Pos("#",i)&&(e=pas["WEBLib.Graphics"].HexToColor(i));return e},this.ExtractColorTo=function(t){var e=0,i="",s="",n=null,o=0,a=0;function r(t){return pas.SysUtils.StrToInt(pas.SysUtils.Trim(pas.SysUtils.StringReplace(t,"rgb(","",rtl.createSet(0))))}if(e=-1,""!==t)if(i=pas.SysUtils.LowerCase(pas.SysUtils.StringReplace(t," ","",rtl.createSet(0))),1===pas.System.Pos("linear-gradient",i))0===(o=pas.System.Pos("rgb",i))&&(o=pas.System.Pos("#",i)),a=pas.System.Pos$1(")",i,o),0===(o=pas.System.Pos$1("rgb",i,a))&&(o=pas.System.Pos("#",i)),a=pas.System.Pos$1(")",i,o),s=pas.System.Copy(i,o,a-o+1),e=this.ExtractColor(s);else if(1===pas.System.Pos("rgb",i)){n=pas.Classes.TStringList.$create("Create$1");try{n.SetDelimiter(","),n.SetDelimitedText(i),e=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(r(n.Get(0)),r(n.Get(1)),r(n.Get(2)))}finally{n=rtl.freeLoc(n)}}else 1===pas.System.Pos("#",i)&&(e=pas["WEBLib.Graphics"].HexToColor(i));return e},this.GetStyleBackgroundFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","background")},this.GetStyleBackgroundStroke=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","border-color")},this.GetStyleDefaultButtonFill=function(){return this.FindCSSStyleProperty(".TMSFNCButtonStyle","background")},this.GetStyleDefaultButtonStroke=function(){return this.FindCSSStyleProperty(".TMSFNCButtonStyle","border-color")},this.GetStyleHeaderFill=function(){return this.FindCSSStyleProperty(".TMSFNCHeaderItemStyle","background")},this.GetStyleSelectionFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","--selection")},this.GetStyleLineFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","--linefill")},this.GetStyleTextColor=function(){return this.FindCSSStyleProperty(".TMSFNCHeaderItemStyle","color")},this.FindCSSStyleRule=function(e){var i,s;i=e,s=t.CSSStyleFileName;for(var n=0;n<document.styleSheets.length;n++){var o=document.styleSheets[n].href;if(null!=o&&s==o.substring(o.lastIndexOf("/")+1))for(var a=document.styleSheets[n].rules||document.styleSheets[n].cssRules,r=0;r<a.length;r++)if(void 0!==a[r].selectorText&&a[r].selectorText.startsWith(i))return a[r]}return null},this.FindCSSStyleProperty=function(t,e){var i="",s=null,n="";return i="",null!=(s=this.FindCSSStyleRule(t))&&(n=e,i=s.style.getPropertyValue(n)),i},this.StyleServicesEnabled=function(){return!0,!0},this.GetStyleLineFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleLineFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleBackgroundFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleBackgroundFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleBackgroundStrokeColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleBackgroundStroke())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleHeaderFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleHeaderFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleHeaderFillColorTo=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleHeaderFill())&&(s=this.ExtractColorTo(i),t.set(s),e=-1!==s),e},this.GetStyleSelectionFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleSelectionFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleTextFontColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleTextColor())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleDefaultButtonFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleDefaultButtonFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleDefaultButtonStrokeColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleDefaultButtonStroke())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e}})),this.CSSStyleFileName=""}),["WEBLib.TMSFNCUtils","SysUtils","WEBLib.TMSFNCPersistence","WEBLib.TMSFNCGraphics"]),rtl.module("WEBLib.TMSFNCUndo",["System","Classes","WEBLib.TMSFNCTypes"],(function(){"use strict";rtl.createClass(this,"TTMSFNCUndoManager",pas.Classes.TCollection,(function(){}))}),["SysUtils","WEBLib.TMSFNCPersistence"]),rtl.module("WEBLib.TMSFNCCustomControl",["System","Classes","WEBLib.Controls","WEBLib.TMSFNCGraphics","WEBLib.Graphics","WEBLib.TMSFNCStyles","WEBLib.TMSFNCPersistence","WEBLib.TMSFNCUndo","Types","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCTypes","TypInfo","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCCustomDesignerForm",pas["WEBLib.Forms"].TForm,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),this.TTMSFNCControlAlignment={0:"caNone",caNone:0,1:"caTop",caTop:1,2:"caBottom",caBottom:2,3:"caLeft",caLeft:3,4:"caRight",caRight:4,5:"caClient",caClient:5},rtl.createClass(this,"TTMSFNCCustomControlBaseCommon",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FResourceScaleFactor=0,this.FPaintScaleFactor=0,this.FDesigntimeFormPixelsPerInch=0,this.FAllowFocus=!1,this.FAdaptToStyle=!1,this.FAdaptedToStyle=!1,this.FTransparent=!1,this.FBufferedPainting=!1,this.FNativeCanvas=!1,this.FAntiAliasing=!1,this.FOptimizedHTMLDrawing=!1,this.FShowAcceleratorChar=!1,this.FTextQuality=0,this.FOnInternalDblClick=null,this.FOnInternalMouseDown=null,this.FOnInternalMouseMove=null,this.FOnInternalMouseUp=null},this.$final=function(){this.FOnInternalDblClick=void 0,this.FOnInternalMouseDown=void 0,this.FOnInternalMouseMove=void 0,this.FOnInternalMouseUp=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.GetAllowFocus=function(){return this.FAllowFocus},this.GetControlAlignment=function(){var t=0;t=0;var e=this.FAlign;return 0===e?t=0:1===e?t=1:2===e?t=2:3===e?t=3:4===e?t=4:5===e&&(t=5),t},this.SetAllowFocus=function(t){this.FAllowFocus=t},this.SetShowAcceleratorChar=function(t){this.FShowAcceleratorChar!==t&&(this.FShowAcceleratorChar=t,this.Invalidate())},this.ConvertScreenToClient=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.ScreenToClient(pas.Types.Point(Math.round(t.X),Math.round(t.Y)))),e.$assign(pas["WEBLib.TMSFNCTypes"].PointF(i.x,i.y)),e},this.GetAdaptToStyle=function(){return this.FAdaptToStyle},this.SetEnabled=function(t){pas["WEBLib.Controls"].TControl.SetEnabled.apply(this,arguments),this.Invalidate()},this.SetDefaultGraphicColors=function(){var t=0;t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupFillColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupFillColor=16777215,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundStrokeColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupStrokeColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupStrokeColor=12632256,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleDefaultButtonFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleLineFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor=11119017,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleTextFontColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultTextFontColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultTextFontColor=0,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleSelectionFillColor({get:function(){return t},set:function(e){t=e}})?(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultSelectionFillColor=t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor,25),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor,30)):(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultSelectionFillColor=0,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorDisabled=11119017,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorDisabled=13882323},this.SetAdaptToStyle=function(t){this.FAdaptToStyle=t,this.InitializeStyle()},this.CancelHint=function(){},this.InitializeStyle=function(){this.SetDefaultGraphicColors(),this.DestroyGraphicElements(),this.GetAdaptToStyle()?(this.FAdaptedToStyle=!0,this.ApplyStyle()):this.FAdaptedToStyle&&(this.ResetToDefaultStyle(),this.FAdaptedToStyle=!1),this.Invalidate()},this.ApplyStyle=function(){},this.ResetToDefaultStyle=function(){},this.HandleMouseLeave=function(){},this.HandleMouseEnter=function(){},this.HandleMouseDown=function(t,e,i,s){},this.HandleMouseMove=function(t,e,i){},this.HandleDblClick=function(t,e){},this.HandleMouseUp=function(t,e,i,s){},this.HandleKeyPress=function(t){},this.HandleKeyDown=function(t,e){},this.HandleDialogKey=function(t,e){},this.HandleKeyUp=function(t,e){},this.HandleMouseWheel=function(t,e,i){},this.HandleDragOver=function(t,e,i){},this.HandleDragDrop=function(t,e){},this.Create$1=function(t){var e=0;return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),e=96,this.FDesigntimeFormPixelsPerInch=e,this.FPaintScaleFactor=1,this.FResourceScaleFactor=1,this.SetDefaultGraphicColors(),this.FAdaptToStyle=!1,this.FAdaptedToStyle=!1,this.FTransparent=!1,this.FNativeCanvas=!1,this.FBufferedPainting=!1,this.FAntiAliasing=!0,this.FOptimizedHTMLDrawing=!0,this.FShowAcceleratorChar=!0,this.FTextQuality=1,this.FAllowFocus=!0,this},this.Destroy=function(){pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.SetControlMargins=function(t,e,i,s){this.SetAlignWithMargins(!0),this.FMargins.SetLeft(Math.round(t)),this.FMargins.SetTop(Math.round(e)),this.FMargins.SetRight(Math.round(i)),this.FMargins.SetBottom(Math.round(s))},this.GetControlMargins=function(t,e,i,s){this.FAlignWithMargins&&(t.set(this.FMargins.FLeft),e.set(this.FMargins.FTop),i.set(this.FMargins.FRight),s.set(this.FMargins.FBottom))},this.ScalePaintValue=function(t){return pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(t,Math.round(100*this.FPaintScaleFactor),100)},this.ScalePaintValue$1=function(t){return t*this.FPaintScaleFactor},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TTMSFNCCustomControlBase",this.TTMSFNCCustomControlBaseCommon,(function(){this.$init=function(){t.TTMSFNCCustomControlBaseCommon.$init.call(this),this.FStored=!1,this.FHitTest=!1},this.MouseWheel=function(t,e,i){pas["WEBLib.Controls"].TControl.MouseWheel.apply(this,arguments),this.HandleMouseWheel(rtl.refSet(t),e,i)},this.DoMouseLeave=function(){pas["WEBLib.Controls"].TControl.DoMouseLeave.call(this),this.HandleMouseLeave()},this.DoMouseEnter=function(){pas["WEBLib.Controls"].TControl.DoMouseEnter.call(this),this.HandleMouseEnter()},this.GetLocalRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),t},this.MouseDown=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseDown.apply(this,arguments),this.HandleMouseDown(t,rtl.refSet(e),i,s),null!=this.FOnInternalMouseDown&&this.FOnInternalMouseDown(this)},this.MouseMove=function(t,e,i){pas["WEBLib.Controls"].TControl.MouseMove.apply(this,arguments),this.HandleMouseMove(rtl.refSet(t),e,i),null!=this.FOnInternalMouseMove&&this.FOnInternalMouseMove(this)},this.MouseUp=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseUp.apply(this,arguments),this.HandleMouseUp(t,rtl.refSet(e),i,s),null!=this.FOnInternalMouseUp&&this.FOnInternalMouseUp(this)},this.DragOver=function(t,e,i,s,n){pas["WEBLib.Controls"].TControl.DragOver.apply(this,arguments),this.HandleDragOver(t,pas["WEBLib.TMSFNCTypes"].PointF(e,i),n)},this.KeyDown=function(t,e){pas["WEBLib.Controls"].TControl.KeyDown.apply(this,arguments),this.HandleDialogKey(t,rtl.refSet(e)),this.HandleKeyDown(t,rtl.refSet(e)),t.get()},this.KeyPress=function(t){pas["WEBLib.Controls"].TControl.KeyPress.apply(this,arguments),this.HandleKeyPress(t)},this.KeyUp=function(t,e){pas["WEBLib.Controls"].TControl.KeyUp.apply(this,arguments),this.HandleKeyUp(t,rtl.refSet(e))},this.DblClick=function(){var t=pas["WEBLib.TMSFNCTypes"].TPointF.$new();pas["WEBLib.Controls"].TControl.DblClick.call(this),t.$assign(this.ConvertScreenToClient(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetMousePos()))),this.HandleDblClick(t.X,t.Y),null!=this.FOnInternalDblClick&&this.FOnInternalDblClick(this)},this.Create$1=function(e){return t.TTMSFNCCustomControlBaseCommon.Create$1.apply(this,arguments),this.FHitTest=!0,this.FStored=!0,this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this},this.BeginUpdate=function(){pas["WEBLib.Controls"].TControl.BeginUpdate.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this)},this.DragDrop=function(t,e,i){pas["WEBLib.Controls"].TControl.DragDrop.apply(this,arguments),this.HandleDragDrop(t,pas["WEBLib.TMSFNCTypes"].PointF(e,i))},this.CanFocus=function(){return pas["WEBLib.Controls"].TControl.CanFocus.call(this)&&this.GetAllowFocus()},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),this.$rtti.$MethodVar("TTMSFNCCustomControlBeforeDrawEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlAfterDrawEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlCanSavePropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanSave",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlCanLoadPropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanLoad",rtl.boolean,1]]),methodkind:0}),rtl.createClass(this,"TTMSFNCCustomControl",this.TTMSFNCCustomControlBase,(function(){this.$init=function(){t.TTMSFNCCustomControlBase.$init.call(this),this.FExporting=!1,this.FExportRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FOnBeforeDraw=null,this.FOnAfterDraw=null,this.FOnCanSaveProperty=null,this.FOnCanLoadProperty=null,this.FCheckedChk=null,this.FUnCheckedChk=null,this.FCheckedFocusChk=null,this.FUnCheckedFocusChk=null,this.FCheckedDisabledChk=null,this.FUnCheckedDisabledChk=null,this.FCheckedRd=null,this.FUnCheckedRd=null,this.FCheckedFocusRd=null,this.FUnCheckedFocusRd=null,this.FCheckedDisabledRd=null,this.FUnCheckedDisabledRd=null,this.FDownBtn=null,this.FNormalBtn=null,this.FDownFocusBtn=null,this.FNormalFocusBtn=null,this.FNormalDisabledBtn=null,this.FFill=null,this.FStroke=null,this.FUndoManager=null},this.$final=function(){this.FExportRect=void 0,this.FOnBeforeDraw=void 0,this.FOnAfterDraw=void 0,this.FOnCanSaveProperty=void 0,this.FOnCanLoadProperty=void 0,this.FCheckedChk=void 0,this.FUnCheckedChk=void 0,this.FCheckedFocusChk=void 0,this.FUnCheckedFocusChk=void 0,this.FCheckedDisabledChk=void 0,this.FUnCheckedDisabledChk=void 0,this.FCheckedRd=void 0,this.FUnCheckedRd=void 0,this.FCheckedFocusRd=void 0,this.FUnCheckedFocusRd=void 0,this.FCheckedDisabledRd=void 0,this.FUnCheckedDisabledRd=void 0,this.FDownBtn=void 0,this.FNormalBtn=void 0,this.FDownFocusBtn=void 0,this.FNormalFocusBtn=void 0,this.FNormalDisabledBtn=void 0,this.FFill=void 0,this.FStroke=void 0,this.FUndoManager=void 0,t.TTMSFNCCustomControlBase.$final.call(this)},this.LocalToScreenEx=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.ClientToScreen(pas.Types.Point(Math.round(t.X),Math.round(t.Y)))),e.$assign(pas["WEBLib.TMSFNCTypes"].PointF(i.x,i.y)),e},this.GetLocalRect=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return this.IsExporting()?e.$assign(this.FExportRect):e.$assign(t.TTMSFNCCustomControlBase.GetLocalRect.call(this)),e},this.IsExporting=function(){return this.FExporting},this.SetColor=function(t){pas["WEBLib.Controls"].TControl.SetColor.apply(this,arguments),null!=this.FFill&&this.FFill.SetColor(t),this.Invalidate()},this.RegisterRuntimeClasses=function(){},this.ApplyStyle=function(){var e=0;t.TTMSFNCCustomControlBaseCommon.ApplyStyle.call(this),e=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return e},set:function(t){e=t}})&&this.FFill.SetColor(e),e=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleLineFillColor({get:function(){return e},set:function(t){e=t}})&&this.FStroke.SetColor(e)},this.ResetToDefaultStyle=function(){t.TTMSFNCCustomControlBaseCommon.ResetToDefaultStyle.call(this),this.FFill.SetColor(16777215),this.FStroke.SetColor(12632256)},this.DestroyGraphicElements=function(){null!=this.FDownBtn&&(rtl.free(this,"FDownBtn"),this.FDownBtn=null),null!=this.FNormalBtn&&(rtl.free(this,"FNormalBtn"),this.FNormalBtn=null),null!=this.FDownFocusBtn&&(rtl.free(this,"FDownFocusBtn"),this.FDownFocusBtn=null),null!=this.FNormalFocusBtn&&(rtl.free(this,"FNormalFocusBtn"),this.FNormalFocusBtn=null),null!=this.FNormalDisabledBtn&&(rtl.free(this,"FNormalDisabledBtn"),this.FNormalDisabledBtn=null),null!=this.FCheckedChk&&(rtl.free(this,"FCheckedChk"),this.FCheckedChk=null),null!=this.FCheckedFocusChk&&(rtl.free(this,"FCheckedFocusChk"),this.FCheckedFocusChk=null),null!=this.FUnCheckedDisabledChk&&(rtl.free(this,"FUnCheckedDisabledChk"),this.FUnCheckedDisabledChk=null),null!=this.FCheckedDisabledChk&&(rtl.free(this,"FCheckedDisabledChk"),this.FCheckedDisabledChk=null),null!=this.FUnCheckedChk&&(rtl.free(this,"FUnCheckedChk"),this.FUnCheckedChk=null),null!=this.FUnCheckedFocusChk&&(rtl.free(this,"FUnCheckedFocusChk"),this.FUnCheckedFocusChk=null),null!=this.FCheckedRd&&(rtl.free(this,"FCheckedRd"),this.FCheckedRd=null),null!=this.FCheckedFocusRd&&(rtl.free(this,"FCheckedFocusRd"),this.FCheckedFocusRd=null),null!=this.FUnCheckedRd&&(rtl.free(this,"FUnCheckedRd"),this.FUnCheckedRd=null),null!=this.FUnCheckedFocusRd&&(rtl.free(this,"FUnCheckedFocusRd"),this.FUnCheckedFocusRd=null),null!=this.FUnCheckedDisabledRd&&(rtl.free(this,"FUnCheckedDisabledRd"),this.FUnCheckedDisabledRd=null),null!=this.FCheckedDisabledRd&&(rtl.free(this,"FCheckedDisabledRd"),this.FCheckedDisabledRd=null)},this.UpdateControlAfterResize=function(){},this.DoBeforeDraw=function(t,e,i){null!=this.FOnBeforeDraw&&this.FOnBeforeDraw(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)},this.DoAfterDraw=function(t,e){null!=this.FOnAfterDraw&&this.FOnAfterDraw(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e))},this.DrawBackground=function(t,e){t.FFill.Assign(this.FFill),t.FFill.SetColor(this.FColor),t.FStroke.Assign(this.FStroke),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),2)},this.StrokeChanged=function(t){this.Invalidate()},this.FillChanged=function(t){0!==this.FFill.FKind&&3!==this.FFill.FKind&&-1!==this.FFill.FColor?this.SetColor(this.FFill.FColor):this.SetColor(-1),this.Invalidate()},this.Draw=function(t,e){},this.DrawControl=function(){var t=null,e=null,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=!1,n=null;this.FBufferedPainting?(t=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[this.GetWidth(),this.GetHeight(),this.FNativeCanvas,!0])).BeginScene():t=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),this.FNativeCanvas]),t.FOptimizedHTMLDrawing=this.FOptimizedHTMLDrawing,t.GetContext().SetSize(this.GetWidth(),this.GetHeight()),t.GetContext().SetAntiAliasing(this.FAntiAliasing),t.GetContext().SetShowAcceleratorChar(this.FShowAcceleratorChar),t.GetContext().SetTextQuality(this.FTextQuality);try{if(i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),s=!0,this.DoBeforeDraw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),{get:function(){return s},set:function(t){s=t}}),s&&(this.DrawBackground(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),this.Draw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),this.DoAfterDraw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))),this.FBufferedPainting&&t.EndScene(),t.GetContext().Render(),this.FBufferedPainting){n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{n.Assign(t.FBitmap),e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),!1]);try{e.GetContext().SetSize(this.GetWidth(),this.GetHeight()),e.GetContext().SetAntiAliasing(this.FAntiAliasing),e.GetContext().SetShowAcceleratorChar(this.FShowAcceleratorChar),e.GetContext().SetTextQuality(this.FTextQuality),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),n,!0,!1,!0,!1)}finally{e=rtl.freeLoc(e)}}finally{n=rtl.freeLoc(n)}}}finally{t=rtl.freeLoc(t)}},this.CaptureEx=function(){this.Capture()},this.ReleaseCaptureEx=function(){this.ReleaseCapture()},this.Assign=function(e){t.TTMSFNCCustomControl.isPrototypeOf(e)?(this.FFill.Assign(rtl.as(e,t.TTMSFNCCustomControl).FFill),this.FStroke.Assign(rtl.as(e,t.TTMSFNCCustomControl).FStroke)):pas["WEBLib.Controls"].TControl.Assign.apply(this,arguments)},this.Create$1=function(e){return t.TTMSFNCCustomControlBase.Create$1.apply(this,arguments),this.SetColor(16777215),this.FLinkTouchEvents=!0,this.FAllowTouch=!1,this.SetTabStop(!0),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.IsDesignerForm()||this.RegisterRuntimeClasses(),this},this.Destroy=function(){null!=this.FUndoManager&&(rtl.free(this,"FUndoManager"),this.FUndoManager=null),null!=this.FDownBtn&&(rtl.free(this,"FDownBtn"),this.FDownBtn=null),null!=this.FNormalBtn&&(rtl.free(this,"FNormalBtn"),this.FNormalBtn=null),null!=this.FDownFocusBtn&&(rtl.free(this,"FDownFocusBtn"),this.FDownFocusBtn=null),null!=this.FNormalFocusBtn&&(rtl.free(this,"FNormalFocusBtn"),this.FNormalFocusBtn=null),null!=this.FNormalDisabledBtn&&(rtl.free(this,"FNormalDisabledBtn"),this.FNormalDisabledBtn=null),null!=this.FCheckedChk&&(rtl.free(this,"FCheckedChk"),this.FCheckedChk=null),null!=this.FCheckedFocusChk&&(rtl.free(this,"FCheckedFocusChk"),this.FCheckedFocusChk=null),null!=this.FUnCheckedDisabledChk&&(rtl.free(this,"FUnCheckedDisabledChk"),this.FUnCheckedDisabledChk=null),null!=this.FCheckedDisabledChk&&(rtl.free(this,"FCheckedDisabledChk"),this.FCheckedDisabledChk=null),null!=this.FUnCheckedChk&&(rtl.free(this,"FUnCheckedChk"),this.FUnCheckedChk=null),null!=this.FUnCheckedFocusChk&&(rtl.free(this,"FUnCheckedFocusChk"),this.FUnCheckedFocusChk=null),null!=this.FCheckedRd&&(rtl.free(this,"FCheckedRd"),this.FCheckedRd=null),null!=this.FCheckedFocusRd&&(rtl.free(this,"FCheckedFocusRd"),this.FCheckedFocusRd=null),null!=this.FUnCheckedRd&&(rtl.free(this,"FUnCheckedRd"),this.FUnCheckedRd=null),null!=this.FUnCheckedFocusRd&&(rtl.free(this,"FUnCheckedFocusRd"),this.FUnCheckedFocusRd=null),null!=this.FUnCheckedDisabledRd&&(rtl.free(this,"FUnCheckedDisabledRd"),this.FUnCheckedDisabledRd=null),null!=this.FCheckedDisabledRd&&(rtl.free(this,"FCheckedDisabledRd"),this.FCheckedDisabledRd=null),rtl.free(this,"FFill"),rtl.free(this,"FStroke"),t.TTMSFNCCustomControlBaseCommon.Destroy.call(this)},this.IsDesignTime=function(){var t=!1;return t=!1,null!=this.FOwner&&(t=this.IsDesigning()&&!(1 in this.FOwner.FComponentState||0 in this.FOwner.FComponentState)),t},this.IsLoading=function(){var t=!1;return t=!1,null!=this.FOwner&&(t=0 in this.FOwner.FComponentState),t},this.IsDesigning=function(){return 4 in this.FComponentState||null!=pas["WEBLib.Forms"].VSIDE},this.IsDesignerForm=function(){var e,i=!1;return e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetOwnerForm(this),i=this.IsDesigning(),null!=e&&(i=i||t.TTMSFNCCustomDesignerForm.isPrototypeOf(e)),i},this.IsDestroying=function(){return 3 in this.FComponentState},this.DisableBackground=function(){this.FFill.SetKind(0),this.FStroke.SetKind(0),this.SetColor(-1)},this.Resize=function(){pas["WEBLib.Controls"].TCustomControl.Resize.call(this),this.UpdateControlAfterResize()},this.Paint=function(){pas["WEBLib.Controls"].TCustomControl.Paint.call(this),this.DrawControl()},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("AdaptToStyle",3,rtl.boolean,"GetAdaptToStyle","SetAdaptToStyle",{Default:!1}),e.addProperty("AllowFocus",3,rtl.boolean,"GetAllowFocus","SetAllowFocus",{Default:!0}),e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),e.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),e.addProperty("Center",0,pas["WEBLib.Controls"].$rtti.TCenter,"FCenter",""),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("DoubleBuffered",0,rtl.boolean,"FDoubleBuffered","FDoubleBuffered",{Default:!1}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),e.addProperty("ParentDoubleBuffered",0,rtl.boolean,"FParentDoubleBuffered","FParentDoubleBuffered",{Default:!0}),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("Role",3,rtl.string,"GetRole","SetRole"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),e.addProperty("OnMouseWheelUp",0,pas["WEBLib.Controls"].$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelUp","FOnMouseWheelUp"),e.addProperty("OnMouseWheelDown",0,pas["WEBLib.Controls"].$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelDown","FOnMouseWheelDown"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnResize",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("ShowAcceleratorChar",2,rtl.boolean,"FShowAcceleratorChar","SetShowAcceleratorChar",{Default:!0}),e.addProperty("OnBeforeDraw",0,t.$rtti.TTMSFNCCustomControlBeforeDrawEvent,"FOnBeforeDraw","FOnBeforeDraw"),e.addProperty("OnAfterDraw",0,t.$rtti.TTMSFNCCustomControlAfterDrawEvent,"FOnAfterDraw","FOnAfterDraw"),e.addProperty("OnCanSaveProperty",0,t.$rtti.TTMSFNCCustomControlCanSavePropertyEvent,"FOnCanSaveProperty","FOnCanSaveProperty"),e.addProperty("OnCanLoadProperty",0,t.$rtti.TTMSFNCCustomControlCanLoadPropertyEvent,"FOnCanLoadProperty","FOnCanLoadProperty")}))}),["WEBLib.TMSFNCUtils","SysUtils","WEBLib.StdCtrls"]),rtl.module("WEBLib.ExtCtrls",["System","Classes","SysUtils","Types","WEBLib.Controls","WEBLib.StdCtrls","WEBLib.Graphics","Web","JS","WEBLib.WebTools","WEBLib.Menus","WEBLib.REST"],(function(){"use strict";rtl.createClass(this,"TTimer",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FInterval=0,this.FTimerID=0,this.FOnTimer=null,this.FEnabled=!1},this.$final=function(){this.FOnTimer=void 0,pas.Classes.TComponent.$final.call(this)},this.SetEnabled=function(t){this.FEnabled=t,this.DoUpdateTimer()},this.SetInterval=function(t){this.FInterval=t,this.DoUpdateTimer()},this.DoTimer=function(){null!=this.FOnTimer&&this.FOnTimer(this)},this.DoUpdateTimer=function(){this.DoClearTimer(),this.FEnabled&&(this.FTimerID=window.setInterval(rtl.createSafeCallback(this,"DoTimer"),this.FInterval))},this.DoClearTimer=function(){-1!==this.FTimerID&&(window.clearInterval(this.FTimerID),this.FTimerID=-1)},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.apply(this,arguments),this.FInterval=1e3,this.FTimerID=-1,this.SetEnabled(!0),this},this.Destroy=function(){this.DoClearTimer(),pas.Classes.TComponent.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Interval",2,rtl.longint,"FInterval","SetInterval",{Default:1e3}),t.addProperty("OnTimer",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnTimer","FOnTimer")})),rtl.createClass(this,"TPaintBox",pas["WEBLib.Menus"].TWebGraphicControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebGraphicControl.$init.call(this),this.FOnPaint=null},this.$final=function(){this.FOnPaint=void 0,pas["WEBLib.Menus"].TWebGraphicControl.$final.call(this)},this.Paint=function(){pas["WEBLib.Controls"].TCustomControl.Paint.call(this),null!=this.FOnPaint&&this.FOnPaint(this)},this.UpdateElementVisual=function(){pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),4 in this.FComponentState&&this.GetElementHandle().style.setProperty("border","1px dotted gray")},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),t.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),t.addProperty("OnPaint",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPaint","FOnPaint"),t.addProperty("OnTouchStart",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchStart","FOnTouchStart"),t.addProperty("OnTouchMove",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchMove","FOnTouchMove"),t.addProperty("OnTouchEnd",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchEnd","FOnTouchEnd"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")}))}),["WEBLib.Utils"]),rtl.module("WEBLib.TMSFNCPopup",["System","Classes","WEBLib.Controls","WEBLib.TMSFNCCustomComponent","WEBLib.TMSFNCGraphics","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphicsTypes","WEBLib.Forms","WEBLib.ExtCtrls","Types","Web"],(function(){"use strict";var t=this,e=t.$impl;this.MAJ_VER=1,this.MIN_VER=0,this.REL_VER=0,this.BLD_VER=5,this.TTMSFNCPopupPlacement={0:"ppBottom",ppBottom:0,1:"ppTop",ppTop:1,2:"ppLeft",ppLeft:2,3:"ppRight",ppRight:3,4:"ppCenter",ppCenter:4,5:"ppBottomCenter",ppBottomCenter:5,6:"ppTopCenter",ppTopCenter:6,7:"ppLeftCenter",ppLeftCenter:7,8:"ppRightCenter",ppRightCenter:8,9:"ppAbsolute",ppAbsolute:9,10:"ppMouse",ppMouse:10,11:"ppMouseCenter",ppMouseCenter:11,12:"ppAboveMouse",ppAboveMouse:12,13:"ppAboveMouseCenter",ppAboveMouseCenter:13},this.$rtti.$Enum("TTMSFNCPopupPlacement",{minvalue:0,maxvalue:13,ordtype:1,enumtype:this.TTMSFNCPopupPlacement}),this.$rtti.$MethodVar("TTMSFNCPopupPaint",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF]]),methodkind:0}),rtl.createClass(this,"TCustomPaintedForm",pas["WEBLib.Forms"].TCustomForm,(function(){this.$init=function(){pas["WEBLib.Forms"].TCustomForm.$init.call(this),this.FPaintBox=null},this.$final=function(){this.FPaintBox=void 0,pas["WEBLib.Forms"].TCustomForm.$final.call(this)},this.GetCanvas$1=function(){return this.CreateCanvas(),this.FPaintBox.GetCanvas()},this.DoPaint=function(t){this.Paint()},this.Paint=function(){pas["WEBLib.Forms"].TCustomForm.Paint.call(this),null!=this.FOnPaint&&this.FOnPaint(this)},this.CreateCanvas=function(){null==this.FPaintBox&&(this.FPaintBox=pas["WEBLib.ExtCtrls"].TPaintBox.$create("Create$1",[this]),this.FPaintBox.SetParent(this),this.FPaintBox.SetAlign(5),this.FPaintBox.FOnPaint=rtl.createCallback(this,"DoPaint"))},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCCustomPopupForm",this.TCustomPaintedForm,(function(){this.$init=function(){t.TCustomPaintedForm.$init.call(this),this.FPreferedDisplayIndex=0,this.FHintWindow=!1,this.FTimer=null,this.FFirstShow=!1,this.FOwner$1=null,this.FShowModal=!1,this.FPlacement=0,this.FRealPlacement=0,this.FPlacementControl=null,this.FOffset=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FSize=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),this.FPlacementRectangle=null,this.FScreenPlacementRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FPlacementChanged=!1,this.FDragWithParent=!1,this.FOnBeforeClose=null,this.FOnBeforeShow=null,this.FScreenContentRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FContentPadding=null,this.FContentControl=null,this.FOnRealPlacementChanged=null,this.FOnPopupPaint=null},this.$final=function(){this.FTimer=void 0,this.FOwner$1=void 0,this.FPlacementControl=void 0,this.FOffset=void 0,this.FSize=void 0,this.FPlacementRectangle=void 0,this.FScreenPlacementRect=void 0,this.FOnBeforeClose=void 0,this.FOnBeforeShow=void 0,this.FScreenContentRect=void 0,this.FContentPadding=void 0,this.FContentControl=void 0,this.FOnRealPlacementChanged=void 0,this.FOnPopupPaint=void 0,t.TCustomPaintedForm.$final.call(this)},this.SetOffset=function(t){this.FOffset.X===t.X&&this.FOffset.Y===t.Y||(this.FOffset.$assign(t),this.ApplyPlacement())},this.SetSize=function(t){this.FSize.cx===t.cx&&this.FSize.cy===t.cy||(this.FSize.$assign(t),this.ApplyPlacement())},this.TimerProc=function(t){(this.FVisible||this.FHintWindow)&&(this.FFirstShow||this.FDragWithParent)&&this.ApplyPlacement(),(this.FVisible||this.FHintWindow)&&this.FFirstShow&&(this.FFirstShow=!1)},this.SetPlacementRectangle=function(t){this.FPlacementRectangle.Assign(t)},this.SetPlacement=function(t){this.FPlacement!==t&&(this.FPlacement=t,this.ApplyPlacement())},this.SetPlacementControl=function(t){this.FPlacementControl!==t&&(null!==this.FPlacementControl&&this.FPlacementControl.RemoveFreeNotification(this),this.FPlacementControl=t,null!==this.FPlacementControl&&this.FPlacementControl.FreeNotification(this))},this.SetDragWithParent=function(t){this.FDragWithParent=t},this.SetContentControl=function(t){if(this.FContentControl!==t&&(null!==this.FContentControl&&this.FContentControl.RemoveFreeNotification(this),this.FContentControl=t,null!==this.FContentControl)){this.FContentControl.FreeNotification(this);try{this.FContentControl.SetParent(this),this.FContentControl.SetAlign(0),this.FContentControl.SetVisible(!0)}finally{}}},this.DoBeforeShow=function(){this.FHintWindow=!1,null!=this.FOnBeforeShow&&this.FOnBeforeShow(this),this.FFirstShow=!0,null==this.FTimer&&(this.FTimer=pas["WEBLib.ExtCtrls"].TTimer.$create("Create$1",[this])),this.FTimer.SetInterval(20),this.FTimer.FOnTimer=rtl.createCallback(this,"TimerProc"),this.FTimer.SetEnabled(!0)},this.DoBeforeClose=function(){null!=this.FOnBeforeClose&&this.FOnBeforeClose(this)},this.UpdateBounds=function(t){this.SetBounds(Math.round(t.Left),Math.round(t.Top),Math.round(t.Right-t.Left),Math.round(t.Bottom-t.Top))},this.DoClose=function(t){t.set(2),pas["WEBLib.Forms"].TCustomForm.DoClose.apply(this,arguments),0!==t.get()&&null!=this.FTimer&&this.FTimer.SetEnabled(!1)},this.DoApplyPlacement=function(){var t,e,i,s,n,o,a,r=this,l=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),h=pas.Types.TPoint.$new(),p=pas.Types.TPoint.$new(),c=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=0,u=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),C=0,d=!1,T=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),m=!1;this.FPlacementChanged=!1,u.$assign(this.FOffset),F=this.FPlacement,C=0;do{c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FPlacementRectangle.FLeft,this.FPlacementRectangle.FTop,this.FPlacementRectangle.FRight,this.FPlacementRectangle.FBottom)),null!==this.FPlacementControl&&this.FPlacementRectangle.Empty()&&c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.FPlacementControl.GetWidth(),this.FPlacementControl.GetHeight())),null===this.FPlacementControl&&this.FPlacementRectangle.Empty()&&rtl.createSet(9,10,11,12,13),this.FScreenPlacementRect.$assign(c),F in rtl.createSet(1,6)?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,0,this.FContentPadding.FBottom-u.Y):pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,0,u.Y-this.FContentPadding.FTop),F in rtl.createSet(2,7)?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,this.FContentPadding.FRight-u.X,0):pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,u.X-this.FContentPadding.FLeft,0),m=!(F in rtl.createSet(9,10,11,12,13)),T.$assign(this.FSize);var S=F;0===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,0,c.Bottom-c.Top):1===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,0,-T.cy):2===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,-T.cx,0):3===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,c.Right-c.Top,0):4===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,(c.Right-c.Top-T.cx)/2,(c.Bottom-c.Top-T.cy)/2):5===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,(c.Right-c.Top-T.cx)/2,c.Bottom-c.Top):6===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,(c.Right-c.Top-T.cx)/2,-T.cy):7===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,-T.cx,(c.Bottom-c.Top-T.cy)/2):8===S?pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,c.Right-c.Top,(c.Bottom-c.Top-T.cy)/2):9===S?this.FPlacementRectangle.Empty()?c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FPlacementRectangle.Rect().Left,this.FPlacementRectangle.Rect().Top,this.FPlacementRectangle.Rect().Left+T.cx,this.FPlacementRectangle.Rect().Top+T.cy)):c.$assign(this.FPlacementRectangle.Rect()):10!==S&&11!==S&&12!==S&&13!==S||(l.$assign(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetMousePos()),c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(l.X,l.Y,l.X+T.cx,l.Y+T.cy)),11===F&&pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,-T.cx/2,-T.cy/2),13===F&&pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,-T.cx/2,-T.cy-5),12===F&&pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(c,0,-T.cy-5)),m&&(p.$assign(pas.Types.Point(Math.round(c.Left),Math.round(c.Top))),null!==this.FPlacementControl&&(p.$assign(this.FPlacementControl.ClientToScreen(p)),h.$assign(pas.Types.Point(Math.round(this.FScreenPlacementRect.Left),Math.round(this.FScreenPlacementRect.Top))),h.$assign(this.FPlacementControl.ClientToScreen(h)),this.FScreenPlacementRect.Left=h.x,this.FScreenPlacementRect.Top=h.y,h.$assign(pas.Types.Point(Math.round(this.FScreenPlacementRect.Right),Math.round(this.FScreenPlacementRect.Bottom))),h.$assign(this.FPlacementControl.ClientToScreen(h)),this.FScreenPlacementRect.Right=h.x,this.FScreenPlacementRect.Bottom=h.y),c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(p.x,p.y,p.x+this.FSize.cx,p.y+this.FSize.cy))),t=c,e=rtl.refSet(this.FComponentState),i=void 0,s=void 0,n=void 0,o=void 0,a=void 0,i=!1,s=pas.Types.TRect.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a=0,i=!0,t.Left=Math.round(t.Left),t.Top=Math.round(t.Top),t.Right=Math.round(t.Right),t.Bottom=Math.round(t.Bottom),s.Left=0,s.Top=0,s.Right=pas["WEBLib.Forms"].WinWidth(),s.Bottom=pas["WEBLib.Forms"].WinHeight(),n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left-r.FContentPadding.FLeft,s.Top-r.FContentPadding.FTop,s.Right+r.FContentPadding.FRight,s.Bottom+r.FContentPadding.FBottom)),4 in e||(o=t.Right-t.Left,a=t.Bottom-t.Top,t.Left>n.Left?t.Left>n.Right-o&&(t.Left=n.Right-o,3===F&&(F=2,i=!1),8===F&&(F=7,i=!1)):(t.Left=n.Left,2===F&&(F=3,i=!1),7===F&&(F=8,i=!1)),t.Top>n.Top?t.Top>n.Bottom-a&&(t.Top=n.Bottom-a,0===F&&(F=1,i=!1),5===F&&(F=6,i=!1)):(t.Top=n.Top,1===F&&(F=0,i=!1),6===F&&(F=5,i=!1)),t.Right=t.Left+o,t.Bottom=t.Top+a),d=i,C+=1}while(!(d||C>1));this.FScreenContentRect.$assign(c),this.FScreenContentRect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FScreenContentRect.Left+this.FContentPadding.FLeft,this.FScreenContentRect.Top+this.FContentPadding.FTop,this.FScreenContentRect.Right-this.FContentPadding.FRight,this.FScreenContentRect.Bottom-this.FContentPadding.FBottom)),this.FRealPlacement=F,this.UpdateBounds(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(c))},this.Loaded=function(){pas["WEBLib.Forms"].TCustomForm.Loaded.call(this),this.FPlacementChanged&&this.ApplyPlacement()},this.Notification=function(t,e){pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&(t===this.FPlacementControl&&(this.FPlacementControl=null,this.ApplyPlacement()),t===this.FContentControl&&(this.FContentControl=null))},this.DoRealPlacementChanged=function(){null!=this.FOnRealPlacementChanged&&this.FOnRealPlacementChanged(this)},this.CreateNew=function(t,e){function i(e){var i="",s=0;for(s=0,i=e;null!==pas["WEBLib.Controls"].FindGlobalComponent(i)||null!==t&&null!==t.FindComponent(i);)s+=1,i=pas.SysUtils.Format("%s_%d",pas.System.VarRecs(18,e,0,s));return i}this.SetName(i("CustomPopupForm")),pas["WEBLib.Forms"].TCustomForm.CreateNew.apply(this,arguments),this.FPreferedDisplayIndex=-1,this.FOwner$1=t,this.FDragWithParent=!0,this.FPlacementRectangle=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FContentPadding=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FSize.cx=320,this.FSize.cy=200,this.FPlacement=0,this.FRealPlacement=this.FPlacement,this.SetVisible(!1);try{this.SetBorder(0),this.SetPosition(0)}finally{}return this},this.Create$8=function(t,e){this.CreateNew(t,0);try{null!==e&&(this.FPlacementControl=e),null!==this.FPlacementControl&&this.FPlacementControl.FreeNotification(this)}finally{}return this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FTimer},set:function(t){this.p.FTimer=t}}),null!==this.FPlacementControl&&(this.FPlacementControl.RemoveFreeNotification(this),this.FPlacementControl=null),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FContentPadding},set:function(t){this.p.FContentPadding=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPlacementRectangle},set:function(t){this.p.FPlacementRectangle=t}}),pas["WEBLib.Forms"].TCustomForm.Destroy.call(this)},this.ApplyPlacement=function(){var t,e=pas.Types.TRect.$new(),i=pas.Types.TRect.$new();e.$assign(pas.Types.Rect(this.GetLeft(),this.GetTop(),this.GetLeft()+this.GetWidth(),this.GetTop()+this.GetHeight())),t=this.FRealPlacement,this.DoApplyPlacement(),i.$assign(pas.Types.Rect(this.GetLeft(),this.GetTop(),this.GetLeft()+this.GetWidth(),this.GetTop()+this.GetHeight())),i.Left===e.Left&&i.Top===e.Top&&i.Bottom===e.Bottom&&i.Right===e.Right&&t===this.FRealPlacement||this.DoRealPlacementChanged()},this.KeyDown=function(t,e){if(pas["WEBLib.Controls"].TControl.KeyDown.apply(this,arguments),!rtl.neSet(e,{})){var i=t.get();27!==i&&115!==i||this.Close()}},this.CloseQuery=function(){var t;return(t=pas["WEBLib.Forms"].TCustomForm.CloseQuery.call(this))&&!(3 in this.FComponentState)&&this.DoBeforeClose(),t},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("CreateNew",2,[["AOwner",pas.Classes.$rtti.TComponent],["Dummy",rtl.longint]]),e.addMethod("Create$8",2,[["AOwner",pas.Classes.$rtti.TComponent],["APlacementControl",pas["WEBLib.Controls"].$rtti.TControl]])})),rtl.createClass(this,"TTMSFNCCustomPopup",pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$init.call(this),this.FCloseTime=0,this.FCheckTime=!1,this.FDestroyingPopup=!1,this.FOwner$1=null,this.FPlacementControl=null,this.FPopupForm=null,this.FStaysOpen=!1,this.FPlacement=0,this.FPlacementRectangle=null,this.FHorizontalOffset=0,this.FVerticalOffset=0,this.FDragWithParent=!1,this.FModalResult=0,this.FModal=!1,this.FOnClosePopup=null,this.FOnPopup=null,this.FPopupFormSize=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),this.FContentControl=null,this.FDropDownHeight=0,this.FDropDownWidth=0,this.FFocusable=!1,this.FFocusedControl=null,this.FOnPopupPaint=null,this.FOnPopupShown=null,this.FIsOpen=!1,this.FFillColor=0,this.FStrokeColor=0},this.$final=function(){this.FOwner$1=void 0,this.FPlacementControl=void 0,this.FPopupForm=void 0,this.FPlacementRectangle=void 0,this.FOnClosePopup=void 0,this.FOnPopup=void 0,this.FPopupFormSize=void 0,this.FContentControl=void 0,this.FFocusedControl=void 0,this.FOnPopupPaint=void 0,this.FOnPopupShown=void 0,pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$final.call(this)},this.SetIsOpen=function(t){if(this.FIsOpen!==t){if(!1,!(null!=pas["WEBLib.Forms"].VSIDE)&&4 in this.FComponentState)return void(this.FIsOpen=!1);t?this.DoCreatePopup(!1):this.HasPopupForm()?this.FPopupForm.Close():this.FIsOpen=t}},this.SetPlacementRectangle=function(t){this.FPlacementRectangle.Assign(t)},this.SetModalResult=function(t){this.FModalResult=t,null!=this.FPopupForm&&this.FPopupForm.SetModalResult(this.FModalResult)},this.SetPlacementControl=function(t){this.FPlacementControl!==t&&(null!==this.FPlacementControl&&this.FPlacementControl.RemoveFreeNotification(this),this.FPlacementControl=t,this.HasPopupForm()&&this.FPopupForm.SetPlacementControl(this.FPlacementControl),null!==this.FPlacementControl&&this.FPlacementControl.FreeNotification(this))},this.SetPlacement=function(t){this.FPlacement!==t&&(this.FPlacement=t,this.HasPopupForm()&&this.FPopupForm.SetPlacement(this.FPlacement))},this.SetDragWithParent=function(t){this.FDragWithParent!==t&&(this.FDragWithParent=t,this.HasPopupForm()&&this.FPopupForm.SetDragWithParent(this.FDragWithParent))},this.BeforeShowProc=function(t){this.FIsOpen=!0,this.DoPopup()},this.BeforeCloseProc=function(t){this.FIsOpen=!1},this.CloseProc=function(t,e){this.ClosePopup()},this.ShowProc=function(t){null!=this.FPopupForm&&this.FPopupForm.FShowModal&&this.HandleFocusedControl(),this.DoPopupShown()},this.DeactivateProc=function(t){3 in this.FComponentState||null==this.FPopupForm||this.FPopupForm.FShowModal||this.FStaysOpen||(this.FPopupForm.SetVisible(!1),this.FPopupForm.Close(),this.FCloseTime=e.GetTickCountX(),this.FCheckTime=!0)},this.UpdatePopupSize=function(){var t=pas["WEBLib.TMSFNCTypes"].TSizeF.$new();null!==this.FPopupForm&&(this.FPopupFormSize.cx>0?t.cx=this.FPopupFormSize.cx:t.cx=this.FDropDownWidth,this.FPopupFormSize.cy>0?t.cy=this.FPopupFormSize.cy:t.cy=this.FDropDownHeight,this.FPopupForm.SetSize(t))},this.SetContentControl=function(t){null===t&&null!=this.FContentControl&&this.FContentControl.SetVisible(!0),this.FContentControl=t,null!=this.FContentControl&&(this.FContentControl.SetVisible(!1),this.SetDropDownWidth(this.FContentControl.GetWidth()),this.SetDropDownHeight(this.FContentControl.GetHeight()))},this.SetDropDownHeight=function(t){this.FDropDownHeight!==t&&(this.FDropDownHeight=t,null!=this.FPopupForm&&this.FPopupForm.SetHeight(Math.round(t)))},this.SetDropDownWidth=function(t){this.FDropDownWidth!==t&&(this.FDropDownWidth=t,null!=this.FPopupForm&&this.FPopupForm.SetWidth(Math.round(t)))},this.GetVersion=function(){return this.$class.GetVersionNumber(1,0,0,5)},this.SetAdaptToStyle=function(t){var e=null,i=rtl.createIntfRefs();try{pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.SetAdaptToStyle.apply(this,arguments),null!=this.FContentControl&&pas.SysUtils.Supports$1(i.ref(1,rtl.queryIntfT(this.FContentControl,pas.System.IUnknown)),rtl.getIntfGUIDR(pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),{get:function(){return e},set:function(t){e=t}})&&e.SetAdaptToStyle(this.FAdaptToStyle)}finally{i.free(),rtl._Release(e)}},this.ShowPopup=function(t){t?this.FModalResult=this.FPopupForm.ShowModal():(this.FPopupForm.Show$1(),this.HandleFocusedControl())},this.HandleFocusedControl=function(){var t=null;null!=this.FPopupForm&&null!=this.FFocusedControl&&(this.FPopupForm.FShowModal||null!=(t=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetParentForm(this.FFocusedControl))&&t!==this.FPopupForm&&t.SetFocus(),pas["WEBLib.Controls"].TControl.isPrototypeOf(this.FFocusedControl)&&rtl.as(this.FFocusedControl,pas["WEBLib.Controls"].TControl).CanFocus()&&rtl.as(this.FFocusedControl,pas["WEBLib.Controls"].TControl).SetFocus())},this.FormPaint=function(t){var e=null,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FPopupForm){(e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.FPopupForm.GetCanvas$1(),!1])).BeginScene();try{e.FFill.SetKind(1),e.FStroke.SetKind(1),-1!==this.FFillColor&&-1!==this.FStrokeColor?(e.FFill.SetColor(this.FFillColor),e.FStroke.SetColor(this.FStrokeColor)):(e.FFill.SetColor(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupFillColor),e.FStroke.SetColor(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupStrokeColor)),i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.FPopupForm.GetWidth(),this.FPopupForm.GetHeight())),e.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),2),null!=this.FOnPopupPaint&&this.FOnPopupPaint(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))}finally{e.EndScene(),e=rtl.freeLoc(e)}}},this.DoPopupPaint=function(t,e,i){null!=this.FOnPopupPaint&&this.FOnPopupPaint(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))},this.Notification=function(t,e){pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&(t===this.FContentControl&&(this.FContentControl=null),t===this.FFocusedControl&&(this.FFocusedControl=null),t===this.FPopupForm&&(this.FPopupForm=null),t===this.FPlacementControl&&(this.FPlacementControl=null,this.HasPopupForm()&&this.FPopupForm.SetPlacementControl(null)))},this.MarginsChanged=function(t){null!==this.FPopupForm&&this.FPopupForm.SetPlacementRectangle(this.FPlacementRectangle)},this.DoClosePopup=function(){null!=this.FOnClosePopup&&this.FOnClosePopup(this)},this.DoPopup=function(){null!=this.FOnPopup&&this.FOnPopup(this)},this.DoPopupShown=function(){null!=this.FOnPopupShown&&this.FOnPopupShown(this)},this.ClosePopup=function(){var e=null;this.HasPopupForm()&&!this.FDestroyingPopup&&(this.FDestroyingPopup=!0,this.FModal&&0===this.FModalResult?this.SetModalResult(2):(this.FIsOpen=!1,null!=this.FContentControl&&(e=this.GetParent(),this.FContentControl.SetVisible(!1),null!=e&&pas["WEBLib.Controls"].TWinControl.isPrototypeOf(e)?this.FContentControl.SetParent(rtl.as(e,pas["WEBLib.Controls"].TWinControl)):this.FContentControl.SetParent(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetParentForm(this))),3 in this.FComponentState||this.HasPopupForm()&&(t.TTMSFNCNonFocusablePopup.isPrototypeOf(this)&&rtl.free(this,"FPopupForm"),this.DoClosePopup(),this.FPopupForm=null),this.FDestroyingPopup=!1))},this.DoCreatePopup=function(t){var i=null,s=rtl.createIntfRefs();try{if(e.GetTickCountX()-this.FCloseTime<200&&this.FCheckTime)return void(this.FCheckTime=!1);if(this.FIsOpen)return;this.HasPopupForm()&&this.FPopupForm.Close(),this.FPopupForm=this.CreatePopupForm();try{try{this.FPopupForm.SetFormStyle(1),this.FPopupForm.FOnPaint=rtl.createCallback(this,"FormPaint"),this.FPopupForm.FOnPopupPaint=rtl.createCallback(this,"DoPopupPaint"),this.FPopupForm.FreeNotification(this),this.FPopupForm.SetPlacement(this.FPlacement),this.FPopupForm.SetOffset(pas["WEBLib.TMSFNCTypes"].PointF(this.FHorizontalOffset,this.FVerticalOffset)),this.FPopupForm.SetPlacementRectangle(this.FPlacementRectangle),this.FPopupForm.SetDragWithParent(this.FDragWithParent),this.UpdatePopupSize(),this.FPopupForm.FOnDeactivate=rtl.createCallback(this,"DeactivateProc"),this.FPopupForm.FOnBeforeShow=rtl.createCallback(this,"BeforeShowProc"),this.FPopupForm.FOnBeforeClose=rtl.createCallback(this,"BeforeCloseProc"),this.FPopupForm.FOnClose=rtl.createCallback(this,"CloseProc"),this.FPopupForm.FOnShow=rtl.createCallback(this,"ShowProc"),this.FPopupForm.FShowModal=t,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ScaleForCurrentDPI(this.FPopupForm),this.FPopupForm.SetContentControl(this.FContentControl),pas.SysUtils.Supports$1(s.ref(1,rtl.queryIntfT(this.FContentControl,pas.System.IUnknown)),rtl.getIntfGUIDR(pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),{get:function(){return i},set:function(t){i=t}})&&i.SetAdaptToStyle(this.FAdaptToStyle),null!=this.FContentControl&&this.FContentControl.SetAlign(5)}finally{}}catch(t){throw pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPopupForm},set:function(t){this.p.FPopupForm=t}}),t}3 in this.FComponentState||this.FPopupForm.DoBeforeShow(),this.ShowPopup(t),null!=this.FOnPopupPaint&&this.FPopupForm.Paint()}finally{s.free(),rtl._Release(i)}},this.GetPopupFormClass=function(){return t.TTMSFNCCustomPopupForm},this.GetParent=function(){var t=null;return null==(t=this.FPlacementControl)&&pas["WEBLib.Controls"].TControl.isPrototypeOf(this.FOwner$1)&&(t=rtl.as(this.FOwner$1,pas["WEBLib.Controls"].TControl)),t},this.CreatePopupForm=function(){var t=null,e=null;t=null;try{e=this.GetPopupFormClass(),t=e.$create("Create$8",[this,this.FPlacementControl])}catch(e){throw pas.SysUtils.FreeAndNil({get:function(){return t},set:function(e){t=e}}),e}return t},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.Create$1.call(this,t),this.FOwner$1=t,this.FPlacement=0,this.FFocusable=!0,this.FStaysOpen=!1,this.FPlacementRectangle=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FPlacementRectangle.FOnChange=rtl.createCallback(this,"MarginsChanged"),this.FFillColor=-1,this.FStrokeColor=-1,this},this.Assign=function(e){t.TTMSFNCCustomPopup.isPrototypeOf(e)&&(this.FModalResult=rtl.as(e,t.TTMSFNCCustomPopup).FModalResult,this.FPopupFormSize.$assign(rtl.as(e,t.TTMSFNCCustomPopup).FPopupFormSize),this.FDragWithParent=rtl.as(e,t.TTMSFNCCustomPopup).FDragWithParent,this.FStaysOpen=rtl.as(e,t.TTMSFNCCustomPopup).FStaysOpen,this.FDropDownHeight=rtl.as(e,t.TTMSFNCCustomPopup).FDropDownHeight,this.FDropDownWidth=rtl.as(e,t.TTMSFNCCustomPopup).FDropDownWidth,this.FHorizontalOffset=rtl.as(e,t.TTMSFNCCustomPopup).FHorizontalOffset,this.FPlacementControl=rtl.as(e,t.TTMSFNCCustomPopup).FPlacementControl,this.FPlacement=rtl.as(e,t.TTMSFNCCustomPopup).FPlacement,this.FPlacementRectangle.Assign(rtl.as(e,t.TTMSFNCCustomPopup).FPlacementRectangle),this.FVerticalOffset=rtl.as(e,t.TTMSFNCCustomPopup).FVerticalOffset,this.FFocusedControl=rtl.as(e,t.TTMSFNCCustomPopup).FFocusedControl,this.FContentControl=rtl.as(e,t.TTMSFNCCustomPopup).FContentControl)},this.Destroy=function(){this.FContentControl=null,this.ClosePopup(),this.HasPopupForm()&&pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPopupForm},set:function(t){this.p.FPopupForm=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPlacementRectangle},set:function(t){this.p.FPlacementRectangle=t}}),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.HasPopupForm=function(){return null!==this.FPopupForm},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TTMSFNCPopup",this.TTMSFNCCustomPopup,(function(){this.RegisterRuntimeClasses=function(){pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.RegisterRuntimeClasses.call(this),pas.Classes.RegisterClass(t.TTMSFNCPopup)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("StaysOpen",0,rtl.boolean,"FStaysOpen","FStaysOpen",{Default:!1}),e.addProperty("DropDownHeight",2,rtl.double,"FDropDownHeight","SetDropDownHeight"),e.addProperty("DropDownWidth",2,rtl.double,"FDropDownWidth","SetDropDownWidth"),e.addProperty("HorizontalOffset",0,rtl.double,"FHorizontalOffset","FHorizontalOffset"),e.addProperty("Placement",2,t.$rtti.TTMSFNCPopupPlacement,"FPlacement","SetPlacement",{Default:t.TTMSFNCPopupPlacement.ppBottom}),e.addProperty("PlacementRectangle",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCMargins,"FPlacementRectangle","SetPlacementRectangle"),e.addProperty("PlacementControl",2,pas["WEBLib.Controls"].$rtti.TControl,"FPlacementControl","SetPlacementControl"),e.addProperty("VerticalOffset",0,rtl.double,"FVerticalOffset","FVerticalOffset"),e.addProperty("FocusedControl",0,pas["WEBLib.Controls"].$rtti.TControl,"FFocusedControl","FFocusedControl"),e.addProperty("ContentControl",2,pas["WEBLib.Controls"].$rtti.TControl,"FContentControl","SetContentControl"),e.addProperty("OnClosePopup",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClosePopup","FOnClosePopup"),e.addProperty("OnPopupPaint",0,t.$rtti.TTMSFNCPopupPaint,"FOnPopupPaint","FOnPopupPaint"),e.addProperty("OnPopup",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPopup","FOnPopup"),e.addProperty("OnPopupShown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPopupShown","FOnPopupShown"),e.addProperty("Version",1,rtl.string,"GetVersion",""),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),rtl.createClass(this,"TTMSFNCCustomNonFocusablePopupForm",this.TTMSFNCCustomPopupForm,(function(){this.UpdateBounds=function(e){t.TTMSFNCCustomPopupForm.UpdateBounds.apply(this,arguments)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCCustomNonFocusablePopup",this.TTMSFNCCustomPopup,(function(){this.ShowPopup=function(e){t.TTMSFNCCustomPopup.ShowPopup.apply(this,arguments),this.FIsOpen=!0},this.GetPopupFormClass=function(){return t.TTMSFNCCustomNonFocusablePopupForm},this.Create$1=function(e){return t.TTMSFNCCustomPopup.Create$1.apply(this,arguments),this.FStaysOpen=!0,this},this.Destroy=function(){t.TTMSFNCCustomPopup.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TTMSFNCNonFocusablePopup",this.TTMSFNCCustomNonFocusablePopup,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("ContentControl",2,pas["WEBLib.Controls"].$rtti.TControl,"FContentControl","SetContentControl"),e.addProperty("Placement",2,t.$rtti.TTMSFNCPopupPlacement,"FPlacement","SetPlacement",{Default:t.TTMSFNCPopupPlacement.ppBottom}),e.addProperty("PlacementRectangle",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCMargins,"FPlacementRectangle","SetPlacementRectangle"),e.addProperty("PlacementControl",2,pas["WEBLib.Controls"].$rtti.TControl,"FPlacementControl","SetPlacementControl")})),t.$implcode=function(){e.GetTickCountX=function(){var t=0,e=0,i=0,s=0;return pas.SysUtils.DecodeTime(pas.SysUtils.Now(),{get:function(){return t},set:function(e){t=e}},{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),s+1e3*i+60*e*1e3+60*t*60*1e3}}}),["SysUtils","WEBLib.TMSFNCUtils","Math","WEBLib.TMSFNCStyles"]),rtl.module("WEBLib.TMSFNCToolBarRes",["System"],(function(){"use strict";var t=this;this.TMSFNCTOOLBAREXPAND="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOvwAADr8BOAVTJAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4zjOaXUAAAACVJREFUGFdj+P//P07MEBYW9h8Xxi8JAjglYACnBAzglMAEDAwARZ1DA4NRF38AAAAASUVORK5CYII=",this.TMSFNCTOOLBAREXPAND2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOvgAADr4B6kKxwAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xNkRpr/UAAAA3SURBVBhXY3j69KktLgyS/I8LE5RsQxeE4jaQpCKIgSQIlgBiRQYQADGgAqgSMABVkI2QYGAAANnukE/t/B6ZAAAAAElFTkSuQmCC",this.TMSFNCTOOLBAROPTIONSMENU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAJCAYAAAD+WDajAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOvwAADr8BOAVTJAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4zjOaXUAAAACpJREFUKFNjwAvCwsL+48IM///jxvh1YhOEYZz2giVgAKcEDOCUwAQMDAAqj1EKDJG5XAAAAABJRU5ErkJggg==",this.TMSFNCTOOLBAROPTIONSMENULARGE=this.TMSFNCTOOLBAROPTIONSMENU,this.TMSFNCTOOLBARQUICKMENU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xNkRpr/UAAAAlSURBVBhXYwCC/9gwEAApKAMbJl4SnY0igCQIw3gkcUowMPwHALBNZJw15C+yAAAAAElFTkSuQmCC",this.TMSFNCTOOLBARQUICKMENU2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAL0lEQVQYV2P4jxswwCRBNAYGESCAIQHCIAIEYAIgAGejC8D4YEBQEqvE/////wMA7H6pV7j5gXMAAAAASUVORK5CYII=",t.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBAREXPAND),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBAREXPAND2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBAROPTIONSMENU),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBARQUICKMENU),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBARQUICKMENU2)}}),["WEBLib.TMSFNCTypes"]),rtl.module("WEBLib.TMSFNCToolBar",["System","Classes","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCPersistence","WEBLib.TMSFNCStyles","WEBLib.TMSFNCCustomControl","WEBLib.Controls","Types","WEBLib.TMSFNCPopup","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer","WEBLib.StdCtrls","WEBLib.TMSFNCToolBarRes","WEBLib.TMSFNCGraphicsTypes","contnrs","WEBLib.Menus","WEBLib.ExtCtrls"],(function(){"use strict";var t=this;this.TMSFNCTOOLBAREXPANDSVG="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTIiIHdpZHRoPSIxMCI+DQogIDxwYXRoIGQ9Ik0gMiA0IEwgNSA3IEwgOCA0IFoiIHN0eWxlPSJzdHJva2U6YmxhY2s7c3Ryb2tlLXdpZHRoOjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgLz4NCjwvc3ZnPg==",rtl.createClass(this,"TTMSFNCToolBarCustomButtonAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FHoverStroke=null,this.FDownFill=null,this.FNormalFill=null,this.FDownStroke=null,this.FDisabledFill=null,this.FNormalStroke=null,this.FDisabledStroke=null,this.FHoverFill=null,this.FCorners={},this.FRounding=0,this.FTransparent=!1,this.FShowInnerStroke=!1,this.FInnerStroke=null,this.FFlatStyle=!1,this.FOnChange=null},this.$final=function(){this.FOwner=void 0,this.FHoverStroke=void 0,this.FDownFill=void 0,this.FNormalFill=void 0,this.FDownStroke=void 0,this.FDisabledFill=void 0,this.FNormalStroke=void 0,this.FDisabledStroke=void 0,this.FHoverFill=void 0,this.FCorners=void 0,this.FInnerStroke=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetDisabledFill=function(t){this.FDisabledFill.Assign(t)},this.SetDisabledStroke=function(t){this.FDisabledStroke.Assign(t)},this.SetDownFill=function(t){this.FDownFill.Assign(t)},this.SetDownStroke=function(t){this.FDownStroke.Assign(t)},this.SetHoverFill=function(t){this.FHoverFill.Assign(t)},this.SetHoverStroke=function(t){this.FHoverStroke.Assign(t)},this.SetNormalFill=function(t){this.FNormalFill.Assign(t)},this.SetNormalStroke=function(t){this.FNormalStroke.Assign(t)},this.SetCorners=function(t){rtl.neSet(this.FCorners,t)&&(this.FCorners=rtl.refSet(t),this.Changed())},this.SetRounding=function(t){this.FRounding!==t&&(this.FRounding=t,this.Changed())},this.SetInnerStroke=function(t){this.FInnerStroke.Assign(t)},this.SetShowInnerStroke=function(t){this.FShowInnerStroke!==t&&(this.FShowInnerStroke=t,this.Changed())},this.SetTransparent=function(t){this.FTransparent!==t&&(this.FTransparent=t,this.Changed())},this.IsRoundingStored=function(){return 3!==this.FRounding},this.SetFlatStyle=function(e){var i=null,s=0;if(this.FFlatStyle!==e){if(this.FFlatStyle=e,null!=this.FOwner)for(var n=0,o=this.FOwner.GetControlsCount()-1;n<=o;n++)s=n,i=this.FOwner.GetControls(s),t.TTMSFNCDefaultToolBarButton.isPrototypeOf(i)&&rtl.as(i,t.TTMSFNCDefaultToolBarButton).FAppearance.SetFlatStyle(this.FFlatStyle),t.TTMSFNCCustomToolBar.isPrototypeOf(i)&&rtl.as(i,t.TTMSFNCCustomToolBar).FAppearance.SetFlatStyle(this.FFlatStyle);this.Changed()}},this.FillChanged=function(t){this.Changed()},this.StrokeChanged=function(t){this.Changed()},this.Changed=function(){null!=this.FOwner?this.FOwner.AppearanceChanged():null!=this.FOnChange&&this.FOnChange(this)},this.Assign=function(e){t.TTMSFNCToolBarCustomButtonAppearance.isPrototypeOf(e)?(this.FNormalFill.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FNormalFill),this.FDisabledFill.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FDisabledFill),this.FHoverFill.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FHoverFill),this.FDownFill.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FDownFill),this.FNormalStroke.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FNormalStroke),this.FDisabledStroke.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FDisabledStroke),this.FHoverStroke.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FHoverStroke),this.FDownStroke.Assign(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FDownStroke),this.FRounding=rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FRounding,this.FCorners=rtl.refSet(rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FCorners),this.FShowInnerStroke=rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FShowInnerStroke,this.FTransparent=rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FTransparent,this.FFlatStyle=rtl.as(e,t.TTMSFNCToolBarCustomButtonAppearance).FFlatStyle):pas.Classes.TPersistent.Assign.apply(this,arguments)},this.Create$1=function(t){return this.FOwner=t,this.FCorners=rtl.createSet(0,1,2,3),this.FRounding=3,this.FTransparent=!1,this.FShowInnerStroke=!0,this.FFlatStyle=!1,this.FNormalFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[2,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(249,251,252),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(230,235,235),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(220,220,236),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(220,225,236)]),this.FHoverFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[2,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,231,232),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(210,215,215),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,200,216),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,205,216)]),this.FDownFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[2,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(219,221,222),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,205,205),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(190,190,206),pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(190,195,206)]),this.FDisabledFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,13882323,8421504,-1,-1]),this.FNormalStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FInnerStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,16777215]),this.FHoverStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FDownStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FDisabledStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FNormalFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FHoverFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FDownFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FDisabledFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FInnerStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FNormalStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FHoverStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FDownStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FDisabledStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this},this.Destroy=function(){rtl.free(this,"FNormalFill"),rtl.free(this,"FHoverFill"),rtl.free(this,"FDownFill"),rtl.free(this,"FDisabledFill"),rtl.free(this,"FInnerStroke"),rtl.free(this,"FNormalStroke"),rtl.free(this,"FHoverStroke"),rtl.free(this,"FDownStroke"),rtl.free(this,"FDisabledStroke"),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[["AOwner",t.$rtti.TTMSFNCDefaultToolBarButton]])})),rtl.createClass(this,"TTMSFNCToolBarButtonAppearance",this.TTMSFNCToolBarCustomButtonAppearance,(function(){var t=this.$rtti;t.addProperty("Transparent",2,rtl.boolean,"FTransparent","SetTransparent",{Default:!1}),t.addProperty("ShowInnerStroke",2,rtl.boolean,"FShowInnerStroke","SetShowInnerStroke",{Default:!0}),t.addProperty("Rounding",14,rtl.double,"FRounding","SetRounding",{stored:"IsRoundingStored"}),t.addProperty("Corners",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsCorners,"FCorners","SetCorners",{Default:rtl.createSet(0,1,2,3)}),t.addProperty("InnerStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FInnerStroke","SetInnerStroke"),t.addProperty("NormalFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FNormalFill","SetNormalFill"),t.addProperty("NormalStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FNormalStroke","SetNormalStroke"),t.addProperty("HoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FHoverFill","SetHoverFill"),t.addProperty("HoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FHoverStroke","SetHoverStroke"),t.addProperty("DownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDownFill","SetDownFill"),t.addProperty("DownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDownStroke","SetDownStroke"),t.addProperty("DisabledFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDisabledFill","SetDisabledFill"),t.addProperty("DisabledStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDisabledStroke","SetDisabledStroke"),t.addProperty("FlatStyle",2,rtl.boolean,"FFlatStyle","SetFlatStyle",{Default:!1})})),rtl.createClass(this,"TTMSFNCToolBarCompactAppearance",this.TTMSFNCToolBarCustomButtonAppearance,(function(){var t=this.$rtti;t.addProperty("NormalFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FNormalFill","SetNormalFill"),t.addProperty("NormalStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FNormalStroke","SetNormalStroke"),t.addProperty("HoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FHoverFill","SetHoverFill"),t.addProperty("HoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FHoverStroke","SetHoverStroke"),t.addProperty("DownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDownFill","SetDownFill"),t.addProperty("DownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDownStroke","SetDownStroke"),t.addProperty("DisabledFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDisabledFill","SetDisabledFill"),t.addProperty("DisabledStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDisabledStroke","SetDisabledStroke"),t.addProperty("FlatStyle",2,rtl.boolean,"FFlatStyle","SetFlatStyle",{Default:!1})})),rtl.createClass(this,"TTMSFNCToolBarQuickMenuButtonAppearance",this.TTMSFNCToolBarCustomButtonAppearance,(function(){var t=this.$rtti;t.addProperty("NormalFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FNormalFill","SetNormalFill"),t.addProperty("NormalStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FNormalStroke","SetNormalStroke"),t.addProperty("HoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FHoverFill","SetHoverFill"),t.addProperty("HoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FHoverStroke","SetHoverStroke"),t.addProperty("DownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDownFill","SetDownFill"),t.addProperty("DownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDownStroke","SetDownStroke"),t.addProperty("DisabledFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FDisabledFill","SetDisabledFill"),t.addProperty("DisabledStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FDisabledStroke","SetDisabledStroke"),t.addProperty("FlatStyle",2,rtl.boolean,"FFlatStyle","SetFlatStyle",{Default:!1})})),this.TTMSFNCToolBarElementState={0:"esNormal",esNormal:0,1:"esLarge",esLarge:1},this.$rtti.$Enum("TTMSFNCToolBarElementState",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCToolBarElementState}),rtl.createClass(this,"TTMSFNCCustomToolBarElement",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FBlockUpdate=!1,this.FOnUpdateToolBar=null,this.FOnUpdateToolBarControl=null,this.FCanCopy=!1,this.FState=0,this.FLastElement=!1,this.FControlIndex=0},this.$final=function(){this.FOnUpdateToolBar=void 0,this.FOnUpdateToolBarControl=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.SetState=function(t){this.FState!==t&&(this.FState=t,this.UpdateState())},this.SetLastElement=function(t){this.FLastElement!==t&&(this.FLastElement=t,this.UpdateToolBar())},this.UpdateState=function(){},this.UpdateToolBar=function(){null==this.FOnUpdateToolBar||this.FBlockUpdate||this.FOnUpdateToolBar(this)},this.VisibleChanging=function(){pas["WEBLib.Controls"].TControl.VisibleChanging.call(this),this.UpdateToolBar()},this.UpdateControlAfterResize=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.UpdateControlAfterResize.call(this),this.UpdateToolBar()},this.Assign=function(e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments),t.TTMSFNCCustomToolBarElement.isPrototypeOf(e)&&(this.FState=rtl.as(e,t.TTMSFNCCustomToolBarElement).FState,this.FLastElement=rtl.as(e,t.TTMSFNCCustomToolBarElement).FLastElement,this.FCanCopy=rtl.as(e,t.TTMSFNCCustomToolBarElement).FCanCopy)},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.DisableBackground(),this.FLastElement=!1,this.FCanCopy=!0,this.FState=0,this},this.Destroy=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),this.TTMSFNCToolBarButtonBitmapPosition={0:"bbpLeft",bbpLeft:0,1:"bbpTop",bbpTop:1},this.$rtti.$Enum("TTMSFNCToolBarButtonBitmapPosition",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCToolBarButtonBitmapPosition}),this.TTMSFNCToolBarButtonLayout={0:"bblNone",bblNone:0,1:"bblBitmap",bblBitmap:1,2:"bblLabel",bblLabel:2,3:"bblLarge",bblLarge:3},this.$rtti.$Enum("TTMSFNCToolBarButtonLayout",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTMSFNCToolBarButtonLayout}),rtl.createClass(this,"TTMSFNCDefaultToolBarButton",this.TTMSFNCCustomToolBarElement,(function(){this.$init=function(){t.TTMSFNCCustomToolBarElement.$init.call(this),this.FOldHeight=0,this.FBitmapVisible=!1,this.FText="",this.FPopup=null,this.FPopupPlacement=0,this.FDropDownHeight=0,this.FDropDownWidth=0,this.FDown=!1,this.FHover=!1,this.FPrevHover=!1,this.FAppearance=null,this.FBitmapContainer=null,this.FBitmaps=null,this.FApplyName=!1,this.FDropDownControl=null,this.FFont$1=null,this.FOnBeforeDropDown=null,this.FCloseOnSelection=!1,this.FDownState=!1,this.FTextVisible=!1,this.FOnCloseDropDown=null,this.FOnDropDown=null,this.FVerticalTextAlign=0,this.FHorizontalTextAlign=0,this.FWordWrapping=!1,this.FTrimming=0,this.FBitmapSize=0,this.FStretchText=!1,this.FDisabledBitmaps=null,this.FHoverBitmaps=null,this.FShowFocus$1=!1,this.FDropDownAutoWidth=!1,this.FHoverFontColor=0,this.FDownFontColor=0,this.FDisabledFontColor=0,this.FStretchBitmapIfNoText=!1,this.FBitmapPosition=0,this.FMaximumLayout=0,this.FMinimumLayout=0,this.FLayout=0,this.FCompactLayout=0,this.FLargeLayoutBitmapSize=0,this.FLargeLayoutBitmaps=null,this.FLargeLayoutHoverBitmaps=null,this.FLargeLayoutDisabledBitmaps=null,this.FAutoBitmapSize=!1,this.FLargeLayoutAutoBitmapSize=!1},this.$final=function(){this.FPopup=void 0,this.FAppearance=void 0,this.FBitmapContainer=void 0,this.FBitmaps=void 0,this.FDropDownControl=void 0,this.FFont$1=void 0,this.FOnBeforeDropDown=void 0,this.FOnCloseDropDown=void 0,this.FOnDropDown=void 0,this.FDisabledBitmaps=void 0,this.FHoverBitmaps=void 0,this.FLargeLayoutBitmaps=void 0,this.FLargeLayoutHoverBitmaps=void 0,this.FLargeLayoutDisabledBitmaps=void 0,t.TTMSFNCCustomToolBarElement.$final.call(this)},this.SetAppearance=function(t){this.FAppearance.Assign(t)},this.SetBitmapContainer=function(t){this.FBitmapContainer=t,this.UpdateLayout(),this.Invalidate()},this.SetBitmaps=function(t){this.FBitmaps.Assign(t)},this.SetText=function(t){this.FText!==t&&(this.FText=t,this.FTextVisible=""!==t,this.UpdateLayout(),this.Invalidate())},this.SetDropDownHeight=function(t){this.FDropDownHeight=t,null==this.FPopup||this.FDropDownAutoWidth||this.FPopup.SetDropDownHeight(this.FDropDownHeight)},this.SetDropDownWidth=function(t){this.FDropDownWidth=t,null!=this.FPopup&&this.FPopup.SetDropDownWidth(this.FDropDownWidth)},this.SetBitmapVisible=function(t){this.FBitmapVisible=t,this.UpdateLayout(),this.Invalidate()},this.SetTextVisible=function(t){this.FTextVisible!==t&&(this.FTextVisible=t,this.UpdateLayout(),this.Invalidate())},this.SetFont$1=function(t){this.FFont$1.Assign(t)},this.SetDropDownControl=function(t){this.FDropDownControl=t,null!=this.FDropDownControl&&(4 in this.FComponentState?4 in this.FComponentState&&(this.SetDropDownHeight(this.FDropDownControl.GetHeight()),this.SetDropDownWidth(this.FDropDownControl.GetWidth())):null!=this.FPopup&&(this.FPopup.SetContentControl(this.FDropDownControl),this.FPopup.FFocusedControl=this.FDropDownControl))},this.IsDropDownHeightStored=function(){return 135!==this.FDropDownHeight},this.IsDropDownWidthStored=function(){return 135!==this.FDropDownWidth},this.SetHorizontalTextAlign=function(t){this.FHorizontalTextAlign!==t&&(this.FHorizontalTextAlign=t,this.Invalidate())},this.SetVerticalTextAlign=function(t){this.FVerticalTextAlign!==t&&(this.FVerticalTextAlign=t,this.Invalidate())},this.SetWordWrapping=function(t){this.FWordWrapping!==t&&(this.FWordWrapping=t,this.Invalidate())},this.SetTrimming=function(t){this.FTrimming!==t&&(this.FTrimming=t,this.Invalidate())},this.IsBitmapSizeStored=function(){return 24!==this.FBitmapSize},this.SetBitmapSize=function(t){this.FBitmapSize!==t&&(this.FBitmapSize=t,this.UpdateLayout(),this.Invalidate())},this.SetStretchText=function(t){this.FStretchText!==t&&(this.FStretchText=t,this.UpdateLayout(),this.Invalidate())},this.SetDisabledBitmaps=function(t){this.FDisabledBitmaps.Assign(t)},this.SetHoverBitmaps=function(t){this.FHoverBitmaps.Assign(t)},this.GetBitmapContainer=function(){return this.FBitmapContainer},this.SetShowFocus$1=function(t){this.FShowFocus$1!==t&&(this.FShowFocus$1=t,this.Invalidate())},this.SetDropDownAutoWidth=function(t){this.FDropDownAutoWidth!==t&&(this.FDropDownAutoWidth=t,null!=this.FPopup&&(this.FDropDownAutoWidth?this.FPopup.SetDropDownWidth(this.GetWidth()):this.FPopup.SetDropDownWidth(this.FDropDownWidth)))},this.SetStretchBitmapIfNoText=function(t){this.FStretchBitmapIfNoText!==t&&(this.FStretchBitmapIfNoText=t,this.UpdateLayout(),this.Invalidate())},this.SetBitmapPosition=function(t){this.FBitmapPosition!==t&&(this.FBitmapPosition=t,this.Invalidate())},this.SetMaximumLayout=function(t){this.FMaximumLayout!==t&&(this.FMaximumLayout=t,this.UpdateToolBar())},this.SetMinimumLayout=function(t){this.FMinimumLayout!==t&&(this.FMinimumLayout=t,this.UpdateToolBar())},this.SetLayout=function(t){this.FLayout!==t&&(this.FLayout=t,this.UpdateLayout())},this.SetCompactLayout=function(t){this.FCompactLayout!==t&&(this.FCompactLayout=t)},this.IsLargeLayoutBitmapSizeStored=function(){return 32!==this.FLargeLayoutBitmapSize},this.SetLargeLayoutBitmaps=function(t){this.FLargeLayoutBitmaps.Assign(t)},this.SetLargeLayoutBitmapSize=function(t){this.FLargeLayoutBitmapSize!==t&&(this.FLargeLayoutBitmapSize=t,this.UpdateLayout(),this.Invalidate())},this.SetLargeLayoutDisabledBitmaps=function(t){this.FLargeLayoutDisabledBitmaps.Assign(t)},this.SetLargeLayoutHoverBitmaps=function(t){this.FLargeLayoutHoverBitmaps.Assign(t)},this.SetAutoBitmapSize=function(t){this.FAutoBitmapSize!==t&&(this.FAutoBitmapSize=t,this.UpdateLayout(),this.Invalidate())},this.SetLargeLayoutAutoBitmapSize=function(t){this.FLargeLayoutAutoBitmapSize!==t&&(this.FLargeLayoutAutoBitmapSize=t,this.UpdateLayout(),this.Invalidate())},this.CanDrawDesignTime=function(){return!1,!1},this.GetText=function(){return this.FText},this.GetTextSize=function(){var t=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),e=null,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(t.cx=0,t.cy=0,this.FTextVisible&&""!==this.GetText()){e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[1,1,this.FNativeCanvas,!0]),this.FNativeCanvas||e.BeginScene(),e.FBitmapContainer=this.GetBitmapContainer(),e.FOptimizedHTMLDrawing=this.FOptimizedHTMLDrawing;try{e.FFont.Assign(this.FFont$1),i.$assign(this.GetLocalRect()),pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,this.ScalePaintValue(-2),this.ScalePaintValue(-2)),t.$assign(e.CalculateTextSize(this.GetText(),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FWordWrapping,!0))}finally{this.FNativeCanvas||e.EndScene(),e=rtl.freeLoc(e)}}return t},this.UpdateControlAfterResize=function(){t.TTMSFNCCustomToolBarElement.UpdateControlAfterResize.call(this),3===this.FLayout&&(this.FOldHeight=this.GetHeight())},this.ApplyStyle=function(){var t=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ApplyStyle.call(this),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FNormalFill.SetColor(t),this.FAppearance.FNormalFill.SetKind(1),this.FAppearance.FDisabledFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,11119017,20)),this.FAppearance.FDisabledFill.SetKind(1),this.FAppearance.FInnerStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FAppearance.FNormalFill.FColor,this.FAppearance.FNormalStroke.FColor,75)),this.FAppearance.FInnerStroke.SetKind(1)),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleTextFontColor({get:function(){return t},set:function(e){t=e}})&&this.FFont$1.SetColor(t),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundStrokeColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FNormalStroke.SetColor(t),this.FAppearance.FDownStroke.SetColor(t),this.FAppearance.FDisabledStroke.SetColor(t),this.FAppearance.FNormalStroke.SetColor(t),this.FAppearance.FDownStroke.SetColor(t),this.FAppearance.FDisabledStroke.SetColor(t),this.FAppearance.FHoverStroke.SetColor(t)),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleSelectionFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FHoverFill.SetColor(t),this.FAppearance.FHoverFill.SetKind(1),this.FAppearance.FDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,this.FFill.FColor,20)),this.FAppearance.FDownFill.SetKind(1))},this.ResetToDefaultStyle=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ResetToDefaultStyle.call(this),this.FFont$1.SetColor(0),this.FAppearance.FNormalFill.SetColor(16777215),this.FAppearance.FHoverFill.SetColor(16777215),this.FAppearance.FDownFill.SetColor(16777215),this.FAppearance.FDisabledFill.SetColor(13882323),this.FAppearance.FNormalStroke.SetColor(8421504),this.FAppearance.FInnerStroke.SetColor(16777215),this.FAppearance.FHoverStroke.SetColor(8421504),this.FAppearance.FDownStroke.SetColor(8421504),this.FAppearance.FDisabledStroke.SetColor(8421504),this.FAppearance.FNormalFill.SetKind(2),this.FAppearance.FHoverFill.SetKind(2),this.FAppearance.FDownFill.SetKind(2),this.FAppearance.FDisabledFill.SetKind(1),this.FAppearance.FNormalStroke.SetKind(1),this.FAppearance.FInnerStroke.SetKind(1),this.FAppearance.FHoverStroke.SetKind(1),this.FAppearance.FDownStroke.SetKind(1),this.FAppearance.FDisabledStroke.SetKind(1),this.FAppearance.FNormalFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(249,251,252)),this.FAppearance.FNormalFill.SetColorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(230,235,235)),this.FAppearance.FNormalFill.SetColorMirror(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(220,220,236)),this.FAppearance.FNormalFill.SetColorMirrorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(220,225,236)),this.FAppearance.FHoverFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,231,232)),this.FAppearance.FHoverFill.SetColorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(210,215,215)),this.FAppearance.FHoverFill.SetColorMirror(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,200,216)),this.FAppearance.FHoverFill.SetColorMirrorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,205,216)),this.FAppearance.FDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(219,221,222)),this.FAppearance.FDownFill.SetColorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(200,205,205)),this.FAppearance.FDownFill.SetColorMirror(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(190,190,206)),this.FAppearance.FDownFill.SetColorMirrorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(190,195,206))},this.SetAdaptToStyle=function(t){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.SetAdaptToStyle.apply(this,arguments),null!=this.FPopup&&this.FPopup.SetAdaptToStyle(this.GetAdaptToStyle())},this.BitmapsChanged=function(t){var e=null;e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FBitmaps,0,this.GetBitmapContainer()),this.SetBitmapVisible(null!=e&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)),this.FBitmapVisible||3!==this.FLayout||(e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FLargeLayoutBitmaps,0,this.GetBitmapContainer()),this.SetBitmapVisible(null!=e&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e))),this.Invalidate()},this.DoFontChanged=function(t){this.Invalidate()},this.UpdateLayout=function(){var t=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),e=0;if(0!==this.FLayout&&!this.FBlockUpdate){this.FBlockUpdate=!0;var i=this.FLayout;1===i?(this.SetTextVisible(!1),this.SetBitmapPosition(0),this.SetStretchText(!1),this.SetHeight(Math.round(this.GetBitmapSize()+6)),this.SetWidth(Math.round(this.GetBitmapSize()+6))):2===i?(this.SetTextVisible(!0),this.SetBitmapPosition(0),this.SetStretchText(!1),t.$assign(this.GetTextSize()),this.FBitmapVisible?(this.SetHeight(Math.round(Math.max(this.GetBitmapSize(),t.cy)+6)),this.SetWidth(Math.round(this.GetBitmapSize()+t.cx+12))):this.FTextVisible&&""!==this.GetText()?(this.SetHeight(Math.round(t.cy+6)),this.SetWidth(Math.round(t.cx+6))):(this.SetWidth(75),this.SetHeight(24))):3===i&&(this.SetTextVisible(!0),this.SetBitmapPosition(1),this.SetStretchText(!this.FBitmapVisible),t.$assign(this.GetTextSize()),e=30,this.FBitmapVisible&&(e=Math.max(e,this.GetLargeLayoutBitmapSize()+6)),this.FTextVisible&&""!==this.GetText()&&(e=Math.max(e,t.cx+12)),this.SetWidth(Math.round(e)),-1!==this.FOldHeight&&this.SetHeight(Math.round(this.FOldHeight))),this.FBlockUpdate=!1,this.UpdateToolBar()}},this.DoClosePopup=function(t){null!=this.FOnCloseDropDown&&this.FOnCloseDropDown(this)},this.DoPopup=function(t){this.InitializePopup()},this.InitializePopup=function(){},this.UpdateState=function(){var e=0;t.TTMSFNCCustomToolBarElement.UpdateState.call(this);var i=this.FState;e=0===i?.8:1===i?1.25:1,0 in this.FComponentState||(this.SetDropDownWidth(this.FDropDownWidth*e),this.SetDropDownHeight(this.FDropDownHeight*e),this.FFont$1.SetSize(Math.round(this.FFont$1.FSize*e)),this.SetBounds(this.GetLeft(),this.GetTop(),Math.round(this.GetWidth()*e),Math.round(this.GetHeight()*e)))},this.AppearanceChanged=function(){this.Invalidate()},this.Notification=function(t,e){pas["WEBLib.Menus"].TWebCustomControl.Notification.apply(this,arguments),1===e&&t===this.FBitmapContainer&&(this.FBitmapContainer=null),1===e&&t===this.FDropDownControl&&(this.FDropDownControl=null)},this.SetName=function(t){var e;e=!(0 in this.FComponentState||this.FName!==this.GetText()||null!=this.FOwner&&pas.Classes.TComponent.isPrototypeOf(this.FOwner)&&0 in this.FOwner.FComponentState),pas["WEBLib.Controls"].TCustomControl.SetName.call(this,t),e&&this.FApplyName&&this.CanChangeText()&&this.SetText(pas.SysUtils.StringReplace(this.GetText(),"TMSFNCToolBar","",rtl.createSet(0)))},this.HandleMouseDown=function(t,e,i,s){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseDown.apply(this,arguments),this.CanFocus()&&this.SetFocus(),this.FDown=!0,this.Invalidate()},this.HandleMouseMove=function(t,e,i){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseMove.apply(this,arguments),this.FHover=!0,this.FPrevHover!==this.FHover&&this.Invalidate(),this.FPrevHover=this.FHover},this.HandleMouseUp=function(t,e,i,s){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseUp.apply(this,arguments),this.FDown=!1,this.Invalidate()},this.HandleKeyUp=function(t,e){if(pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyUp.apply(this,arguments),!rtl.neSet(e,{})){var i=t.get();13!==i&&115!==i||this.CanDropDown()&&this.DropDown()}},this.HandleKeyDown=function(t,e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyDown.apply(this,arguments);var i=t.get();36===i?this.SelectFirstValue():35===i?this.SelectLastValue():38===i||37===i?this.SelectPreviousValue():40===i||39===i?this.SelectNextValue():32===i&&this.Click()},this.HandleKeyPress=function(t){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyPress.apply(this,arguments),t.get()>=" "&&!(t.get().charCodeAt()in rtl.createSet(113,13,32,27,36,35,38,37,40,39))&&this.SelectValueWithCharacter(t.get())},this.HandleMouseEnter=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseEnter.call(this)},this.HandleMouseLeave=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseLeave.call(this),this.FDown=!1,this.FHover=!1,this.FPrevHover=!1,this.Invalidate()},this.SelectFirstValue=function(){},this.SelectValueWithCharacter=function(t){},this.SelectLastValue=function(){},this.SelectNextValue=function(){},this.SelectPreviousValue=function(){},this.DrawText=function(t){var e,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(this.FTextVisible&&""!==this.GetText()){i.$assign(this.GetTextRect()),e=t.SaveState(!1);try{t.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),t.FFont.Assign(this.FFont$1),this.FEnabled?(this.FDown||this.FDownState)&&-1!==this.FDownFontColor?t.FFont.SetColor(this.FDownFontColor):this.FHover&&-1!==this.FHoverFontColor&&t.FFont.SetColor(this.FHoverFontColor):-1!==this.FDisabledFontColor&&t.FFont.SetColor(this.FDisabledFontColor),t.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.GetText(),this.FWordWrapping,this.FHorizontalTextAlign,this.FVerticalTextAlign,this.FTrimming,0,-1,-1,!0,!1,-1,-1)}finally{t.RestoreState(e,!1)}}},this.DrawBitmap=function(e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=null,o=null,a=null,r=0,l=0;if(this.FBitmapVisible)if(s.$assign(this.GetBitmapRect$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))),t.TTMSFNCToolBarDropDownButton.isPrototypeOf(this)&&this.GetAdaptToStyle()){(n=pas["WEBLib.Graphics"].TBitmap.$create("Create$3")).SetSize(this.ScalePaintValue(7),this.ScalePaintValue(7)),a=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[n.GetCanvas(),!1]);try{a.BeginScene(),a.FStroke.SetKind(1),a.FStroke.SetColor(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultSelectionFillColor);for(var h=this.ScalePaintValue(1),p=this.ScalePaintValue(5);h<=p&&(l=h,r=Math.max(0,l-this.ScalePaintValue(2)),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(r,l)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.GetWidth()-1-r,l)),2,2),!(r>=n.GetWidth()-1-r));h++);}finally{a.EndScene(),a=rtl.freeLoc(a)}try{o=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{o.Assign(n),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),o,!0,!1,!0,!1)}finally{o=rtl.freeLoc(o)}}finally{n=rtl.freeLoc(n)}}else{e.FBitmapContainer=this.GetBitmapContainer(),3===this.FLayout?this.FEnabled?this.FHover&&this.FLargeLayoutHoverBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FLargeLayoutHoverBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FHover&&this.FHoverBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FHoverBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FLargeLayoutBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FLargeLayoutBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FLargeLayoutDisabledBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FLargeLayoutDisabledBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FDisabledBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FDisabledBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FEnabled?this.FHover&&this.FHoverBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FHoverBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):this.FDisabledBitmaps.GetCount()>0?e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FDisabledBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1):e.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FBitmaps,this.FResourceScaleFactor,!0,!1,!0,!1)}},this.DrawButton=function(t){},this.CanDropDown=function(){return!1,!1},this.CanChangeText=function(){return!0,!0},this.GetTextRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(s.$assign(this.GetLocalRect()),e.$assign(this.GetBitmapRect()),i.$assign(this.GetDropDownRect()),this.FStretchText)t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,s.Top+3,i.Left-3,s.Bottom-3));else{var n=this.FBitmapPosition;0===n?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Right+3,s.Top+3,i.Left-3,s.Bottom-3)):1===n&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,e.Bottom+3,i.Left-3,s.Bottom-3))}return t},this.GetDropDownRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return e.$assign(this.GetLocalRect()),t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Right,e.Top,e.Right,e.Bottom)),t},this.GetBitmapRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(this.GetBitmapRect$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetLocalRect()))),t},this.GetBitmapRect$1=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0;if(s=this.GetBitmapSize(),3===this.FLayout&&(s=this.GetLargeLayoutBitmapSize()),i.$assign(t),e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,i.Top,i.Left,i.Bottom)),this.FBitmapVisible){var n=this.FBitmapPosition;0===n?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,e.Left+3+s,e.Bottom-3)):1===n&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,e.Right-3,e.Top+3+s))}return e},this.GetBitmapSize=function(){var t=0,e=null;return t=this.FBitmapSize,this.FAutoBitmapSize&&(null==(e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FBitmaps,0,this.GetBitmapContainer()))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)||(t=Math.max(e.GetHeight(),e.GetWidth()))),t},this.GetLargeLayoutBitmapSize=function(){var t=0,e=null;return t=this.FLargeLayoutBitmapSize,this.FLargeLayoutAutoBitmapSize&&(null==(e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FLargeLayoutBitmaps,0,this.GetBitmapContainer()))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)||(t=Math.max(e.GetHeight(),e.GetWidth()))),t},this.Assign=function(e){t.TTMSFNCCustomToolBarElement.Assign.apply(this,arguments),t.TTMSFNCDefaultToolBarButton.isPrototypeOf(e)&&(this.FLayout=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLayout,this.FCompactLayout=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FCompactLayout,this.FMinimumLayout=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FMinimumLayout,this.FMaximumLayout=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FMaximumLayout,this.FBitmapPosition=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FBitmapPosition,this.FBitmapSize=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FBitmapSize,this.FLargeLayoutBitmapSize=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLargeLayoutBitmapSize,this.FAutoBitmapSize=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FAutoBitmapSize,this.FLargeLayoutAutoBitmapSize=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLargeLayoutAutoBitmapSize,this.FStretchBitmapIfNoText=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FStretchBitmapIfNoText,this.FAppearance.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FAppearance),this.FBitmapContainer=rtl.as(e,t.TTMSFNCDefaultToolBarButton).GetBitmapContainer(),this.FBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FBitmaps),this.FDisabledBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDisabledBitmaps),this.FLargeLayoutHoverBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLargeLayoutHoverBitmaps),this.FLargeLayoutBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLargeLayoutBitmaps),this.FLargeLayoutDisabledBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FLargeLayoutDisabledBitmaps),this.FHoverBitmaps.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FHoverBitmaps),this.FBitmapVisible=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FBitmapVisible,this.FText=rtl.as(e,t.TTMSFNCDefaultToolBarButton).GetText(),this.FTextVisible=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FTextVisible,this.FDropDownHeight=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDropDownHeight,this.FDropDownWidth=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDropDownWidth,this.FDropDownAutoWidth=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDropDownAutoWidth,this.FWordWrapping=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FWordWrapping,this.FHorizontalTextAlign=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FHorizontalTextAlign,this.FVerticalTextAlign=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FVerticalTextAlign,this.FTrimming=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FTrimming,this.FFont$1.Assign(rtl.as(e,t.TTMSFNCDefaultToolBarButton).FFont$1),this.FHoverFontColor=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FHoverFontColor,this.FDownFontColor=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDownFontColor,this.FDisabledFontColor=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FDisabledFontColor,this.FStretchText=rtl.as(e,t.TTMSFNCDefaultToolBarButton).FStretchText,this.Invalidate())},this.Create$1=function(e){return t.TTMSFNCCustomToolBarElement.Create$1.apply(this,arguments),this.FOldHeight=-1,this.FLayout=0,this.FCompactLayout=0,this.FMinimumLayout=1,this.FMaximumLayout=3,this.FFont$1=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont$1.FOnChanged=rtl.createCallback(this,"DoFontChanged"),this.FHoverFontColor=-1,this.FDownFontColor=-1,this.FDisabledFontColor=-1,this.FDownState=!1,this.FApplyName=!0,this.FCloseOnSelection=!0,this.FBitmapSize=24,this.FLargeLayoutBitmapSize=32,this.FAutoBitmapSize=!1,this.FLargeLayoutAutoBitmapSize=!1,this.FStretchBitmapIfNoText=!0,this.FStretchText=!1,this.FDropDownWidth=135,this.FDropDownHeight=135,this.FDropDownAutoWidth=!1,this.FPopup=pas["WEBLib.TMSFNCPopup"].TTMSFNCPopup.$create("Create$1",[this]),this.FPopup.SetDragWithParent(!0),this.FPopup.SetDropDownWidth(this.FDropDownWidth),this.FPopup.SetDropDownHeight(this.FDropDownHeight),this.FPopup.FOnPopup=rtl.createCallback(this,"DoPopup"),this.FPopup.FOnClosePopup=rtl.createCallback(this,"DoClosePopup"),this.FPopupPlacement=0,this.FBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FDisabledBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FDisabledBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FHoverBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FHoverBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FLargeLayoutBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FLargeLayoutBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FLargeLayoutDisabledBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FLargeLayoutDisabledBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FLargeLayoutHoverBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FLargeLayoutHoverBitmaps.FOnChange=rtl.createCallback(this,"BitmapsChanged"),this.FAppearance=t.TTMSFNCToolBarButtonAppearance.$create("Create$1",[this]),this.FTextVisible=!0,this.FBitmapVisible=!1,this.FWordWrapping=!1,this.FHorizontalTextAlign=0,this.FVerticalTextAlign=0,this.FTrimming=1,this.FBitmapPosition=0,this.SetWidth(100),this.SetHeight(24),this},this.Destroy=function(){rtl.free(this,"FFont$1"),rtl.free(this,"FPopup"),rtl.free(this,"FBitmaps"),rtl.free(this,"FDisabledBitmaps"),rtl.free(this,"FHoverBitmaps"),rtl.free(this,"FLargeLayoutBitmaps"),rtl.free(this,"FLargeLayoutDisabledBitmaps"),rtl.free(this,"FLargeLayoutHoverBitmaps"),rtl.free(this,"FAppearance"),t.TTMSFNCCustomToolBarElement.Destroy.call(this)},this.Draw=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),this.FAppearance.FTransparent||(this.FEnabled?this.FDown||this.FDownState?(t.FFill.Assign(this.FAppearance.FDownFill),t.FStroke.Assign(this.FAppearance.FDownStroke)):this.FHover?(t.FFill.Assign(this.FAppearance.FHoverFill),t.FStroke.Assign(this.FAppearance.FHoverStroke)):(t.FFill.Assign(this.FAppearance.FNormalFill),t.FStroke.Assign(this.FAppearance.FNormalStroke)):(t.FFill.Assign(this.FAppearance.FDisabledFill),t.FStroke.Assign(this.FAppearance.FDisabledStroke)),i.$assign(this.GetLocalRect()),this.FAppearance.FFlatStyle?(t.FFill.SetKind(1),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),2)):t.DrawRoundRectangle$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FAppearance.FRounding,rtl.refSet(this.FAppearance.FCorners),2),this.FAppearance.FShowInnerStroke&&!this.FAppearance.FFlatStyle&&(pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,-1,-1),t.FStroke.Assign(this.FAppearance.FInnerStroke),t.FFill.SetKind(0),t.DrawRoundRectangle$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FAppearance.FRounding,rtl.refSet(this.FAppearance.FCorners),2))),this.DrawBitmap(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e)),this.DrawText(t),this.DrawButton(t),this.FShowFocus$1&&this.IsFocused()&&(i.$assign(this.GetTextRect()),t.DrawFocusRectangle$3(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),0,2)),this.IsDesignTime()&&this.CanDrawDesignTime()&&t.DrawFocusRectangle$3(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),0,2)},this.DropDown=function(){null!=this.FPopup&&(this.FPopup.SetPlacementControl(this),this.FPopup.FIsOpen?this.FPopup.SetIsOpen(!1):(null!=this.FOnBeforeDropDown&&this.FOnBeforeDropDown(this),this.FDropDownAutoWidth&&this.FPopup.SetDropDownWidth(this.GetWidth()),this.FPopup.SetPlacement(this.FPopupPlacement),this.FPopup.SetIsOpen(!0),null!=this.FOnDropDown&&this.FOnDropDown(this)))},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),this.TTMSFNCToolBarButtonDropDownKind={0:"ddkNormal",ddkNormal:0,1:"ddkDropDown",ddkDropDown:1,2:"ddkDropDownButton",ddkDropDownButton:2},this.$rtti.$Enum("TTMSFNCToolBarButtonDropDownKind",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCToolBarButtonDropDownKind}),this.TTMSFNCToolBarButtonDropDownPosition={0:"ddpRight",ddpRight:0,1:"ddpBottom",ddpBottom:1},this.$rtti.$Enum("TTMSFNCToolBarButtonDropDownPosition",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCToolBarButtonDropDownPosition}),rtl.createClass(this,"TTMSFNCToolBarDropDownButton",this.TTMSFNCDefaultToolBarButton,(function(){this.$init=function(){t.TTMSFNCDefaultToolBarButton.$init.call(this),this.FDefaultStyle=!1},this.SetDefaultStyle=function(t){this.FDefaultStyle!==t&&(this.FDefaultStyle=t,this.Invalidate())},this.RegisterRuntimeClasses=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.RegisterRuntimeClasses.call(this),pas.Classes.RegisterClass(t.TTMSFNCToolBarDropDownButton)},this.DrawBitmap=function(e,i){var s=null,n=null,o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=null;if(this.FDefaultStyle)o.$assign(i),null!=this.FOwner&&t.TTMSFNCCustomToolBarButton.isPrototypeOf(this.FOwner)&&1===rtl.as(this.FOwner,t.TTMSFNCCustomToolBarButton).FDropDownPosition||pas["WEBLib.TMSFNCTypes"].InflateRectEx(o,this.ScalePaintValue(-2),this.ScalePaintValue(-2)),t.TTMSFNCDefaultToolBarButton.DrawBitmap.call(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o));else{(n=pas["WEBLib.Graphics"].TBitmap.$create("Create$3")).SetSize(7,7),a=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[n.GetCanvas(),!1]);try{a.BeginScene(),a.FStroke.SetKind(1),a.FStroke.SetColor(11119017),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(0,1)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(6,1)),2,2),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(0,2)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(6,2)),2,2),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(1,3)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(5,3)),2,2),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(2,4)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(4,4)),2,2),a.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(3,5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(3,5)),2,2)}finally{a.EndScene(),a=rtl.freeLoc(a)}try{o.$assign(i),s=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{s.Assign(n),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),s,!0,!1,!0,!1)}finally{s=rtl.freeLoc(s)}}finally{n=rtl.freeLoc(n)}}},this.GetBitmapRect$1=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return i.$assign(t),e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Right-3,i.Bottom-3)),e},this.Create$1=function(e){return t.TTMSFNCDefaultToolBarButton.Create$1.apply(this,arguments),this.FDefaultStyle=!0,this},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]]),e.addProperty("DefaultStyle",2,rtl.boolean,"FDefaultStyle","SetDefaultStyle",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFont,"FFont$1","SetFont$1"),e.addProperty("Text",3,rtl.string,"GetText","SetText"),e.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus$1","SetShowFocus$1",{Default:!1}),e.addProperty("TextVisible",2,rtl.boolean,"FTextVisible","SetTextVisible",{Default:!0}),e.addProperty("StretchText",2,rtl.boolean,"FStretchText","SetStretchText",{Default:!1}),e.addProperty("WordWrapping",2,rtl.boolean,"FWordWrapping","SetWordWrapping",{Default:!1}),e.addProperty("HorizontalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FHorizontalTextAlign","SetHorizontalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("VerticalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FVerticalTextAlign","SetVerticalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("Trimming",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextTrimming,"FTrimming","SetTrimming",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextTrimming.gttCharacter}),e.addProperty("Bitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FBitmaps","SetBitmaps"),e.addProperty("DisabledBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FDisabledBitmaps","SetDisabledBitmaps"),e.addProperty("HoverBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FHoverBitmaps","SetHoverBitmaps"),e.addProperty("BitmapVisible",2,rtl.boolean,"FBitmapVisible","SetBitmapVisible",{Default:!1}),e.addProperty("BitmapContainer",3,pas["WEBLib.TMSFNCBitmapContainer"].$rtti.TTMSFNCBitmapContainer,"GetBitmapContainer","SetBitmapContainer"),e.addProperty("State",2,t.$rtti.TTMSFNCToolBarElementState,"FState","SetState",{Default:t.TTMSFNCToolBarElementState.esNormal}),e.addProperty("LastElement",2,rtl.boolean,"FLastElement","SetLastElement",{Default:!1}),e.addProperty("Appearance",2,t.$rtti.TTMSFNCToolBarButtonAppearance,"FAppearance","SetAppearance")})),rtl.createClass(this,"TTMSFNCCustomToolBarButton",this.TTMSFNCDefaultToolBarButton,(function(){this.$init=function(){t.TTMSFNCDefaultToolBarButton.$init.call(this),this.FDropDownButton=null,this.FDropDownKind=0,this.FDropDownPosition=0,this.FHidden=!1,this.FAutoOptionsMenuText=""},this.$final=function(){this.FDropDownButton=void 0,t.TTMSFNCDefaultToolBarButton.$final.call(this)},this.SetDropDownKind=function(t){if(this.FDropDownKind!==t){if(this.FDropDownKind=t,null!=this.FDropDownButton){var e=this.FDropDownKind;0===e?(this.FDropDownButton.SetVisible(!1),this.FDropDownButton.SetParent(null),this.FDropDownButton.FAppearance.SetTransparent(!1)):1===e?(this.FDropDownButton.SetVisible(!1),this.FDropDownButton.SetParent(this),this.FDropDownButton.FAppearance.SetTransparent(!0)):2===e&&(this.FDropDownButton.SetVisible(!0),this.FDropDownButton.SetParent(this),this.FDropDownButton.FAppearance.SetTransparent(!1))}this.Invalidate()}},this.SetDropDownPosition=function(t){var e=0;if(this.FDropDownPosition!==t&&(e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(this,96),this.FDropDownPosition=t,null!=this.FDropDownButton)){var i=t;0===i?(this.FDropDownButton.SetAlign(4),this.FDropDownButton.SetWidth(Math.round(17*e)),this.FDropDownButton.FAppearance.SetCorners(rtl.createSet(1,3))):1===i&&(this.FDropDownButton.SetAlign(2),this.FDropDownButton.SetHeight(Math.round(10*e)),this.FDropDownButton.FAppearance.SetCorners(rtl.createSet(2,3)))}},this.SetAdaptToStyle=function(e){t.TTMSFNCDefaultToolBarButton.SetAdaptToStyle.apply(this,arguments),null!=this.FDropDownButton&&this.FDropDownButton.SetAdaptToStyle(this.GetAdaptToStyle())},this.AppearanceChanged=function(){t.TTMSFNCDefaultToolBarButton.AppearanceChanged.call(this),this.UpdateDropDownButton()},this.UpdateDropDownButton=function(){null!=this.FDropDownButton&&this.FDropDownButton.FAppearance.SetRounding(this.FAppearance.FRounding)},this.HandleMouseDown=function(e,i,s,n){t.TTMSFNCDefaultToolBarButton.HandleMouseDown.apply(this,arguments),1===this.FDropDownKind&&this.DropDown()},this.DropDownButtonClick=function(t){this.DropDown()},this.DrawButton=function(e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(t.TTMSFNCDefaultToolBarButton.DrawButton.apply(this,arguments),null!=this.FDropDownButton&&1===this.FDropDownKind){var s=this.FDropDownPosition;0===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.GetWidth()-this.FDropDownButton.GetWidth(),0,this.GetWidth(),this.GetHeight())):1===s&&i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,this.GetHeight()-this.FDropDownButton.GetHeight(),this.GetWidth(),this.GetHeight())),this.FDropDownButton.DrawBitmap(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))}},this.SetEnabled=function(t){var e=null;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.SetEnabled.apply(this,arguments),null!=(e=this.GetDropDownButtonControl())&&e.SetEnabled(t)},this.GetDropDownButtonClass=function(){return t.TTMSFNCToolBarDropDownButton},this.GetDropDownRect=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(e.$assign(t.TTMSFNCDefaultToolBarButton.GetDropDownRect.call(this)),null!=this.FDropDownButton&&0!==this.FDropDownKind)if(1===this.FDropDownKind){var i=this.FDropDownPosition;0===i?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.GetWidth()-this.FDropDownButton.GetWidth(),0,this.GetWidth(),this.GetHeight())):1===i&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,this.GetHeight()-this.FDropDownButton.GetHeight(),this.GetWidth(),this.GetHeight()))}else e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FDropDownButton.GetLeft(),this.FDropDownButton.GetTop(),this.FDropDownButton.GetLeft()+this.FDropDownButton.GetWidth(),this.FDropDownButton.GetTop()+this.FDropDownButton.GetHeight()));return e},this.GetTextRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(s.$assign(this.GetLocalRect()),e.$assign(this.GetBitmapRect$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s))),i.$assign(this.GetDropDownRect()),0!==this.FDropDownKind)if(this.FStretchText){var n=this.FDropDownPosition;0===n?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,s.Top+3,i.Left-3,s.Bottom-3)):1===n&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,s.Top+3,s.Right-3,i.Top-3))}else{var o=this.FBitmapPosition;if(0===o){var a=this.FDropDownPosition;0===a?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Right+3,s.Top+3,i.Left-3,s.Bottom-3)):1===a&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Right+3,s.Top+3,s.Right-3,i.Top-3))}else if(1===o){var r=this.FDropDownPosition;0===r?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,e.Bottom+3,i.Left-3,s.Bottom-3)):1===r&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,e.Bottom+3,s.Right-3,i.Top-3))}}else if(this.FStretchText)t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,s.Top+3,i.Left-3,s.Bottom-3));else{var l=this.FBitmapPosition;0===l?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Right+3,s.Top+3,i.Left-3,s.Bottom-3)):1===l&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+3,e.Bottom+3,i.Left-3,s.Bottom-3))}return t},this.GetBitmapRect$1=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=0;if(n=this.GetBitmapSize(),3===this.FLayout&&(n=this.GetLargeLayoutBitmapSize()),i.$assign(t),e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,i.Top,i.Left,i.Bottom)),this.FBitmapVisible)if(0!==this.FDropDownKind){s.$assign(this.GetDropDownRect());var o=this.FBitmapPosition;if(0===o){var a=this.FDropDownPosition;0===a?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,e.Left+3+n,e.Bottom-3)):1===a&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,e.Left+3+n,s.Top-3))}else if(1===o){var r=this.FDropDownPosition;0===r?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,s.Left-3,e.Top+3+n)):1===r&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+3,e.Top+3,i.Right-3,e.Top+3+n))}}else if(this.FTextVisible&&""!==this.GetText()){if(this.FTextVisible&&""!==this.GetText()){var l=this.FBitmapPosition;0===l?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Left+3+n,i.Bottom-3)):1===l&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Right-3,i.Top+3+n))}}else e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Right-3,i.Bottom-3)),-1===n||this.FStretchBitmapIfNoText||(e.Left=Math.round(i.Left+(i.Right-i.Left-n)/2),e.Top=Math.round(i.Top+(i.Bottom-i.Top-n)/2),e.Right=e.Left+n,e.Bottom=e.Top+n);return e},this.GetBitmapRect=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return e.$assign(t.TTMSFNCDefaultToolBarButton.GetBitmapRect.call(this)),e},this.CanDropDown=function(){return 0!==this.FDropDownKind},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this)},this.Assign=function(e){t.TTMSFNCDefaultToolBarButton.Assign.apply(this,arguments),t.TTMSFNCCustomToolBarButton.isPrototypeOf(e)&&(this.FDropDownKind=rtl.as(e,t.TTMSFNCCustomToolBarButton).FDropDownKind,this.FDropDownPosition=rtl.as(e,t.TTMSFNCCustomToolBarButton).FDropDownPosition,this.FAutoOptionsMenuText=rtl.as(e,t.TTMSFNCCustomToolBarButton).FAutoOptionsMenuText,this.FHidden=rtl.as(e,t.TTMSFNCCustomToolBarButton).FHidden,this.Invalidate())},this.Create$1=function(e){var i="";return t.TTMSFNCDefaultToolBarButton.Create$1.apply(this,arguments),this.FHidden=!1,this.FDropDownPosition=0,this.FDropDownButton=this.GetDropDownButtonClass().$create("Create$1",[this]),this.FDropDownButton.SetTabStop(!1),this.FDropDownButton.SetText(""),this.FDropDownButton.FOnClick=rtl.createCallback(this,"DropDownButtonClick"),this.FDropDownButton.SetVisible(!1),this.FDropDownButton.SetWidth(17),this.FDropDownButton.FAppearance.SetCorners(rtl.createSet(1,3)),this.FDropDownButton.SetAlign(4),this.FDropDownButton.FStored=!1,i=t.TMSFNCTOOLBAREXPANDSVG,this.FDropDownButton.FBitmaps.AddBitmapFromResource$1(i,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FDropDownButton.FDisabledBitmaps.AddBitmapFromResource$1(i,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FDropDownButton.FHoverBitmaps.AddBitmapFromResource$1(i,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this},this.Destroy=function(){rtl.free(this,"FDropDownButton"),t.TTMSFNCDefaultToolBarButton.Destroy.call(this)},this.GetDropDownButtonControl=function(){return this.FDropDownButton},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TTMSFNCToolBarButton",this.TTMSFNCCustomToolBarButton,(function(){this.RegisterRuntimeClasses=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.RegisterRuntimeClasses.call(this),pas.Classes.RegisterClass(t.TTMSFNCToolBarButton)},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Font",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFont,"FFont$1","SetFont$1"),e.addProperty("AutoOptionsMenuText",0,rtl.string,"FAutoOptionsMenuText","FAutoOptionsMenuText"),e.addProperty("DropDownAutoWidth",2,rtl.boolean,"FDropDownAutoWidth","SetDropDownAutoWidth",{Default:!1}),e.addProperty("DropDownKind",2,t.$rtti.TTMSFNCToolBarButtonDropDownKind,"FDropDownKind","SetDropDownKind",{Default:t.TTMSFNCToolBarButtonDropDownKind.ddkNormal}),e.addProperty("DropDownPosition",2,t.$rtti.TTMSFNCToolBarButtonDropDownPosition,"FDropDownPosition","SetDropDownPosition",{Default:t.TTMSFNCToolBarButtonDropDownPosition.ddpRight}),e.addProperty("DropDownHeight",14,rtl.double,"FDropDownHeight","SetDropDownHeight",{stored:"IsDropDownHeightStored"}),e.addProperty("DropDownWidth",14,rtl.double,"FDropDownWidth","SetDropDownWidth",{stored:"IsDropDownWidthStored"}),e.addProperty("DropDownControl",2,pas["WEBLib.Controls"].$rtti.TControl,"FDropDownControl","SetDropDownControl"),e.addProperty("OnBeforeDropDown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnBeforeDropDown","FOnBeforeDropDown"),e.addProperty("OnDropDown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDropDown","FOnDropDown"),e.addProperty("OnCloseDropDown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCloseDropDown","FOnCloseDropDown"),e.addProperty("Text",3,rtl.string,"GetText","SetText"),e.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus$1","SetShowFocus$1",{Default:!1}),e.addProperty("TextVisible",2,rtl.boolean,"FTextVisible","SetTextVisible",{Default:!0}),e.addProperty("StretchText",2,rtl.boolean,"FStretchText","SetStretchText",{Default:!1}),e.addProperty("StretchBitmapIfNoText",2,rtl.boolean,"FStretchBitmapIfNoText","SetStretchBitmapIfNoText",{Default:!0}),e.addProperty("HorizontalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FHorizontalTextAlign","SetHorizontalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("VerticalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FVerticalTextAlign","SetVerticalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("Trimming",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextTrimming,"FTrimming","SetTrimming",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextTrimming.gttCharacter}),e.addProperty("Bitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FBitmaps","SetBitmaps"),e.addProperty("LargeLayoutBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FLargeLayoutBitmaps","SetLargeLayoutBitmaps"),e.addProperty("Layout",2,t.$rtti.TTMSFNCToolBarButtonLayout,"FLayout","SetLayout",{Default:t.TTMSFNCToolBarButtonLayout.bblNone}),e.addProperty("CompactLayout",2,t.$rtti.TTMSFNCToolBarButtonLayout,"FCompactLayout","SetCompactLayout",{Default:t.TTMSFNCToolBarButtonLayout.bblNone}),e.addProperty("MinimumLayout",2,t.$rtti.TTMSFNCToolBarButtonLayout,"FMinimumLayout","SetMinimumLayout",{Default:t.TTMSFNCToolBarButtonLayout.bblBitmap}),e.addProperty("MaximumLayout",2,t.$rtti.TTMSFNCToolBarButtonLayout,"FMaximumLayout","SetMaximumLayout",{Default:t.TTMSFNCToolBarButtonLayout.bblLarge}),e.addProperty("BitmapPosition",2,t.$rtti.TTMSFNCToolBarButtonBitmapPosition,"FBitmapPosition","SetBitmapPosition",{Default:t.TTMSFNCToolBarButtonBitmapPosition.bbpLeft}),e.addProperty("DisabledBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FDisabledBitmaps","SetDisabledBitmaps"),e.addProperty("HoverBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FHoverBitmaps","SetHoverBitmaps"),e.addProperty("LargeLayoutDisabledBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FLargeLayoutDisabledBitmaps","SetLargeLayoutDisabledBitmaps"),e.addProperty("LargeLayoutHoverBitmaps",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCScaledBitmaps,"FLargeLayoutHoverBitmaps","SetLargeLayoutHoverBitmaps"),e.addProperty("BitmapVisible",2,rtl.boolean,"FBitmapVisible","SetBitmapVisible",{Default:!1}),e.addProperty("BitmapContainer",3,pas["WEBLib.TMSFNCBitmapContainer"].$rtti.TTMSFNCBitmapContainer,"GetBitmapContainer","SetBitmapContainer"),e.addProperty("BitmapSize",14,rtl.double,"FBitmapSize","SetBitmapSize",{stored:"IsBitmapSizeStored"}),e.addProperty("AutoBitmapSize",2,rtl.boolean,"FAutoBitmapSize","SetAutoBitmapSize",{Default:!1}),e.addProperty("LargeLayoutBitmapSize",14,rtl.double,"FLargeLayoutBitmapSize","SetLargeLayoutBitmapSize",{stored:"IsLargeLayoutBitmapSizeStored"}),e.addProperty("LargeLayoutAutoBitmapSize",2,rtl.boolean,"FLargeLayoutAutoBitmapSize","SetLargeLayoutAutoBitmapSize",{Default:!1}),e.addProperty("State",2,t.$rtti.TTMSFNCToolBarElementState,"FState","SetState",{Default:t.TTMSFNCToolBarElementState.esNormal}),e.addProperty("LastElement",2,rtl.boolean,"FLastElement","SetLastElement",{Default:!1}),e.addProperty("Appearance",2,t.$rtti.TTMSFNCToolBarButtonAppearance,"FAppearance","SetAppearance"),e.addProperty("WordWrapping",2,rtl.boolean,"FWordWrapping","SetWordWrapping",{Default:!1}),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),rtl.createClass(this,"TTMSFNCCustomToolBarAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FFill=null,this.FStroke=null,this.FVerticalSpacing=0,this.FHorizontalSpacing=0,this.FDragGripColor=0,this.FDragGrip=!1,this.FFlatStyle=!1,this.FFont=null,this.FSeparatorStroke=null,this.FSeparator=!1},this.$final=function(){this.FOwner=void 0,this.FFill=void 0,this.FStroke=void 0,this.FFont=void 0,this.FSeparatorStroke=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetFill=function(t){this.FFill.Assign(t)},this.SetStroke=function(t){this.FStroke.Assign(t)},this.SetHorizontalSpacing=function(t){this.FHorizontalSpacing!==t&&(this.FHorizontalSpacing=t,this.FOwner.UpdateControls())},this.SetVerticalSpacing=function(t){this.FVerticalSpacing!==t&&(this.FVerticalSpacing=t,this.FOwner.UpdateControls())},this.SetDragGrip=function(t){this.FDragGrip!==t&&(this.FDragGrip=t,this.FOwner.UpdateControls())},this.SetDragGripColor=function(t){this.FDragGripColor!==t&&(this.FDragGripColor=t,this.FOwner.Invalidate())},this.IsHorizontalSpacingStored=function(){return 3!==this.FHorizontalSpacing},this.IsVerticalSpacingStored=function(){return 3!==this.FVerticalSpacing},this.SetFlatStyle=function(t){this.FFlatStyle!==t&&(this.FFlatStyle=t,null!=this.FOwner&&this.FOwner.ApplyFlatStyle())},this.SetSeparator=function(t){this.FSeparator!==t&&(this.FSeparator=t,this.FOwner.Invalidate())},this.SetSeparatorStroke=function(t){this.FSeparatorStroke.Assign(t)},this.FillChanged=function(t){this.FOwner.Invalidate()},this.StrokeChanged=function(t){this.FOwner.Invalidate()},this.Assign=function(e){t.TTMSFNCCustomToolBarAppearance.isPrototypeOf(e)&&(this.FSeparatorStroke.Assign(rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FSeparatorStroke),this.FSeparator=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FSeparator,this.FFill.Assign(rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FFill),this.FStroke.Assign(rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FStroke),this.FHorizontalSpacing=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FHorizontalSpacing,this.FVerticalSpacing=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FVerticalSpacing,this.FDragGripColor=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FDragGripColor,this.FDragGrip=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FDragGrip,this.FFlatStyle=rtl.as(e,t.TTMSFNCCustomToolBarAppearance).FFlatStyle)},this.Create$1=function(t){return this.FOwner=t,this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFlatStyle=!1,this.FHorizontalSpacing=3,this.FVerticalSpacing=3,this.FDragGrip=!0,this.FDragGripColor=13882323,this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[2,16777215,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(230,230,230),-1,-1]),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FSeparatorStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,16777215]),this.FSeparatorStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this},this.Destroy=function(){rtl.free(this,"FSeparatorStroke"),rtl.free(this,"FFont"),rtl.free(this,"FFill"),rtl.free(this,"FStroke"),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[["AOwner",t.$rtti.TTMSFNCCustomToolBar]])})),rtl.createClass(this,"TTMSFNCToolBarAppearance",this.TTMSFNCCustomToolBarAppearance,(function(){var t=this.$rtti;t.addProperty("FlatStyle",2,rtl.boolean,"FFlatStyle","SetFlatStyle",{Default:!1}),t.addProperty("Fill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFill","SetFill"),t.addProperty("Stroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStroke","SetStroke"),t.addProperty("Separator",2,rtl.boolean,"FSeparator","SetSeparator",{Default:!1}),t.addProperty("SeparatorStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FSeparatorStroke","SetSeparatorStroke"),t.addProperty("HorizontalSpacing",14,rtl.double,"FHorizontalSpacing","SetHorizontalSpacing",{stored:"IsHorizontalSpacingStored"}),t.addProperty("VerticalSpacing",14,rtl.double,"FVerticalSpacing","SetVerticalSpacing",{stored:"IsVerticalSpacingStored"}),t.addProperty("DragGrip",2,rtl.boolean,"FDragGrip","SetDragGrip",{Default:!0}),t.addProperty("DragGripColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FDragGripColor","SetDragGripColor",{Default:13882323})})),rtl.createClass(this,"TTMSFNCToolBarControl",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FControlIndex=0,this.FControl=null,this.FLayout=0,this.FBitmap=null},this.$final=function(){this.FControl=void 0,this.FBitmap=void 0,pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){return this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[])})),rtl.createClass(this,"TTMSFNCCustomToolBarOptionsMenu",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FShowItemText=!1,this.FShowItemBitmap=!1,this.FShowButton=!1,this.FItemBitmapWidth=0,this.FAutoItemBitmapWidth=!1},this.$final=function(){this.FOwner=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetShowButton=function(t){this.FShowButton!==t&&(this.FShowButton=t,this.FOwner.FOptionsMenuButton.SetVisible(this.FShowButton),this.FShowButton?this.FOwner.FOptionsMenuButton.SetParent(this.FOwner):this.FOwner.FOptionsMenuButton.SetParent(null),this.FOwner.UpdateControls())},this.SetShowItemBitmap=function(t){this.FShowItemBitmap!==t&&(this.FShowItemBitmap=t)},this.SetShowItemText=function(t){this.FShowItemText!==t&&(this.FShowItemText=t)},this.SetAutoItemBitmapWidth=function(t){this.FAutoItemBitmapWidth!==t&&(this.FAutoItemBitmapWidth=t)},this.SetItemBitmapWidth=function(t){this.FItemBitmapWidth!==t&&(this.FItemBitmapWidth=t)},this.IsItemBitmapWidthStored=function(){return 50!==this.FItemBitmapWidth},this.Assign=function(e){t.TTMSFNCCustomToolBarOptionsMenu.isPrototypeOf(e)&&(this.FShowItemText=rtl.as(e,t.TTMSFNCCustomToolBarOptionsMenu).FShowItemText,this.FShowItemBitmap=rtl.as(e,t.TTMSFNCCustomToolBarOptionsMenu).FShowItemBitmap,this.FShowButton=rtl.as(e,t.TTMSFNCCustomToolBarOptionsMenu).FShowButton,this.FAutoItemBitmapWidth=rtl.as(e,t.TTMSFNCCustomToolBarOptionsMenu).FAutoItemBitmapWidth,this.FItemBitmapWidth=rtl.as(e,t.TTMSFNCCustomToolBarOptionsMenu).FItemBitmapWidth)},this.Create$1=function(t){return this.FOwner=t,this.FShowItemText=!0,this.FShowButton=!0,this.FShowItemBitmap=!0,this.FAutoItemBitmapWidth=!0,this.FItemBitmapWidth=50,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[["AOwner",t.$rtti.TTMSFNCCustomToolBar]])})),rtl.createClass(this,"TTMSFNCToolBarOptionsMenu",this.TTMSFNCCustomToolBarOptionsMenu,(function(){var t=this.$rtti;t.addProperty("ShowButton",2,rtl.boolean,"FShowButton","SetShowButton",{Default:!0}),t.addProperty("ShowItemBitmap",2,rtl.boolean,"FShowItemBitmap","SetShowItemBitmap",{Default:!0}),t.addProperty("ShowItemText",2,rtl.boolean,"FShowItemText","SetShowItemText",{Default:!0}),t.addProperty("AutoItemBitmapWidth",2,rtl.boolean,"FAutoItemBitmapWidth","SetAutoItemBitmapWidth",{Default:!0}),t.addProperty("ItemBitmapWidth",14,rtl.double,"FItemBitmapWidth","SetItemBitmapWidth",{stored:"IsItemBitmapWidthStored"})})),rtl.createClass(this,"TTMSFNCToolBarControlObjectList",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TTMSFNCToolBarControlList",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(this,"TTMSFNCToolBarPopup",pas["WEBLib.TMSFNCPopup"].TTMSFNCPopup,(function(){rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCCustomToolBar",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FCompactToolbar=null,this.FCompactPopup=null,this.FHover=!1,this.FHoverP=!1,this.FQuickMenuButtonHover=!1,this.FQuickMenuButtonHoverP=!1,this.FDown=!1,this.FQuickMenuButtonDown=!1,this.FOldWidth=0,this.FOldMenuButtonState=!1,this.FBitmapContainer=null,this.FInsideDrag=!1,this.FDragGripMoving=!1,this.FDragGripDown=!1,this.FDragGripDownPt=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FHiddenControls=null,this.FCompactControls=null,this.FBlockUpdate=!1,this.FBlockResize=!1,this.FAutoSize=!1,this.FAppearance=null,this.FAutoAlign=!1,this.FOptionsMenuButton=null,this.FAutoOptionsMenu=null,this.FOnOptionsMenuButtonClick=null,this.FOptionsMenu=null,this.FCustomOptionsMenu=null,this.FState=0,this.FOnUpdateDockPanel=null,this.FOnUpdateControls=null,this.FOnIsLastElement=null,this.FOnDragGripMoving=null,this.FAutoMoveToolBar=!1,this.FOnInternalDblClick$1=null,this.FOnInternalMouseDown$1=null,this.FOnInternalMouseMove$1=null,this.FOnInternalMouseUp$1=null,this.FAutoHeight=!1,this.FAutoWidth=!1,this.FOnInternalInsertControl=null,this.FAutoStretchHeight=!1,this.FText="",this.FFirstLoad=!1,this.FFont$1=null,this.FVerticalTextAlign=0,this.FTrimming=0,this.FHorizontalTextAlign=0,this.FWordWrapping=!1,this.FTextVisible=!1,this.FMinimumWidth=0,this.FCompact=!1,this.FCanCompact=!1,this.FCompactWidth=0,this.FCompactAppearance=null,this.FCompactBitmaps=null,this.FOnCompactClick=null,this.FCompactBitmapSize=0,this.FCompactBitmapVisible=!1,this.FCompactExpanderBitmaps=null,this.FQuickMenuButton=!1,this.FQuickMenuButtonAppearance=null,this.FOnQuickMenuButtonClick=null,this.FQuickMenuButtonBitmaps=null,this.FCompactAutoBitmapSize=!1,this.FOnAnchorClick=null},this.$final=function(){this.FCompactToolbar=void 0,this.FCompactPopup=void 0,this.FBitmapContainer=void 0,this.FDragGripDownPt=void 0,this.FHiddenControls=void 0,this.FCompactControls=void 0,this.FAppearance=void 0,this.FOptionsMenuButton=void 0,this.FAutoOptionsMenu=void 0,this.FOnOptionsMenuButtonClick=void 0,this.FOptionsMenu=void 0,this.FCustomOptionsMenu=void 0,this.FOnUpdateDockPanel=void 0,this.FOnUpdateControls=void 0,this.FOnIsLastElement=void 0,this.FOnDragGripMoving=void 0,this.FOnInternalDblClick$1=void 0,this.FOnInternalMouseDown$1=void 0,this.FOnInternalMouseMove$1=void 0,this.FOnInternalMouseUp$1=void 0,this.FOnInternalInsertControl=void 0,this.FFont$1=void 0,this.FCompactAppearance=void 0,this.FCompactBitmaps=void 0,this.FOnCompactClick=void 0,this.FCompactExpanderBitmaps=void 0,this.FQuickMenuButtonAppearance=void 0,this.FOnQuickMenuButtonClick=void 0,this.FQuickMenuButtonBitmaps=void 0,this.FOnAnchorClick=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.SetAS=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.UpdateControls())},this.SetState=function(e){var i=0,s=null;if(this.FState!==e){this.FState=e;for(var n=0,o=this.GetControlsCount()-1;n<=o;n++)i=n,s=this.GetControls(i),t.TTMSFNCCustomToolBarElement.isPrototypeOf(s)&&rtl.as(s,t.TTMSFNCCustomToolBarElement).SetState(this.FState)}},this.SetAutoHeight=function(t){this.FAutoHeight!==t&&(this.FAutoHeight=t,this.UpdateControls())},this.SetAutoWidth=function(t){this.FAutoWidth!==t&&(this.FAutoWidth=t,this.UpdateControls())},this.SetAutoStretchHeight=function(t){this.FAutoStretchHeight!==t&&(this.FAutoStretchHeight=t,this.UpdateControls())},this.GetBitmapContainer=function(){return this.FBitmapContainer},this.SetCompact=function(t){this.FCompact!==t&&this.FCanCompact&&(this.FCompact=t,this.FCompact?(this.FOldMenuButtonState=this.FOptionsMenu.FShowButton,this.FOptionsMenu.SetShowButton(!1),this.FOldWidth=this.GetWidth(),this.CompactControls(),this.SetWidth(Math.round(this.FCompactWidth))):(this.SetWidth(Math.round(this.FOldWidth)),this.UncompactControls(),this.FOptionsMenu.SetShowButton(this.FOldMenuButtonState)),this.UpdateControls())},this.SetCompactBitmapVisible=function(t){this.FCompactBitmapVisible!==t&&(this.FCompactBitmapVisible=t,this.Invalidate())},this.GetTextRect=function(){var t,e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0;return s=0,this.FAppearance.FDragGrip&&(s=1===this.FState?3:2),i.$assign(this.GetLocalRect()),i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+this.ScalePaintValue$1(s),i.Top,i.Right,i.Bottom)),pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,this.ScalePaintValue(-2),this.ScalePaintValue(-2)),t=this.GetTextSize().cy,e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,i.Bottom-t,i.Right,i.Bottom)),e},this.CanDrawDesignTime=function(){return!1,!1},this.CanBuildControls=function(){return!0,!0},this.GetOptionsMenuButtonClass=function(){return t.TTMSFNCToolBarDropDownButton},this.GetTextSize=function(){var t=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),e=null,i=0,s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(t.cx=0,t.cy=0,this.FTextVisible&&""!==this.FText){e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[1,1,this.FNativeCanvas,!0]),this.FNativeCanvas||e.BeginScene(),e.FBitmapContainer=this.GetBitmapContainer(),e.FOptimizedHTMLDrawing=this.FOptimizedHTMLDrawing;try{i=0,this.FAppearance.FDragGrip&&(i=1===this.FState?3:2),e.FFont.Assign(this.FFont$1),s.$assign(this.GetLocalRect()),s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+i,s.Top,s.Right,s.Bottom)),pas["WEBLib.TMSFNCTypes"].InflateRectEx(s,-2,-2),t.$assign(e.CalculateTextSize(this.FText,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FWordWrapping,!0))}finally{this.FNativeCanvas||e.EndScene(),e=rtl.freeLoc(e)}}return t},this.GetHiddenControl=function(t){var e=null,i=0;e=null;for(var s=0,n=this.FHiddenControls.GetCount()-1;s<=n;s++)if(i=s,this.FHiddenControls.GetItem$1(i).FControl===t){e=this.FHiddenControls.GetItem$1(i);break}return e},this.GetHiddenControlCount=function(e){var i=0,s=0,n=null;n=t.TTMSFNCToolBarControlList.$create("Create$1");for(var o=0,a=this.FHiddenControls.GetCount()-1;o<=a;o++)s=o,n.Add(this.FHiddenControls.GetItem$1(s));i=0;for(var r=0,l=n.GetCount()-1;r<=l&&(s=r,n.GetItem(s).FControl!==e);r++)i+=1;return n=rtl.freeLoc(n),i},this.GetCompactTextRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return i.$assign(this.GetLocalRect()),e.$assign(this.GetCompactBitmapRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))),t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,e.Bottom+3,i.Right-3,i.Bottom-23)),t},this.GetCompactBitmapRect=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0;return i.$assign(t),e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,i.Top,i.Right,i.Top)),this.FCompactBitmapVisible&&(s=this.GetCompactBitmapSize(),this.FTextVisible&&""!==this.FText?this.FTextVisible&&""!==this.FText&&e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Right-3,i.Top+s)):(e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+3,i.Top+3,i.Right-3,i.Bottom-3)),-1!==s&&(e.Left=Math.round(i.Left+(i.Right-i.Left-s)/2),e.Top=Math.round(i.Top+(i.Bottom-i.Top-s)/2),e.Right=e.Left+s,e.Bottom=e.Top+s))),e},this.GetCompactBitmapSize=function(){var t=0,e=null;return t=this.FCompactBitmapSize,this.FCompactAutoBitmapSize&&(null==(e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FCompactBitmaps,0,this.GetBitmapContainer()))||pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)||(t=Math.max(e.GetHeight(),e.GetWidth()))),t},this.GetQuickMenuButtonRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.GetWidth()-16,this.GetHeight()-16,this.GetWidth(),this.GetHeight())),this.FAppearance.FSeparator&&(t.Left=t.Left-this.FAppearance.FSeparatorStroke.FWidth,t.Right=t.Right-this.FAppearance.FSeparatorStroke.FWidth),t},this.HandleQuickMenuButton=function(){null!=this.FOnQuickMenuButtonClick&&this.FOnQuickMenuButtonClick(this)},this.CompactAppearanceChanged=function(t){this.Invalidate()},this.QuickMenuButtonAppearanceChanged=function(t){this.Invalidate()},this.CompactBitmapsChanged=function(t){var e;e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetScaledBitmap(this.FCompactBitmaps,0,this.GetBitmapContainer()),this.SetCompactBitmapVisible(null!=e&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)),this.Invalidate()},this.CompactExpanderBitmapsChanged=function(t){this.Invalidate()},this.QuickMenuButtonBitmapsChanged=function(t){this.Invalidate()},this.ApplyFlatStyle=function(){for(var e=0,i=null,s=0,n=this.GetControlsCount()-1;s<=n;s++)e=s,i=this.GetControls(e),t.TTMSFNCDefaultToolBarButton.isPrototypeOf(i)&&rtl.as(i,t.TTMSFNCDefaultToolBarButton).FAppearance.SetFlatStyle(this.FAppearance.FFlatStyle),t.TTMSFNCCustomToolBar.isPrototypeOf(i)&&rtl.as(i,t.TTMSFNCCustomToolBar).FAppearance.SetFlatStyle(this.FAppearance.FFlatStyle);this.Invalidate()},this.SetAdaptToStyle=function(t){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.SetAdaptToStyle.apply(this,arguments),this.UpdateControls()},this.ApplyStyle=function(){var t=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ApplyStyle.call(this),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleHeaderFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FFill.SetKind(1),this.FAppearance.FFill.SetColor(t)),pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleHeaderFillColorTo({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FFill.SetKind(2),this.FAppearance.FFill.SetColorTo(t))},this.ResetToDefaultStyle=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ResetToDefaultStyle.call(this),this.FAppearance.SetDragGripColor(13882323),this.FAppearance.FFill.SetColor(16777215),this.FAppearance.FStroke.SetColor(8421504),this.FAppearance.FFill.SetKind(2),this.FAppearance.FStroke.SetKind(1),this.FAppearance.FFill.SetColor(16777215),this.FAppearance.FFill.SetColorTo(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(230,230,230))},this.HandleMouseDown=function(t,e,i,s){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseDown.apply(this,arguments),this.FAppearance.FDragGrip&&!this.FDragGripMoving&&(this.FDragGripDown=pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetDragGripRect(!0),pas["WEBLib.TMSFNCTypes"].PointF(i,s)),this.FDragGripDownPt.$assign(pas["WEBLib.TMSFNCTypes"].PointF(i,s))),this.FDragGripDown||(this.FCompact?(this.FDown=!0,this.Invalidate(),this.CaptureEx()):this.FQuickMenuButton&&(this.FQuickMenuButtonDown=pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetQuickMenuButtonRect(),pas["WEBLib.TMSFNCTypes"].PointF(i,s)),this.FQuickMenuButtonDown&&(this.Invalidate(),this.CaptureEx()))),null!=this.FOnInternalMouseDown$1&&1!==t&&this.FOnInternalMouseDown$1(this)},this.HandleMouseMove=function(e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a=0,r=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),l=null;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseMove.apply(this,arguments),this.FCompact?(this.FHoverP=this.FHover,this.FHover=!0,this.FHover!==this.FHoverP&&this.Invalidate()):this.FQuickMenuButton&&(this.FQuickMenuButtonHoverP=this.FQuickMenuButtonHover,this.FQuickMenuButtonHover=pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetQuickMenuButtonRect(),pas["WEBLib.TMSFNCTypes"].PointF(i,s)),this.FQuickMenuButtonHover!==this.FQuickMenuButtonHoverP&&this.Invalidate()),this.FAppearance.FDragGrip&&(this.FDragGripDown?(this.FDragGripMoving||(this.CaptureEx(),this.FDragGripMoving=!0),this.FDragGripMoving&&(o=this.FDragGripDownPt.X-i,a=this.FDragGripDownPt.Y-s,this.FAutoMoveToolBar&&(r.$assign(pas["WEBLib.TMSFNCTypes"].PointF(this.GetLeft()-o,this.GetTop()-a)),t.TTMSFNCCustomDockPanel.isPrototypeOf(this.FParent)&&(l=rtl.as(this.FParent,t.TTMSFNCCustomDockPanel)).FAutoAlign&&(r.Y<l.FAppearance.FMargins.FTop&&(r.Y=Math.round(l.FAppearance.FMargins.FTop)),r.X<l.FAppearance.FMargins.FLeft?r.X=Math.round(l.FAppearance.FMargins.FLeft):r.X+this.GetWidth()>l.GetWidth()-l.FAppearance.FMargins.FRight&&(r.X=Math.round(l.GetWidth()-l.FAppearance.FMargins.FRight-this.GetWidth())),this.SetBounds(Math.round(r.X),Math.round(r.Y),this.GetWidth(),this.GetHeight()))),this.FDragGripDownPt.$assign(pas["WEBLib.TMSFNCTypes"].PointF(i+o,s+a)),this.DoDragGripMoving(o,a))):(n.$assign(this.GetDragGripRect(!0)),pas["WEBLib.TMSFNCTypes"].PtInRectEx(n,pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.FInsideDrag||(this.FInsideDrag=!0,this.SetControlCursor(5)):this.FInsideDrag&&(this.FInsideDrag=!1,this.SetControlCursor(0)))),""!==this.XYToAnchor(i,s)?this.SetControlCursor(21):21===this.FCursor&&this.SetControlCursor(0),null!=this.FOnInternalMouseMove$1&&this.FOnInternalMouseMove$1(this)},this.HandleMouseLeave=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseLeave.call(this),this.FHoverP=!1,this.FQuickMenuButtonHover=!1,this.SetControlCursor(0),this.FInsideDrag=!1,this.FHoverP!==this.FHover&&(this.FHover=!1,this.Invalidate())},this.HandleMouseUp=function(t,e,i,s){var n="";pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseUp.apply(this,arguments),this.FDragGripDown?this.ReleaseCaptureEx():this.FDown&&this.FCompact?(this.Invalidate(),this.ReleaseCaptureEx(),this.HandleCompact()):this.FQuickMenuButtonDown&&this.FQuickMenuButton&&!this.FCompact&&(this.Invalidate(),this.ReleaseCaptureEx(),this.HandleQuickMenuButton()),this.FDragGripDown=!1,this.FDragGripMoving=!1,this.FDown=!1,this.FQuickMenuButtonDown=!1,""!==(n=this.XYToAnchor(i,s))&&this.DoAnchorClick(n),null!=this.FOnInternalMouseUp$1&&1!==t&&this.FOnInternalMouseUp$1(this)},this.HandleCompact=function(){var e=0,i=null;this.DeactivateAllPopups(),null!=this.FCompactToolbar&&(rtl.free(this,"FCompactToolbar"),this.FCompactToolbar=null),null!=this.FCompactPopup&&(rtl.free(this,"FCompactPopup"),this.FCompactPopup=null),this.FCompactPopup=t.TTMSFNCToolBarPopup.$create("Create$1",[this]),this.FCompactPopup.FOnClosePopup=rtl.createCallback(this,"DoCloseCompactPopup"),this.FCompactToolbar=t.TTMSFNCCustomToolBar.$create("Create$1",[this.FCompactPopup]),this.FCompactToolbar.Assign(this),this.FCompactToolbar.SetCompact(!1),this.FCompactToolbar.SetAS(!0),this.FCompactToolbar.SetAutoHeight(!1),this.FCompactToolbar.SetAutoWidth(!0),this.FCompactToolbar.SetAutoStretchHeight(!1),this.FCompactToolbar.FAppearance.SetSeparator(!1),this.FCompactToolbar.SetControlMargins(1,1,1,1),this.FCompactToolbar.SetHeight(this.GetHeight()+2);for(var s=this.FCompactControls.GetCount()-1;s>=0;s--)e=s,null!=(i=this.FCompactControls.GetItem$1(e)).FControl&&(t.TTMSFNCDefaultToolBarButton.isPrototypeOf(i.FControl)&&rtl.as(i.FControl,t.TTMSFNCDefaultToolBarButton).SetLayout(rtl.as(i.FControl,t.TTMSFNCDefaultToolBarButton).FCompactLayout),i.FControl.SetVisible(!0),i.FControl.SetParent(this.FCompactToolbar));this.FCompactToolbar.UpdateControls(),this.FCompactPopup.SetPlacementControl(this),this.FCompactPopup.SetContentControl(this.FCompactToolbar),this.FCompactPopup.SetIsOpen(!0),this.DoCompactClick()},this.DeactivateAllPopups=function(){var e=0;if(null!=this.FParent&&pas["WEBLib.Controls"].TWinControl.isPrototypeOf(this.FParent))for(var i=0,s=rtl.as(this.FParent,pas["WEBLib.Controls"].TWinControl).GetControlsCount()-1;i<=s;i++)e=i,t.TTMSFNCCustomToolBar.isPrototypeOf(rtl.as(this.FParent,pas["WEBLib.Controls"].TWinControl).GetControls(e))&&rtl.as(rtl.as(this.FParent,pas["WEBLib.Controls"].TWinControl).GetControls(e),t.TTMSFNCCustomToolBar).CloseCompactPopup()},this.DoCompactClick=function(){null!=this.FOnCompactClick&&this.FOnCompactClick(this)},this.HandleDblClick=function(t,e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleDblClick.apply(this,arguments),null!=this.FOnInternalDblClick$1&&this.FOnInternalDblClick$1(this)},this.UpdateDockPanel=function(){null!=this.FOnUpdateDockPanel&&this.FOnUpdateDockPanel(this)},this.InsertToolBarControl=function(t,e){t.SetParent(this),e>-1&&this.SetChildOrder(t,e),null!=this.FOnInternalInsertControl&&this.FOnInternalInsertControl(t)},this.DoDragGripMoving=function(t,e){null!=this.FOnDragGripMoving&&this.FOnDragGripMoving(this,t,e)},this.VisibleChanging=function(){pas["WEBLib.Controls"].TControl.VisibleChanging.call(this),this.UpdateDockPanel()},this.GetDragGripRect=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0;return i.$assign(this.GetLocalRect()),s=1,1===this.FState&&(s=1.75),t?e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,i.Top,i.Left+this.ScalePaintValue$1(8*s),i.Bottom)):e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+this.ScalePaintValue(3),i.Top+this.ScalePaintValue(3),i.Left+this.ScalePaintValue$1(6*s),i.Bottom-this.ScalePaintValue(3))),e},this.CompactControls=function(){var e=0,i=null,s=null;this.FBlockUpdate=!0,this.FCompactControls.Clear();for(var n=this.GetControlsCount()-1;n>=0;n--)e=n,(s=this.GetControls(e))!==this.FOptionsMenuButton&&((i=t.TTMSFNCToolBarControl.$create("Create$1")).FControl=s,t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&(i.FLayout=rtl.as(s,t.TTMSFNCDefaultToolBarButton).FLayout,0===rtl.as(s,t.TTMSFNCDefaultToolBarButton).FCompactLayout&&0!==rtl.as(s,t.TTMSFNCDefaultToolBarButton).FLayout&&rtl.as(s,t.TTMSFNCDefaultToolBarButton).SetCompactLayout(rtl.as(s,t.TTMSFNCDefaultToolBarButton).FMaximumLayout)),t.TTMSFNCCustomToolBarElement.isPrototypeOf(s)?i.FControlIndex=rtl.as(s,t.TTMSFNCCustomToolBarElement).FControlIndex:i.FControlIndex=s.FTag$1,s.SetParent(null),s.SetVisible(!1),this.FCompactControls.Add$1(i));this.FBlockUpdate=!0,this.UpdateControls(),this.Invalidate()},this.UncompactControls=function(){var e=0,i=null;this.FBlockUpdate=!0;for(var s=this.FCompactControls.GetCount()-1;s>=0;s--)e=s,null!=(i=this.FCompactControls.GetItem$1(e).FControl)&&(t.TTMSFNCCustomToolBarElement.isPrototypeOf(i)&&(rtl.as(i,t.TTMSFNCCustomToolBarElement).FBlockUpdate=!0),i.SetParent(this),i.SetVisible(!0),t.TTMSFNCCustomToolBarElement.isPrototypeOf(i)&&(rtl.as(i,t.TTMSFNCCustomToolBarElement).FBlockUpdate=!1));this.FBlockUpdate=!1,this.UpdateControls(),this.Invalidate()},this.UpdateToolBar=function(t){this.UpdateControls()},this.DoIsLastElement=function(t,e){null!=this.FOnIsLastElement&&this.FOnIsLastElement(this,t,e)},this.UpdateToolBarControl=function(e){var i=null,s=null,n=null,o=null,a=0;null!=e&&(this.FBlockUpdate=!0,n=rtl.as(e,pas["WEBLib.Controls"].TControl),null!=(i=this.GetHiddenControl(n))?(o=i.FControl,a=Math.max(0,Math.min(this.GetControlsCount(),i.FControlIndex-this.GetHiddenControlCount(o))),this.FHiddenControls.Remove$1(i),this.InsertToolBarControl(o,a),o.SetVisible(!0)):(i=t.TTMSFNCToolBarControl.$create("Create$1"),t.TTMSFNCCustomToolBarElement.isPrototypeOf(n)?i.FControlIndex=rtl.as(n,t.TTMSFNCCustomToolBarElement).FControlIndex:i.FControlIndex=n.FTag$1,i.FControl=n,this.FBlockUpdate=!0,s=n.MakeScreenshot(),this.FBlockUpdate=!1,i.FBitmap.Assign(s),s=rtl.freeLoc(s),this.FHiddenControls.Add$1(i),n.SetParent(null),n.SetVisible(!1)),this.FBlockUpdate=!1,this.UpdateControls())},this.OptionsButtonClick=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new();null!=this.FOnOptionsMenuButtonClick?this.FOnOptionsMenuButtonClick(this):(e.$assign(pas["WEBLib.TMSFNCTypes"].PointF(this.FOptionsMenuButton.GetLeft(),this.FOptionsMenuButton.GetTop())),e.$assign(this.LocalToScreenEx(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.X,e.Y+this.FOptionsMenuButton.GetHeight())))),this.ShowOptionsMenu(e.X,e.Y))},this.DoCloseCompactPopup=function(e){var i=0,s=null;this.FCompactPopup.SetContentControl(null);for(var n=0,o=this.FCompactControls.GetCount()-1;n<=o;n++)i=n,null!=(s=this.FCompactControls.GetItem$1(i)).FControl&&(t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s.FControl)&&rtl.as(s.FControl,t.TTMSFNCDefaultToolBarButton).SetLayout(s.FLayout),s.FControl.SetParent(null),s.FControl.SetVisible(!1));null!=this.FCompactToolbar&&(rtl.free(this,"FCompactToolbar"),this.FCompactToolbar=null)},this.Notification=function(t,e){pas["WEBLib.Menus"].TWebCustomControl.Notification.apply(this,arguments),1===e&&t===this.FBitmapContainer&&(this.FBitmapContainer=null),1===e&&t===this.FCustomOptionsMenu&&(this.FCustomOptionsMenu=null)},this.AlignControls=function(t,e){pas["WEBLib.Controls"].TControl.AlignControls.apply(this,arguments),this.UpdateControls()},this.UpdateControlAfterResize=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.UpdateControlAfterResize.call(this),this.UpdateDockPanel()},this.UpdateControls=function(){var e=this,i=0,s=null,n=0,o=!1,a=0,r=0,l=0,h=0,p=0,c=0,F=0,u=0,C=0,d=0,T=0,m=0,S=null,y=!1,g=null,f=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),M=null,B=0,b=0,L=0,E=0;function v(t){var i=null;if(i=null,t>=0&&t<=e.GetControlsCount()-1&&e.GetControls(t).FVisible)return i=e.GetControls(t);for(;t>=0&&t<=e.GetControlsCount()-1;)if((t+=1)>=0&&t<=e.GetControlsCount()-1&&e.GetControls(t).FVisible)return i=e.GetControls(t);return i}var N=rtl.createIntfRefs();try{if(this.FBlockUpdate||this.FBlockResize||function(){var t=!1,i=0;if(!(t=e.CheckIsLoading()))for(var s=e.GetControlsCount()-1;s>=0;s--)if(i=s,0 in e.GetControls(i).FComponentState)return t=!0;return t}()||this.IsDestroying()||!this.CanBuildControls())return;this.FFirstLoad=!1,this.FBlockUpdate=!0,c=Math.round(this.FAppearance.FHorizontalSpacing),u=Math.round(this.FAppearance.FVerticalSpacing),r=c,this.FAppearance.FDragGrip&&(r+=Math.round(this.GetDragGripRect(!1).Right),0===c&&(r+=this.ScalePaintValue(3))),C=r,d=h=u,F=this.ScalePaintValue(30),T=0,m=0,f.$assign(this.GetTextSize()),f.cy>0&&(T=Math.round(f.cy+this.ScalePaintValue(4))),f.cx>0&&(m=Math.round(f.cx+this.ScalePaintValue(8))),l=m,a=0,p=0,n=0,o=!1;for(var P=0,D=e.GetControlsCount()-1;P<=D&&(i=P,s=e.GetControls(i),!(o=!(null!=this.GetHiddenControl(s))));P++);y=!1;for(var A=0,$=e.GetControlsCount()-1;A<=$;A++)if(i=A,s=e.GetControls(i),pas.SysUtils.Supports$1(N.ref(1,rtl.queryIntfT(s,pas.System.IUnknown)),rtl.getIntfGUIDR(pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),{get:function(){return g},set:function(t){g=t}})&&g.SetAdaptToStyle(this.GetAdaptToStyle()),y&&(r=C,d=h=p),y=!1,t.TTMSFNCCustomToolBarElement.isPrototypeOf(s)&&(y=rtl.as(s,t.TTMSFNCCustomToolBarElement).FLastElement,rtl.as(s,t.TTMSFNCCustomToolBarElement).FOnUpdateToolBar=rtl.createCallback(e,"UpdateToolBar"),rtl.as(s,t.TTMSFNCCustomToolBarElement).FOnUpdateToolBarControl=rtl.createCallback(e,"UpdateToolBarControl")),this.DoIsLastElement(s,{get:function(){return y},set:function(t){y=t}}),s!==this.FOptionsMenuButton){if(o&&(t.TTMSFNCCustomToolBarElement.isPrototypeOf(s)?rtl.as(s,t.TTMSFNCCustomToolBarElement).FControlIndex=n:s.FTag$1=n),s.FVisible){if(s.FAlignWithMargins)if(this.FAutoAlign&&(s.SetLeft(r+s.FMargins.FLeft),s.SetTop(h+s.FMargins.FTop)),this.FAutoStretchHeight||t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&3===rtl.as(s,t.TTMSFNCDefaultToolBarButton).FLayout?(p=this.GetHeight()-s.FMargins.FBottom-T-h,s.SetHeight(p)):p=Math.max(p,s.GetTop()+s.GetHeight()+u+s.FMargins.FBottom),null!=(M=v(i+1))&&t.TTMSFNCDefaultToolBarButton.isPrototypeOf(M)){var W=rtl.as(M,t.TTMSFNCDefaultToolBarButton).FLayout;1===W||2===W?(h=Math.max(h,s.GetTop()+s.GetHeight()+u+s.FMargins.FBottom))+M.FMargins.FTop+M.GetHeight()>this.GetHeight()-M.FMargins.FBottom-T?(r=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c+s.FMargins.FRight)),h=d):(s.SetLeft(r+s.FMargins.FLeft),a=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c+s.FMargins.FRight))):0!==W&&3!==W||(r=Math.max(r,s.GetLeft()+s.GetWidth()+c+s.FMargins.FRight),h=d)}else r=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c+s.FMargins.FRight)),h=d;else if(this.FAutoAlign&&(s.SetLeft(r),s.SetTop(h)),this.FAutoStretchHeight||t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&3===rtl.as(s,t.TTMSFNCDefaultToolBarButton).FLayout?(p=this.GetHeight()-T-h,s.SetHeight(p)):p=Math.max(p,s.GetTop()+s.GetHeight()+u),null!=(M=v(i+1))&&t.TTMSFNCDefaultToolBarButton.isPrototypeOf(M)){var G=rtl.as(M,t.TTMSFNCDefaultToolBarButton).FLayout;1===G||2===G?(h=Math.max(h,s.GetTop()+s.GetHeight()+u))+M.GetHeight()>this.GetHeight()-T?(r=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c)),h=d):(s.SetLeft(r),a=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c))):0!==G&&3!==G||(r=Math.max(r,s.GetLeft()+s.GetWidth()+c),h=d)}else r=Math.max(r,Math.max(a,s.GetLeft()+s.GetWidth()+c)),h=d;l=Math.max(l,r)}n+=1}0===p&&(p=F),this.FOptionsMenuButton.SetVisible(this.FOptionsMenu.FShowButton),this.FOptionsMenu.FShowButton?this.FOptionsMenuButton.SetParent(e):this.FOptionsMenuButton.SetParent(null),this.FOptionsMenuButton.FVisible&&(this.FOptionsMenuButton.FControlIndex=e.GetControlsCount()-1,this.FOptionsMenuButton.SetTop(this.FOptionsMenuButton.FMargins.FTop),S=this.FOptionsMenuButton.FMargins,this.FOptionsMenuButton.FAlignWithMargins||(S.SetLeft(0),S.SetTop(0),S.SetRight(0),S.SetBottom(0)),this.FAutoSize?(this.FOptionsMenuButton.SetLeft(l+S.FLeft),this.FAutoHeight?this.FOptionsMenuButton.SetHeight(p-S.FBottom-S.FTop):this.FAutoStretchHeight&&this.FOptionsMenuButton.SetHeight(this.GetHeight()-S.FBottom-T-S.FTop)):(this.FOptionsMenuButton.SetLeft(this.GetWidth()-this.FOptionsMenuButton.GetWidth()-S.FRight),this.FOptionsMenuButton.SetHeight(this.GetHeight()-S.FBottom-S.FTop-T)),l=l+this.FOptionsMenuButton.GetWidth()+S.FRight+S.FLeft),this.FAutoSize&&(this.FAppearance.FSeparator&&(l+=Math.round(this.FAppearance.FSeparatorStroke.FWidth)),l=Math.round(Math.max(this.FMinimumWidth,l)),0===this.GetControlAlignment()&&(B=0,L=0,b=0,E=0,this.GetControlMargins({get:function(){return B},set:function(t){B=t}},{get:function(){return b},set:function(t){b=t}},{get:function(){return L},set:function(t){L=t}},{get:function(){return E},set:function(t){E=t}}),l+=Math.round(B+L)),p+=T,this.FAutoHeight&&this.FAutoWidth&&0===this.GetControlAlignment()?this.SetBounds(this.GetLeft(),this.GetTop(),l,p):this.FAutoHeight&&!(this.GetControlAlignment()in rtl.createSet(3,4,5))?this.SetBounds(this.GetLeft(),this.GetTop(),this.GetWidth(),p):this.FAutoWidth&&!(this.GetControlAlignment()in rtl.createSet(1,2,5))&&this.SetBounds(this.GetLeft(),this.GetTop(),l,this.GetHeight())),null!=this.FOnUpdateControls&&this.FOnUpdateControls(e),this.FBlockUpdate=!1}finally{N.free(),rtl._Release(g)}},this.DrawDragGrip=function(t){var e=this;var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();t.FFill.SetColor(this.FAppearance.FDragGripColor),t.FFill.SetKind(1),i.$assign(this.GetDragGripRect(!1)),function(i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=0;n=1===e.FState?e.ScalePaintValue(3):e.ScalePaintValue(2),i.Left=i.Left,i.Top=i.Top;for(var o=1,a=rtl.trunc(Math.round(i.Bottom)/(2*Math.round(n)));o<=a;o++)o,s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+(i.Right-i.Left-n)/2,i.Top+1,i.Left+n+(i.Right-i.Left-n)/2,i.Top+1+n)),s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(s.Left),pas.System.Int(s.Top),pas.System.Int(s.Right),pas.System.Int(s.Bottom))),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),2),i.Top=i.Top+2*n}(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))},this.DrawText=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();this.FTextVisible&&""!==this.FText&&(t.FFont.Assign(this.FFont$1),e.$assign(this.GetTextRect()),t.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),this.FText,this.FWordWrapping,this.FHorizontalTextAlign,this.FVerticalTextAlign,this.FTrimming,0,-1,-1,!0,!1,-1,-1))},this.DrawCompactBitmap=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();i.$assign(this.GetCompactBitmapRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e))),t.FBitmapContainer=this.GetBitmapContainer(),t.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FCompactBitmaps,0,!0,!1,!0,!1)},this.DrawCompactText=function(t){var e,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(this.FTextVisible&&""!==this.FText){i.$assign(this.GetCompactTextRect()),e=t.SaveState(!1);try{t.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),t.FFont.Assign(this.FFont$1),t.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FText,this.FWordWrapping,this.FHorizontalTextAlign,this.FVerticalTextAlign,this.FTrimming,0,-1,-1,!0,!1,-1,-1)}finally{t.RestoreState(e,!1)}}},this.DrawCompactExpander=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetLocalRect()),e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Bottom-20,e.Right,e.Bottom)),pas["WEBLib.TMSFNCTypes"].InflateRectEx(e,-2,-2),t.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),this.FCompactExpanderBitmaps,0,!0,!1,!0,!1)},this.ShowOptionsMenu=function(t,e){},this.CheckIsLoading=function(){return this.IsLoading()},this.XYToAnchor=function(t,e){var i="",s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=null;i="",s.$assign(this.GetTextRect()),(n=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[1,1,!1,!0])).BeginScene(),n.FBitmapContainer=this.GetBitmapContainer();try{n.FFont.Assign(this.FFont$1),i=n.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FText,this.FWordWrapping,this.FHorizontalTextAlign,this.FVerticalTextAlign,this.FTrimming,0,-1,-1,!0,!0,t,e)}finally{n.EndScene(),n=rtl.freeLoc(n)}return i},this.DoAnchorClick=function(t){null!=this.FOnAnchorClick?this.FOnAnchorClick(this,t):pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.OpenURL(t)},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this)},this.Assign=function(e){var i=null,s=null,n=0;if(pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments),t.TTMSFNCCustomToolBar.isPrototypeOf(e)){this.FCompactAppearance.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FCompactAppearance),this.FQuickMenuButtonAppearance.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FQuickMenuButtonAppearance),this.FQuickMenuButton=rtl.as(e,t.TTMSFNCCustomToolBar).FQuickMenuButton,this.FCompactBitmaps.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FCompactBitmaps),this.FCompact=rtl.as(e,t.TTMSFNCCustomToolBar).FCompact,this.FCanCompact=rtl.as(e,t.TTMSFNCCustomToolBar).FCanCompact,this.FMinimumWidth=rtl.as(e,t.TTMSFNCCustomToolBar).FMinimumWidth,this.FCompactWidth=rtl.as(e,t.TTMSFNCCustomToolBar).FCompactWidth,this.FCompactBitmapSize=rtl.as(e,t.TTMSFNCCustomToolBar).FCompactBitmapSize,this.FCompactAutoBitmapSize=rtl.as(e,t.TTMSFNCCustomToolBar).FCompactAutoBitmapSize,this.FCompactExpanderBitmaps.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FCompactExpanderBitmaps),this.FQuickMenuButtonBitmaps.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FQuickMenuButtonBitmaps),this.FCompactBitmapVisible=rtl.as(e,t.TTMSFNCCustomToolBar).FCompactBitmapVisible,this.FText=rtl.as(e,t.TTMSFNCCustomToolBar).FText,this.FTextVisible=rtl.as(e,t.TTMSFNCCustomToolBar).FTextVisible,this.FWordWrapping=rtl.as(e,t.TTMSFNCCustomToolBar).FWordWrapping,this.FHorizontalTextAlign=rtl.as(e,t.TTMSFNCCustomToolBar).FHorizontalTextAlign,this.FVerticalTextAlign=rtl.as(e,t.TTMSFNCCustomToolBar).FVerticalTextAlign,this.FTrimming=rtl.as(e,t.TTMSFNCCustomToolBar).FTrimming,this.FFont$1.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FFont$1),this.FAutoSize=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoSize,this.FAutoHeight=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoHeight,this.FAutoWidth=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoWidth,this.FAutoAlign=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoAlign,this.FAutoStretchHeight=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoStretchHeight,this.FAutoMoveToolBar=rtl.as(e,t.TTMSFNCCustomToolBar).FAutoMoveToolBar,this.FAppearance.Assign(rtl.as(e,t.TTMSFNCCustomToolBar).FAppearance);for(var o=0,a=rtl.as(e,t.TTMSFNCCustomToolBar).GetControlsCount()-1;o<=a;o++)n=o,s=rtl.as(e,t.TTMSFNCCustomToolBar).GetControls(n),(t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&rtl.as(s,t.TTMSFNCDefaultToolBarButton).FCanCopy||!t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)||!pas["WEBLib.Controls"].TControl.isPrototypeOf(s))&&(t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&(rtl.as(s,t.TTMSFNCDefaultToolBarButton).FApplyName=!1),i=rtl.as(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.Clone(s),pas["WEBLib.Controls"].TControl),t.TTMSFNCDefaultToolBarButton.isPrototypeOf(s)&&(rtl.as(s,t.TTMSFNCDefaultToolBarButton).FApplyName=!0),this.AddCustomControl(i,-1));this.Invalidate()}else pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments)},this.Create$1=function(e){var i=0;return pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.FFirstLoad=!0,this.FHiddenControls=t.TTMSFNCToolBarControlObjectList.$create("Create$2"),this.FCompactControls=t.TTMSFNCToolBarControlObjectList.$create("Create$2"),this.FState=0,this.FAppearance=t.TTMSFNCToolBarAppearance.$create("Create$1",[this]),this.FCompactAppearance=t.TTMSFNCToolBarCompactAppearance.$create("Create$1",[null]),this.FCompactAppearance.FOnChange=rtl.createCallback(this,"CompactAppearanceChanged"),this.FQuickMenuButtonAppearance=t.TTMSFNCToolBarQuickMenuButtonAppearance.$create("Create$1",[null]),this.FQuickMenuButtonAppearance.FOnChange=rtl.createCallback(this,"QuickMenuButtonAppearanceChanged"),this.FCompactBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FCompactBitmaps.FOnChange=rtl.createCallback(this,"CompactBitmapsChanged"),this.FOptionsMenu=t.TTMSFNCToolBarOptionsMenu.$create("Create$1",[this]),this.FMinimumWidth=30,this.FCompactWidth=50,this.FCompactBitmapSize=24,this.FCompactAutoBitmapSize=!1,this.FCompactBitmapVisible=!1,this.FCompactExpanderBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FCompactExpanderBitmaps.FOnChange=rtl.createCallback(this,"CompactExpanderBitmapsChanged"),this.FQuickMenuButtonBitmaps=pas["WEBLib.TMSFNCTypes"].TTMSFNCScaledBitmaps.$create("Create$3",[this]),this.FQuickMenuButtonBitmaps.FOnChange=rtl.createCallback(this,"QuickMenuButtonBitmapsChanged"),this.FCanCompact=!0,this.FQuickMenuButton=!1,this.FCompact=!1,this.FAutoSize=!0,this.FAutoWidth=!0,this.FAutoHeight=!0,this.FAutoAlign=!0,this.FAutoStretchHeight=!1,this.FAutoMoveToolBar=!0,this.FOptionsMenuButton=this.GetOptionsMenuButtonClass().$create("Create$1",[this]),this.FOptionsMenuButton.FAppearance.FNormalFill.SetKind(1),i=13882323,this.FOptionsMenuButton.FAppearance.FNormalFill.SetColor(i),this.FOptionsMenuButton.FAppearance.SetShowInnerStroke(!1),this.FOptionsMenuButton.FAppearance.SetRounding(0),this.FOptionsMenuButton.FAppearance.FHoverFill.Assign(this.FOptionsMenuButton.FAppearance.FNormalFill),this.FOptionsMenuButton.FAppearance.FDisabledFill.Assign(this.FOptionsMenuButton.FAppearance.FNormalFill),this.FOptionsMenuButton.FAppearance.FDownFill.Assign(this.FOptionsMenuButton.FAppearance.FNormalFill),this.FOptionsMenuButton.FAppearance.FHoverFill.SetColor(15128749),this.FOptionsMenuButton.FAppearance.FDownFill.SetColor(14599344),this.FOptionsMenuButton.FAppearance.FDisabledFill.SetColor(13882323),this.FOptionsMenuButton.SetAlignWithMargins(!0),this.FOptionsMenuButton.FMargins.SetTop(3),this.FOptionsMenuButton.FMargins.SetBottom(3),this.FOptionsMenuButton.FMargins.SetRight(3),this.FOptionsMenuButton.FCanCopy=!1,this.FAutoOptionsMenu=pas["WEBLib.Menus"].TPopupMenu.$create("Create$1",[this]),this.FOptionsMenuButton.FOnClick=rtl.createCallback(this,"OptionsButtonClick"),this.FOptionsMenuButton.SetWidth(17),this.FOptionsMenuButton.SetText(""),this.FOptionsMenuButton.FStored=!1,this.FOptionsMenuButton.FBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENU,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FOptionsMenuButton.FBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENULARGE,pas["WEBLib.TMSFNCTypes"].HInstance(),1.5),this.FOptionsMenuButton.FDisabledBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENU,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FOptionsMenuButton.FDisabledBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENULARGE,pas["WEBLib.TMSFNCTypes"].HInstance(),1.5),this.FOptionsMenuButton.FHoverBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENU,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FOptionsMenuButton.FHoverBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBAROPTIONSMENULARGE,pas["WEBLib.TMSFNCTypes"].HInstance(),1.5),this.FHorizontalTextAlign=0,this.FVerticalTextAlign=0,this.FTrimming=1,this.FWordWrapping=!1,this.FTextVisible=!0,this.FFont$1=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FCompactExpanderBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCGraphics"].TMSFNCGRAPHICSDOWN,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this.FQuickMenuButtonBitmaps.AddBitmapFromResource$1(pas["WEBLib.TMSFNCToolBarRes"].TMSFNCTOOLBARQUICKMENU,pas["WEBLib.TMSFNCTypes"].HInstance(),1),this},this.Destroy=function(){rtl.free(this,"FQuickMenuButtonBitmaps"),rtl.free(this,"FCompactExpanderBitmaps"),rtl.free(this,"FCompactPopup"),rtl.free(this,"FQuickMenuButtonAppearance"),rtl.free(this,"FCompactAppearance"),rtl.free(this,"FCompactBitmaps"),rtl.free(this,"FFont$1"),rtl.free(this,"FOptionsMenu"),rtl.free(this,"FAppearance"),rtl.free(this,"FHiddenControls"),rtl.free(this,"FCompactControls"),pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)},this.Draw=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),s.$assign(this.GetLocalRect()),this.FCompact?(this.FDown?(t.FFill.Assign(this.FCompactAppearance.FDownFill),t.FStroke.Assign(this.FCompactAppearance.FDownStroke)):this.FHover?(t.FFill.Assign(this.FCompactAppearance.FHoverFill),t.FStroke.Assign(this.FCompactAppearance.FHoverStroke)):(t.FFill.Assign(this.FCompactAppearance.FNormalFill),t.FStroke.Assign(this.FCompactAppearance.FNormalStroke)),this.FCompactAppearance.FFlatStyle&&t.FFill.SetKind(1),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top+2,s.Right-3,s.Bottom-2)),2)):(t.FFill.Assign(this.FAppearance.FFill),t.FStroke.Assign(this.FAppearance.FStroke),this.FAppearance.FFlatStyle&&t.FFill.SetKind(1),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),2)),this.FCompact?(this.DrawCompactBitmap(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e)),this.DrawCompactText(t),this.DrawCompactExpander(t)):(this.FAppearance.FDragGrip&&this.DrawDragGrip(t),this.DrawText(t),this.FQuickMenuButton&&(this.FQuickMenuButtonDown?(t.FFill.Assign(this.FQuickMenuButtonAppearance.FDownFill),t.FStroke.Assign(this.FQuickMenuButtonAppearance.FDownStroke)):this.FQuickMenuButtonHover?(t.FFill.Assign(this.FQuickMenuButtonAppearance.FHoverFill),t.FStroke.Assign(this.FQuickMenuButtonAppearance.FHoverStroke)):(t.FFill.Assign(this.FQuickMenuButtonAppearance.FNormalFill),t.FStroke.Assign(this.FQuickMenuButtonAppearance.FNormalStroke)),this.FQuickMenuButtonAppearance.FFlatStyle&&t.FFill.SetKind(1),i.$assign(this.GetQuickMenuButtonRect()),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,-2,-2),t.DrawScaledBitmap(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),this.FQuickMenuButtonBitmaps,0,!0,!1,!0,!1))),this.FAppearance.FSeparator&&(t.FStroke.Assign(this.FAppearance.FSeparatorStroke),n=this.FAppearance.FSeparatorStroke.FWidth,t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(s.Right-n,s.Top+4)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(s.Right-n,s.Bottom-4)),2,2)),this.IsDesignTime()&&this.CanDrawDesignTime()&&t.DrawFocusRectangle$3(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),0,2)},this.CloseCompactPopup=function(){null!=this.FCompactPopup&&this.FCompactPopup.SetIsOpen(!1)},this.AddCustomControl=function(t,e){this.FBlockUpdate=!0,this.InsertToolBarControl(t,e),this.FBlockUpdate=!1,this.UpdateControls()},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),rtl.createClass(this,"TTMSFNCCustomDockPanelAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FFill=null,this.FStroke=null,this.FMargins=null},this.$final=function(){this.FOwner=void 0,this.FFill=void 0,this.FStroke=void 0,this.FMargins=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetFill=function(t){this.FFill.Assign(t)},this.SetStroke=function(t){this.FStroke.Assign(t)},this.FillChanged=function(t){this.FOwner.Invalidate()},this.StrokeChanged=function(t){this.FOwner.Invalidate()},this.Create$1=function(t){return this.FOwner=t,this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,8421504]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FMargins=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FMargins.SetLeft(3),this.FMargins.SetTop(3),this.FMargins.SetBottom(3),this.FMargins.SetRight(3),this},this.Destroy=function(){rtl.free(this,"FMargins"),rtl.free(this,"FFill"),rtl.free(this,"FStroke"),pas.System.TObject.Destroy.call(this)},this.$rtti.addMethod("Create$1",2,[["AOwner",t.$rtti.TTMSFNCCustomDockPanel]])})),rtl.createClass(this,"TTMSFNCDockPanelAppearance",this.TTMSFNCCustomDockPanelAppearance,(function(){var t=this.$rtti;t.addProperty("Fill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFill","SetFill"),t.addProperty("Stroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStroke","SetStroke")})),rtl.createClass(this,"TTMSFNCCustomDockPanel",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FBlockUpdate=!1,this.FAppearance=null,this.FAutoSize=!1,this.FAutoAlign=!1,this.FState=0},this.$final=function(){this.FAppearance=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.SetAutoAlign=function(t){this.FAutoAlign!==t&&(this.FAutoAlign=t,this.UpdateControls())},this.SetAS=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.UpdateControls())},this.SetState=function(e){var i=0,s=null;if(this.FState!==e){this.FState=e;for(var n=0,o=this.GetControlsCount()-1;n<=o;n++)i=n,s=this.GetControls(i),t.TTMSFNCCustomToolBar.isPrototypeOf(s)&&rtl.as(s,t.TTMSFNCCustomToolBar).SetState(this.FState)}},this.SetAdaptToStyle=function(t){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.SetAdaptToStyle.apply(this,arguments),this.UpdateControls()},this.UpdateControls=function(){var t=0,e=0,i=0,s=null,n=null,o=rtl.createIntfRefs();try{if(this.FBlockUpdate||this.IsLoading()||this.IsDestroying())return;if(this.FBlockUpdate=!0,e=0,i=this.ScalePaintValue(30),this.FAutoAlign&&(this.InitializeControls(),this.RearrangeControls()),this.FAutoSize){for(var a=0,r=this.GetControlsCount()-1;a<=r;a++)t=a,s=this.GetControls(t),pas.SysUtils.Supports$1(o.ref(1,rtl.queryIntfT(s,pas.System.IUnknown)),rtl.getIntfGUIDR(pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),{get:function(){return n},set:function(t){n=t}})&&n.SetAdaptToStyle(this.GetAdaptToStyle()),s.FVisible&&(e=Math.round(Math.max(e,s.GetTop()+s.GetHeight()+this.FAppearance.FMargins.FBottom)));0===e&&(e=i),4 in this.FComponentState&&(e+=this.ScalePaintValue(15)),this.SetBounds(this.GetLeft(),this.GetTop(),this.GetWidth(),e)}this.FBlockUpdate=!1}finally{o.free(),rtl._Release(n)}},this.InitializeControls=function(){for(var e=0,i=null,s=0,n=this.GetControlsCount()-1;s<=n;s++)e=s,i=this.GetControls(e),t.TTMSFNCCustomToolBar.isPrototypeOf(i)&&(rtl.as(i,t.TTMSFNCCustomToolBar).FOnUpdateDockPanel=rtl.createCallback(this,"UpdateDockPanel"),rtl.as(i,t.TTMSFNCCustomToolBar).FDragGripMoving)||i.FVisible&&(i.GetTop()<this.FAppearance.FMargins.FTop&&i.SetTop(Math.round(this.FAppearance.FMargins.FTop)),i.GetLeft()<this.FAppearance.FMargins.FLeft?i.SetLeft(Math.round(this.FAppearance.FMargins.FLeft)):i.GetLeft()+i.GetWidth()>this.GetWidth()-this.FAppearance.FMargins.FRight&&i.SetLeft(Math.round(this.GetWidth()-this.FAppearance.FMargins.FRight-i.GetWidth())))},this.RearrangeControls=function(){for(var e=null,i=null,s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a=0,r=0,l=this.GetControlsCount()-1;r<=l;r++)if(o=r,(e=this.GetControls(o)).FVisible&&(!t.TTMSFNCCustomToolBar.isPrototypeOf(e)||!rtl.as(e,t.TTMSFNCCustomToolBar).FDragGripMoving))for(var h=0,p=this.GetControlsCount()-1;h<=p;h++)a=h,(i=this.GetControls(a))!==e&&i.FVisible&&(s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.GetLeft(),e.GetTop(),e.GetLeft()+e.GetWidth(),e.GetTop()+e.GetHeight())),n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.GetLeft(),i.GetTop(),i.GetLeft()+i.GetWidth(),i.GetTop()+i.GetHeight())),n.Left>=s.Left-3&&n.Left<=s.Right+3&&(n.Top<pas["WEBLib.TMSFNCTypes"].CenterPointEx(s).Y&&n.Top>=s.Top-3?(i.SetLeft(e.GetLeft()+e.GetWidth()+3),i.SetTop(e.GetTop())):n.Top>=pas["WEBLib.TMSFNCTypes"].CenterPointEx(s).Y&&n.Top<=s.Bottom+3&&(i.SetTop(e.GetTop()+e.GetHeight()+3),i.SetLeft(e.GetLeft()))))},this.UpdateDockPanel=function(t){this.UpdateControls()},this.ApplyStyle=function(){var t=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ApplyStyle.call(this),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleHeaderFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FFill.SetKind(1),this.FAppearance.FFill.SetColor(t)),pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleHeaderFillColorTo({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FFill.SetKind(2),this.FAppearance.FFill.SetColorTo(t))},this.ResetToDefaultStyle=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ResetToDefaultStyle.call(this)},this.AlignControls=function(t,e){pas["WEBLib.Controls"].TControl.AlignControls.apply(this,arguments),this.UpdateControls()},this.Assign=function(e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments),t.TTMSFNCCustomDockPanel.isPrototypeOf(e)?(this.FAppearance.Assign(rtl.as(e,t.TTMSFNCCustomDockPanel).FAppearance),this.SetAS(rtl.as(e,t.TTMSFNCCustomDockPanel).FAutoSize),this.SetAutoAlign(rtl.as(e,t.TTMSFNCCustomDockPanel).FAutoAlign),this.SetState(rtl.as(e,t.TTMSFNCCustomDockPanel).FState)):pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments)},this.Create$1=function(e){return pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.FState=0,this.FAppearance=t.TTMSFNCDockPanelAppearance.$create("Create$1",[this]),this.FAutoSize=!0,this.FAutoAlign=!0,this.SetAlign(1),this.SetHeight(40),this},this.Destroy=function(){rtl.free(this,"FAppearance"),pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)},this.Draw=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),t.FFill.Assign(this.FAppearance.FFill),t.FStroke.Assign(this.FAppearance.FStroke),i.$assign(this.GetLocalRect()),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),2)},rtl.addIntf(this,pas["WEBLib.TMSFNCStyles"].ITMSFNCAdaptToStyle),rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addMethod("Create$1",2,[["AOwner",pas.Classes.$rtti.TComponent]])})),t.$init=function(){pas.Classes.RegisterClass(t.TTMSFNCToolBarButton),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCTOOLBAREXPANDSVG)}}),["Math","SysUtils","WEBLib.TMSFNCUtils","WEBLib.Graphics"]),rtl.module("Unit2",["System","SysUtils","Classes","JS","Web","WEBLib.Graphics","WEBLib.Controls","WEBLib.Forms","WEBLib.Dialogs","WEBLib.StdCtrls","WEBLib.StdCtrls","WEBLib.Controls","WEBLib.TMSFNCTypes","WEBLib.TMSFNCUtils","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCToolBar"],(function(){"use strict";rtl.createClass(this,"TForm2",pas["WEBLib.Forms"].TForm,(function(){this.$init=function(){pas["WEBLib.Forms"].TForm.$init.call(this),this.WebMemo1=null,this.TBB_RunDyn=null,this.NumClick=0},this.$final=function(){this.WebMemo1=void 0,this.TBB_RunDyn=void 0,pas["WEBLib.Forms"].TForm.$final.call(this)},this.TBB_RunDynClick=function(t){this.NumClick=this.NumClick+1,this.WebMemo1.FLines.Add(pas.SysUtils.IntToStr(this.NumClick)),this.WebMemo1.FLines.Get(this.WebMemo1.FLines.GetCount()-1)===this.WebMemo1.FLines.Get(this.WebMemo1.FLines.GetCount()-2)&&pas["WEBLib.Dialogs"].ShowMessage("Error catched")},this.WebFormShow=function(t){},this.LoadDFMValues=function(){pas["WEBLib.Forms"].TCustomForm.LoadDFMValues.call(this),this.WebMemo1=pas["WEBLib.StdCtrls"].TMemo.$create("Create$1",[this]),this.TBB_RunDyn=pas["WEBLib.TMSFNCToolBar"].TTMSFNCToolBarButton.$create("Create$1",[this]),this.WebMemo1.BeforeLoadDFMValues(),this.TBB_RunDyn.BeforeLoadDFMValues();try{this.SetName("Form2"),this.SetWidth(640),this.SetHeight(480),this.SetEvent(this,"OnShow","WebFormShow"),this.WebMemo1.SetParentComponent(this),this.WebMemo1.SetName("WebMemo1"),this.WebMemo1.SetLeft(0),this.WebMemo1.SetTop(50),this.WebMemo1.SetWidth(640),this.WebMemo1.SetHeight(430),this.WebMemo1.SetAlign(5),this.WebMemo1.SetHeightPercent(100),this.WebMemo1.FLines.BeginUpdate();try{this.WebMemo1.FLines.Clear(),this.WebMemo1.FLines.Add("WebMemo1")}finally{this.WebMemo1.FLines.EndUpdate()}this.WebMemo1.SetSelLength(0),this.WebMemo1.SetSelStart(0),this.WebMemo1.SetWidthPercent(100),this.TBB_RunDyn.SetParentComponent(this),this.TBB_RunDyn.SetName("TBB_RunDyn"),this.TBB_RunDyn.SetAlignWithMargins(!0),this.TBB_RunDyn.SetLeft(0),this.TBB_RunDyn.SetTop(10),this.TBB_RunDyn.SetWidth(640),this.TBB_RunDyn.SetHeight(30),this.TBB_RunDyn.SetHint("Dynamic simulation"),this.TBB_RunDyn.FMargins.SetLeft(0),this.TBB_RunDyn.FMargins.SetTop(10),this.TBB_RunDyn.FMargins.SetRight(0),this.TBB_RunDyn.FMargins.SetBottom(10),this.TBB_RunDyn.SetAlign(1),this.TBB_RunDyn.FParentDoubleBuffered=!1,this.TBB_RunDyn.FDoubleBuffered=!0,this.TBB_RunDyn.FFont$1.FCharset=1,this.TBB_RunDyn.FFont$1.SetColor(65793),this.TBB_RunDyn.FFont$1.SetHeight(-13),this.TBB_RunDyn.FFont$1.SetName("Arial"),this.TBB_RunDyn.FFont$1.SetStyle({}),this.TBB_RunDyn.SetParentColor(!0),this.TBB_RunDyn.FParentShowHint=!1,this.TBB_RunDyn.SetShowHint(!0),this.TBB_RunDyn.SetTabOrder(1),this.SetEvent$1(this.TBB_RunDyn,this,"OnClick","TBB_RunDynClick"),this.TBB_RunDyn.SetText("Click "),this.TBB_RunDyn.FBitmaps.Clear(),this.TBB_RunDyn.FBitmaps.Add$1(1).SetBitmapName("play"),this.TBB_RunDyn.FDisabledBitmaps.Clear(),this.TBB_RunDyn.FDisabledBitmaps.Add$1(1).SetBitmapName("play_Disabled"),this.TBB_RunDyn.SetBitmapVisible(!0),this.TBB_RunDyn.FAppearance.FInnerStroke.SetColor(15790320),this.TBB_RunDyn.FAppearance.FNormalFill.SetKind(0),this.TBB_RunDyn.FAppearance.FNormalFill.SetColor(15790320),this.TBB_RunDyn.FAppearance.FNormalStroke.SetKind(0),this.TBB_RunDyn.FAppearance.FNormalStroke.SetColor(15790320),this.TBB_RunDyn.FAppearance.FHoverFill.SetKind(1),this.TBB_RunDyn.FAppearance.FHoverFill.SetColor(12632256),this.TBB_RunDyn.FAppearance.FHoverStroke.SetKind(0),this.TBB_RunDyn.FAppearance.FDownStroke.SetKind(0),this.TBB_RunDyn.FAppearance.FDisabledFill.SetKind(0),this.TBB_RunDyn.FAppearance.FDisabledStroke.SetKind(0),this.TBB_RunDyn.FControlIndex=0}finally{this.WebMemo1.AfterLoadDFMValues(),this.TBB_RunDyn.AfterLoadDFMValues()}},rtl.addIntf(this,pas["WEBLib.Controls"].IControl),rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addField("WebMemo1",pas["WEBLib.StdCtrls"].$rtti.TMemo),t.addField("TBB_RunDyn",pas["WEBLib.TMSFNCToolBar"].$rtti.TTMSFNCToolBarButton),t.addMethod("TBB_RunDynClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("WebFormShow",0,[["Sender",pas.System.$rtti.TObject]])})),this.Form2=null})),rtl.module("program",["System","WEBLib.Forms","WEBLib.Forms","Unit2"],(function(){"use strict";this.$main=function(){pas["WEBLib.Forms"].Application.Initialize(),pas["WEBLib.Forms"].Application.FMainFormOnTaskBar=!0,pas["WEBLib.Forms"].Application.CreateForm(pas.Unit2.TForm2,{p:pas.Unit2,get:function(){return this.p.Form2},set:function(t){this.p.Form2=t}}),pas["WEBLib.Forms"].Application.Run()}}));